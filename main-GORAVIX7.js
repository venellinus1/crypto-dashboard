var MP=Object.defineProperty,Yq=Object.defineProperties;var qq=Object.getOwnPropertyDescriptors;var wv=Object.getOwnPropertySymbols;var TP=Object.prototype.hasOwnProperty,_P=Object.prototype.propertyIsEnumerable;var EP=(e,t,r)=>t in e?MP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ue=(e,t)=>{for(var r in t||={})TP.call(t,r)&&EP(e,r,t[r]);if(wv)for(var r of wv(t))_P.call(t,r)&&EP(e,r,t[r]);return e},Xe=(e,t)=>Yq(e,qq(t));var mS=(e,t)=>{var r={};for(var i in e)TP.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&wv)for(var i of wv(e))t.indexOf(i)<0&&_P.call(e,i)&&(r[i]=e[i]);return r};var Kq=(e,t)=>{for(var r in t)MP(e,r,{get:t[r],enumerable:!0})};var Mo=(e,t,r)=>new Promise((i,n)=>{var o=l=>{try{s(r.next(l))}catch(c){n(c)}},a=l=>{try{s(r.throw(l))}catch(c){n(c)}},s=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,a);s((r=r.apply(e,t)).next())});var RP=null;var yS=1,AP=Symbol("SIGNAL");function Et(e){let t=RP;return RP=e,t}var IP={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zq(e){if(!(bS(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===yS)){if(!e.producerMustRecompute(e)&&!wS(e)){e.dirty=!1,e.lastCleanEpoch=yS;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=yS}}function PP(e){return e&&(e.nextProducerIndex=0),Et(e)}function kP(e,t){if(Et(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(bS(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)CS(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function wS(e){Cv(e);for(let t=0;t<e.producerNode.length;t++){let r=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==r.version||(Zq(r),i!==r.version))return!0}return!1}function LP(e){if(Cv(e),bS(e))for(let t=0;t<e.producerNode.length;t++)CS(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function CS(e,t){if(Xq(e),Cv(e),e.liveConsumerNode.length===1)for(let i=0;i<e.producerNode.length;i++)CS(e.producerNode[i],e.producerIndexOfThis[i]);let r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],n=e.liveConsumerNode[t];Cv(n),n.producerIndexOfThis[i]=t}}function bS(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Cv(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Xq(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Qq(){throw new Error}var Jq=Qq;function FP(e){Jq=e}function it(e){return typeof e=="function"}function _u(e){let r=e(i=>{Error.call(i),i.stack=new Error().stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var bv=_u(e=>function(r){e(this),this.message=r?`${r.length} errors occurred during unsubscription:
${r.map((i,n)=>`${n+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=r});function Il(e,t){if(e){let r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Or=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(let o of r)o.remove(this);else r.remove(this);let{initialTeardown:i}=this;if(it(i))try{i()}catch(o){t=o instanceof bv?o.errors:[o]}let{_finalizers:n}=this;if(n){this._finalizers=null;for(let o of n)try{OP(o)}catch(a){t=t??[],a instanceof bv?t=[...t,...a.errors]:t.push(a)}}if(t)throw new bv(t)}}add(t){var r;if(t&&t!==this)if(this.closed)OP(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}}_hasParent(t){let{_parentage:r}=this;return r===t||Array.isArray(r)&&r.includes(t)}_addParent(t){let{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t}_removeParent(t){let{_parentage:r}=this;r===t?this._parentage=null:Array.isArray(r)&&Il(r,t)}remove(t){let{_finalizers:r}=this;r&&Il(r,t),t instanceof e&&t._removeParent(this)}};Or.EMPTY=(()=>{let e=new Or;return e.closed=!0,e})();var SS=Or.EMPTY;function Sv(e){return e instanceof Or||e&&"closed"in e&&it(e.remove)&&it(e.add)&&it(e.unsubscribe)}function OP(e){it(e)?e():e.unsubscribe()}var jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ru={setTimeout(e,t,...r){let{delegate:i}=Ru;return i?.setTimeout?i.setTimeout(e,t,...r):setTimeout(e,t,...r)},clearTimeout(e){let{delegate:t}=Ru;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xv(e){Ru.setTimeout(()=>{let{onUnhandledError:t}=jn;if(t)t(e);else throw e})}function xS(){}var NP=DS("C",void 0,void 0);function zP(e){return DS("E",void 0,e)}function VP(e){return DS("N",e,void 0)}function DS(e,t,r){return{kind:e,value:t,error:r}}var Pl=null;function Au(e){if(jn.useDeprecatedSynchronousErrorHandling){let t=!Pl;if(t&&(Pl={errorThrown:!1,error:null}),e(),t){let{errorThrown:r,error:i}=Pl;if(Pl=null,r)throw i}}else e()}function BP(e){jn.useDeprecatedSynchronousErrorHandling&&Pl&&(Pl.errorThrown=!0,Pl.error=e)}var kl=class extends Or{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Sv(t)&&t.add(this)):this.destination=rK}static create(t,r,i){return new ls(t,r,i)}next(t){this.isStopped?MS(VP(t),this):this._next(t)}error(t){this.isStopped?MS(zP(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?MS(NP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eK=Function.prototype.bind;function ES(e,t){return eK.call(e,t)}var TS=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:r}=this;if(r.next)try{r.next(t)}catch(i){Dv(i)}}error(t){let{partialObserver:r}=this;if(r.error)try{r.error(t)}catch(i){Dv(i)}else Dv(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(r){Dv(r)}}},ls=class extends kl{constructor(t,r,i){super();let n;if(it(t)||!t)n={next:t??void 0,error:r??void 0,complete:i??void 0};else{let o;this&&jn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),n={next:t.next&&ES(t.next,o),error:t.error&&ES(t.error,o),complete:t.complete&&ES(t.complete,o)}):n=t}this.destination=new TS(n)}};function Dv(e){jn.useDeprecatedSynchronousErrorHandling?BP(e):xv(e)}function tK(e){throw e}function MS(e,t){let{onStoppedNotification:r}=jn;r&&Ru.setTimeout(()=>r(e,t))}var rK={closed:!0,next:xS,error:tK,complete:xS};var Iu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ev(e){return e}function GP(e){return e.length===0?Ev:e.length===1?e[0]:function(r){return e.reduce((i,n)=>n(i),r)}}var jt=(()=>{class e{constructor(r){r&&(this._subscribe=r)}lift(r){let i=new e;return i.source=this,i.operator=r,i}subscribe(r,i,n){let o=nK(r)?r:new ls(r,i,n);return Au(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(r){try{return this._subscribe(r)}catch(i){r.error(i)}}forEach(r,i){return i=HP(i),new i((n,o)=>{let a=new ls({next:s=>{try{r(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:n});this.subscribe(a)})}_subscribe(r){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(r)}[Iu](){return this}pipe(...r){return GP(r)(this)}toPromise(r){return r=HP(r),new r((i,n)=>{let o;this.subscribe(a=>o=a,a=>n(a),()=>i(o))})}}return e.create=t=>new e(t),e})();function HP(e){var t;return(t=e??jn.Promise)!==null&&t!==void 0?t:Promise}function iK(e){return e&&it(e.next)&&it(e.error)&&it(e.complete)}function nK(e){return e&&e instanceof kl||iK(e)&&Sv(e)}function oK(e){return it(e?.lift)}function wr(e){return t=>{if(oK(t))return t.lift(function(r){try{return e(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dr(e,t,r,i,n){return new _S(e,t,r,i,n)}var _S=class extends kl{constructor(t,r,i,n,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=r?function(s){try{r(s)}catch(l){t.error(l)}}:super._next,this._error=n?function(s){try{n(s)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:r}=this;super.unsubscribe(),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var UP=_u(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var cs=(()=>{class e extends jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){let i=new Mv(this,this);return i.operator=r,i}_throwIfClosed(){if(this.closed)throw new UP}next(r){Au(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(r)}})}error(r){Au(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;let{observers:i}=this;for(;i.length;)i.shift().error(r)}})}complete(){Au(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){let{hasError:i,isStopped:n,observers:o}=this;return i||n?SS:(this.currentObservers=null,o.push(r),new Or(()=>{this.currentObservers=null,Il(o,r)}))}_checkFinalizedStatuses(r){let{hasError:i,thrownError:n,isStopped:o}=this;i?r.error(n):o&&r.complete()}asObservable(){let r=new jt;return r.source=this,r}}return e.create=(t,r)=>new Mv(t,r),e})(),Mv=class extends cs{constructor(t,r){super(),this.destination=t,this.source=r}next(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,t)}error(t){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,t)}complete(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)}_subscribe(t){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&i!==void 0?i:SS}};var Jh=class extends cs{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let r=super._subscribe(t);return!r.closed&&t.next(this._value),r}getValue(){let{hasError:t,thrownError:r,_value:i}=this;if(t)throw r;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var RS={now(){return(RS.delegate||Date).now()},delegate:void 0};var Tv=class extends Or{constructor(t,r){super()}schedule(t,r=0){return this}};var ep={setInterval(e,t,...r){let{delegate:i}=ep;return i?.setInterval?i.setInterval(e,t,...r):setInterval(e,t,...r)},clearInterval(e){let{delegate:t}=ep;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var _v=class extends Tv{constructor(t,r){super(t,r),this.scheduler=t,this.work=r,this.pending=!1}schedule(t,r=0){var i;if(this.closed)return this;this.state=t;let n=this.id,o=this.scheduler;return n!=null&&(this.id=this.recycleAsyncId(o,n,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this}requestAsyncId(t,r,i=0){return ep.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,r,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&ep.clearInterval(r)}execute(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,r){let i=!1,n;try{this.work(t)}catch(o){i=!0,n=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){let{id:t,scheduler:r}=this,{actions:i}=r;this.work=this.state=this.scheduler=null,this.pending=!1,Il(i,this),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,super.unsubscribe()}}};var Pu=class e{constructor(t,r=e.now){this.schedulerActionCtor=t,this.now=r}schedule(t,r=0,i){return new this.schedulerActionCtor(this,t).schedule(i,r)}};Pu.now=RS.now;var Rv=class extends Pu{constructor(t,r=Pu.now){super(t,r),this.actions=[],this._active=!1}flush(t){let{actions:r}=this;if(this._active){r.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}}};var aK=new Rv(_v),WP=aK;function Av(e){return e&&it(e.schedule)}function sK(e){return e[e.length-1]}function jP(e){return Av(sK(e))?e.pop():void 0}function YP(e,t,r,i){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{c(i.next(u))}catch(d){a(d)}}function l(u){try{c(i.throw(u))}catch(d){a(d)}}function c(u){u.done?o(u.value):n(u.value).then(s,l)}c((i=i.apply(e,t||[])).next())})}function $P(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ll(e){return this instanceof Ll?(this.v=e,this):new Ll(e)}function qP(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),n[Symbol.asyncIterator]=function(){return this},n;function a(p){return function(g){return Promise.resolve(g).then(p,d)}}function s(p,g){i[p]&&(n[p]=function(f){return new Promise(function(v,m){o.push([p,f,v,m])>1||l(p,f)})},g&&(n[p]=g(n[p])))}function l(p,g){try{c(i[p](g))}catch(f){h(o[0][3],f)}}function c(p){p.value instanceof Ll?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function h(p,g){p(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}function KP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof $P=="function"?$P(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(o){r[o]=e[o]&&function(a){return new Promise(function(s,l){a=e[o](a),n(s,l,a.done,a.value)})}}function n(o,a,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},a)}}var Iv=e=>e&&typeof e.length=="number"&&typeof e!="function";function Pv(e){return it(e?.then)}function kv(e){return it(e[Iu])}function Lv(e){return Symbol.asyncIterator&&it(e?.[Symbol.asyncIterator])}function Fv(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lK(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ov=lK();function Nv(e){return it(e?.[Ov])}function zv(e){return qP(this,arguments,function*(){let r=e.getReader();try{for(;;){let{value:i,done:n}=yield Ll(r.read());if(n)return yield Ll(void 0);yield yield Ll(i)}}finally{r.releaseLock()}})}function Vv(e){return it(e?.getReader)}function Nr(e){if(e instanceof jt)return e;if(e!=null){if(kv(e))return cK(e);if(Iv(e))return uK(e);if(Pv(e))return dK(e);if(Lv(e))return ZP(e);if(Nv(e))return hK(e);if(Vv(e))return pK(e)}throw Fv(e)}function cK(e){return new jt(t=>{let r=e[Iu]();if(it(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uK(e){return new jt(t=>{for(let r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function dK(e){return new jt(t=>{e.then(r=>{t.closed||(t.next(r),t.complete())},r=>t.error(r)).then(null,xv)})}function hK(e){return new jt(t=>{for(let r of e)if(t.next(r),t.closed)return;t.complete()})}function ZP(e){return new jt(t=>{gK(e,t).catch(r=>t.error(r))})}function pK(e){return ZP(zv(e))}function gK(e,t){var r,i,n,o;return YP(this,void 0,void 0,function*(){try{for(r=KP(e);i=yield r.next(),!i.done;){let a=i.value;if(t.next(a),t.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(o=r.return)&&(yield o.call(r))}finally{if(n)throw n.error}}t.complete()})}function an(e,t,r,i=0,n=!1){let o=t.schedule(function(){r(),n?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!n)return o}function Bv(e,t=0){return wr((r,i)=>{r.subscribe(Dr(i,n=>an(i,e,()=>i.next(n),t),()=>an(i,e,()=>i.complete(),t),n=>an(i,e,()=>i.error(n),t)))})}function Gv(e,t=0){return wr((r,i)=>{i.add(e.schedule(()=>r.subscribe(i),t))})}function XP(e,t){return Nr(e).pipe(Gv(t),Bv(t))}function QP(e,t){return Nr(e).pipe(Gv(t),Bv(t))}function JP(e,t){return new jt(r=>{let i=0;return t.schedule(function(){i===e.length?r.complete():(r.next(e[i++]),r.closed||this.schedule())})})}function e3(e,t){return new jt(r=>{let i;return an(r,t,()=>{i=e[Ov](),an(r,t,()=>{let n,o;try{({value:n,done:o}=i.next())}catch(a){r.error(a);return}o?r.complete():r.next(n)},0,!0)}),()=>it(i?.return)&&i.return()})}function Hv(e,t){if(!e)throw new Error("Iterable cannot be null");return new jt(r=>{an(r,t,()=>{let i=e[Symbol.asyncIterator]();an(r,t,()=>{i.next().then(n=>{n.done?r.complete():r.next(n.value)})},0,!0)})})}function t3(e,t){return Hv(zv(e),t)}function r3(e,t){if(e!=null){if(kv(e))return XP(e,t);if(Iv(e))return JP(e,t);if(Pv(e))return QP(e,t);if(Lv(e))return Hv(e,t);if(Nv(e))return e3(e,t);if(Vv(e))return t3(e,t)}throw Fv(e)}function tp(e,t){return t?r3(e,t):Nr(e)}function Uv(...e){let t=jP(e);return tp(e,t)}function Wv(e,t){let r=it(e)?e:()=>e,i=n=>n.error(r());return new jt(t?n=>t.schedule(i,0,n):i)}var i3=_u(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function AS(e,t){let r=typeof t=="object";return new Promise((i,n)=>{let o=new ls({next:a=>{i(a),o.unsubscribe()},error:n,complete:()=>{r?i(t.defaultValue):n(new i3)}});e.subscribe(o)})}function n3(e){return e instanceof Date&&!isNaN(e)}function To(e,t){return wr((r,i)=>{let n=0;r.subscribe(Dr(i,o=>{i.next(e.call(t,o,n++))}))})}function o3(e,t,r,i,n,o,a,s){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},p=f=>c<i?g(f):l.push(f),g=f=>{o&&t.next(f),c++;let v=!1;Nr(r(f,u++)).subscribe(Dr(t,m=>{n?.(m),o?p(m):t.next(m)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let m=l.shift();a?an(t,a,()=>g(m)):g(m)}h()}catch(m){t.error(m)}}))};return e.subscribe(Dr(t,p,()=>{d=!0,h()})),()=>{s?.()}}function jv(e,t,r=1/0){return it(t)?jv((i,n)=>To((o,a)=>t(i,o,n,a))(Nr(e(i,n))),r):(typeof t=="number"&&(r=t),wr((i,n)=>o3(i,n,e,r)))}function ku(e=0,t,r=WP){let i=-1;return t!=null&&(Av(t)?r=t:i=t),new jt(n=>{let o=n3(e)?+e-r.now():e;o<0&&(o=0);let a=0;return r.schedule(function(){n.closed||(n.next(a++),0<=i?this.schedule(void 0,i):n.complete())},o)})}function IS(e,t){return wr((r,i)=>{let n=0;r.subscribe(Dr(i,o=>e.call(t,o,n++)&&i.next(o)))})}function $v(e){return wr((t,r)=>{let i=null,n=!1,o;i=t.subscribe(Dr(r,void 0,void 0,a=>{o=Nr(e(a,$v(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(r)):n=!0})),n&&(i.unsubscribe(),i=null,o.subscribe(r))})}function PS(e,t){return it(t)?jv(e,t,1):jv(e,1)}function kS(e){return wr((t,r)=>{try{t.subscribe(r)}finally{r.add(e)}})}function LS(e=1/0){let t;e&&typeof e=="object"?t=e:t={count:e};let{count:r=1/0,delay:i,resetOnSuccess:n=!1}=t;return r<=0?Ev:wr((o,a)=>{let s=0,l,c=()=>{let u=!1;l=o.subscribe(Dr(a,d=>{n&&(s=0),a.next(d)},void 0,d=>{if(s++<r){let h=()=>{l?(l.unsubscribe(),l=null,c()):u=!0};if(i!=null){let p=typeof i=="number"?ku(i):Nr(i(d,s)),g=Dr(a,()=>{g.unsubscribe(),h()},()=>{a.complete()});p.subscribe(g)}else h()}else a.error(d)})),u&&(l.unsubscribe(),l=null,c())};c()})}function rp(e,t){return wr((r,i)=>{let n=null,o=0,a=!1,s=()=>a&&!n&&i.complete();r.subscribe(Dr(i,l=>{n?.unsubscribe();let c=0,u=o++;Nr(e(l,u)).subscribe(n=Dr(i,d=>i.next(t?t(l,d,u,c++):d),()=>{n=null,s()}))},()=>{a=!0,s()}))})}var B3="https://g.co/ng/security#xss",ct=class extends Error{constructor(t,r){super(wm(t,r)),this.code=t}};function wm(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function gp(e){return{toString:e}.toString()}var Yv="__parameters__";function fK(e){return function(...r){if(e){let i=e(...r);for(let n in i)this[n]=i[n]}}}function G3(e,t,r){return gp(()=>{let i=fK(t);function n(...o){if(this instanceof n)return i.apply(this,o),this;let a=new n(...o);return s.annotation=a,s;function s(l,c,u){let d=l.hasOwnProperty(Yv)?l[Yv]:Object.defineProperty(l,Yv,{value:[]})[Yv];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(a),l}}return r&&(n.prototype=Object.create(r.prototype)),n.prototype.ngMetadataName=e,n.annotationCls=n,n})}var ma=globalThis;function kt(e){for(let t in e)if(e[t]===kt)return t;throw Error("Could not find renamed property on target object.")}function sn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(sn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r===-1?t:t.substring(0,r)}function a3(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var vK=kt({__forward_ref__:kt});function H3(e){return e.__forward_ref__=H3,e.toString=function(){return sn(this())},e}function Zr(e){return U3(e)?e():e}function U3(e){return typeof e=="function"&&e.hasOwnProperty(vK)&&e.__forward_ref__===H3}function Ct(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fp(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ix(e){return s3(e,W3)||s3(e,j3)}function s3(e,t){return e.hasOwnProperty(t)?e[t]:null}function mK(e){let t=e&&(e[W3]||e[j3]);return t||null}function l3(e){return e&&(e.hasOwnProperty(c3)||e.hasOwnProperty(yK))?e[c3]:null}var W3=kt({\u0275prov:kt}),c3=kt({\u0275inj:kt}),j3=kt({ngInjectableDef:kt}),yK=kt({ngInjectorDef:kt}),yt=class{constructor(t,r){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof r=="number"?this.__NG_ELEMENT_ID__=r:r!==void 0&&(this.\u0275prov=Ct({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $3(e){return e&&!!e.\u0275providers}var wK=kt({\u0275cmp:kt}),CK=kt({\u0275dir:kt}),bK=kt({\u0275pipe:kt});var Jv=kt({\u0275fac:kt}),ip=kt({__NG_ELEMENT_ID__:kt}),u3=kt({__NG_ENV_ID__:kt});function np(e){return typeof e=="string"?e:e==null?"":String(e)}function SK(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():np(e)}function xK(e,t){let r=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ct(-200,e)}function Px(e,t){throw new ct(-201,!1)}var lt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(lt||{}),qS;function Y3(){return qS}function mi(e){let t=qS;return qS=e,t}function q3(e,t,r){let i=Ix(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(r&lt.Optional)return null;if(t!==void 0)return t;Px(e,"Injector")}var DK={},op=DK,KS="__NG_DI_FLAG__",em="ngTempTokenPath",EK="ngTokenPath",MK=/\n/gm,TK="\u0275",d3="__source",Nu;function _K(){return Nu}function us(e){let t=Nu;return Nu=e,t}function RK(e,t=lt.Default){if(Nu===void 0)throw new ct(-203,!1);return Nu===null?q3(e,void 0,t):Nu.get(e,t&lt.Optional?null:void 0,t)}function Qe(e,t=lt.Default){return(Y3()||RK)(Zr(e),t)}function Nt(e,t=lt.Default){return Qe(e,Cm(t))}function Cm(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ZS(e){let t=[];for(let r=0;r<e.length;r++){let i=Zr(e[r]);if(Array.isArray(i)){if(i.length===0)throw new ct(900,!1);let n,o=lt.Default;for(let a=0;a<i.length;a++){let s=i[a],l=AK(s);typeof l=="number"?l===-1?n=s.token:o|=l:n=s}t.push(Qe(n,o))}else t.push(Qe(i))}return t}function K3(e,t){return e[KS]=t,e.prototype[KS]=t,e}function AK(e){return e[KS]}function IK(e,t,r,i){let n=e[em];throw t[d3]&&n.unshift(t[d3]),e.message=PK(`
`+e.message,n,r,i),e[EK]=n,e[em]=null,e}function PK(e,t,r,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==TK?e.slice(2):e;let n=sn(t);if(Array.isArray(t))n=t.map(sn).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):sn(s)))}n=`{${o.join(", ")}}`}return`${r}${i?"("+i+")":""}[${n}]: ${e.replace(MK,`
  `)}`}var Z3=K3(G3("Optional"),8);var kK=K3(G3("SkipSelf"),4);function zl(e,t){let r=e.hasOwnProperty(Jv);return r?e[Jv]:null}function kx(e,t){e.forEach(r=>Array.isArray(r)?kx(r,t):t(r))}function X3(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function tm(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var ap={},_o=[],sp=new yt(""),Q3=new yt("",-1),J3=new yt(""),rm=class{get(t,r=op){if(r===op){let i=new Error(`NullInjectorError: No provider for ${sn(t)}!`);throw i.name="NullInjectorError",i}return r}},ek=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ek||{}),Ao=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ao||{}),ps=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ps||{});function LK(e,t,r){let i=e.length;for(;;){let n=e.indexOf(t,r);if(n===-1)return n;if(n===0||e.charCodeAt(n-1)<=32){let o=t.length;if(n+o===i||e.charCodeAt(n+o)<=32)return n}r=n+1}}function XS(e,t,r){let i=0;for(;i<r.length;){let n=r[i];if(typeof n=="number"){if(n!==0)break;i++;let o=r[i++],a=r[i++],s=r[i++];e.setAttribute(t,a,s,o)}else{let o=n,a=r[++i];OK(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),i++}}return i}function FK(e){return e===3||e===4||e===6}function OK(e){return e.charCodeAt(0)===64}function Lx(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let r=-1;for(let i=0;i<t.length;i++){let n=t[i];typeof n=="number"?r=n:r===0||(r===-1||r===2?h3(e,r,n,null,t[++i]):h3(e,r,n,null,null))}}return e}function h3(e,t,r,i,n){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===r){if(i===null){n!==null&&(e[o+1]=n);return}else if(i===e[o+1]){e[o+2]=n;return}}o++,i!==null&&o++,n!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,r),i!==null&&e.splice(o++,0,i),n!==null&&e.splice(o++,0,n)}var tk="ng-template";function NK(e,t,r,i){let n=0;if(i){for(;n<t.length&&typeof t[n]=="string";n+=2)if(t[n]==="class"&&LK(t[n+1].toLowerCase(),r,0)!==-1)return!0}else if(Fx(e))return!1;if(n=t.indexOf(1,n),n>-1){let o;for(;++n<t.length&&typeof(o=t[n])=="string";)if(o.toLowerCase()===r)return!0}return!1}function Fx(e){return e.type===4&&e.value!==tk}function zK(e,t,r){let i=e.type===4&&!r?tk:e.value;return t===i}function VK(e,t,r){let i=4,n=e.attrs,o=n!==null?HK(n):0,a=!1;for(let s=0;s<t.length;s++){let l=t[s];if(typeof l=="number"){if(!a&&!$n(i)&&!$n(l))return!1;if(a&&$n(l))continue;a=!1,i=l|i&1;continue}if(!a)if(i&4){if(i=2|i&1,l!==""&&!zK(e,l,r)||l===""&&t.length===1){if($n(i))return!1;a=!0}}else if(i&8){if(n===null||!NK(e,n,l,r)){if($n(i))return!1;a=!0}}else{let c=t[++s],u=BK(l,n,Fx(e),r);if(u===-1){if($n(i))return!1;a=!0;continue}if(c!==""){let d;if(u>o?d="":d=n[u+1].toLowerCase(),i&2&&c!==d){if($n(i))return!1;a=!0}}}}return $n(i)||a}function $n(e){return(e&1)===0}function BK(e,t,r,i){if(t===null)return-1;let n=0;if(i||!r){let o=!1;for(;n<t.length;){let a=t[n];if(a===e)return n;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++n];for(;typeof s=="string";)s=t[++n];continue}else{if(a===4)break;if(a===0){n+=4;continue}}n+=o?1:2}return-1}else return UK(t,e)}function GK(e,t,r=!1){for(let i=0;i<t.length;i++)if(VK(e,t[i],r))return!0;return!1}function HK(e){for(let t=0;t<e.length;t++){let r=e[t];if(FK(r))return t}return e.length}function UK(e,t){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){let i=e[r];if(typeof i=="number")return-1;if(i===t)return r;r++}return-1}function p3(e,t){return e?":not("+t.trim()+")":t}function WK(e){let t=e[0],r=1,i=2,n="",o=!1;for(;r<e.length;){let a=e[r];if(typeof a=="string")if(i&2){let s=e[++r];n+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else i&8?n+="."+a:i&4&&(n+=" "+a);else n!==""&&!$n(a)&&(t+=p3(o,n),n=""),i=a,o=o||!$n(i);r++}return n!==""&&(t+=p3(o,n)),t}function jK(e){return e.map(WK).join(",")}function $K(e){let t=[],r=[],i=1,n=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")n===2?o!==""&&t.push(o,e[++i]):n===8&&r.push(o);else{if(!$n(n))break;n=o}i++}return{attrs:t,classes:r}}function gs(e){return gp(()=>{let t=nk(e),r=Xe(ue({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ek.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ao.Emulated,styles:e.styles||_o,_:null,schemas:e.schemas||null,tView:null,id:""});ok(r);let i=e.dependencies;return r.directiveDefs=f3(i,!1),r.pipeDefs=f3(i,!0),r.id=ZK(r),r})}function YK(e){return Vu(e)||rk(e)}function qK(e){return e!==null}function vp(e){return gp(()=>({type:e.type,bootstrap:e.bootstrap||_o,declarations:e.declarations||_o,imports:e.imports||_o,exports:e.exports||_o,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function g3(e,t){if(e==null)return ap;let r={};for(let i in e)if(e.hasOwnProperty(i)){let n=e[i],o,a,s=ps.None;Array.isArray(n)?(s=n[0],o=n[1],a=n[2]??o):(o=n,a=n),t?(r[o]=s!==ps.None?[i,s]:i,t[o]=a):r[o]=i}return r}function bm(e){return gp(()=>{let t=nk(e);return ok(t),t})}function Ox(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Vu(e){return e[wK]||null}function rk(e){return e[CK]||null}function ik(e){return e[bK]||null}function KK(e){let t=Vu(e)||rk(e)||ik(e);return t!==null?t.standalone:!1}function nk(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||ap,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||_o,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:g3(e.inputs,t),outputs:g3(e.outputs),debugInfo:null}}function ok(e){e.features?.forEach(t=>t(e))}function f3(e,t){if(!e)return null;let r=t?ik:YK;return()=>(typeof e=="function"?e():e).map(i=>r(i)).filter(qK)}function ZK(e){let t=0,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let n of r)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Sm(e){return{\u0275providers:e}}function XK(...e){return{\u0275providers:ak(!0,e),\u0275fromNgModule:!0}}function ak(e,...t){let r=[],i=new Set,n,o=a=>{r.push(a)};return kx(t,a=>{let s=a;QS(s,o,[],i)&&(n||=[],n.push(s))}),n!==void 0&&sk(n,o),r}function sk(e,t){for(let r=0;r<e.length;r++){let{ngModule:i,providers:n}=e[r];Nx(n,o=>{t(o,i)})}}function QS(e,t,r,i){if(e=Zr(e),!e)return!1;let n=null,o=l3(e),a=!o&&Vu(e);if(!o&&!a){let l=e.ngModule;if(o=l3(l),o)n=l;else return!1}else{if(a&&!a.standalone)return!1;n=e}let s=i.has(n);if(a){if(s)return!1;if(i.add(n),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let c of l)QS(c,t,r,i)}}else if(o){if(o.imports!=null&&!s){i.add(n);let c;try{kx(o.imports,u=>{QS(u,t,r,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&sk(c,t)}if(!s){let c=zl(n)||(()=>new n);t({provide:n,useFactory:c,deps:_o},n),t({provide:J3,useValue:n,multi:!0},n),t({provide:sp,useValue:()=>Qe(n),multi:!0},n)}let l=o.providers;if(l!=null&&!s){let c=e;Nx(l,u=>{t(u,c)})}}else return!1;return n!==e&&e.providers!==void 0}function Nx(e,t){for(let r of e)$3(r)&&(r=r.\u0275providers),Array.isArray(r)?Nx(r,t):t(r)}var QK=kt({provide:String,useValue:kt});function lk(e){return e!==null&&typeof e=="object"&&QK in e}function JK(e){return!!(e&&e.useExisting)}function eZ(e){return!!(e&&e.useFactory)}function Bu(e){return typeof e=="function"}function tZ(e){return!!e.useClass}var xm=new yt(""),qv={},rZ={},FS;function zx(){return FS===void 0&&(FS=new rm),FS}var Io=class{},lp=class extends Io{get destroyed(){return this._destroyed}constructor(t,r,i,n){super(),this.parent=r,this.source=i,this.scopes=n,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ex(t,a=>this.processProvider(a)),this.records.set(Q3,Lu(void 0,this)),n.has("environment")&&this.records.set(Io,Lu(void 0,this));let o=this.records.get(xm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(J3,_o,lt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Et(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let r=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of r)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Et(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let r=us(this),i=mi(void 0),n;try{return t()}finally{us(r),mi(i)}}get(t,r=op,i=lt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(u3))return t[u3](this);i=Cm(i);let n,o=us(this),a=mi(void 0);try{if(!(i&lt.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=sZ(t)&&Ix(t);c&&this.injectableDefInScope(c)?l=Lu(JS(t),qv):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let s=i&lt.Self?zx():this.parent;return r=i&lt.Optional&&r===op?null:r,s.get(t,r)}catch(s){if(s.name==="NullInjectorError"){if((s[em]=s[em]||[]).unshift(sn(t)),o)throw s;return IK(s,t,"R3InjectorError",this.source)}else throw s}finally{mi(a),us(o)}}resolveInjectorInitializers(){let t=Et(null),r=us(this),i=mi(void 0),n;try{let o=this.get(sp,_o,lt.Self);for(let a of o)a()}finally{us(r),mi(i),Et(t)}}toString(){let t=[],r=this.records;for(let i of r.keys())t.push(sn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ct(205,!1)}processProvider(t){t=Zr(t);let r=Bu(t)?t:Zr(t&&t.provide),i=nZ(t);if(!Bu(t)&&t.multi===!0){let n=this.records.get(r);n||(n=Lu(void 0,qv,!0),n.factory=()=>ZS(n.multi),this.records.set(r,n)),r=t,n.multi.push(t)}this.records.set(r,i)}hydrate(t,r){let i=Et(null);try{return r.value===qv&&(r.value=rZ,r.value=r.factory()),typeof r.value=="object"&&r.value&&aZ(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{Et(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let r=Zr(t.providedIn);return typeof r=="string"?r==="any"||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(t){let r=this._onDestroyHooks.indexOf(t);r!==-1&&this._onDestroyHooks.splice(r,1)}};function JS(e){let t=Ix(e),r=t!==null?t.factory:zl(e);if(r!==null)return r;if(e instanceof yt)throw new ct(204,!1);if(e instanceof Function)return iZ(e);throw new ct(204,!1)}function iZ(e){if(e.length>0)throw new ct(204,!1);let r=mK(e);return r!==null?()=>r.factory(e):()=>new e}function nZ(e){if(lk(e))return Lu(void 0,e.useValue);{let t=ck(e);return Lu(t,qv)}}function ck(e,t,r){let i;if(Bu(e)){let n=Zr(e);return zl(n)||JS(n)}else if(lk(e))i=()=>Zr(e.useValue);else if(eZ(e))i=()=>e.useFactory(...ZS(e.deps||[]));else if(JK(e))i=()=>Qe(Zr(e.useExisting));else{let n=Zr(e&&(e.useClass||e.provide));if(oZ(e))i=()=>new n(...ZS(e.deps));else return zl(n)||JS(n)}return i}function Lu(e,t,r=!1){return{factory:e,value:t,multi:r?[]:void 0}}function oZ(e){return!!e.deps}function aZ(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function sZ(e){return typeof e=="function"||typeof e=="object"&&e instanceof yt}function ex(e,t){for(let r of e)Array.isArray(r)?ex(r,t):r&&$3(r)?ex(r.\u0275providers,t):t(r)}function uk(e,t){e instanceof lp&&e.assertNotDestroyed();let r,i=us(e),n=mi(void 0);try{return t()}finally{us(i),mi(n)}}function lZ(){return Y3()!==void 0||_K()!=null}function cZ(e){return typeof e=="function"}var Sa=0,nt=1,Ue=2,zr=3,Yn=4,Zn=5,im=6,v3=7,ya=8,Gu=9,qn=10,Xr=11,cp=12,m3=13,$u=14,wa=15,Dm=16,Fu=17,Hu=18,Em=19,dk=20,hs=21,OS=22,Vl=23,Kn=25,hk=1;var Bl=7,nm=8,om=9,ln=10,Vx=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Vx||{});function Ol(e){return Array.isArray(e)&&typeof e[hk]=="object"}function xa(e){return Array.isArray(e)&&e[hk]===!0}function pk(e){return(e.flags&4)!==0}function Bx(e){return e.componentOffset>-1}function gk(e){return(e.flags&1)===1}function Yu(e){return!!e.template}function uZ(e){return(e[Ue]&512)!==0}var tx=class{constructor(t,r,i){this.previousValue=t,this.currentValue=r,this.firstChange=i}isFirstChange(){return this.firstChange}};function fk(e,t,r,i){t!==null?t.applyValueToInputSignal(t,i):e[r]=i}function Mm(){return vk}function vk(e){return e.type.prototype.ngOnChanges&&(e.setInput=hZ),dZ}Mm.ngInherit=!0;function dZ(){let e=yk(this),t=e?.current;if(t){let r=e.previous;if(r===ap)e.previous=t;else for(let i in t)r[i]=t[i];e.current=null,this.ngOnChanges(t)}}function hZ(e,t,r,i,n){let o=this.declaredInputs[i],a=yk(e)||pZ(e,{previous:ap,current:null}),s=a.current||(a.current={}),l=a.previous,c=l[o];s[o]=new tx(c&&c.currentValue,r,l===ap),fk(e,t,n,r)}var mk="__ngSimpleChanges__";function yk(e){return e[mk]||null}function pZ(e,t){return e[mk]=t}var y3=null;var ds=function(e,t,r){y3?.(e,t,r)},gZ="svg",fZ="math",vZ=!1;function mZ(){return vZ}function Ca(e){for(;Array.isArray(e);)e=e[Sa];return e}function yZ(e,t){return Ca(t[e])}function Po(e,t){return Ca(t[e.index])}function wk(e,t){return e.data[t]}function Ck(e,t){return e[t]}function qu(e,t){let r=t[e];return Ol(r)?r:r[Sa]}function Gx(e){return(e[Ue]&128)===128}function wZ(e){return xa(e[zr])}function am(e,t){return t==null?null:e[t]}function bk(e){e[Fu]=0}function CZ(e){e[Ue]&1024||(e[Ue]|=1024,Gx(e)&&up(e))}function bZ(e,t){for(;e>0;)t=t[$u],e--;return t}function Hx(e){return!!(e[Ue]&9216||e[Vl]?.dirty)}function rx(e){e[qn].changeDetectionScheduler?.notify(1),Hx(e)?up(e):e[Ue]&64&&(mZ()?(e[Ue]|=1024,up(e)):e[qn].changeDetectionScheduler?.notify())}function up(e){e[qn].changeDetectionScheduler?.notify();let t=dp(e);for(;t!==null&&!(t[Ue]&8192||(t[Ue]|=8192,!Gx(t)));)t=dp(t)}function Sk(e,t){if((e[Ue]&256)===256)throw new ct(911,!1);e[hs]===null&&(e[hs]=[]),e[hs].push(t)}function SZ(e,t){if(e[hs]===null)return;let r=e[hs].indexOf(t);r!==-1&&e[hs].splice(r,1)}function dp(e){let t=e[zr];return xa(t)?t[zr]:t}var ut={lFrame:Ak(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xZ(){return ut.lFrame.elementDepthCount}function DZ(){ut.lFrame.elementDepthCount++}function EZ(){ut.lFrame.elementDepthCount--}function xk(){return ut.bindingsEnabled}function MZ(){return ut.skipHydrationRootTNode!==null}function TZ(e){return ut.skipHydrationRootTNode===e}function _Z(){ut.skipHydrationRootTNode=null}function zt(){return ut.lFrame.lView}function ko(){return ut.lFrame.tView}function Lo(){let e=Dk();for(;e!==null&&e.type===64;)e=e.parent;return e}function Dk(){return ut.lFrame.currentTNode}function RZ(){let e=ut.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function mp(e,t){let r=ut.lFrame;r.currentTNode=e,r.isParent=t}function Ek(){return ut.lFrame.isParent}function AZ(){ut.lFrame.isParent=!1}function Ux(){let e=ut.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function IZ(){return ut.lFrame.bindingIndex}function PZ(e){return ut.lFrame.bindingIndex=e}function Mk(){return ut.lFrame.bindingIndex++}function kZ(e){let t=ut.lFrame,r=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,r}function LZ(){return ut.lFrame.inI18n}function FZ(e,t){let r=ut.lFrame;r.bindingIndex=r.bindingRootIndex=e,ix(t)}function OZ(){return ut.lFrame.currentDirectiveIndex}function ix(e){ut.lFrame.currentDirectiveIndex=e}function Tk(e){ut.lFrame.currentQueryIndex=e}function NZ(e){let t=e[nt];return t.type===2?t.declTNode:t.type===1?e[Zn]:null}function _k(e,t,r){if(r&lt.SkipSelf){let n=t,o=e;for(;n=n.parent,n===null&&!(r&lt.Host);)if(n=NZ(o),n===null||(o=o[$u],n.type&10))break;if(n===null)return!1;t=n,e=o}let i=ut.lFrame=Rk();return i.currentTNode=t,i.lView=e,!0}function Wx(e){let t=Rk(),r=e[nt];ut.lFrame=t,t.currentTNode=r.firstChild,t.lView=e,t.tView=r,t.contextLView=e,t.bindingIndex=r.bindingStartIndex,t.inI18n=!1}function Rk(){let e=ut.lFrame,t=e===null?null:e.child;return t===null?Ak(e):t}function Ak(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Ik(){let e=ut.lFrame;return ut.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Pk=Ik;function jx(){let e=Ik();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function zZ(e){return(ut.lFrame.contextLView=bZ(e,ut.lFrame.contextLView))[ya]}function Tm(){return ut.lFrame.selectedIndex}function Gl(e){ut.lFrame.selectedIndex=e}function kk(){let e=ut.lFrame;return wk(e.tView,e.selectedIndex)}function VZ(){return ut.lFrame.currentNamespace}var Lk=!0;function $x(){return Lk}function Yx(e){Lk=e}function BZ(e,t,r){let{ngOnChanges:i,ngOnInit:n,ngDoCheck:o}=t.type.prototype;if(i){let a=vk(t);(r.preOrderHooks??=[]).push(e,a),(r.preOrderCheckHooks??=[]).push(e,a)}n&&(r.preOrderHooks??=[]).push(0-e,n),o&&((r.preOrderHooks??=[]).push(e,o),(r.preOrderCheckHooks??=[]).push(e,o))}function qx(e,t){for(let r=t.directiveStart,i=t.directiveEnd;r<i;r++){let o=e.data[r].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-r,a),s&&((e.contentHooks??=[]).push(r,s),(e.contentCheckHooks??=[]).push(r,s)),l&&(e.viewHooks??=[]).push(-r,l),c&&((e.viewHooks??=[]).push(r,c),(e.viewCheckHooks??=[]).push(r,c)),u!=null&&(e.destroyHooks??=[]).push(r,u)}}function Kv(e,t,r){Fk(e,t,3,r)}function Zv(e,t,r,i){(e[Ue]&3)===r&&Fk(e,t,r,i)}function NS(e,t){let r=e[Ue];(r&3)===t&&(r&=16383,r+=1,e[Ue]=r)}function Fk(e,t,r,i){let n=i!==void 0?e[Fu]&65535:0,o=i??-1,a=t.length-1,s=0;for(let l=n;l<a;l++)if(typeof t[l+1]=="number"){if(s=t[l],i!=null&&s>=i)break}else t[l]<0&&(e[Fu]+=65536),(s<o||o==-1)&&(GZ(e,r,t,l),e[Fu]=(e[Fu]&4294901760)+l+2),l++}function w3(e,t){ds(4,e,t);let r=Et(null);try{t.call(e)}finally{Et(r),ds(5,e,t)}}function GZ(e,t,r,i){let n=r[i]<0,o=r[i+1],a=n?-r[i]:r[i],s=e[a];n?e[Ue]>>14<e[Fu]>>16&&(e[Ue]&3)===t&&(e[Ue]+=16384,w3(s,o)):w3(s,o)}var zu=-1,Hl=class{constructor(t,r,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=i}};function HZ(e){return e instanceof Hl}function UZ(e){return(e.flags&8)!==0}function WZ(e){return(e.flags&16)!==0}function Ok(e){return e!==zu}function sm(e){return e&32767}function jZ(e){return e>>16}function lm(e,t){let r=jZ(e),i=t;for(;r>0;)i=i[$u],r--;return i}var nx=!0;function cm(e){let t=nx;return nx=e,t}var $Z=256,Nk=$Z-1,zk=5,YZ=0,Ro={};function qZ(e,t,r){let i;typeof r=="string"?i=r.charCodeAt(0)||0:r.hasOwnProperty(ip)&&(i=r[ip]),i==null&&(i=r[ip]=YZ++);let n=i&Nk,o=1<<n;t.data[e+(n>>zk)]|=o}function um(e,t){let r=Vk(e,t);if(r!==-1)return r;let i=t[nt];i.firstCreatePass&&(e.injectorIndex=t.length,zS(i.data,e),zS(t,null),zS(i.blueprint,null));let n=Kx(e,t),o=e.injectorIndex;if(Ok(n)){let a=sm(n),s=lm(n,t),l=s[nt].data;for(let c=0;c<8;c++)t[o+c]=s[a+c]|l[a+c]}return t[o+8]=n,o}function zS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Vk(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Kx(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let r=0,i=null,n=t;for(;n!==null;){if(i=jk(n),i===null)return zu;if(r++,n=n[$u],i.injectorIndex!==-1)return i.injectorIndex|r<<16}return zu}function ox(e,t,r){qZ(e,t,r)}function Bk(e,t,r){if(r&lt.Optional||e!==void 0)return e;Px(t,"NodeInjector")}function Gk(e,t,r,i){if(r&lt.Optional&&i===void 0&&(i=null),!(r&(lt.Self|lt.Host))){let n=e[Gu],o=mi(void 0);try{return n?n.get(t,i,r&lt.Optional):q3(t,i,r&lt.Optional)}finally{mi(o)}}return Bk(i,t,r)}function Hk(e,t,r,i=lt.Default,n){if(e!==null){if(t[Ue]&2048&&!(i&lt.Self)){let a=JZ(e,t,r,i,Ro);if(a!==Ro)return a}let o=Uk(e,t,r,i,Ro);if(o!==Ro)return o}return Gk(t,r,i,n)}function Uk(e,t,r,i,n){let o=XZ(r);if(typeof o=="function"){if(!_k(t,e,i))return i&lt.Host?Bk(n,r,i):Gk(t,r,i,n);try{let a;if(a=o(i),a==null&&!(i&lt.Optional))Px(r);else return a}finally{Pk()}}else if(typeof o=="number"){let a=null,s=Vk(e,t),l=zu,c=i&lt.Host?t[wa][Zn]:null;for((s===-1||i&lt.SkipSelf)&&(l=s===-1?Kx(e,t):t[s+8],l===zu||!b3(i,!1)?s=-1:(a=t[nt],s=sm(l),t=lm(l,t)));s!==-1;){let u=t[nt];if(C3(o,s,u.data)){let d=KZ(s,t,r,a,i,c);if(d!==Ro)return d}l=t[s+8],l!==zu&&b3(i,t[nt].data[s+8]===c)&&C3(o,s,t)?(a=u,s=sm(l),t=lm(l,t)):s=-1}}return n}function KZ(e,t,r,i,n,o){let a=t[nt],s=a.data[e+8],l=i==null?Bx(s)&&nx:i!=a&&(s.type&3)!==0,c=n&lt.Host&&o===s,u=ZZ(s,a,r,l,c);return u!==null?Uu(t,a,u,s):Ro}function ZZ(e,t,r,i,n){let o=e.providerIndexes,a=t.data,s=o&1048575,l=e.directiveStart,c=e.directiveEnd,u=o>>20,d=i?s:s+u,h=n?s+u:c;for(let p=d;p<h;p++){let g=a[p];if(p<l&&r===g||p>=l&&g.type===r)return p}if(n){let p=a[l];if(p&&Yu(p)&&p.type===r)return l}return null}function Uu(e,t,r,i){let n=e[r],o=t.data;if(HZ(n)){let a=n;a.resolving&&xK(SK(o[r]));let s=cm(a.canSeeViewProviders);a.resolving=!0;let l,c=a.injectImpl?mi(a.injectImpl):null,u=_k(e,i,lt.Default);try{n=e[r]=a.factory(void 0,o,e,i),t.firstCreatePass&&r>=i.directiveStart&&BZ(r,o[r],t)}finally{c!==null&&mi(c),cm(s),a.resolving=!1,Pk()}}return n}function XZ(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(ip)?e[ip]:void 0;return typeof t=="number"?t>=0?t&Nk:QZ:t}function C3(e,t,r){let i=1<<e;return!!(r[t+(e>>zk)]&i)}function b3(e,t){return!(e&lt.Self)&&!(e&lt.Host&&t)}var Nl=class{constructor(t,r){this._tNode=t,this._lView=r}get(t,r,i){return Hk(this._tNode,this._lView,t,Cm(i),r)}};function QZ(){return new Nl(Lo(),zt())}function Wk(e){return gp(()=>{let t=e.prototype.constructor,r=t[Jv]||ax(t),i=Object.prototype,n=Object.getPrototypeOf(e.prototype).constructor;for(;n&&n!==i;){let o=n[Jv]||ax(n);if(o&&o!==r)return o;n=Object.getPrototypeOf(n)}return o=>new o})}function ax(e){return U3(e)?()=>{let t=ax(Zr(e));return t&&t()}:zl(e)}function JZ(e,t,r,i,n){let o=e,a=t;for(;o!==null&&a!==null&&a[Ue]&2048&&!(a[Ue]&512);){let s=Uk(o,a,r,i|lt.Self,Ro);if(s!==Ro)return s;let l=o.parent;if(!l){let c=a[dk];if(c){let u=c.get(r,Ro,i);if(u!==Ro)return u}l=jk(a),a=a[$u]}o=l}return n}function jk(e){let t=e[nt],r=t.type;return r===2?t.declTNode:r===1?e[Zn]:null}function S3(e,t=null,r=null,i){let n=eX(e,t,r,i);return n.resolveInjectorInitializers(),n}function eX(e,t=null,r=null,i,n=new Set){let o=[r||_o,XK(e)];return i=i||(typeof e=="object"?void 0:sn(e)),new lp(o,t||zx(),i||null,n)}var Zx=(()=>{class e{static{this.THROW_IF_NOT_FOUND=op}static{this.NULL=new rm}static create(r,i){if(Array.isArray(r))return S3({name:""},i,r,"");{let n=r.name??"";return S3({name:n},r.parent,r.providers,n)}}static{this.\u0275prov=Ct({token:e,providedIn:"any",factory:()=>Qe(Q3)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var tX="ngOriginalError";function VS(e){return e[tX]}var ba=class{constructor(){this._console=console}handleError(t){let r=this._findOriginalError(t);this._console.error("ERROR",t),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(t){let r=t&&VS(t);for(;r&&VS(r);)r=VS(r);return r||null}},$k=new yt("",{providedIn:"root",factory:()=>Nt(ba).handleError.bind(void 0)}),Yk=(()=>{class e{static{this.__NG_ELEMENT_ID__=rX}static{this.__NG_ENV_ID__=r=>r}}return e})(),sx=class extends Yk{constructor(t){super(),this._lView=t}onDestroy(t){return Sk(this._lView,t),()=>SZ(this._lView,t)}};function rX(){return new sx(zt())}function iX(){return _m(Lo(),zt())}function _m(e,t){return new Ku(Po(e,t))}var Ku=(()=>{class e{constructor(r){this.nativeElement=r}static{this.__NG_ELEMENT_ID__=iX}}return e})();var lx=class extends cs{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,lZ()&&(this.destroyRef=Nt(Yk,{optional:!0})??void 0)}emit(t){let r=Et(null);try{super.next(t)}finally{Et(r)}}subscribe(t,r,i){let n=t,o=r||(()=>null),a=i;if(t&&typeof t=="object"){let l=t;n=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=BS(o),n&&(n=BS(n)),a&&(a=BS(a)));let s=super.subscribe({next:n,error:o,complete:a});return t instanceof Or&&t.add(s),s}};function BS(e){return t=>{setTimeout(e,void 0,t)}}var ie=lx;function qk(e){return(e.flags&128)===128}var Kk=new Map,nX=0;function oX(){return nX++}function aX(e){Kk.set(e[Em],e)}function sX(e){Kk.delete(e[Em])}var x3="__ngContext__";function Ul(e,t){Ol(t)?(e[x3]=t[Em],aX(t)):e[x3]=t}function Zk(e){return Qk(e[cp])}function Xk(e){return Qk(e[Yn])}function Qk(e){for(;e!==null&&!xa(e);)e=e[Yn];return e}var cx;function Jk(e){cx=e}function lX(){if(cx!==void 0)return cx;if(typeof document<"u")return document;throw new ct(210,!1)}var Xx=new yt("",{providedIn:"root",factory:()=>cX}),cX="ng",Qx=new yt(""),fs=new yt("",{providedIn:"platform",factory:()=>"unknown"});var Jx=new yt("",{providedIn:"root",factory:()=>lX().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uX="h",dX="b";var hX=()=>null;function e1(e,t,r=!1){return hX(e,t,r)}var eL=!1,pX=new yt("",{providedIn:"root",factory:()=>eL});var dm=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${B3})`}};function t1(e){return e instanceof dm?e.changingThisBreaksApplicationSecurity:e}function tL(e,t){let r=gX(e);if(r!=null&&r!==t){if(r==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${r} (see ${B3})`)}return r===t}function gX(e){return e instanceof dm&&e.getTypeName()||null}var fX=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rL(e){return e=String(e),e.match(fX)?e:"unsafe:"+e}var r1=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(r1||{});function iL(e){let t=vX();return t?t.sanitize(r1.URL,e)||"":tL(e,"URL")?t1(e):rL(np(e))}function vX(){let e=zt();return e&&e[qn].sanitizer}var Wl=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Wl||{}),mX;function i1(e,t){return mX(e,t)}function Ou(e,t,r,i,n){if(i!=null){let o,a=!1;xa(i)?o=i:Ol(i)&&(a=!0,i=i[Sa]);let s=Ca(i);e===0&&r!==null?n==null?lL(t,r,s):hm(t,r,s,n||null,!0):e===1&&r!==null?hm(t,r,s,n||null,!0):e===2?LX(t,s,a):e===3&&t.destroyNode(s),o!=null&&OX(t,e,o,r,n)}}function yX(e,t){return e.createText(t)}function wX(e,t,r){e.setValue(t,r)}function nL(e,t,r){return e.createElement(t,r)}function CX(e,t){oL(e,t),t[Sa]=null,t[Zn]=null}function bX(e,t,r,i,n,o){i[Sa]=n,i[Zn]=t,Rm(e,i,r,1,n,o)}function oL(e,t){t[qn].changeDetectionScheduler?.notify(1),Rm(e,t,t[Xr],2,null,null)}function SX(e){let t=e[cp];if(!t)return GS(e[nt],e);for(;t;){let r=null;if(Ol(t))r=t[cp];else{let i=t[ln];i&&(r=i)}if(!r){for(;t&&!t[Yn]&&t!==e;)Ol(t)&&GS(t[nt],t),t=t[zr];t===null&&(t=e),Ol(t)&&GS(t[nt],t),r=t&&t[Yn]}t=r}}function xX(e,t,r,i){let n=ln+i,o=r.length;i>0&&(r[n-1][Yn]=t),i<o-ln?(t[Yn]=r[n],X3(r,ln+i,t)):(r.push(t),t[Yn]=null),t[zr]=r;let a=t[Dm];a!==null&&r!==a&&DX(a,t);let s=t[Hu];s!==null&&s.insertView(e),rx(t),t[Ue]|=128}function DX(e,t){let r=e[om],n=t[zr][zr][wa];t[wa]!==n&&(e[Ue]|=Vx.HasTransplantedViews),r===null?e[om]=[t]:r.push(t)}function aL(e,t){let r=e[om],i=r.indexOf(t);r.splice(i,1)}function ux(e,t){if(e.length<=ln)return;let r=ln+t,i=e[r];if(i){let n=i[Dm];n!==null&&n!==e&&aL(n,i),t>0&&(e[r-1][Yn]=i[Yn]);let o=tm(e,ln+t);CX(i[nt],i);let a=o[Hu];a!==null&&a.detachView(o[nt]),i[zr]=null,i[Yn]=null,i[Ue]&=-129}return i}function sL(e,t){if(!(t[Ue]&256)){let r=t[Xr];r.destroyNode&&Rm(e,t,r,3,null,null),SX(t)}}function GS(e,t){if(t[Ue]&256)return;let r=Et(null);try{t[Ue]&=-129,t[Ue]|=256,t[Vl]&&LP(t[Vl]),MX(e,t),EX(e,t),t[nt].type===1&&t[Xr].destroy();let i=t[Dm];if(i!==null&&xa(t[zr])){i!==t[zr]&&aL(i,t);let n=t[Hu];n!==null&&n.detachView(e)}sX(t)}finally{Et(r)}}function EX(e,t){let r=e.cleanup,i=t[v3];if(r!==null)for(let o=0;o<r.length-1;o+=2)if(typeof r[o]=="string"){let a=r[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[r[o+1]];r[o].call(a)}i!==null&&(t[v3]=null);let n=t[hs];if(n!==null){t[hs]=null;for(let o=0;o<n.length;o++){let a=n[o];a()}}}function MX(e,t){let r;if(e!=null&&(r=e.destroyHooks)!=null)for(let i=0;i<r.length;i+=2){let n=t[r[i]];if(!(n instanceof Hl)){let o=r[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=n[o[a]],l=o[a+1];ds(4,s,l);try{l.call(s)}finally{ds(5,s,l)}}else{ds(4,n,o);try{o.call(n)}finally{ds(5,n,o)}}}}}function TX(e,t,r){return _X(e,t.parent,r)}function _X(e,t,r){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return r[Sa];{let{componentOffset:n}=i;if(n>-1){let{encapsulation:o}=e.data[i.directiveStart+n];if(o===Ao.None||o===Ao.Emulated)return null}return Po(i,r)}}function hm(e,t,r,i,n){e.insertBefore(t,r,i,n)}function lL(e,t,r){e.appendChild(t,r)}function D3(e,t,r,i,n){i!==null?hm(e,t,r,i,n):lL(e,t,r)}function RX(e,t,r,i){e.removeChild(t,r,i)}function n1(e,t){return e.parentNode(t)}function AX(e,t){return e.nextSibling(t)}function IX(e,t,r){return kX(e,t,r)}function PX(e,t,r){return e.type&40?Po(e,r):null}var kX=PX,E3;function o1(e,t,r,i){let n=TX(e,i,t),o=t[Xr],a=i.parent||t[Zn],s=IX(a,i,t);if(n!=null)if(Array.isArray(r))for(let l=0;l<r.length;l++)D3(o,n,r[l],s,!1);else D3(o,n,r,s,!1);E3!==void 0&&E3(o,i,t,r,n)}function Xv(e,t){if(t!==null){let r=t.type;if(r&3)return Po(t,e);if(r&4)return dx(-1,e[t.index]);if(r&8){let i=t.child;if(i!==null)return Xv(e,i);{let n=e[t.index];return xa(n)?dx(-1,n):Ca(n)}}else{if(r&32)return i1(t,e)()||Ca(e[t.index]);{let i=cL(e,t);if(i!==null){if(Array.isArray(i))return i[0];let n=dp(e[wa]);return Xv(n,i)}else return Xv(e,t.next)}}}return null}function cL(e,t){if(t!==null){let i=e[wa][Zn],n=t.projection;return i.projection[n]}return null}function dx(e,t){let r=ln+e+1;if(r<t.length){let i=t[r],n=i[nt].firstChild;if(n!==null)return Xv(i,n)}return t[Bl]}function LX(e,t,r){let i=n1(e,t);i&&RX(e,i,t,r)}function a1(e,t,r,i,n,o,a){for(;r!=null;){let s=i[r.index],l=r.type;if(a&&t===0&&(s&&Ul(Ca(s),i),r.flags|=2),(r.flags&32)!==32)if(l&8)a1(e,t,r.child,i,n,o,!1),Ou(t,e,n,s,o);else if(l&32){let c=i1(r,i),u;for(;u=c();)Ou(t,e,n,u,o);Ou(t,e,n,s,o)}else l&16?FX(e,t,i,r,n,o):Ou(t,e,n,s,o);r=a?r.projectionNext:r.next}}function Rm(e,t,r,i,n,o){a1(r,i,e.firstChild,t,n,o,!1)}function FX(e,t,r,i,n,o){let a=r[wa],l=a[Zn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Ou(t,e,n,u,o)}else{let c=l,u=a[zr];qk(i)&&(c.flags|=128),a1(e,t,c,u,n,o,!0)}}function OX(e,t,r,i,n){let o=r[Bl],a=Ca(r);o!==a&&Ou(t,e,i,o,n);for(let s=ln;s<r.length;s++){let l=r[s];Rm(l[nt],l,e,t,i,o)}}function NX(e,t,r){e.setAttribute(t,"style",r)}function uL(e,t,r){r===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r)}function dL(e,t,r){let{mergedAttrs:i,classes:n,styles:o}=r;i!==null&&XS(e,t,i),n!==null&&uL(e,t,n),o!==null&&NX(e,t,o)}var vs={};function cn(e=1){hL(ko(),zt(),Tm()+e,!1)}function hL(e,t,r,i){if(!i)if((t[Ue]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Kv(t,o,r)}else{let o=e.preOrderHooks;o!==null&&Zv(t,o,0,r)}Gl(r)}function Kt(e,t=lt.Default){let r=zt();if(r===null)return Qe(e,t);let i=Lo();return Hk(i,r,Zr(e),t)}function pL(e,t,r,i,n,o){let a=Et(null);try{let s=null;n&ps.SignalBased&&(s=t[i][AP]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),n&ps.HasDecoratorInputTransform&&(o=e.inputTransforms[i].call(t,o)),e.setInput!==null?e.setInput(t,s,o,r,i):fk(t,s,i,o)}finally{Et(a)}}function zX(e,t){let r=e.hostBindingOpCodes;if(r!==null)try{for(let i=0;i<r.length;i++){let n=r[i];if(n<0)Gl(~n);else{let o=n,a=r[++i],s=r[++i];FZ(a,o);let l=t[o];s(2,l)}}}finally{Gl(-1)}}function Am(e,t,r,i,n,o,a,s,l,c,u){let d=t.blueprint.slice();return d[Sa]=n,d[Ue]=i|4|128|8|64,(c!==null||e&&e[Ue]&2048)&&(d[Ue]|=2048),bk(d),d[zr]=d[$u]=e,d[ya]=r,d[qn]=a||e&&e[qn],d[Xr]=s||e&&e[Xr],d[Gu]=l||e&&e[Gu]||null,d[Zn]=o,d[Em]=oX(),d[im]=u,d[dk]=c,d[wa]=t.type==2?e[wa]:d,d}function Im(e,t,r,i,n){let o=e.data[t];if(o===null)o=VX(e,t,r,i,n),LZ()&&(o.flags|=32);else if(o.type&64){o.type=r,o.value=i,o.attrs=n;let a=RZ();o.injectorIndex=a===null?-1:a.injectorIndex}return mp(o,!0),o}function VX(e,t,r,i,n){let o=Dk(),a=Ek(),s=a?o:o&&o.parent,l=e.data[t]=WX(e,s,r,t,i,n);return e.firstChild===null&&(e.firstChild=l),o!==null&&(a?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function gL(e,t,r,i){if(r===0)return-1;let n=t.length;for(let o=0;o<r;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return n}function fL(e,t,r,i,n){let o=Tm(),a=i&2;try{Gl(-1),a&&t.length>Kn&&hL(e,t,Kn,!1),ds(a?2:0,n),r(i,n)}finally{Gl(o),ds(a?3:1,n)}}function vL(e,t,r){if(pk(t)){let i=Et(null);try{let n=t.directiveStart,o=t.directiveEnd;for(let a=n;a<o;a++){let s=e.data[a];if(s.contentQueries){let l=r[a];s.contentQueries(1,l,a)}}}finally{Et(i)}}}function mL(e,t,r){xk()&&(ZX(e,t,r,Po(r,t)),(r.flags&64)===64&&xL(e,t,r))}function yL(e,t,r=Po){let i=t.localNames;if(i!==null){let n=t.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],s=a===-1?r(t,e):e[a];e[n++]=s}}}function wL(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=s1(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function s1(e,t,r,i,n,o,a,s,l,c,u){let d=Kn+i,h=d+n,p=BX(d,h),g=typeof c=="function"?c():c;return p[nt]={type:e,blueprint:p,template:r,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function BX(e,t){let r=[];for(let i=0;i<t;i++)r.push(i<e?null:vs);return r}function GX(e,t,r,i){let o=i.get(pX,eL)||r===Ao.ShadowDom,a=e.selectRootElement(t,o);return HX(a),a}function HX(e){UX(e)}var UX=()=>null;function WX(e,t,r,i,n,o){let a=t?t.injectorIndex:-1,s=0;return MZ()&&(s|=128),{type:r,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:n,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function M3(e,t,r,i,n){for(let o in t){if(!t.hasOwnProperty(o))continue;let a=t[o];if(a===void 0)continue;i??={};let s,l=ps.None;Array.isArray(a)?(s=a[0],l=a[1]):s=a;let c=o;if(n!==null){if(!n.hasOwnProperty(o))continue;c=n[o]}e===0?T3(i,r,c,s,l):T3(i,r,c,s)}return i}function T3(e,t,r,i,n){let o;e.hasOwnProperty(r)?(o=e[r]).push(t,i):o=e[r]=[t,i],n!==void 0&&o.push(n)}function jX(e,t,r){let i=t.directiveStart,n=t.directiveEnd,o=e.data,a=t.attrs,s=[],l=null,c=null;for(let u=i;u<n;u++){let d=o[u],h=r?r.get(d):null,p=h?h.inputs:null,g=h?h.outputs:null;l=M3(0,d.inputs,u,l,p),c=M3(1,d.outputs,u,c,g);let f=l!==null&&a!==null&&!Fx(t)?oQ(l,u,a):null;s.push(f)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=l,t.outputs=c}function $X(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function CL(e,t,r,i,n,o,a,s){let l=Po(t,r),c=t.inputs,u;!s&&c!=null&&(u=c[i])?(l1(e,r,u,i,n),Bx(t)&&YX(r,t.index)):t.type&3?(i=$X(i),n=a!=null?a(n,t.value||"",i):n,o.setProperty(l,i,n)):t.type&12}function YX(e,t){let r=qu(t,e);r[Ue]&16||(r[Ue]|=64)}function bL(e,t,r,i){if(xk()){let n=i===null?null:{"":-1},o=QX(e,r),a,s;o===null?a=s=null:[a,s]=o,a!==null&&SL(e,t,r,a,n,s),n&&JX(r,i,n)}r.mergedAttrs=Lx(r.mergedAttrs,r.attrs)}function SL(e,t,r,i,n,o){for(let c=0;c<i.length;c++)ox(um(r,t),e,i[c].type);tQ(r,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let a=!1,s=!1,l=gL(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];r.mergedAttrs=Lx(r.mergedAttrs,u.hostAttrs),rQ(e,r,t,l,u),eQ(l,u,n),u.contentQueries!==null&&(r.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(r.flags|=64);let d=u.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),a=!0),!s&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),s=!0),l++}jX(e,r,o)}function qX(e,t,r,i,n){let o=n.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;KX(a)!=s&&a.push(s),a.push(r,i,o)}}function KX(e){let t=e.length;for(;t>0;){let r=e[--t];if(typeof r=="number"&&r<0)return r}return 0}function ZX(e,t,r,i){let n=r.directiveStart,o=r.directiveEnd;Bx(r)&&iQ(t,r,e.data[n+r.componentOffset]),e.firstCreatePass||um(r,t),Ul(i,t);let a=r.initialInputs;for(let s=n;s<o;s++){let l=e.data[s],c=Uu(t,e,s,r);if(Ul(c,t),a!==null&&nQ(t,s-n,c,l,r,a),Yu(l)){let u=qu(r.index,t);u[ya]=Uu(t,e,s,r)}}}function xL(e,t,r){let i=r.directiveStart,n=r.directiveEnd,o=r.index,a=OZ();try{Gl(o);for(let s=i;s<n;s++){let l=e.data[s],c=t[s];ix(s),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&XX(l,c)}}finally{Gl(-1),ix(a)}}function XX(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function QX(e,t){let r=e.directiveRegistry,i=null,n=null;if(r)for(let o=0;o<r.length;o++){let a=r[o];if(GK(t,a.selectors,!1))if(i||(i=[]),Yu(a))if(a.findHostDirectiveDefs!==null){let s=[];n=n||new Map,a.findHostDirectiveDefs(a,s,n),i.unshift(...s,a);let l=s.length;hx(e,t,l)}else i.unshift(a),hx(e,t,0);else n=n||new Map,a.findHostDirectiveDefs?.(a,i,n),i.push(a)}return i===null?null:[i,n]}function hx(e,t,r){t.componentOffset=r,(e.components??=[]).push(t.index)}function JX(e,t,r){if(t){let i=e.localNames=[];for(let n=0;n<t.length;n+=2){let o=r[t[n+1]];if(o==null)throw new ct(-301,!1);i.push(t[n],o)}}}function eQ(e,t,r){if(r){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)r[t.exportAs[i]]=e;Yu(t)&&(r[""]=e)}}function tQ(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}function rQ(e,t,r,i,n){e.data[i]=n;let o=n.factory||(n.factory=zl(n.type,!0)),a=new Hl(o,Yu(n),Kt);e.blueprint[i]=a,r[i]=a,qX(e,t,i,gL(e,r,n.hostVars,vs),n)}function iQ(e,t,r){let i=Po(t,e),n=wL(r),o=e[qn].rendererFactory,a=16;r.signals?a=4096:r.onPush&&(a=64);let s=Pm(e,Am(e,n,null,a,i,t,null,o.createRenderer(i,r),null,null,null));e[t.index]=s}function nQ(e,t,r,i,n,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],d=a[s++];pL(i,r,l,c,u,d)}}function oQ(e,t,r){let i=null,n=0;for(;n<r.length;){let o=r[n];if(o===0){n+=4;continue}else if(o===5){n+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){i===null&&(i=[]);let a=e[o];for(let s=0;s<a.length;s+=3)if(a[s]===t){i.push(o,a[s+1],a[s+2],r[n+1]);break}}n+=2}return i}function DL(e,t,r,i){return[e,!0,0,t,null,i,null,r,null,null]}function EL(e,t){let r=e.contentQueries;if(r!==null){let i=Et(null);try{for(let n=0;n<r.length;n+=2){let o=r[n],a=r[n+1];if(a!==-1){let s=e.data[a];Tk(o),s.contentQueries(2,t[a],a)}}}finally{Et(i)}}}function Pm(e,t){return e[cp]?e[m3][Yn]=t:e[cp]=t,e[m3]=t,t}function px(e,t,r){Tk(0);let i=Et(null);try{t(e,r)}finally{Et(i)}}function aQ(e,t){let r=e[Gu],i=r?r.get(ba,null):null;i&&i.handleError(t)}function l1(e,t,r,i,n){for(let o=0;o<r.length;){let a=r[o++],s=r[o++],l=r[o++],c=t[a],u=e.data[a];pL(u,c,i,s,l,n)}}function ML(e,t,r){let i=yZ(t,e);wX(e[Xr],i,r)}function sQ(e,t){let r=qu(t,e),i=r[nt];lQ(i,r);let n=r[Sa];n!==null&&r[im]===null&&(r[im]=e1(n,r[Gu])),c1(i,r,r[ya])}function lQ(e,t){for(let r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])}function c1(e,t,r){Wx(t);try{let i=e.viewQuery;i!==null&&px(1,i,r);let n=e.template;n!==null&&fL(e,t,n,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),t[Hu]?.finishViewCreation(e),e.staticContentQueries&&EL(e,t),e.staticViewQueries&&px(2,e.viewQuery,r);let o=e.components;o!==null&&cQ(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Ue]&=-5,jx()}}function cQ(e,t){for(let r=0;r<t.length;r++)sQ(e,t[r])}function uQ(e,t,r,i){let n=Et(null);try{let o=t.tView,s=e[Ue]&4096?4096:16,l=Am(e,o,r,s,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[Dm]=c;let u=e[Hu];return u!==null&&(l[Hu]=u.createEmbeddedView(o)),c1(o,l,r),l}finally{Et(n)}}function _3(e,t){return!t||t.firstChild===null||qk(e)}function dQ(e,t,r,i=!0){let n=t[nt];if(xX(n,t,e,r),i){let a=dx(r,e),s=t[Xr],l=n1(s,e[Bl]);l!==null&&bX(n,e[Zn],s,t,l,a)}let o=t[im];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function pm(e,t,r,i,n=!1){for(;r!==null;){let o=t[r.index];o!==null&&i.push(Ca(o)),xa(o)&&hQ(o,i);let a=r.type;if(a&8)pm(e,t,r.child,i);else if(a&32){let s=i1(r,t),l;for(;l=s();)i.push(l)}else if(a&16){let s=cL(t,r);if(Array.isArray(s))i.push(...s);else{let l=dp(t[wa]);pm(l[nt],l,s,i,!0)}}r=n?r.projectionNext:r.next}return i}function hQ(e,t){for(let r=ln;r<e.length;r++){let i=e[r],n=i[nt].firstChild;n!==null&&pm(i[nt],i,n,t)}e[Bl]!==e[Sa]&&t.push(e[Bl])}var TL=[];function pQ(e){return e[Vl]??gQ(e)}function gQ(e){let t=TL.pop()??Object.create(vQ);return t.lView=e,t}function fQ(e){e.lView[Vl]!==e&&(e.lView=null,TL.push(e))}var vQ=Xe(ue({},IP),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{up(e.lView)},consumerOnSignalRead(){this.lView[Vl]=this}}),_L=100;function RL(e,t=!0,r=0){let i=e[qn],n=i.rendererFactory,o=!1;o||n.begin?.();try{mQ(e,r)}catch(a){throw t&&aQ(e,a),a}finally{o||(n.end?.(),i.inlineEffectRunner?.flush())}}function mQ(e,t){gx(e,t);let r=0;for(;Hx(e);){if(r===_L)throw new ct(103,!1);r++,gx(e,1)}}function yQ(e,t,r,i){let n=t[Ue];if((n&256)===256)return;let o=!1;!o&&t[qn].inlineEffectRunner?.flush(),Wx(t);let a=null,s=null;!o&&wQ(e)&&(s=pQ(t),a=PP(s));try{bk(t),PZ(e.bindingStartIndex),r!==null&&fL(e,t,r,2,i);let l=(n&3)===3;if(!o)if(l){let d=e.preOrderCheckHooks;d!==null&&Kv(t,d,null)}else{let d=e.preOrderHooks;d!==null&&Zv(t,d,0,null),NS(t,0)}if(CQ(t),AL(t,0),e.contentQueries!==null&&EL(e,t),!o)if(l){let d=e.contentCheckHooks;d!==null&&Kv(t,d)}else{let d=e.contentHooks;d!==null&&Zv(t,d,1),NS(t,1)}zX(e,t);let c=e.components;c!==null&&PL(t,c,0);let u=e.viewQuery;if(u!==null&&px(2,u,i),!o)if(l){let d=e.viewCheckHooks;d!==null&&Kv(t,d)}else{let d=e.viewHooks;d!==null&&Zv(t,d,2),NS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[OS]){for(let d of t[OS])d();t[OS]=null}o||(t[Ue]&=-73)}catch(l){throw up(t),l}finally{s!==null&&(kP(s,a),fQ(s)),jx()}}function wQ(e){return e.type!==2}function AL(e,t){for(let r=Zk(e);r!==null;r=Xk(r))for(let i=ln;i<r.length;i++){let n=r[i];IL(n,t)}}function CQ(e){for(let t=Zk(e);t!==null;t=Xk(t)){if(!(t[Ue]&Vx.HasTransplantedViews))continue;let r=t[om];for(let i=0;i<r.length;i++){let n=r[i],o=n[zr];CZ(n)}}}function bQ(e,t,r){let i=qu(t,e);IL(i,r)}function IL(e,t){Gx(e)&&gx(e,t)}function gx(e,t){let i=e[nt],n=e[Ue],o=e[Vl],a=!!(t===0&&n&16);if(a||=!!(n&64&&t===0),a||=!!(n&1024),a||=!!(o?.dirty&&wS(o)),o&&(o.dirty=!1),e[Ue]&=-9217,a)yQ(i,e,i.template,e[ya]);else if(n&8192){AL(e,1);let s=i.components;s!==null&&PL(e,s,1)}}function PL(e,t,r){for(let i=0;i<t.length;i++)bQ(e,t[i],r)}function kL(e){for(e[qn].changeDetectionScheduler?.notify();e;){e[Ue]|=64;let t=dp(e);if(uZ(e)&&!t)return e;e=t}return null}var hp=class{get rootNodes(){let t=this._lView,r=t[nt];return pm(r,t,r.firstChild,[])}constructor(t,r,i=!0){this._lView=t,this._cdRefInjectingView=r,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ya]}set context(t){this._lView[ya]=t}get destroyed(){return(this._lView[Ue]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[zr];if(xa(t)){let r=t[nm],i=r?r.indexOf(this):-1;i>-1&&(ux(t,i),tm(r,i))}this._attachedToViewContainer=!1}sL(this._lView[nt],this._lView)}onDestroy(t){Sk(this._lView,t)}markForCheck(){kL(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ue]&=-129}reattach(){rx(this._lView),this._lView[Ue]|=128}detectChanges(){this._lView[Ue]|=1024,RL(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,oL(this._lView[nt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ct(902,!1);this._appRef=t,rx(this._lView)}},km=(()=>{class e{static{this.__NG_ELEMENT_ID__=DQ}}return e})(),SQ=km,xQ=class extends SQ{constructor(t,r,i){super(),this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let n=uQ(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new hp(n)}};function DQ(){return EQ(Lo(),zt())}function EQ(e,t){return e.type&4?new xQ(t,e,_m(e,t)):null}var M2e=new RegExp(`^(\\d+)*(${dX}|${uX})*(.*)`);var MQ=()=>null;function R3(e,t){return MQ(e,t)}var fx=class{},vx=class{},gm=class{};function TQ(e){let t=Error(`No component factory found for ${sn(e)}.`);return t[_Q]=e,t}var _Q="ngComponent";var mx=class{resolveComponentFactory(t){throw TQ(t)}},u1=(()=>{class e{static{this.NULL=new mx}}return e})(),pp=class{},d1=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>RQ()}}return e})();function RQ(){let e=zt(),t=Lo(),r=qu(t.index,e);return(Ol(r)?r:e)[Xr]}var AQ=(()=>{class e{static{this.\u0275prov=Ct({token:e,providedIn:"root",factory:()=>null})}}return e})(),HS={};var A3=new Set;function h1(e){A3.has(e)||(A3.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function I3(...e){}function IQ(){let e=typeof ma.requestAnimationFrame=="function",t=ma[e?"requestAnimationFrame":"setTimeout"],r=ma[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&r){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let n=r[Zone.__symbol__("OriginalDelegate")];n&&(r=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}var rr=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ie(!1),this.onMicrotaskEmpty=new ie(!1),this.onStable=new ie(!1),this.onError=new ie(!1),typeof Zone>"u")throw new ct(908,!1);Zone.assertZonePatched();let n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=!i&&r,n.shouldCoalesceRunChangeDetection=i,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=IQ().nativeRequestAnimationFrame,LQ(n)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ct(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ct(909,!1)}run(t,r,i){return this._inner.run(t,r,i)}runTask(t,r,i,n){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+n,t,PQ,I3,I3);try{return o.runTask(a,r,i)}finally{o.cancelTask(a)}}runGuarded(t,r,i){return this._inner.runGuarded(t,r,i)}runOutsideAngular(t){return this._outer.run(t)}},PQ={};function p1(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function kQ(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ma,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,yx(e),e.isCheckStableRunning=!0,p1(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),yx(e))}function LQ(e){let t=()=>{kQ(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,i,n,o,a,s)=>{if(FQ(s))return r.invokeTask(n,o,a,s);try{return P3(e),r.invokeTask(n,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),k3(e)}},onInvoke:(r,i,n,o,a,s,l)=>{try{return P3(e),r.invoke(n,o,a,s,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),k3(e)}},onHasTask:(r,i,n,o)=>{r.hasTask(n,o),i===n&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,yx(e),p1(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,n,o)=>(r.handleError(n,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function yx(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function P3(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function k3(e){e._nesting--,p1(e)}function FQ(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var LL=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Ct({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Cx(e,t,r){let i=r?e.styles:null,n=r?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)n=a3(n,s);else if(o==2){let l=s,c=t[++a];i=a3(i,l+": "+c+";")}}r?e.styles=i:e.stylesWithoutHost=i,r?e.classes=n:e.classesWithoutHost=n}var bx=class extends u1{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let r=Vu(t);return new fm(r,this.ngModule)}};function L3(e){let t=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:r})}return t}function OQ(e){let t=e.toLowerCase();return t==="svg"?gZ:t==="math"?fZ:null}var Sx=class{constructor(t,r){this.injector=t,this.parentInjector=r}get(t,r,i){i=Cm(i);let n=this.injector.get(t,HS,i);return n!==HS||r===HS?n:this.parentInjector.get(t,r,i)}},fm=class extends gm{get inputs(){let t=this.componentDef,r=t.inputTransforms,i=L3(t.inputs);if(r!==null)for(let n of i)r.hasOwnProperty(n.propName)&&(n.transform=r[n.propName]);return i}get outputs(){return L3(this.componentDef.outputs)}constructor(t,r){super(),this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=jK(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!r}create(t,r,i,n){let o=Et(null);try{n=n||this.ngModule;let a=n instanceof Io?n:n?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let s=a?new Sx(t,a):t,l=s.get(pp,null);if(l===null)throw new ct(407,!1);let c=s.get(AQ,null),u=s.get(LL,null),d=s.get(fx,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",f=i?GX(p,i,this.componentDef.encapsulation,s):nL(p,g,OQ(g)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let m=null;f!==null&&(m=e1(f,s,!0));let y=s1(0,null,null,1,0,null,null,null,null,null,null),w=Am(null,y,null,v,null,null,h,p,s,null,m);Wx(w);let C,S;try{let b=this.componentDef,x,E=null;b.findHostDirectiveDefs?(x=[],E=new Map,b.findHostDirectiveDefs(b,x,E),x.push(b)):x=[b];let M=NQ(w,f),T=zQ(M,f,b,x,w,h,p);S=wk(y,Kn),f&&GQ(p,b,f,i),r!==void 0&&HQ(S,this.ngContentSelectors,r),C=BQ(T,b,x,E,w,[UQ]),c1(y,w,null)}finally{jx()}return new xx(this.componentType,C,_m(S,w),w,S)}finally{Et(o)}}},xx=class extends vx{constructor(t,r,i,n,o){super(),this.location=i,this._rootLView=n,this._tNode=o,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new hp(n,void 0,!1),this.componentType=t}setInput(t,r){let i=this._tNode.inputs,n;if(i!==null&&(n=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),r))return;let o=this._rootLView;l1(o[nt],o,n,t,r),this.previousInputValues.set(t,r);let a=qu(this._tNode.index,o);kL(a)}}get injector(){return new Nl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function NQ(e,t){let r=e[nt],i=Kn;return e[i]=t,Im(r,i,2,"#host",null)}function zQ(e,t,r,i,n,o,a){let s=n[nt];VQ(i,e,t,a);let l=null;t!==null&&(l=e1(t,n[Gu]));let c=o.rendererFactory.createRenderer(t,r),u=16;r.signals?u=4096:r.onPush&&(u=64);let d=Am(n,wL(r),null,u,n[e.index],e,o,c,null,null,l);return s.firstCreatePass&&hx(s,e,i.length-1),Pm(n,d),n[e.index]=d}function VQ(e,t,r,i){for(let n of e)t.mergedAttrs=Lx(t.mergedAttrs,n.hostAttrs);t.mergedAttrs!==null&&(Cx(t,t.mergedAttrs,!0),r!==null&&dL(i,r,t))}function BQ(e,t,r,i,n,o){let a=Lo(),s=n[nt],l=Po(a,n);SL(s,n,a,r,null,i);for(let u=0;u<r.length;u++){let d=a.directiveStart+u,h=Uu(n,s,d,a);Ul(h,n)}xL(s,n,a),l&&Ul(l,n);let c=Uu(n,s,a.directiveStart+a.componentOffset,a);if(e[ya]=n[ya]=c,o!==null)for(let u of o)u(c,t);return vL(s,a,n),c}function GQ(e,t,r,i){if(i)XS(e,r,["ng-version","17.3.12"]);else{let{attrs:n,classes:o}=$K(t.selectors[0]);n&&XS(e,r,n),o&&o.length>0&&uL(e,r,o.join(" "))}}function HQ(e,t,r){let i=e.projection=[];for(let n=0;n<t.length;n++){let o=r[n];i.push(o!=null?Array.from(o):null)}}function UQ(){let e=Lo();qx(zt()[nt],e)}var Zu=(()=>{class e{static{this.__NG_ELEMENT_ID__=WQ}}return e})();function WQ(){let e=Lo();return $Q(e,zt())}var jQ=Zu,FL=class extends jQ{constructor(t,r,i){super(),this._lContainer=t,this._hostTNode=r,this._hostLView=i}get element(){return _m(this._hostTNode,this._hostLView)}get injector(){return new Nl(this._hostTNode,this._hostLView)}get parentInjector(){let t=Kx(this._hostTNode,this._hostLView);if(Ok(t)){let r=lm(t,this._hostLView),i=sm(t),n=r[nt].data[i+8];return new Nl(n,r)}else return new Nl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let r=F3(this._lContainer);return r!==null&&r[t]||null}get length(){return this._lContainer.length-ln}createEmbeddedView(t,r,i){let n,o;typeof i=="number"?n=i:i!=null&&(n=i.index,o=i.injector);let a=R3(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(r||{},o,a);return this.insertImpl(s,n,_3(this._hostTNode,a)),s}createComponent(t,r,i,n,o){let a=t&&!cZ(t),s;if(a)s=r;else{let g=r||{};s=g.index,i=g.injector,n=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let l=a?t:new fm(Vu(t)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let f=(a?c:this.parentInjector).get(Io,null);f&&(o=f)}let u=Vu(l.componentType??{}),d=R3(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,n,h,o);return this.insertImpl(p.hostView,s,_3(this._hostTNode,d)),p}insert(t,r){return this.insertImpl(t,r,!0)}insertImpl(t,r,i){let n=t._lView;if(wZ(n)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let l=n[zr],c=new FL(l,l[Zn],l[zr]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(r),a=this._lContainer;return dQ(a,n,o,i),t.attachToViewContainerRef(),X3(US(a),o,t),t}move(t,r){return this.insert(t,r)}indexOf(t){let r=F3(this._lContainer);return r!==null?r.indexOf(t):-1}remove(t){let r=this._adjustIndex(t,-1),i=ux(this._lContainer,r);i&&(tm(US(this._lContainer),r),sL(i[nt],i))}detach(t){let r=this._adjustIndex(t,-1),i=ux(this._lContainer,r);return i&&tm(US(this._lContainer),r)!=null?new hp(i):null}_adjustIndex(t,r=0){return t??this.length+r}};function F3(e){return e[nm]}function US(e){return e[nm]||(e[nm]=[])}function $Q(e,t){let r,i=t[e.index];return xa(i)?r=i:(r=DL(i,t,null,e),t[e.index]=r,Pm(t,r)),qQ(r,t,e,i),new FL(r,e,t)}function YQ(e,t){let r=e[Xr],i=r.createComment(""),n=Po(t,e),o=n1(r,n);return hm(r,o,i,AX(r,n),!1),i}var qQ=XQ,KQ=()=>!1;function ZQ(e,t,r){return KQ(e,t,r)}function XQ(e,t,r,i){if(e[Bl])return;let n;r.type&8?n=Ca(i):n=YQ(t,r),e[Bl]=n}var Wu=class{};var vm=class extends Wu{constructor(t){super(),this.componentFactoryResolver=new bx(this),this.instance=null;let r=new lp([...t.providers,{provide:Wu,useValue:this},{provide:u1,useValue:this.componentFactoryResolver}],t.parent||zx(),t.debugName,new Set(["environment"]));this.injector=r,t.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function QQ(e,t,r=null){return new vm({providers:e,parent:t,debugName:r,runEnvironmentInitializers:!0}).injector}var Lm=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Jh(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function OL(e){return eJ(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function JQ(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else{let r=e[Symbol.iterator](),i;for(;!(i=r.next()).done;)t(i.value)}}function eJ(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function g1(e,t,r){return e[t]=r}function ju(e,t,r){let i=e[t];return Object.is(i,r)?!1:(e[t]=r,!0)}function f1(e,t,r,i){let n=ju(e,t,r);return ju(e,t+1,i)||n}function tJ(e,t,r,i,n){let o=f1(e,t,r,i);return ju(e,t+2,n)||o}function rJ(e){return(e.flags&32)===32}function iJ(e,t,r,i,n,o,a,s,l){let c=t.consts,u=Im(t,e,4,a||null,am(c,s));bL(t,r,u,am(c,l)),qx(t,u);let d=u.tView=s1(2,u,i,n,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function Xu(e,t,r,i,n,o,a,s){let l=zt(),c=ko(),u=e+Kn,d=c.firstCreatePass?iJ(u,c,l,t,r,i,n,o,a):c.data[u];mp(d,!1);let h=nJ(c,l,d,e);$x()&&o1(c,l,h,d),Ul(h,l);let p=DL(h,l,h,d);return l[u]=p,Pm(l,p),ZQ(p,d,l),gk(d)&&mL(c,l,d),a!=null&&yL(l,d,s),Xu}var nJ=oJ;function oJ(e,t,r,i){return Yx(!0),t[Xr].createComment("")}function NL(e,t,r,i){return ju(e,Mk(),r)?t+np(r)+i:vs}function aJ(e,t,r,i,n,o){let a=IZ(),s=f1(e,a,r,n);return kZ(2),s?t+np(r)+i+np(n)+o:vs}function Fo(e,t,r){let i=zt(),n=Mk();if(ju(i,n,t)){let o=ko(),a=kk();CL(o,a,i,e,t,i[Xr],r,!1)}return Fo}function O3(e,t,r,i,n){let o=t.inputs,a=n?"class":"style";l1(e,r,o[a],a,i)}function sJ(e,t,r,i,n,o){let a=t.consts,s=am(a,n),l=Im(t,e,2,i,s);return bL(t,r,l,am(a,o)),l.attrs!==null&&Cx(l,l.attrs,!1),l.mergedAttrs!==null&&Cx(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function un(e,t,r,i){let n=zt(),o=ko(),a=Kn+e,s=n[Xr],l=o.firstCreatePass?sJ(a,o,n,t,r,i):o.data[a],c=lJ(o,n,l,s,t,e);n[a]=c;let u=gk(l);return mp(l,!0),dL(s,c,l),!rJ(l)&&$x()&&o1(o,n,c,l),xZ()===0&&Ul(c,n),DZ(),u&&(mL(o,n,l),vL(o,l,n)),i!==null&&yL(n,l),un}function dn(){let e=Lo();Ek()?AZ():(e=e.parent,mp(e,!1));let t=e;TZ(t)&&_Z(),EZ();let r=ko();return r.firstCreatePass&&(qx(r,e),pk(e)&&r.queries.elementEnd(e)),t.classesWithoutHost!=null&&UZ(t)&&O3(r,t,zt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&WZ(t)&&O3(r,t,zt(),t.stylesWithoutHost,!1),dn}function Da(e,t,r,i){return un(e,t,r,i),dn(),Da}var lJ=(e,t,r,i,n,o)=>(Yx(!0),nL(i,n,VZ()));var Fl=void 0;function cJ(e){let t=e,r=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return r===1&&i===0?1:5}var uJ=["en",[["a","p"],["AM","PM"],Fl],[["AM","PM"],Fl,Fl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fl,"{1} 'at' {0}",Fl],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",cJ],WS={};function v1(e){let t=dJ(e),r=N3(t);if(r)return r;let i=t.split("-")[0];if(r=N3(i),r)return r;if(i==="en")return uJ;throw new ct(701,!1)}function N3(e){return e in WS||(WS[e]=ma.ng&&ma.ng.common&&ma.ng.common.locales&&ma.ng.common.locales[e]),WS[e]}var Qu=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Qu||{});function dJ(e){return e.toLowerCase().replace(/_/g,"-")}var mm="en-US";var hJ=mm;function pJ(e){typeof e=="string"&&(hJ=e.toLowerCase().replace(/_/g,"-"))}function ms(e=1){return zZ(e)}function yp(e,t,r,i,n){let o=zt(),a=NL(o,t,r,i);if(a!==vs){let s=ko(),l=kk();CL(s,l,o,e,a,o[Xr],n,!1)}return yp}function gJ(e,t,r,i){r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),t[r]=i}function Ju(e,t=""){let r=zt(),i=ko(),n=e+Kn,o=i.firstCreatePass?Im(i,n,1,t,null):i.data[n],a=fJ(i,r,o,t,e);r[n]=a,$x()&&o1(i,r,a,o),mp(o,!1)}var fJ=(e,t,r,i,n)=>(Yx(!0),yX(t[Xr],i));function ed(e,t,r){let i=zt(),n=NL(i,e,t,r);return n!==vs&&ML(i,Tm(),n),ed}function m1(e,t,r,i,n){let o=zt(),a=aJ(o,e,t,r,i,n);return a!==vs&&ML(o,Tm(),a),m1}function vJ(e,t,r){let i=ko();if(i.firstCreatePass){let n=Yu(e);Dx(r,i.data,i.blueprint,n,!0),Dx(t,i.data,i.blueprint,n,!1)}}function Dx(e,t,r,i,n){if(e=Zr(e),Array.isArray(e))for(let o=0;o<e.length;o++)Dx(e[o],t,r,i,n);else{let o=ko(),a=zt(),s=Lo(),l=Bu(e)?e:Zr(e.provide),c=ck(e),u=s.providerIndexes&1048575,d=s.directiveStart,h=s.providerIndexes>>20;if(Bu(e)||!e.multi){let p=new Hl(c,n,Kt),g=$S(l,t,n?u:u+h,d);g===-1?(ox(um(s,a),o,l),jS(o,e,t.length),t.push(l),s.directiveStart++,s.directiveEnd++,n&&(s.providerIndexes+=1048576),r.push(p),a.push(p)):(r[g]=p,a[g]=p)}else{let p=$S(l,t,u+h,d),g=$S(l,t,u,u+h),f=p>=0&&r[p],v=g>=0&&r[g];if(n&&!v||!n&&!f){ox(um(s,a),o,l);let m=wJ(n?yJ:mJ,r.length,n,i,c);!n&&v&&(r[g].providerFactory=m),jS(o,e,t.length,0),t.push(l),s.directiveStart++,s.directiveEnd++,n&&(s.providerIndexes+=1048576),r.push(m),a.push(m)}else{let m=zL(r[n?g:p],c,!n&&i);jS(o,e,p>-1?p:g,m)}!n&&i&&v&&r[g].componentProviders++}}}function jS(e,t,r,i){let n=Bu(t),o=tZ(t);if(n||o){let l=(o?Zr(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!n&&t.multi){let u=c.indexOf(r);u===-1?c.push(r,[i,l]):c[u+1].push(i,l)}else c.push(r,l)}}}function zL(e,t,r){return r&&e.componentProviders++,e.multi.push(t)-1}function $S(e,t,r,i){for(let n=r;n<i;n++)if(t[n]===e)return n;return-1}function mJ(e,t,r,i){return Ex(this.multi,[])}function yJ(e,t,r,i){let n=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=Uu(r,r[nt],this.providerFactory.index,i);o=s.slice(0,a),Ex(n,o);for(let l=a;l<s.length;l++)o.push(s[l])}else o=[],Ex(n,o);return o}function Ex(e,t){for(let r=0;r<e.length;r++){let i=e[r];t.push(i())}return t}function wJ(e,t,r,i,n){let o=new Hl(e,r,Kt);return o.multi=[],o.index=t,o.componentProviders=0,zL(o,n,i&&!r),o}function VL(e,t=[]){return r=>{r.providersResolver=(i,n)=>vJ(i,n?n(e):e,t)}}var CJ=(()=>{class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ak(!1,r.type),n=i.length>0?QQ([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,n)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ct({token:e,providedIn:"environment",factory:()=>new e(Qe(Io))})}}return e})();function ys(e){h1("NgStandalone"),e.getStandaloneInjector=t=>t.get(CJ).getOrCreateStandaloneInjector(e)}function BL(e,t,r,i,n,o){return xJ(zt(),Ux(),e,t,r,i,n,o)}function y1(e,t){let r=e[t];return r===vs?void 0:r}function bJ(e,t,r,i,n,o){let a=t+r;return ju(e,a,n)?g1(e,a+1,o?i.call(o,n):i(n)):y1(e,a+1)}function SJ(e,t,r,i,n,o,a){let s=t+r;return f1(e,s,n,o)?g1(e,s+2,a?i.call(a,n,o):i(n,o)):y1(e,s+2)}function xJ(e,t,r,i,n,o,a,s){let l=t+r;return tJ(e,l,n,o,a)?g1(e,l+3,s?i.call(s,n,o,a):i(n,o,a)):y1(e,l+3)}function wp(e,t){let r=ko(),i,n=e+Kn;r.firstCreatePass?(i=DJ(t,r.pipeRegistry),r.data[n]=i,i.onDestroy&&(r.destroyHooks??=[]).push(n,i.onDestroy)):i=r.data[n];let o=i.factory||(i.factory=zl(i.type,!0)),a,s=mi(Kt);try{let l=cm(!1),c=o();return cm(l),gJ(r,zt(),n,c),c}finally{mi(s)}}function DJ(e,t){if(t)for(let r=t.length-1;r>=0;r--){let i=t[r];if(e===i.name)return i}}function Fm(e,t,r){let i=e+Kn,n=zt(),o=Ck(n,i);return HL(n,i)?bJ(n,Ux(),t,o.transform,r,o):o.transform(r)}function GL(e,t,r,i){let n=e+Kn,o=zt(),a=Ck(o,n);return HL(o,n)?SJ(o,Ux(),t,a.transform,r,i,a):a.transform(r,i)}function HL(e,t){return e[nt].data[t].pure}var UL=new yt("");function w1(e){return!!e&&typeof e.then=="function"}function WL(e){return!!e&&typeof e.subscribe=="function"}var EJ=new yt(""),jL=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Nt(EJ,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let n of this.appInits){let o=n();if(w1(o))r.push(o);else if(WL(o)){let a=new Promise((s,l)=>{o.subscribe({complete:s,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(n=>{this.reject(n)}),r.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),$L=new yt("");function MJ(){FP(()=>{throw new ct(600,!1)})}function TJ(e){return e.isBoundToModule}function _J(e,t,r){try{let i=r();return w1(i)?i.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}var Om=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Nt($k),this.afterRenderEffectManager=Nt(LL),this.externalTestViews=new Set,this.beforeRender=new cs,this.afterTick=new cs,this.componentTypes=[],this.components=[],this.isStable=Nt(Lm).hasPendingTasks.pipe(To(r=>!r)),this._injector=Nt(Io)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let n=r instanceof gm;if(!this._injector.get(jL).done){let h=!n&&KK(r),p=!1;throw new ct(405,p)}let a;n?a=r:a=this._injector.get(u1).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let s=TJ(a)?void 0:this._injector.get(Wu),l=i||a.selector,c=a.create(Zx.NULL,[],l,s),u=c.location.nativeElement,d=c.injector.get(UL,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),YS(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new ct(101,!1);let i=Et(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(n){this.internalErrorHandler(n)}finally{this.afterTick.next(),this._runningTick=!1,Et(i)}}detectChangesInAttachedViews(r){let i=0,n=this.afterRenderEffectManager;for(;;){if(i===_L)throw new ct(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:s}of this._views)RJ(a,o,s)}if(i++,n.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Mx(o))&&(n.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Mx(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;YS(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get($L,[]);[...this._bootstrapListeners,...i].forEach(n=>n(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>YS(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ct(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function YS(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}function RJ(e,t,r){!t&&!Mx(e)||AJ(e,r,t)}function Mx(e){return Hx(e)}function AJ(e,t,r){let i;r?(i=0,e[Ue]|=1024):e[Ue]&64?i=0:i=1,RL(e,t,i)}var IJ=(()=>{class e{constructor(){this.zone=Nt(rr),this.applicationRef=Nt(Om)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function PJ(e){return[{provide:rr,useFactory:e},{provide:sp,multi:!0,useFactory:()=>{let t=Nt(IJ,{optional:!0});return()=>t.initialize()}},{provide:sp,multi:!0,useFactory:()=>{let t=Nt(OJ);return()=>{t.initialize()}}},{provide:$k,useFactory:kJ}]}function kJ(){let e=Nt(rr),t=Nt(ba);return r=>e.runOutsideAngular(()=>t.handleError(r))}function LJ(e){let t=PJ(()=>new rr(FJ(e)));return Sm([[],t])}function FJ(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var OJ=(()=>{class e{constructor(){this.subscription=new Or,this.initialized=!1,this.zone=Nt(rr),this.pendingTasks=Nt(Lm)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{rr.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{rr.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function NJ(){return typeof $localize<"u"&&$localize.locale||mm}var Nm=new yt("",{providedIn:"root",factory:()=>Nt(Nm,lt.Optional|lt.SkipSelf)||NJ()});var YL=new yt("");var Qv=null;function zJ(e=[],t){return Zx.create({name:t,providers:[{provide:xm,useValue:"platform"},{provide:YL,useValue:new Set([()=>Qv=null])},...e]})}function VJ(e=[]){if(Qv)return Qv;let t=zJ(e);return Qv=t,MJ(),BJ(t),t}function BJ(e){e.get(Qx,null)?.forEach(r=>r())}var Tx=class{constructor(){}supports(t){return OL(t)}create(t){return new _x(t)}},GJ=(e,t)=>t,_x=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||GJ}forEachItem(t){let r;for(r=this._itHead;r!==null;r=r._next)t(r)}forEachOperation(t){let r=this._itHead,i=this._removalsHead,n=0,o=null;for(;r||i;){let a=!i||r&&r.currentIndex<z3(i,n,o)?r:i,s=z3(a,n,o),l=a.currentIndex;if(a===i)n--,i=i._nextRemoved;else if(r=r._next,a.previousIndex==null)n++;else{o||(o=[]);let c=s-n,u=l-n;if(c!=u){for(let h=0;h<c;h++){let p=h<o.length?o[h]:o[h]=0,g=p+h;u<=g&&g<c&&(o[h]=p+1)}let d=a.previousIndex;o[d]=u-c}}s!==l&&t(a,s,l)}}forEachPreviousItem(t){let r;for(r=this._previousItHead;r!==null;r=r._nextPrevious)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;r!==null;r=r._nextAdded)t(r)}forEachMovedItem(t){let r;for(r=this._movesHead;r!==null;r=r._nextMoved)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;r!==null;r=r._nextRemoved)t(r)}forEachIdentityChange(t){let r;for(r=this._identityChangesHead;r!==null;r=r._nextIdentityChange)t(r)}diff(t){if(t==null&&(t=[]),!OL(t))throw new ct(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r=this._itHead,i=!1,n,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),r===null||!Object.is(r.trackById,a)?(r=this._mismatch(r,o,a,s),i=!0):(i&&(r=this._verifyReinsertion(r,o,a,s)),Object.is(r.item,o)||this._addIdentityChange(r,o)),r=r._next}else n=0,JQ(t,s=>{a=this._trackByFn(n,s),r===null||!Object.is(r.trackById,a)?(r=this._mismatch(r,s,a,n),i=!0):(i&&(r=this._verifyReinsertion(r,s,a,n)),Object.is(r.item,s)||this._addIdentityChange(r,s)),r=r._next,n++}),this.length=n;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,r,i,n){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,o,n)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,n),t!==null?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,o,n)):t=this._addAfter(new Rx(r,i),o,n)),t}_verifyReinsertion(t,r,i,n){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,n):t.currentIndex!=n&&(t.currentIndex=n,this._addToMoves(t,n)),t}_truncate(t){for(;t!==null;){let r=t._next;this._addToRemovals(this._unlink(t)),t=r}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,r,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let n=t._prevRemoved,o=t._nextRemoved;return n===null?this._removalsHead=o:n._nextRemoved=o,o===null?this._removalsTail=n:o._prevRemoved=n,this._insertAfter(t,r,i),this._addToMoves(t,i),t}_moveAfter(t,r,i){return this._unlink(t),this._insertAfter(t,r,i),this._addToMoves(t,i),t}_addAfter(t,r,i){return this._insertAfter(t,r,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,r,i){let n=r===null?this._itHead:r._next;return t._next=n,t._prev=r,n===null?this._itTail=t:n._prev=t,r===null?this._itHead=t:r._next=t,this._linkedRecords===null&&(this._linkedRecords=new ym),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let r=t._prev,i=t._next;return r===null?this._itHead=i:r._next=i,i===null?this._itTail=r:i._prev=r,t}_addToMoves(t,r){return t.previousIndex===r||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ym),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,r){return t.item=r,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Rx=class{constructor(t,r){this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ax=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,r){let i;for(i=this._head;i!==null;i=i._nextDup)if((r===null||r<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let r=t._prevDup,i=t._nextDup;return r===null?this._head=i:r._nextDup=i,i===null?this._tail=r:i._prevDup=r,this._head===null}},ym=class{constructor(){this.map=new Map}put(t){let r=t.trackById,i=this.map.get(r);i||(i=new Ax,this.map.set(r,i)),i.add(t)}get(t,r){let i=t,n=this.map.get(i);return n?n.get(t,r):null}remove(t){let r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function z3(e,t,r){let i=e.previousIndex;if(i===null)return i;let n=0;return r&&i<r.length&&(n=r[i]),i+t+n}function V3(){return new C1([new Tx])}var C1=(()=>{class e{static{this.\u0275prov=Ct({token:e,providedIn:"root",factory:V3})}constructor(r){this.factories=r}static create(r,i){if(i!=null){let n=i.factories.slice();r=r.concat(n)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||V3()),deps:[[e,new kK,new Z3]]}}find(r){let i=this.factories.find(n=>n.supports(r));if(i!=null)return i;throw new ct(901,!1)}}return e})();function qL(e){try{let{rootComponent:t,appProviders:r,platformProviders:i}=e,n=VJ(i),o=[LJ(),...r||[]],s=new vm({providers:o,parent:n,debugName:"",runEnvironmentInitializers:!1}).injector,l=s.get(rr);return l.run(()=>{s.resolveInjectorInitializers();let c=s.get(ba,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:p=>{c.handleError(p)}})});let d=()=>s.destroy(),h=n.get(YL);return h.add(d),s.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),_J(c,l,()=>{let p=s.get(jL);return p.runInitializers(),p.donePromise.then(()=>{let g=s.get(Nm,mm);pJ(g||mm);let f=s.get(Om);return t!==void 0&&f.bootstrap(t),f})})})}catch(t){return Promise.reject(t)}}var JL=null;function M1(){return JL}function eF(e){JL??=e}var zm=class{};var Oo=new yt("");var tF=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(tF||{});var Ea={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Cp(e,t){let r=v1(e),i=r[Qu.NumberSymbols][t];if(typeof i>"u"){if(t===Ea.CurrencyDecimal)return r[Qu.NumberSymbols][Ea.Decimal];if(t===Ea.CurrencyGroup)return r[Qu.NumberSymbols][Ea.Group]}return i}function WJ(e,t){return v1(e)[Qu.NumberFormats][t]}var jJ=/^(\d+)?\.((\d+)(-(\d+))?)?$/,KL=22,Vm=".",bp="0",$J=";",YJ=",",b1="#";function qJ(e,t,r,i,n,o,a=!1){let s="",l=!1;if(!isFinite(e))s=Cp(r,Ea.Infinity);else{let c=QJ(e);a&&(c=XJ(c));let u=t.minInt,d=t.minFrac,h=t.maxFrac;if(o){let y=o.match(jJ);if(y===null)throw new Error(`${o} is not a valid digit info`);let w=y[1],C=y[3],S=y[5];w!=null&&(u=S1(w)),C!=null&&(d=S1(C)),S!=null?h=S1(S):C!=null&&d>h&&(h=d)}JJ(c,d,h);let p=c.digits,g=c.integerLen,f=c.exponent,v=[];for(l=p.every(y=>!y);g<u;g++)p.unshift(0);for(;g<0;g++)p.unshift(0);g>0?v=p.splice(g,p.length):(v=p,p=[0]);let m=[];for(p.length>=t.lgSize&&m.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)m.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&m.unshift(p.join("")),s=m.join(Cp(r,i)),v.length&&(s+=Cp(r,n)+v.join("")),f&&(s+=Cp(r,Ea.Exponential)+"+"+f)}return e<0&&!l?s=t.negPre+s+t.negSuf:s=t.posPre+s+t.posSuf,s}function KJ(e,t,r){let i=WJ(t,tF.Decimal),n=ZJ(i,Cp(t,Ea.MinusSign));return qJ(e,n,t,Ea.Group,Ea.Decimal,r)}function ZJ(e,t="-"){let r={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=e.split($J),n=i[0],o=i[1],a=n.indexOf(Vm)!==-1?n.split(Vm):[n.substring(0,n.lastIndexOf(bp)+1),n.substring(n.lastIndexOf(bp)+1)],s=a[0],l=a[1]||"";r.posPre=s.substring(0,s.indexOf(b1));for(let u=0;u<l.length;u++){let d=l.charAt(u);d===bp?r.minFrac=r.maxFrac=u+1:d===b1?r.maxFrac=u+1:r.posSuf+=d}let c=s.split(YJ);if(r.gSize=c[1]?c[1].length:0,r.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let u=n.length-r.posPre.length-r.posSuf.length,d=o.indexOf(b1);r.negPre=o.substring(0,d).replace(/'/g,""),r.negSuf=o.slice(d+u).replace(/'/g,"")}else r.negPre=t+r.posPre,r.negSuf=r.posSuf;return r}function XJ(e){if(e.digits[0]===0)return e;let t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(t===0?e.digits.push(0,0):t===1&&e.digits.push(0),e.integerLen+=2),e}function QJ(e){let t=Math.abs(e)+"",r=0,i,n,o,a,s;for((n=t.indexOf(Vm))>-1&&(t=t.replace(Vm,"")),(o=t.search(/e/i))>0?(n<0&&(n=o),n+=+t.slice(o+1),t=t.substring(0,o)):n<0&&(n=t.length),o=0;t.charAt(o)===bp;o++);if(o===(s=t.length))i=[0],n=1;else{for(s--;t.charAt(s)===bp;)s--;for(n-=o,i=[],a=0;o<=s;o++,a++)i[a]=Number(t.charAt(o))}return n>KL&&(i=i.splice(0,KL-1),r=n-1,n=1),{digits:i,exponent:r,integerLen:n}}function JJ(e,t,r){if(t>r)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${r}).`);let i=e.digits,n=i.length-e.integerLen,o=Math.min(Math.max(t,n),r),a=o+e.integerLen,s=i[a];if(a>0){i.splice(Math.max(e.integerLen,a));for(let d=a;d<i.length;d++)i[d]=0}else{n=Math.max(0,n),e.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let d=1;d<a;d++)i[d]=0}if(s>=5)if(a-1<0){for(let d=0;d>a;d--)i.unshift(0),e.integerLen++;i.unshift(1),e.integerLen++}else i[a-1]++;for(;n<Math.max(0,o);n++)i.push(0);let l=o!==0,c=t+e.integerLen,u=i.reduceRight(function(d,h,p,g){return h=h+d,g[p]=h<10?h:h-10,l&&(g[p]===0&&p>=c?g.pop():l=!1),h>=10?1:0},0);u&&(i.unshift(u),e.integerLen++)}function S1(e){let t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}function Bm(e,t){t=encodeURIComponent(t);for(let r of e.split(";")){let i=r.indexOf("="),[n,o]=i==-1?[r,""]:[r.slice(0,i),r.slice(i+1)];if(n.trim()===t)return decodeURIComponent(o)}return null}var x1=/\s+/,ZL=[],rF=(()=>{class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=ZL,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(x1):ZL}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(x1):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let n=this.stateMap.get(r);n!==void 0?(n.enabled!==i&&(n.changed=!0,n.enabled=i),n.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],n=r[1];n.changed?(this._toggleClass(i,n.enabled),n.changed=!1):n.touched||(n.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),n.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(x1).forEach(n=>{i?this._renderer.addClass(this._ngEl.nativeElement,n):this._renderer.removeClass(this._ngEl.nativeElement,n)})}static{this.\u0275fac=function(i){return new(i||e)(Kt(Ku),Kt(d1))}}static{this.\u0275dir=bm({type:e,selectors:[["","ngClass",""]],inputs:{klass:[ps.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return e})();var D1=class{constructor(t,r,i,n){this.$implicit=t,this.ngForOf=r,this.index=i,this.count=n}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},iF=(()=>{class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,n){this._viewContainer=r,this._template=i,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((n,o,a)=>{if(n.previousIndex==null)i.createEmbeddedView(this._template,new D1(n.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let s=i.get(o);i.move(s,a),XL(s,n)}});for(let n=0,o=i.length;n<o;n++){let s=i.get(n).context;s.index=n,s.count=o,s.ngForOf=this._ngForOf}r.forEachIdentityChange(n=>{let o=i.get(n.currentIndex);XL(o,n)})}static ngTemplateContextGuard(r,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(Kt(Zu),Kt(km),Kt(C1))}}static{this.\u0275dir=bm({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function XL(e,t){e.context.$implicit=t.item}var Gm=(()=>{class e{constructor(r,i){this._viewContainer=r,this._context=new E1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){QL("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){QL("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(Kt(Zu),Kt(km))}}static{this.\u0275dir=bm({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),E1=class{constructor(){this.$implicit=null,this.ngIf=null}};function QL(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${sn(t)}'.`)}function nF(e,t){return new ct(2100,!1)}var eee=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Hm=(()=>{class e{transform(r){if(r==null)return null;if(typeof r!="string")throw nF(e,r);return r.replace(eee,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=Ox({name:"titlecase",type:e,pure:!0,standalone:!0})}}return e})();var oF=(()=>{class e{constructor(r){this._locale=r}transform(r,i,n){if(!tee(r))return null;n||=this._locale;try{let o=ree(r);return KJ(o,n,i)}catch(o){throw nF(e,o.message)}}static{this.\u0275fac=function(i){return new(i||e)(Kt(Nm,16))}}static{this.\u0275pipe=Ox({name:"number",type:e,pure:!0,standalone:!0})}}return e})();function tee(e){return!(e==null||e===""||e!==e)}function ree(e){if(typeof e=="string"&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if(typeof e!="number")throw new Error(`${e} is not a number`);return e}var jl=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=vp({type:e})}static{this.\u0275inj=fp({})}}return e})(),aF="browser",iee="server";function Um(e){return e===iee}var td=class{};var xp=class{},jm=class{},$l=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(r=>{let i=r.indexOf(":");if(i>0){let n=r.slice(0,i),o=n.toLowerCase(),a=r.slice(i+1).trim();this.maybeSetNormalizedName(n,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((r,i)=>{this.setHeaderEntries(i,r)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([r,i])=>{this.setHeaderEntries(r,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let r=this.headers.get(t.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,r){return this.clone({name:t,value:r,op:"a"})}set(t,r){return this.clone({name:t,value:r,op:"s"})}delete(t,r){return this.clone({name:t,value:r,op:"d"})}maybeSetNormalizedName(t,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(r=>{this.headers.set(r,t.headers.get(r)),this.normalizedNames.set(r,t.normalizedNames.get(r))})}clone(t){let r=new e;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([t]),r}applyUpdate(t){let r=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,r);let n=(t.op==="a"?this.headers.get(r):void 0)||[];n.push(...i),this.headers.set(r,n);break;case"d":let o=t.value;if(!o)this.headers.delete(r),this.normalizedNames.delete(r);else{let a=this.headers.get(r);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,a)}break}}setHeaderEntries(t,r){let i=(Array.isArray(r)?r:[r]).map(o=>o.toString()),n=t.toLowerCase();this.headers.set(n,i),this.maybeSetNormalizedName(t,n)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>t(this.normalizedNames.get(r),this.headers.get(r)))}};var R1=class{encodeKey(t){return sF(t)}encodeValue(t){return sF(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function aee(e,t){let r=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(n=>{let o=n.indexOf("="),[a,s]=o==-1?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,o)),t.decodeValue(n.slice(o+1))],l=r.get(a)||[];l.push(s),r.set(a,l)}),r}var see=/%(\d[a-f0-9])/gi,lee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sF(e){return encodeURIComponent(e).replace(see,(t,r)=>lee[r]??t)}function Wm(e){return`${e}`}var Cs=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new R1,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=aee(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(r=>{let i=t.fromObject[r],n=Array.isArray(i)?i.map(Wm):[Wm(i)];this.map.set(r,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let r=this.map.get(t);return r?r[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,r){return this.clone({param:t,value:r,op:"a"})}appendAll(t){let r=[];return Object.keys(t).forEach(i=>{let n=t[i];Array.isArray(n)?n.forEach(o=>{r.push({param:i,value:o,op:"a"})}):r.push({param:i,value:n,op:"a"})}),this.clone(r)}set(t,r){return this.clone({param:t,value:r,op:"s"})}delete(t,r){return this.clone({param:t,value:r,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let r=this.encoder.encodeKey(t);return this.map.get(t).map(i=>r+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let r=new e({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(t),r}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let r=(t.op==="a"?this.map.get(t.param):void 0)||[];r.push(Wm(t.value)),this.map.set(t.param,r);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],n=i.indexOf(Wm(t.value));n!==-1&&i.splice(n,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var A1=class{constructor(){this.map=new Map}set(t,r){return this.map.set(t,r),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function cee(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function lF(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function cF(e){return typeof Blob<"u"&&e instanceof Blob}function uF(e){return typeof FormData<"u"&&e instanceof FormData}function uee(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Sp=class e{constructor(t,r,i,n){this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(cee(this.method)||n?(this.body=i!==void 0?i:null,o=n):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new $l,this.context??=new A1,!this.params)this.params=new Cs,this.urlWithParams=r;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=r;else{let s=r.indexOf("?"),l=s===-1?"?":s<r.length-1?"&":"";this.urlWithParams=r+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||lF(this.body)||cF(this.body)||uF(this.body)||uee(this.body)?this.body:this.body instanceof Cs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||uF(this.body)?null:cF(this.body)?this.body.type||null:lF(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Cs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let r=t.method||this.method,i=t.url||this.url,n=t.responseType||this.responseType,o=t.transferCache??this.transferCache,a=t.body!==void 0?t.body:this.body,s=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),u)),new e(r,i,a,{params:u,headers:c,context:d,reportProgress:l,responseType:n,withCredentials:s,transferCache:o})}},rd=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(rd||{}),Dp=class{constructor(t,r=qm.Ok,i="OK"){this.headers=t.headers||new $l,this.status=t.status!==void 0?t.status:r,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},I1=class e extends Dp{constructor(t={}){super(t),this.type=rd.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},$m=class e extends Dp{constructor(t={}){super(t),this.type=rd.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Ym=class extends Dp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},qm=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(qm||{});function _1(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var P1=(()=>{class e{constructor(r){this.handler=r}request(r,i,n={}){let o;if(r instanceof Sp)o=r;else{let l;n.headers instanceof $l?l=n.headers:l=new $l(n.headers);let c;n.params&&(n.params instanceof Cs?c=n.params:c=new Cs({fromObject:n.params})),o=new Sp(r,i,n.body!==void 0?n.body:null,{headers:l,context:n.context,params:c,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache})}let a=Uv(o).pipe(PS(l=>this.handler.handle(l)));if(r instanceof Sp||n.observe==="events")return a;let s=a.pipe(IS(l=>l instanceof $m));switch(n.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(To(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return s.pipe(To(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return s.pipe(To(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return s.pipe(To(l=>l.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Cs().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,n={}){return this.request("PATCH",r,_1(n,i))}post(r,i,n={}){return this.request("POST",r,_1(n,i))}put(r,i,n={}){return this.request("PUT",r,_1(n,i))}static{this.\u0275fac=function(i){return new(i||e)(Qe(xp))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})();function dee(e,t){return t(e)}function hee(e,t,r){return(i,n)=>uk(r,()=>t(i,o=>e(o,n)))}var pF=new yt(""),pee=new yt(""),gee=new yt("");var dF=(()=>{class e extends xp{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=Nt(Lm);let n=Nt(gee,{optional:!0});this.backend=n??r}handle(r){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(pF),...this.injector.get(pee,[])]));this.chain=n.reduceRight((o,a)=>hee(o,a,this.injector),dee)}let i=this.pendingTasks.add();return this.chain(r,n=>this.backend.handle(n)).pipe(kS(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||e)(Qe(jm),Qe(Io))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})();var fee=/^\)\]\}',?\n/;function vee(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var hF=(()=>{class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ct(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?tp(i.\u0275loadImpl()):Uv(null)).pipe(rp(()=>new jt(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((f,v)=>a.setRequestHeader(f,v.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let f=r.detectContentTypeHeader();f!==null&&a.setRequestHeader("Content-Type",f)}if(r.responseType){let f=r.responseType.toLowerCase();a.responseType=f!=="json"?f:"text"}let s=r.serializeBody(),l=null,c=()=>{if(l!==null)return l;let f=a.statusText||"OK",v=new $l(a.getAllResponseHeaders()),m=vee(a)||r.url;return l=new I1({headers:v,status:a.status,statusText:f,url:m}),l},u=()=>{let{headers:f,status:v,statusText:m,url:y}=c(),w=null;v!==qm.NoContent&&(w=typeof a.response>"u"?a.responseText:a.response),v===0&&(v=w?qm.Ok:0);let C=v>=200&&v<300;if(r.responseType==="json"&&typeof w=="string"){let S=w;w=w.replace(fee,"");try{w=w!==""?JSON.parse(w):null}catch(b){w=S,C&&(C=!1,w={error:b,text:w})}}C?(o.next(new $m({body:w,headers:f,status:v,statusText:m,url:y||void 0})),o.complete()):o.error(new Ym({error:w,headers:f,status:v,statusText:m,url:y||void 0}))},d=f=>{let{url:v}=c(),m=new Ym({error:f,status:a.status||0,statusText:a.statusText||"Unknown Error",url:v||void 0});o.error(m)},h=!1,p=f=>{h||(o.next(c()),h=!0);let v={type:rd.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(v.total=f.total),r.responseType==="text"&&a.responseText&&(v.partialText=a.responseText),o.next(v)},g=f=>{let v={type:rd.UploadProgress,loaded:f.loaded};f.lengthComputable&&(v.total=f.total),o.next(v)};return a.addEventListener("load",u),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),r.reportProgress&&(a.addEventListener("progress",p),s!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(s),o.next({type:rd.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",u),a.removeEventListener("timeout",d),r.reportProgress&&(a.removeEventListener("progress",p),s!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(i){return new(i||e)(Qe(td))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),gF=new yt(""),mee="XSRF-TOKEN",yee=new yt("",{providedIn:"root",factory:()=>mee}),wee="X-XSRF-TOKEN",Cee=new yt("",{providedIn:"root",factory:()=>wee}),Km=class{},bee=(()=>{class e{constructor(r,i,n){this.doc=r,this.platform=i,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Bm(r,this.cookieName),this.lastCookieString=r),this.lastToken}static{this.\u0275fac=function(i){return new(i||e)(Qe(Oo),Qe(fs),Qe(yee))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})();function See(e,t){let r=e.url.toLowerCase();if(!Nt(gF)||e.method==="GET"||e.method==="HEAD"||r.startsWith("http://")||r.startsWith("https://"))return t(e);let i=Nt(Km).getToken(),n=Nt(Cee);return i!=null&&!e.headers.has(n)&&(e=e.clone({headers:e.headers.set(n,i)})),t(e)}function fF(...e){let t=[P1,hF,dF,{provide:xp,useExisting:dF},{provide:jm,useExisting:hF},{provide:pF,useValue:See,multi:!0},{provide:gF,useValue:!0},{provide:Km,useClass:bee}];for(let r of e)t.push(...r.\u0275providers);return Sm(t)}var F1=class extends zm{constructor(){super(...arguments),this.supportsDOMEvents=!0}},O1=class e extends F1{static makeCurrent(){eF(new e)}onAndCancel(t,r,i){return t.addEventListener(r,i),()=>{t.removeEventListener(r,i)}}dispatchEvent(t,r){t.dispatchEvent(r)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,r){return r=r||this.getDefaultDocument(),r.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,r){return r==="window"?window:r==="document"?t:r==="body"?t.body:null}getBaseHref(t){let r=Eee();return r==null?null:Mee(r)}resetBaseElement(){Ep=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Bm(document.cookie,t)}},Ep=null;function Eee(){return Ep=Ep||document.querySelector("base"),Ep?Ep.getAttribute("href"):null}function Mee(e){return new URL(e,document.baseURI).pathname}var Tee=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),N1=new yt(""),wF=(()=>{class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(n=>{n.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,n){return this._findPluginFor(i).addEventListener(r,i,n)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ct(5101,!1);return this._eventNameToPlugin.set(r,i),i}static{this.\u0275fac=function(i){return new(i||e)(Qe(N1),Qe(rr))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),Zm=class{constructor(t){this._doc=t}},k1="ng-app-id",CF=(()=>{class e{constructor(r,i,n,o={}){this.doc=r,this.appId=i,this.nonce=n,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Um(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(n=>n.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${k1}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(n=>{n.textContent!=null&&i.set(n.textContent,n)}),i}return null}changeUsageCount(r,i){let n=this.styleRef;if(n.has(r)){let o=n.get(r);return o.usage+=i,o.usage}return n.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let n=this.styleNodesInDOM,o=n?.get(i);if(o?.parentNode===r)return n.delete(i),o.removeAttribute(k1),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(k1,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let n=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(n):o.set(i,{elements:[n],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)(Qe(Oo),Qe(Xx),Qe(Jx,8),Qe(fs))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),L1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},V1=/%COMP%/g,bF="%COMP%",_ee=`_nghost-${bF}`,Ree=`_ngcontent-${bF}`,Aee=!0,Iee=new yt("",{providedIn:"root",factory:()=>Aee});function Pee(e){return Ree.replace(V1,e)}function kee(e){return _ee.replace(V1,e)}function SF(e,t){return t.map(r=>r.replace(V1,e))}var vF=(()=>{class e{constructor(r,i,n,o,a,s,l,c=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=n,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Um(s),this.defaultRenderer=new Mp(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ao.ShadowDom&&(i=Xe(ue({},i),{encapsulation:Ao.Emulated}));let n=this.getOrCreateRenderer(r,i);return n instanceof Xm?n.applyToHost(r):n instanceof Tp&&n.applyStyles(),n}getOrCreateRenderer(r,i){let n=this.rendererByCompId,o=n.get(i.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Ao.Emulated:o=new Xm(l,c,i,this.appId,u,a,s,d);break;case Ao.ShadowDom:return new z1(l,c,r,i,a,s,this.nonce,d);default:o=new Tp(l,c,i,u,a,s,d);break}n.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)(Qe(wF),Qe(CF),Qe(Xx),Qe(Iee),Qe(Oo),Qe(fs),Qe(rr),Qe(Jx))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),Mp=class{constructor(t,r,i,n){this.eventManager=t,this.doc=r,this.ngZone=i,this.platformIsServer=n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,r){return r?this.doc.createElementNS(L1[r]||r,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,r){(mF(t)?t.content:t).appendChild(r)}insertBefore(t,r,i){t&&(mF(t)?t.content:t).insertBefore(r,i)}removeChild(t,r){t&&t.removeChild(r)}selectRootElement(t,r){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ct(-5104,!1);return r||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,r,i,n){if(n){r=n+":"+r;let o=L1[n];o?t.setAttributeNS(o,r,i):t.setAttribute(r,i)}else t.setAttribute(r,i)}removeAttribute(t,r,i){if(i){let n=L1[i];n?t.removeAttributeNS(n,r):t.removeAttribute(`${i}:${r}`)}else t.removeAttribute(r)}addClass(t,r){t.classList.add(r)}removeClass(t,r){t.classList.remove(r)}setStyle(t,r,i,n){n&(Wl.DashCase|Wl.Important)?t.style.setProperty(r,i,n&Wl.Important?"important":""):t.style[r]=i}removeStyle(t,r,i){i&Wl.DashCase?t.style.removeProperty(r):t.style[r]=""}setProperty(t,r,i){t!=null&&(t[r]=i)}setValue(t,r){t.nodeValue=r}listen(t,r,i){if(typeof t=="string"&&(t=M1().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${r}`);return this.eventManager.addEventListener(t,r,this.decoratePreventDefault(i))}decoratePreventDefault(t){return r=>{if(r==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(r)):t(r))===!1&&r.preventDefault()}}};function mF(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var z1=class extends Mp{constructor(t,r,i,n,o,a,s,l){super(t,o,a,l),this.sharedStylesHost=r,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=SF(n.id,n.styles);for(let u of c){let d=document.createElement("style");s&&d.setAttribute("nonce",s),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,r){return super.appendChild(this.nodeOrShadowRoot(t),r)}insertBefore(t,r,i){return super.insertBefore(this.nodeOrShadowRoot(t),r,i)}removeChild(t,r){return super.removeChild(this.nodeOrShadowRoot(t),r)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tp=class extends Mp{constructor(t,r,i,n,o,a,s,l){super(t,o,a,s),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=n,this.styles=l?SF(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xm=class extends Tp{constructor(t,r,i,n,o,a,s,l){let c=n+"-"+i.id;super(t,r,i,o,a,s,l,c),this.contentAttr=Pee(c),this.hostAttr=kee(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,r){let i=super.createElement(t,r);return super.setAttribute(i,this.contentAttr,""),i}},Lee=(()=>{class e extends Zm{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,n){return r.addEventListener(i,n,!1),()=>this.removeEventListener(r,i,n)}removeEventListener(r,i,n){return r.removeEventListener(i,n)}static{this.\u0275fac=function(i){return new(i||e)(Qe(Oo))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),yF=["alt","control","meta","shift"],Fee={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oee={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Nee=(()=>{class e extends Zm{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,n){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M1().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),n=i.shift();if(i.length===0||!(n==="keydown"||n==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",s=i.indexOf("code");if(s>-1&&(i.splice(s,1),a="code."),yF.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),a+=c+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=n,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let n=Fee[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(n=r.code,o="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),yF.forEach(a=>{if(a!==n){let s=Oee[a];s(r)&&(o+=a+".")}}),o+=n,o===i)}static eventCallback(r,i,n){return o=>{e.matchEventFullKeyCode(o,r)&&n.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}static{this.\u0275fac=function(i){return new(i||e)(Qe(Oo))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})();function xF(e,t){return qL(ue({rootComponent:e},zee(t)))}function zee(e){return{appProviders:[...Uee,...e?.providers??[]],platformProviders:Hee}}function Vee(){O1.makeCurrent()}function Bee(){return new ba}function Gee(){return Jk(document),document}var Hee=[{provide:fs,useValue:aF},{provide:Qx,useValue:Vee,multi:!0},{provide:Oo,useFactory:Gee,deps:[]}];var Uee=[{provide:xm,useValue:"root"},{provide:ba,useFactory:Bee,deps:[]},{provide:N1,useClass:Lee,multi:!0,deps:[Oo,rr,fs]},{provide:N1,useClass:Nee,multi:!0,deps:[Oo]},vF,CF,wF,{provide:pp,useExisting:vF},{provide:td,useClass:Tee,deps:[]},[]];var B1=function(e,t){return B1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},B1(e,t)};function I(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");B1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Wee=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),jee=function(){function e(){this.browser=new Wee,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Yl=new jee;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Yl.wxa=!0,Yl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Yl.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(Yl.node=!0,Yl.svgSupported=!0):$ee(navigator.userAgent,Yl);function $ee(e,t){var r=t.browser,i=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);i&&(r.firefox=!0,r.version=i[1]),n&&(r.ie=!0,r.version=n[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}var Re=Yl;var Qm=12,G1="sans-serif",Hi=Qm+"px "+G1,Yee=20,qee=100,Kee="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Zee(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var i=String.fromCharCode(r+32),n=(e.charCodeAt(r)-Yee)/qee;t[i]=n}return t}var Xee=Zee(Kee),Vr={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,i){if(!e){var n=Vr.createCanvas();e=n&&n.getContext("2d")}if(e)return t!==i&&(t=e.font=i||Hi),e.measureText(r);r=r||"",i=i||Hi;var o=/((?:\d+)?\.?\d*)px/.exec(i),a=o&&+o[1]||Qm,s=0;if(i.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var c=Xee[r[l]];s+=c==null?a:c*a}return{width:s}}}(),loadImage:function(e,t,r){var i=new Image;return i.onload=t,i.onerror=r,i.src=e,i}};var MF=Er(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),TF=Er(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),id=Object.prototype.toString,ey=Array.prototype,Qee=ey.forEach,Jee=ey.filter,H1=ey.slice,ete=ey.map,DF=function(){}.constructor,Jm=DF?DF.prototype:null,U1="__proto__",tte=2311;function ty(){return tte++}function ql(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function re(e){if(e==null||typeof e!="object")return e;var t=e,r=id.call(e);if(r==="[object Array]"){if(!_p(e)){t=[];for(var i=0,n=e.length;i<n;i++)t[i]=re(e[i])}}else if(TF[r]){if(!_p(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}}}else if(!MF[r]&&!_p(e)&&!bs(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==U1&&(t[a]=re(e[a]))}return t}function fe(e,t,r){if(!J(t)||!J(e))return r?re(t):e;for(var i in t)if(t.hasOwnProperty(i)&&i!==U1){var n=e[i],o=t[i];J(o)&&J(n)&&!O(o)&&!O(n)&&!bs(o)&&!bs(n)&&!EF(o)&&!EF(n)&&!_p(o)&&!_p(n)?fe(n,o,r):(r||!(i in e))&&(e[i]=re(t[i]))}return e}function nd(e,t){for(var r=e[0],i=1,n=e.length;i<n;i++)r=fe(r,e[i],t);return r}function F(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==U1&&(e[r]=t[r]);return e}function Q(e,t,r){for(var i=me(t),n=0;n<i.length;n++){var o=i[n];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}var VPe=Vr.createCanvas;function pe(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r}return-1}function _F(e,t){var r=e.prototype;function i(){}i.prototype=t.prototype,e.prototype=new i;for(var n in r)r.hasOwnProperty(n)&&(e.prototype[n]=r[n]);e.prototype.constructor=e,e.superClass=t}function ot(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var o=i[n];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else Q(e,t,r)}function Vt(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function D(e,t,r){if(e&&t)if(e.forEach&&e.forEach===Qee)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function N(e,t,r){if(!e)return[];if(!t)return ry(e);if(e.map&&e.map===ete)return e.map(t,r);for(var i=[],n=0,o=e.length;n<o;n++)i.push(t.call(r,e[n],n,e));return i}function Er(e,t,r,i){if(e&&t){for(var n=0,o=e.length;n<o;n++)r=t.call(i,r,e[n],n,e);return r}}function Pe(e,t,r){if(!e)return[];if(!t)return ry(e);if(e.filter&&e.filter===Jee)return e.filter(t,r);for(var i=[],n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)&&i.push(e[n]);return i}function RF(e,t,r){if(e&&t){for(var i=0,n=e.length;i<n;i++)if(t.call(r,e[i],i,e))return e[i]}}function me(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function rte(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return function(){return e.apply(t,r.concat(H1.call(arguments)))}}var $=Jm&&Z(Jm.bind)?Jm.call.bind(Jm.bind):rte;function se(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(H1.call(arguments)))}}function O(e){return Array.isArray?Array.isArray(e):id.call(e)==="[object Array]"}function Z(e){return typeof e=="function"}function H(e){return typeof e=="string"}function Rp(e){return id.call(e)==="[object String]"}function be(e){return typeof e=="number"}function J(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function EF(e){return!!MF[id.call(e)]}function Zt(e){return!!TF[id.call(e)]}function bs(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function Ss(e){return e.colorStops!=null}function AF(e){return e.image!=null}function IF(e){return id.call(e)==="[object RegExp]"}function xs(e){return e!==e}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e.length;r<i;r++)if(e[r]!=null)return e[r]}function de(e,t){return e??t}function ur(e,t,r){return e??t??r}function ry(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return H1.apply(e,t)}function od(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function St(e,t){if(!e)throw new Error(t)}function dr(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var PF="__ec_primitive__";function Kl(e){e[PF]=!0}function _p(e){return e[PF]}var ite=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return me(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var i in r)r.hasOwnProperty(i)&&t(r[i],i)},e}(),kF=typeof Map=="function";function nte(){return kF?new Map:new ite}var ote=function(){function e(t){var r=O(t);this.data=nte();var i=this;t instanceof e?t.each(n):t&&D(t,n);function n(o,a){r?i.set(o,a):i.set(a,o)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(i,n){t.call(r,i,n)})},e.prototype.keys=function(){var t=this.data.keys();return kF?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function Y(e){return new ote(e)}function Zl(e,t){for(var r=new e.constructor(e.length+t.length),i=0;i<e.length;i++)r[i]=e[i];for(var n=e.length,i=0;i<t.length;i++)r[i+n]=t[i];return r}function Ds(e,t){var r;if(Object.create)r=Object.create(e);else{var i=function(){};i.prototype=e,r=new i}return t&&F(r,t),r}function iy(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function ne(e,t){return e.hasOwnProperty(t)}function pt(){}var ad=180/Math.PI;var W1=function(e,t){return W1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},W1(e,t)};function ke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");W1(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function No(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function hr(e,t){return e[0]=t[0],e[1]=t[1],e}function yi(e){return[e[0],e[1]]}function LF(e,t,r){return e[0]=t,e[1]=r,e}function j1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Ap(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function Xn(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function ny(e){return Math.sqrt(ate(e))}function ate(e){return e[0]*e[0]+e[1]*e[1]}function sd(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function hn(e,t){var r=ny(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function oy(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var pn=oy;function ste(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Ma=ste;function ld(e,t,r,i){return e[0]=t[0]+i*(r[0]-t[0]),e[1]=t[1]+i*(r[1]-t[1]),e}function Bt(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function Ui(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Wi(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var cd=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),lte=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new cd(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var i=t.offsetX,n=t.offsetY,o=i-this._x,a=n-this._y;this._x=i,this._y=n,r.drift(o,a,t),this.handler.dispatchToElement(new cd(r,t),"drag",t.event);var s=this.handler.findHover(i,n,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new cd(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new cd(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new cd(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new cd(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}(),FF=lte;var cte=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,i,n){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(n=i,i=r,r=null),!i||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===i)return this;var l={h:i,query:r,ctx:n||this,callAtLast:i.zrEventfulCallAtLast},c=o[t].length-1,u=o[t][c];return u&&u.callAtLast?o[t].splice(c,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(r){if(i[t]){for(var n=[],o=0,a=i[t].length;o<a;o++)i[t][o].h!==r&&n.push(i[t][o]);i[t]=n}i[t]&&i[t].length===0&&delete i[t]}else delete i[t];return this},e.prototype.trigger=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],o=this._$eventProcessor;if(n)for(var a=r.length,s=n.length,l=0;l<s;l++){var c=n[l];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,r[0]);break;case 2:c.h.call(c.ctx,r[0],r[1]);break;default:c.h.apply(c.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],o=this._$eventProcessor;if(n)for(var a=r.length,s=r[a-1],l=n.length,c=0;c<l;c++){var u=n[c];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(s);break;case 1:u.h.call(s,r[0]);break;case 2:u.h.call(s,r[0],r[1]);break;default:u.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}(),ir=cte;var ute=Math.log(2);function $1(e,t,r,i,n,o){var a=i+"-"+n,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~n)/ute);return e[r][l]}for(var c=i|1<<r,u=r+1;i&1<<u;)u++;for(var d=0,h=0,p=0;h<s;h++){var g=1<<h;g&n||(d+=(p%2?-1:1)*e[r][h]*$1(e,t-1,u,c,n|g,o),p++)}return o[a]=d,d}function Y1(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},n=$1(r,8,0,0,0,i);if(n!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*$1(r,7,a===0?1:0,1<<a,1<<s,i)/n*t[a];return function(l,c,u){var d=c*o[6]+u*o[7]+1;l[0]=(c*o[0]+u*o[1]+o[2])/d,l[1]=(c*o[3]+u*o[4]+o[5])/d}}}var OF="___zrEVENTSAVED",q1=[];function NF(e,t,r,i,n){return ay(q1,t,i,n,!0)&&ay(e,r,q1[0],q1[1])}function ay(e,t,r,i,n){if(t.getBoundingClientRect&&Re.domSupported&&!K1(t)){var o=t[OF]||(t[OF]={}),a=dte(t,o),s=hte(a,o,n);if(s)return s(e,r,i),!0}return!1}function dte(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var i=["left","right"],n=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,c=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",n[c]+":0",i[1-l]+":auto",n[1-c]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function hte(e,t,r){for(var i=r?"invTrans":"trans",n=t[i],o=t.srcCoords,a=[],s=[],l=!0,c=0;c<4;c++){var u=e[c].getBoundingClientRect(),d=2*c,h=u.left,p=u.top;a.push(h,p),l=l&&o&&h===o[d]&&p===o[d+1],s.push(e[c].offsetLeft,e[c].offsetTop)}return l&&n?n:(t.srcCoords=a,t[i]=r?Y1(s,a):Y1(a,s))}function K1(e){return e.nodeName.toUpperCase()==="CANVAS"}var pte=/([&<>"'])/g,gte={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function gr(e){return e==null?"":(e+"").replace(pte,function(t,r){return gte[r]})}var fte=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Z1=[],vte=Re.browser.firefox&&+Re.browser.version.split(".")[0]<39;function sy(e,t,r,i){return r=r||{},i?zF(e,t,r):vte&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):zF(e,t,r),r}function zF(e,t,r){if(Re.domSupported&&e.getBoundingClientRect){var i=t.clientX,n=t.clientY;if(K1(e)){var o=e.getBoundingClientRect();r.zrX=i-o.left,r.zrY=n-o.top;return}else if(ay(Z1,e,i,n)){r.zrX=Z1[0],r.zrY=Z1[1];return}}r.zrX=r.zrY=0}function ly(e){return e||window.event}function wi(e,t,r){if(t=ly(t),t.zrX!=null)return t;var i=t.type,n=i&&i.indexOf("touch")>=0;if(n){var a=i!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&sy(e,a,t,r)}else{sy(e,t,t,r);var o=mte(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&fte.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function mte(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,i=e.deltaY;if(r==null||i==null)return t;var n=Math.abs(i!==0?i:r),o=i>0?-1:i<0?1:r>0?-1:1;return 3*n*o}function Ip(e,t,r,i){e.addEventListener(t,r,i)}function VF(e,t,r,i){e.removeEventListener(t,r,i)}var Ci=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function X1(e){return e.which===2||e.which===3}var GF=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,i){return this._doTrack(t,r,i),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,i){var n=t.touches;if(n){for(var o={points:[],touches:[],target:r,event:t},a=0,s=n.length;a<s;a++){var l=n[a],c=sy(i,l,{});o.points.push([c.zrX,c.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in Q1)if(Q1.hasOwnProperty(r)){var i=Q1[r](this._track,t);if(i)return i}},e}();function BF(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function yte(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var Q1={pinch:function(e,t){var r=e.length;if(r){var i=(e[r-1]||{}).points,n=(e[r-2]||{}).points||i;if(n&&n.length>1&&i&&i.length>1){var o=BF(i)/BF(n);!isFinite(o)&&(o=1),t.pinchScale=o;var a=yte(i);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Xt(){return[1,0,0,1,0,0]}function Es(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Pp(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function bi(e,t,r){var i=t[0]*r[0]+t[2]*r[1],n=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=i,e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function Mr(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Si(e,t,r,i){i===void 0&&(i=[0,0]);var n=t[0],o=t[2],a=t[4],s=t[1],l=t[3],c=t[5],u=Math.sin(r),d=Math.cos(r);return e[0]=n*d+s*u,e[1]=-n*u+s*d,e[2]=o*d+l*u,e[3]=-o*u+d*l,e[4]=d*(a-i[0])+u*(c-i[1])+i[0],e[5]=d*(c-i[1])-u*(a-i[0])+i[1],e}function dd(e,t,r){var i=r[0],n=r[1];return e[0]=t[0]*i,e[1]=t[1]*n,e[2]=t[2]*i,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*n,e}function gn(e,t){var r=t[0],i=t[2],n=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*i;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*s-a*n)*l,e[5]=(o*n-r*s)*l,e):null}function HF(e){var t=Xt();return Pp(t,e),t}var wte=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,i=this.y-t.y;return Math.sqrt(r*r+i*i)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,i=this.y-t.y;return r*r+i*i},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,i=this.y;return this.x=t[0]*r+t[2]*i+t[4],this.y=t[1]*r+t[3]*i+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,i){t.x=r,t.y=i},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,i){t.x=r.x+i.x,t.y=r.y+i.y},e.sub=function(t,r,i){t.x=r.x-i.x,t.y=r.y-i.y},e.scale=function(t,r,i){t.x=r.x*i,t.y=r.y*i},e.scaleAndAdd=function(t,r,i,n){t.x=r.x+i.x*n,t.y=r.y+i.y*n},e.lerp=function(t,r,i,n){var o=1-n;t.x=o*r.x+n*i.x,t.y=o*r.y+n*i.y},e}(),_e=wte;var cy=Math.min,uy=Math.max,Xl=new _e,Ql=new _e,Jl=new _e,ec=new _e,kp=new _e,Lp=new _e,Cte=function(){function e(t,r,i,n){i<0&&(t=t+i,i=-i),n<0&&(r=r+n,n=-n),this.x=t,this.y=r,this.width=i,this.height=n}return e.prototype.union=function(t){var r=cy(t.x,this.x),i=cy(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=uy(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=uy(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=r,this.y=i},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,i=t.width/r.width,n=t.height/r.height,o=Xt();return Mr(o,o,[-r.x,-r.y]),dd(o,o,[i,n]),Mr(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var i=this,n=i.x,o=i.x+i.width,a=i.y,s=i.y+i.height,l=t.x,c=t.x+t.width,u=t.y,d=t.y+t.height,h=!(o<l||c<n||s<u||d<a);if(r){var p=1/0,g=0,f=Math.abs(o-l),v=Math.abs(c-n),m=Math.abs(s-u),y=Math.abs(d-a),w=Math.min(f,v),C=Math.min(m,y);o<l||c<n?w>g&&(g=w,f<v?_e.set(Lp,-f,0):_e.set(Lp,v,0)):w<p&&(p=w,f<v?_e.set(kp,f,0):_e.set(kp,-v,0)),s<u||d<a?C>g&&(g=C,m<y?_e.set(Lp,0,-m):_e.set(Lp,0,y)):w<p&&(p=w,m<y?_e.set(kp,0,m):_e.set(kp,0,-y))}return r&&_e.copy(r,h?kp:Lp),h},e.prototype.contain=function(t,r){var i=this;return t>=i.x&&t<=i.x+i.width&&r>=i.y&&r<=i.y+i.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,i){if(!i){t!==r&&e.copy(t,r);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var n=i[0],o=i[3],a=i[4],s=i[5];t.x=r.x*n+a,t.y=r.y*o+s,t.width=r.width*n,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Xl.x=Jl.x=r.x,Xl.y=ec.y=r.y,Ql.x=ec.x=r.x+r.width,Ql.y=Jl.y=r.y+r.height,Xl.transform(i),ec.transform(i),Ql.transform(i),Jl.transform(i),t.x=cy(Xl.x,Ql.x,Jl.x,ec.x),t.y=cy(Xl.y,Ql.y,Jl.y,ec.y);var l=uy(Xl.x,Ql.x,Jl.x,ec.x),c=uy(Xl.y,Ql.y,Jl.y,ec.y);t.width=l-t.x,t.height=c-t.y},e}(),le=Cte;var WF="silent";function bte(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:Ste}}function Ste(){Ci(this.event)}var xte=function(e){ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(ir),Fp=function(){function e(t,r){this.x=t,this.y=r}return e}(),Dte=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],J1=new le(0,0,0,0),jF=function(e){ke(t,e);function t(r,i,n,o,a){var s=e.call(this)||this;return s._hovered=new Fp(0,0),s.storage=r,s.painter=i,s.painterRoot=o,s._pointerSize=a,n=n||new xte,s.proxy=null,s.setHandlerProxy(n),s._draggingMgr=new FF(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(D(Dte,function(i){r.on&&r.on(i,this[i],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var i=r.zrX,n=r.zrY,o=$F(this,i,n),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Fp(i,n):this.findHover(i,n),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),c&&c!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var i=r.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Fp(0,0)},t.prototype.dispatch=function(r,i){var n=this[r];n&&n.call(this,i)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var i=this.proxy;i.setCursor&&i.setCursor(r)},t.prototype.dispatchToElement=function(r,i,n){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+i,s=bte(i,r,n);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(i,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(i,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(i,s)}))}},t.prototype.findHover=function(r,i,n){var o=this.storage.getDisplayList(),a=new Fp(r,i);if(UF(o,a,r,i,n),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,c=l/2,u=new le(r-c,i-c,l,l),d=o.length-1;d>=0;d--){var h=o[d];h!==n&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(J1.copy(h.getBoundingRect()),h.transform&&J1.applyTransform(h.transform),J1.intersect(u)&&s.push(h))}if(s.length)for(var p=4,g=Math.PI/12,f=Math.PI*2,v=0;v<c;v+=p)for(var m=0;m<f;m+=g){var y=r+v*Math.cos(m),w=i+v*Math.sin(m);if(UF(s,a,y,w,n),a.target)return a}}return a},t.prototype.processGesture=function(r,i){this._gestureMgr||(this._gestureMgr=new GF);var n=this._gestureMgr;i==="start"&&n.clear();var o=n.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(i==="end"&&n.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Fp;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(ir);D(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){jF.prototype[e]=function(t){var r=t.zrX,i=t.zrY,n=$F(this,r,i),o,a;if((e!=="mouseup"||!n)&&(o=this.findHover(r,i),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||pn(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function Ete(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var i=e,n=void 0,o=!1;i;){if(i.ignoreClip&&(o=!0),!o){var a=i.getClipPath();if(a&&!a.contain(t,r))return!1}i.silent&&(n=!0);var s=i.__hostTarget;i=s||i.parent}return n?WF:!0}return!1}function UF(e,t,r,i,n){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==n&&!a.ignore&&(s=Ete(a,r,i))&&(!t.topTarget&&(t.topTarget=a),s!==WF)){t.target=a;break}}}function $F(e,t,r){var i=e.painter;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}var YF=jF;var ZF=32,Op=7;function Mte(e){for(var t=0;e>=ZF;)t|=e&1,e>>=1;return e+t}function qF(e,t,r,i){var n=t+1;if(n===r)return 1;if(i(e[n++],e[t])<0){for(;n<r&&i(e[n],e[n-1])<0;)n++;Tte(e,t,n)}else for(;n<r&&i(e[n],e[n-1])>=0;)n++;return n-t}function Tte(e,t,r){for(r--;t<r;){var i=e[t];e[t++]=e[r],e[r--]=i}}function KF(e,t,r,i,n){for(i===t&&i++;i<r;i++){for(var o=e[i],a=t,s=i,l;a<s;)l=a+s>>>1,n(o,e[l])<0?s=l:a=l+1;var c=i-a;switch(c){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;c>0;)e[a+c]=e[a+c-1],c--}e[a]=o}}function eD(e,t,r,i,n,o){var a=0,s=0,l=1;if(o(e,t[r+n])>0){for(s=i-n;l<s&&o(e,t[r+n+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=n,l+=n}else{for(s=n+1;l<s&&o(e,t[r+n-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=a;a=n-l,l=n-c}for(a++;a<l;){var u=a+(l-a>>>1);o(e,t[r+u])>0?a=u+1:l=u}return l}function tD(e,t,r,i,n,o){var a=0,s=0,l=1;if(o(e,t[r+n])<0){for(s=n+1;l<s&&o(e,t[r+n-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=a;a=n-l,l=n-c}else{for(s=i-n;l<s&&o(e,t[r+n+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=n,l+=n}for(a++;a<l;){var u=a+(l-a>>>1);o(e,t[r+u])<0?l=u:a=u+1}return l}function _te(e,t){var r=Op,i,n,o=0,a=[];i=[],n=[];function s(p,g){i[o]=p,n[o]=g,o+=1}function l(){for(;o>1;){var p=o-2;if(p>=1&&n[p-1]<=n[p]+n[p+1]||p>=2&&n[p-2]<=n[p]+n[p-1])n[p-1]<n[p+1]&&p--;else if(n[p]>n[p+1])break;u(p)}}function c(){for(;o>1;){var p=o-2;p>0&&n[p-1]<n[p+1]&&p--,u(p)}}function u(p){var g=i[p],f=n[p],v=i[p+1],m=n[p+1];n[p]=f+m,p===o-3&&(i[p+1]=i[p+2],n[p+1]=n[p+2]),o--;var y=tD(e[v],e,g,f,0,t);g+=y,f-=y,f!==0&&(m=eD(e[g+f-1],e,v,m,m-1,t),m!==0&&(f<=m?d(g,f,v,m):h(g,f,v,m)))}function d(p,g,f,v){var m=0;for(m=0;m<g;m++)a[m]=e[p+m];var y=0,w=f,C=p;if(e[C++]=e[w++],--v===0){for(m=0;m<g;m++)e[C+m]=a[y+m];return}if(g===1){for(m=0;m<v;m++)e[C+m]=e[w+m];e[C+v]=a[y];return}for(var S=r,b,x,E;;){b=0,x=0,E=!1;do if(t(e[w],a[y])<0){if(e[C++]=e[w++],x++,b=0,--v===0){E=!0;break}}else if(e[C++]=a[y++],b++,x=0,--g===1){E=!0;break}while((b|x)<S);if(E)break;do{if(b=tD(e[w],a,y,g,0,t),b!==0){for(m=0;m<b;m++)e[C+m]=a[y+m];if(C+=b,y+=b,g-=b,g<=1){E=!0;break}}if(e[C++]=e[w++],--v===0){E=!0;break}if(x=eD(a[y],e,w,v,0,t),x!==0){for(m=0;m<x;m++)e[C+m]=e[w+m];if(C+=x,w+=x,v-=x,v===0){E=!0;break}}if(e[C++]=a[y++],--g===1){E=!0;break}S--}while(b>=Op||x>=Op);if(E)break;S<0&&(S=0),S+=2}if(r=S,r<1&&(r=1),g===1){for(m=0;m<v;m++)e[C+m]=e[w+m];e[C+v]=a[y]}else{if(g===0)throw new Error;for(m=0;m<g;m++)e[C+m]=a[y+m]}}function h(p,g,f,v){var m=0;for(m=0;m<v;m++)a[m]=e[f+m];var y=p+g-1,w=v-1,C=f+v-1,S=0,b=0;if(e[C--]=e[y--],--g===0){for(S=C-(v-1),m=0;m<v;m++)e[S+m]=a[m];return}if(v===1){for(C-=g,y-=g,b=C+1,S=y+1,m=g-1;m>=0;m--)e[b+m]=e[S+m];e[C]=a[w];return}for(var x=r;;){var E=0,M=0,T=!1;do if(t(a[w],e[y])<0){if(e[C--]=e[y--],E++,M=0,--g===0){T=!0;break}}else if(e[C--]=a[w--],M++,E=0,--v===1){T=!0;break}while((E|M)<x);if(T)break;do{if(E=g-tD(a[w],e,p,g,g-1,t),E!==0){for(C-=E,y-=E,g-=E,b=C+1,S=y+1,m=E-1;m>=0;m--)e[b+m]=e[S+m];if(g===0){T=!0;break}}if(e[C--]=a[w--],--v===1){T=!0;break}if(M=v-eD(e[y],a,0,v,v-1,t),M!==0){for(C-=M,w-=M,v-=M,b=C+1,S=w+1,m=0;m<M;m++)e[b+m]=a[S+m];if(v<=1){T=!0;break}}if(e[C--]=e[y--],--g===0){T=!0;break}x--}while(E>=Op||M>=Op);if(T)break;x<0&&(x=0),x+=2}if(r=x,r<1&&(r=1),v===1){for(C-=g,y-=g,b=C+1,S=y+1,m=g-1;m>=0;m--)e[b+m]=e[S+m];e[C]=a[w]}else{if(v===0)throw new Error;for(S=C-(v-1),m=0;m<v;m++)e[S+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function tc(e,t,r,i){r||(r=0),i||(i=e.length);var n=i-r;if(!(n<2)){var o=0;if(n<ZF){o=qF(e,r,i,t),KF(e,r,i,r+o,t);return}var a=_te(e,t),s=Mte(n);do{if(o=qF(e,r,i,t),o<s){var l=n;l>s&&(l=s),KF(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),n-=o,r+=o}while(n!==0);a.forceMergeRuns()}}var sr=1,rc=2,Ms=4;var XF=!1;function rD(){XF||(XF=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function QF(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var Rte=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=QF}return e.prototype.traverse=function(t,r){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(r),i},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,i=this._displayList,n=0,o=r.length;n<o;n++)this._updateAndAddDisplayable(r[n],null,t);i.length=this._displayListLen,tc(i,QF)},e.prototype._updateAndAddDisplayable=function(t,r,i){if(!(t.ignore&&!i)){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath();if(t.ignoreClip)r=null;else if(n){r?r=r.slice():r=[];for(var o=n,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var c=s[l];t.__dirty&&(c.__dirty|=sr),this._updateAndAddDisplayable(c,r,i)}t.__dirty=0}else{var u=t;r&&r.length?u.__clipPaths=r:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(rD(),u.z=0),isNaN(u.z2)&&(rD(),u.z2=0),isNaN(u.zlevel)&&(rD(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=t.getDecalElement&&t.getDecalElement();d&&this._updateAndAddDisplayable(d,r,i);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,i);var p=t.getTextContent();p&&this._updateAndAddDisplayable(p,r,i)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,i=t.length;r<i;r++)this.delRoot(t[r]);return}var n=pe(this._roots,t);n>=0&&this._roots.splice(n,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),JF=Rte;var eO;eO=Re.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var Np=eO;var dy={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)))},elasticOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},elasticInOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-dy.bounceOut(1-e)},bounceOut:function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375},bounceInOut:function(e){return e<.5?dy.bounceIn(e*2)*.5:dy.bounceOut(e*2-1)*.5+.5}},hy=dy;var py=Math.pow,_s=Math.sqrt,fy=1e-8,rO=1e-4,tO=_s(3),gy=1/3,zo=No(),fn=No(),hd=No();function Ts(e){return e>-fy&&e<fy}function iO(e){return e>fy||e<-fy}function Gt(e,t,r,i,n){var o=1-n;return o*o*(o*e+3*n*t)+n*n*(n*i+3*o*r)}function iD(e,t,r,i,n){var o=1-n;return 3*(((t-e)*o+2*(r-t)*n)*o+(i-r)*n*n)}function ic(e,t,r,i,n,o){var a=i+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),c=e-n,u=s*s-3*a*l,d=s*l-9*a*c,h=l*l-3*s*c,p=0;if(Ts(u)&&Ts(d))if(Ts(s))o[0]=0;else{var g=-l/s;g>=0&&g<=1&&(o[p++]=g)}else{var f=d*d-4*u*h;if(Ts(f)){var v=d/u,g=-s/a+v,m=-v/2;g>=0&&g<=1&&(o[p++]=g),m>=0&&m<=1&&(o[p++]=m)}else if(f>0){var y=_s(f),w=u*s+1.5*a*(-d+y),C=u*s+1.5*a*(-d-y);w<0?w=-py(-w,gy):w=py(w,gy),C<0?C=-py(-C,gy):C=py(C,gy);var g=(-s-(w+C))/(3*a);g>=0&&g<=1&&(o[p++]=g)}else{var S=(2*u*s-3*a*d)/(2*_s(u*u*u)),b=Math.acos(S)/3,x=_s(u),E=Math.cos(b),g=(-s-2*x*E)/(3*a),m=(-s+x*(E+tO*Math.sin(b)))/(3*a),M=(-s+x*(E-tO*Math.sin(b)))/(3*a);g>=0&&g<=1&&(o[p++]=g),m>=0&&m<=1&&(o[p++]=m),M>=0&&M<=1&&(o[p++]=M)}}return p}function vy(e,t,r,i,n){var o=6*r-12*t+6*e,a=9*t+3*i-3*e-9*r,s=3*t-3*e,l=0;if(Ts(a)){if(iO(o)){var c=-s/o;c>=0&&c<=1&&(n[l++]=c)}}else{var u=o*o-4*a*s;if(Ts(u))n[0]=-o/(2*a);else if(u>0){var d=_s(u),c=(-o+d)/(2*a),h=(-o-d)/(2*a);c>=0&&c<=1&&(n[l++]=c),h>=0&&h<=1&&(n[l++]=h)}}return l}function vn(e,t,r,i,n,o){var a=(t-e)*n+e,s=(r-t)*n+t,l=(i-r)*n+r,c=(s-a)*n+a,u=(l-s)*n+s,d=(u-c)*n+c;o[0]=e,o[1]=a,o[2]=c,o[3]=d,o[4]=d,o[5]=u,o[6]=l,o[7]=i}function my(e,t,r,i,n,o,a,s,l,c,u){var d,h=.005,p=1/0,g,f,v,m;zo[0]=l,zo[1]=c;for(var y=0;y<1;y+=.05)fn[0]=Gt(e,r,n,a,y),fn[1]=Gt(t,i,o,s,y),v=Ma(zo,fn),v<p&&(d=y,p=v);p=1/0;for(var w=0;w<32&&!(h<rO);w++)g=d-h,f=d+h,fn[0]=Gt(e,r,n,a,g),fn[1]=Gt(t,i,o,s,g),v=Ma(fn,zo),g>=0&&v<p?(d=g,p=v):(hd[0]=Gt(e,r,n,a,f),hd[1]=Gt(t,i,o,s,f),m=Ma(hd,zo),f<=1&&m<p?(d=f,p=m):h*=.5);return u&&(u[0]=Gt(e,r,n,a,d),u[1]=Gt(t,i,o,s,d)),_s(p)}function nO(e,t,r,i,n,o,a,s,l){for(var c=e,u=t,d=0,h=1/l,p=1;p<=l;p++){var g=p*h,f=Gt(e,r,n,a,g),v=Gt(t,i,o,s,g),m=f-c,y=v-u;d+=Math.sqrt(m*m+y*y),c=f,u=v}return d}function $t(e,t,r,i){var n=1-i;return n*(n*e+2*i*t)+i*i*r}function zp(e,t,r,i){return 2*((1-i)*(t-e)+i*(r-t))}function oO(e,t,r,i,n){var o=e-2*t+r,a=2*(t-e),s=e-i,l=0;if(Ts(o)){if(iO(a)){var c=-s/a;c>=0&&c<=1&&(n[l++]=c)}}else{var u=a*a-4*o*s;if(Ts(u)){var c=-a/(2*o);c>=0&&c<=1&&(n[l++]=c)}else if(u>0){var d=_s(u),c=(-a+d)/(2*o),h=(-a-d)/(2*o);c>=0&&c<=1&&(n[l++]=c),h>=0&&h<=1&&(n[l++]=h)}}return l}function yy(e,t,r){var i=e+r-2*t;return i===0?.5:(e-t)/i}function Rs(e,t,r,i,n){var o=(t-e)*i+e,a=(r-t)*i+t,s=(a-o)*i+o;n[0]=e,n[1]=o,n[2]=s,n[3]=s,n[4]=a,n[5]=r}function wy(e,t,r,i,n,o,a,s,l){var c,u=.005,d=1/0;zo[0]=a,zo[1]=s;for(var h=0;h<1;h+=.05){fn[0]=$t(e,r,n,h),fn[1]=$t(t,i,o,h);var p=Ma(zo,fn);p<d&&(c=h,d=p)}d=1/0;for(var g=0;g<32&&!(u<rO);g++){var f=c-u,v=c+u;fn[0]=$t(e,r,n,f),fn[1]=$t(t,i,o,f);var p=Ma(fn,zo);if(f>=0&&p<d)c=f,d=p;else{hd[0]=$t(e,r,n,v),hd[1]=$t(t,i,o,v);var m=Ma(hd,zo);v<=1&&m<d?(c=v,d=m):u*=.5}}return l&&(l[0]=$t(e,r,n,c),l[1]=$t(t,i,o,c)),_s(d)}function aO(e,t,r,i,n,o,a){for(var s=e,l=t,c=0,u=1/a,d=1;d<=a;d++){var h=d*u,p=$t(e,r,n,h),g=$t(t,i,o,h),f=p-s,v=g-l;c+=Math.sqrt(f*f+v*v),s=p,l=g}return c}var Ate=/cubic-bezier\(([0-9,\.e ]+)\)/;function pd(e){var t=e&&Ate.exec(e);if(t){var r=t[1].split(","),i=+dr(r[0]),n=+dr(r[1]),o=+dr(r[2]),a=+dr(r[3]);if(isNaN(i+n+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:ic(0,i,o,1,l,s)&&Gt(0,n,a,1,s[0])}}}var Ite=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||pt,this.ondestroy=t.ondestroy||pt,this.onrestart=t.onrestart||pt,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var i=this._life,n=t-this._startTime-this._pausedTime,o=n/i;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=n%i;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Z(t)?t:hy[t]||pd(t)},e}(),sO=Ite;var lO=function(){function e(t){this.value=t}return e}();var Pte=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new lO(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,i=t.next;r?r.next=i:this.head=i,i?i.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}();var kte=function(){function e(t){this._list=new Pte,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var i=this._list,n=this._map,o=null;if(n[t]==null){var a=i.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=i.head;i.remove(l),delete n[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new lO(r),s.key=t,i.insertEntry(s),n[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],i=this._list;if(r!=null)return r!==i.tail&&(i.remove(r),i.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),Ta=kte;var cO={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Qn(e){return e=Math.round(e),e<0?0:e>255?255:e}function Lte(e){return e=Math.round(e),e<0?0:e>360?360:e}function Bp(e){return e<0?0:e>1?1:e}function nD(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Qn(parseFloat(t)/100*255):Qn(parseInt(t,10))}function nc(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Bp(parseFloat(t)/100):Bp(parseFloat(t))}function oD(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function As(e,t,r){return e+(t-e)*r}function mn(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function aD(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var dO=new Ta(20),Cy=null;function gd(e,t){Cy&&aD(Cy,t),Cy=dO.put(e,Cy||t.slice())}function Cr(e,t){if(e){t=t||[];var r=dO.get(e);if(r)return aD(t,r);e=e+"";var i=e.replace(/ /g,"").toLowerCase();if(i in cO)return aD(t,cO[i]),gd(e,t),t;var n=i.length;if(i.charAt(0)==="#"){if(n===4||n===5){var o=parseInt(i.slice(1,4),16);if(!(o>=0&&o<=4095)){mn(t,0,0,0,1);return}return mn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,n===5?parseInt(i.slice(4),16)/15:1),gd(e,t),t}else if(n===7||n===9){var o=parseInt(i.slice(1,7),16);if(!(o>=0&&o<=16777215)){mn(t,0,0,0,1);return}return mn(t,(o&16711680)>>16,(o&65280)>>8,o&255,n===9?parseInt(i.slice(7),16)/255:1),gd(e,t),t}return}var a=i.indexOf("("),s=i.indexOf(")");if(a!==-1&&s+1===n){var l=i.substr(0,a),c=i.substr(a+1,s-(a+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?mn(t,+c[0],+c[1],+c[2],1):mn(t,0,0,0,1);u=nc(c.pop());case"rgb":if(c.length>=3)return mn(t,nD(c[0]),nD(c[1]),nD(c[2]),c.length===3?u:nc(c[3])),gd(e,t),t;mn(t,0,0,0,1);return;case"hsla":if(c.length!==4){mn(t,0,0,0,1);return}return c[3]=nc(c[3]),sD(c,t),gd(e,t),t;case"hsl":if(c.length!==3){mn(t,0,0,0,1);return}return sD(c,t),gd(e,t),t;default:return}}mn(t,0,0,0,1)}}function sD(e,t){var r=(parseFloat(e[0])%360+360)%360/360,i=nc(e[1]),n=nc(e[2]),o=n<=.5?n*(i+1):n+i-n*i,a=n*2-o;return t=t||[],mn(t,Qn(oD(a,o,r+1/3)*255),Qn(oD(a,o,r)*255),Qn(oD(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function Fte(e){if(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),o=Math.max(t,r,i),a=o-n,s=(o+n)/2,l,c;if(a===0)l=0,c=0;else{s<.5?c=a/(o+n):c=a/(2-o-n);var u=((o-t)/6+a/2)/a,d=((o-r)/6+a/2)/a,h=((o-i)/6+a/2)/a;t===o?l=h-d:r===o?l=1/3+u-h:i===o&&(l=2/3+d-u),l<0&&(l+=1),l>1&&(l-=1)}var p=[l*360,c,s];return e[3]!=null&&p.push(e[3]),p}}function by(e,t){var r=Cr(e);if(r){for(var i=0;i<3;i++)t<0?r[i]=r[i]*(1-t)|0:r[i]=(255-r[i])*t+r[i]|0,r[i]>255?r[i]=255:r[i]<0&&(r[i]=0);return yn(r,r.length===4?"rgba":"rgb")}}function Sy(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var i=e*(t.length-1),n=Math.floor(i),o=Math.ceil(i),a=t[n],s=t[o],l=i-n;return r[0]=Qn(As(a[0],s[0],l)),r[1]=Qn(As(a[1],s[1],l)),r[2]=Qn(As(a[2],s[2],l)),r[3]=Bp(As(a[3],s[3],l)),r}}function hO(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var i=e*(t.length-1),n=Math.floor(i),o=Math.ceil(i),a=Cr(t[n]),s=Cr(t[o]),l=i-n,c=yn([Qn(As(a[0],s[0],l)),Qn(As(a[1],s[1],l)),Qn(As(a[2],s[2],l)),Bp(As(a[3],s[3],l))],"rgba");return r?{color:c,leftIndex:n,rightIndex:o,value:i}:c}}function oc(e,t,r,i){var n=Cr(e);if(e)return n=Fte(n),t!=null&&(n[0]=Lte(t)),r!=null&&(n[1]=nc(r)),i!=null&&(n[2]=nc(i)),yn(sD(n),"rgba")}function ac(e,t){var r=Cr(e);if(r&&t!=null)return r[3]=Bp(t),yn(r,"rgba")}function yn(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function fd(e,t){var r=Cr(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var uO=new Ta(100);function Gp(e){if(H(e)){var t=uO.get(e);return t||(t=by(e,-.1),uO.put(e,t)),t}else if(Ss(e)){var r=F({},e);return r.colorStops=N(e.colorStops,function(i){return{offset:i.offset,color:by(i.color,-.1)}}),r}return e}var Dy=Math.round;function Is(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=Cr(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var pO=1e-4;function Vo(e){return e<pO&&e>-pO}function xy(e){return Dy(e*1e3)/1e3}function Ey(e){return Dy(e*1e4)/1e4}function gO(e){return"matrix("+xy(e[0])+","+xy(e[1])+","+xy(e[2])+","+xy(e[3])+","+Ey(e[4])+","+Ey(e[5])+")"}var fO={left:"start",right:"end",center:"middle",middle:"middle"};function vO(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function mO(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function yO(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function cD(e){return e&&!!e.image}function Ote(e){return e&&!!e.svgElement}function Hp(e){return cD(e)||Ote(e)}function My(e){return e.type==="linear"}function Ty(e){return e.type==="radial"}function _y(e){return e&&(e.type==="linear"||e.type==="radial")}function Up(e){return"url(#"+e+")"}function Ry(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function Ay(e){var t=e.x||0,r=e.y||0,i=(e.rotation||0)*ad,n=de(e.scaleX,1),o=de(e.scaleY,1),a=e.skewX||0,s=e.skewY||0,l=[];return(t||r)&&l.push("translate("+t+"px,"+r+"px)"),i&&l.push("rotate("+i+")"),(n!==1||o!==1)&&l.push("scale("+n+","+o+")"),(a||s)&&l.push("skew("+Dy(a*ad)+"deg, "+Dy(s*ad)+"deg)"),l.join(" ")}var wO=function(){return Re.hasGlobalWindow&&Z(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}();var dD=Array.prototype.slice;function _a(e,t,r){return(t-e)*r+e}function uD(e,t,r,i){for(var n=t.length,o=0;o<n;o++)e[o]=_a(t[o],r[o],i);return e}function Nte(e,t,r,i){for(var n=t.length,o=n&&t[0].length,a=0;a<n;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=_a(t[a][s],r[a][s],i)}return e}function Iy(e,t,r,i){for(var n=t.length,o=0;o<n;o++)e[o]=t[o]+r[o]*i;return e}function CO(e,t,r,i){for(var n=t.length,o=n&&t[0].length,a=0;a<n;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*i}return e}function zte(e,t){for(var r=e.length,i=t.length,n=r>i?t:e,o=Math.min(r,i),a=n[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,i);s++)n.push({offset:a.offset,color:a.color.slice()})}function Vte(e,t,r){var i=e,n=t;if(!(!i.push||!n.push)){var o=i.length,a=n.length;if(o!==a){var s=o>a;if(s)i.length=a;else for(var l=o;l<a;l++)i.push(r===1?n[l]:dD.call(n[l]))}for(var c=i[0]&&i[0].length,l=0;l<i.length;l++)if(r===1)isNaN(i[l])&&(i[l]=n[l]);else for(var u=0;u<c;u++)isNaN(i[l][u])&&(i[l][u]=n[l][u])}}function sc(e){if(Vt(e)){var t=e.length;if(Vt(e[0])){for(var r=[],i=0;i<t;i++)r.push(dD.call(e[i]));return r}return dD.call(e)}return e}function Ly(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function Bte(e){return Vt(e&&e[0])?2:1}var Py=0,Fy=1,xO=2,jp=3,hD=4,pD=5,bO=6;function SO(e){return e===hD||e===pD}function ky(e){return e===Fy||e===xO}var Wp=[0,0,0,0],Gte=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,i){this._needsSort=!0;var n=this.keyframes,o=n.length,a=!1,s=bO,l=r;if(Vt(r)){var c=Bte(r);s=c,(c===1&&!be(r[0])||c===2&&!be(r[0][0]))&&(a=!0)}else if(be(r)&&!xs(r))s=Py;else if(H(r))if(!isNaN(+r))s=Py;else{var u=Cr(r);u&&(l=u,s=jp)}else if(Ss(r)){var d=F({},l);d.colorStops=N(r.colorStops,function(p){return{offset:p.offset,color:Cr(p.color)}}),My(r)?s=hD:Ty(r)&&(s=pD),l=d}o===0?this.valType=s:(s!==this.valType||s===bO)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return i&&(h.easing=i,h.easingFunc=Z(i)?i:hy[i]||pd(i)),n.push(h),h},e.prototype.prepare=function(t,r){var i=this.keyframes;this._needsSort&&i.sort(function(f,v){return f.time-v.time});for(var n=this.valType,o=i.length,a=i[o-1],s=this.discrete,l=ky(n),c=SO(n),u=0;u<o;u++){var d=i[u],h=d.value,p=a.value;d.percent=d.time/t,s||(l&&u!==o-1?Vte(h,p,n):c&&zte(h.colorStops,p.colorStops))}if(!s&&n!==pD&&r&&this.needsAnimate()&&r.needsAnimate()&&n===r.valType&&!r._finished){this._additiveTrack=r;for(var g=i[0].value,u=0;u<o;u++)n===Py?i[u].additiveValue=i[u].value-g:n===jp?i[u].additiveValue=Iy([],i[u].value,g,-1):ky(n)&&(i[u].additiveValue=n===Fy?Iy([],i[u].value,g,-1):CO([],i[u].value,g,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,n=i?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,c=o===jp,u,d=this._lastFr,h=Math.min,p,g;if(s===1)p=g=a[0];else{if(r<0)u=0;else if(r<this._lastFrP){var f=h(d+1,s-1);for(u=f;u>=0&&!(a[u].percent<=r);u--);u=h(u,s-2)}else{for(u=d;u<s&&!(a[u].percent>r);u++);u=h(u-1,s-2)}g=a[u+1],p=a[u]}if(p&&g){this._lastFr=u,this._lastFrP=r;var v=g.percent-p.percent,m=v===0?1:h((r-p.percent)/v,1);g.easingFunc&&(m=g.easingFunc(m));var y=i?this._additiveValue:c?Wp:t[l];if((ky(o)||c)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?p.rawValue:g.rawValue;else if(ky(o))o===Fy?uD(y,p[n],g[n],m):Nte(y,p[n],g[n],m);else if(SO(o)){var w=p[n],C=g[n],S=o===hD;t[l]={type:S?"linear":"radial",x:_a(w.x,C.x,m),y:_a(w.y,C.y,m),colorStops:N(w.colorStops,function(x,E){var M=C.colorStops[E];return{offset:_a(x.offset,M.offset,m),color:Ly(uD([],x.color,M.color,m))}}),global:C.global},S?(t[l].x2=_a(w.x2,C.x2,m),t[l].y2=_a(w.y2,C.y2,m)):t[l].r=_a(w.r,C.r,m)}else if(c)uD(y,p[n],g[n],m),i||(t[l]=Ly(y));else{var b=_a(p[n],g[n],m);i?this._additiveValue=b:t[l]=b}i&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,i=this.propName,n=this._additiveValue;r===Py?t[i]=t[i]+n:r===jp?(Cr(t[i],Wp),Iy(Wp,Wp,n,1),t[i]=Ly(Wp)):r===Fy?Iy(t[i],t[i],n,1):r===xO&&CO(t[i],t[i],n,1)},e}(),Hte=function(){function e(t,r,i,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&n){ql("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=i}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,i){return this.whenWithKeys(t,r,me(r),i)},e.prototype.whenWithKeys=function(t,r,i,n){for(var o=this._tracks,a=0;a<i.length;a++){var s=i[a],l=o[s];if(!l){l=o[s]=new Gte(s);var c=void 0,u=this._getAdditiveTrack(s);if(u){var d=u.keyframes,h=d[d.length-1];c=h&&h.value,u.valType===jp&&c&&(c=Ly(c))}else c=this._target[s];if(c==null)continue;t>0&&l.addKeyframe(0,sc(c),n),this._trackKeys.push(s)}l.addKeyframe(t,sc(r[s]),n)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,i=0;i<r;i++)t[i].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var i=0;i<r.length;i++)r[i].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,i=0;i<r.length;i++)t[r[i]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,i=this._additiveAnimators;if(i)for(var n=0;n<i.length;n++){var o=i[n].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,i=[],n=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),c=s.keyframes,u=c.length;if(s.prepare(n,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var d=c[u-1];d&&(r._target[s.propName]=d.rawValue),s.setFinished()}else i.push(s)}if(i.length||this._force){var h=new sO({life:n,loop:this._loop,delay:this._delay||0,onframe:function(p){r._started=2;var g=r._additiveAnimators;if(g){for(var f=!1,v=0;v<g.length;v++)if(g[v]._clip){f=!0;break}f||(r._additiveAnimators=null)}for(var v=0;v<i.length;v++)i[v].step(r._target,p);var m=r._onframeCbs;if(m)for(var v=0;v<m.length;v++)m[v](r._target,p)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return N(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var i=this._tracks,n=this._trackKeys,o=0;o<t.length;o++){var a=i[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<n.length;o++)if(!i[n[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,i){if(t){r=r||this._trackKeys;for(var n=0;n<r.length;n++){var o=r[n],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[i?0:s.length-1];l&&(t[o]=sc(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||me(t);for(var i=0;i<r.length;i++){var n=r[i],o=this._tracks[n];if(o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[n]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}(),$p=Hte;function lc(){return new Date().getTime()}var Ute=function(e){ke(t,e);function t(r){var i=e.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,r=r||{},i.stage=r.stage||{},i}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var i=r.getClip();i&&this.addClip(i)},t.prototype.removeClip=function(r){if(r.animation){var i=r.prev,n=r.next;i?i.next=n:this._head=n,n?n.prev=i:this._tail=i,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var i=r.getClip();i&&this.removeClip(i),r.animation=null},t.prototype.update=function(r){for(var i=lc()-this._pausedTime,n=i-this._time,o=this._head;o;){var a=o.next,s=o.step(i,n);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=i,r||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function i(){r._running&&(Np(i),!r._paused&&r.update())}Np(i)},t.prototype.start=function(){this._running||(this._time=lc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=lc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=lc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var i=r.next;r.prev=r.next=r.animation=null,r=i}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,i){i=i||{},this.start();var n=new $p(r,i.loop);return this.addAnimator(n),n},t}(ir),DO=Ute;var Wte=300,gD=Re.domSupported,fD=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=N(e,function(n){var o=n.replace("mouse","pointer");return r.hasOwnProperty(o)?o:n});return{mouse:e,touch:t,pointer:i}}(),EO={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},MO=!1;function yD(e){var t=e.pointerType;return t==="pen"||t==="touch"}function jte(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function vD(e){e&&(e.zrByTouch=!0)}function $te(e,t){return wi(e.dom,new Yte(e,t),!0)}function _O(e,t){for(var r=t,i=!1;r&&r.nodeType!==9&&!(i=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return i}var Yte=function(){function e(t,r){this.stopPropagation=pt,this.stopImmediatePropagation=pt,this.preventDefault=pt,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),Jn={mousedown:function(e){e=wi(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=wi(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=wi(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=wi(this.dom,e);var t=e.toElement||e.relatedTarget;_O(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){MO=!0,e=wi(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){MO||(e=wi(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=wi(this.dom,e),vD(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Jn.mousemove.call(this,e),Jn.mousedown.call(this,e)},touchmove:function(e){e=wi(this.dom,e),vD(e),this.handler.processGesture(e,"change"),Jn.mousemove.call(this,e)},touchend:function(e){e=wi(this.dom,e),vD(e),this.handler.processGesture(e,"end"),Jn.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<Wte&&Jn.click.call(this,e)},pointerdown:function(e){Jn.mousedown.call(this,e)},pointermove:function(e){yD(e)||Jn.mousemove.call(this,e)},pointerup:function(e){Jn.mouseup.call(this,e)},pointerout:function(e){yD(e)||Jn.mouseout.call(this,e)}};D(["click","dblclick","contextmenu"],function(e){Jn[e]=function(t){t=wi(this.dom,t),this.trigger(e,t)}});var wD={pointermove:function(e){yD(e)||wD.mousemove.call(this,e)},pointerup:function(e){wD.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function qte(e,t){var r=t.domHandlers;Re.pointerEventsSupported?D(fD.pointer,function(i){Oy(t,i,function(n){r[i].call(e,n)})}):(Re.touchEventsSupported&&D(fD.touch,function(i){Oy(t,i,function(n){r[i].call(e,n),jte(t)})}),D(fD.mouse,function(i){Oy(t,i,function(n){n=ly(n),t.touching||r[i].call(e,n)})}))}function Kte(e,t){Re.pointerEventsSupported?D(EO.pointer,r):Re.touchEventsSupported||D(EO.mouse,r);function r(i){function n(o){o=ly(o),_O(e,o.target)||(o=$te(e,o),t.domHandlers[i].call(e,o))}Oy(t,i,n,{capture:!0})}}function Oy(e,t,r,i){e.mounted[t]=r,e.listenerOpts[t]=i,Ip(e.domTarget,t,r,i)}function mD(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&VF(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var TO=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),Zte=function(e){ke(t,e);function t(r,i){var n=e.call(this)||this;return n.__pointerCapturing=!1,n.dom=r,n.painterRoot=i,n._localHandlerScope=new TO(r,Jn),gD&&(n._globalHandlerScope=new TO(document,wD)),qte(n,n._localHandlerScope),n}return t.prototype.dispose=function(){mD(this._localHandlerScope),gD&&mD(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,gD&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var i=this._globalHandlerScope;r?Kte(this,i):mD(i)}},t}(ir),RO=Zte;var AO=1;Re.hasGlobalWindow&&(AO=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var cc=AO,Yp=.4,qp="#333",Kp="#ccc",IO="#eee";var PO=Es,kO=5e-5;function uc(e){return e>kO||e<-kO}var dc=[],vd=[],CD=Xt(),bD=Math.abs,Xte=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return uc(this.rotation)||uc(this.x)||uc(this.y)||uc(this.scaleX-1)||uc(this.scaleY-1)||uc(this.skewX)||uc(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),i=this.transform;if(!(r||t)){i&&(PO(i),this.invTransform=null);return}i=i||Xt(),r?this.getLocalTransform(i):PO(i),t&&(r?bi(i,t,i):Pp(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(dc);var i=dc[0]<0?-1:1,n=dc[1]<0?-1:1,o=((dc[0]-i)*r+i)/dc[0]||0,a=((dc[1]-n)*r+n)/dc[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Xt(),gn(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),o=Math.PI/2+n-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=i,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||Xt(),bi(vd,t.invTransform,r),r=vd);var i=this.originX,n=this.originY;(i||n)&&(CD[4]=i,CD[5]=n,bi(vd,r,CD),vd[4]-=i,vd[5]-=n,r=vd),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var i=[t,r],n=this.invTransform;return n&&Bt(i,i,n),i},e.prototype.transformCoordToGlobal=function(t,r){var i=[t,r],n=this.transform;return n&&Bt(i,i,n),i},e.prototype.getLineScale=function(){var t=this.transform;return t&&bD(t[0]-1)>1e-10&&bD(t[3]-1)>1e-10?Math.sqrt(bD(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){SD(this,t)},e.getLocalTransform=function(t,r){r=r||[];var i=t.originX||0,n=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,c=t.rotation||0,u=t.x,d=t.y,h=t.skewX?Math.tan(t.skewX):0,p=t.skewY?Math.tan(-t.skewY):0;if(i||n||s||l){var g=i+s,f=n+l;r[4]=-g*o-h*f*a,r[5]=-f*a-p*g*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=p*o,r[2]=h*a,c&&Si(r,r,c),r[4]+=i+u,r[5]+=n+d,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),$i=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function SD(e,t){for(var r=0;r<$i.length;r++){var i=$i[r];e[i]=t[i]}}var xi=Xte;var LO={};function Di(e,t){t=t||Hi;var r=LO[t];r||(r=LO[t]=new Ta(500));var i=r.get(e);return i==null&&(i=Vr.measureText(e,t).width,r.put(e,i)),i}function FO(e,t,r,i){var n=Di(e,t),o=yd(t),a=md(0,n,r),s=hc(0,o,i),l=new le(a,s,n,o);return l}function Bo(e,t,r,i){var n=((e||"")+"").split(`
`),o=n.length;if(o===1)return FO(n[0],t,r,i);for(var a=new le(0,0,0,0),s=0;s<n.length;s++){var l=FO(n[s],t,r,i);s===0?a.copy(l):a.union(l)}return a}function md(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function hc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function yd(e){return Di("\u56FD",e)}function Tr(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function pc(e,t,r){var i=t.position||"inside",n=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,c=r.y,u="left",d="top";if(i instanceof Array)l+=Tr(i[0],r.width),c+=Tr(i[1],r.height),u=null,d=null;else switch(i){case"left":l-=n,c+=s,u="right",d="middle";break;case"right":l+=n+a,c+=s,d="middle";break;case"top":l+=a/2,c-=n,u="center",d="bottom";break;case"bottom":l+=a/2,c+=o+n,u="center";break;case"inside":l+=a/2,c+=s,u="center",d="middle";break;case"insideLeft":l+=n,c+=s,d="middle";break;case"insideRight":l+=a-n,c+=s,u="right",d="middle";break;case"insideTop":l+=a/2,c+=n,u="center";break;case"insideBottom":l+=a/2,c+=o-n,u="center",d="bottom";break;case"insideTopLeft":l+=n,c+=n;break;case"insideTopRight":l+=a-n,c+=n,u="right";break;case"insideBottomLeft":l+=n,c+=o-n,d="bottom";break;case"insideBottomRight":l+=a-n,c+=o-n,u="right",d="bottom";break}return e=e||{},e.x=l,e.y=c,e.align=u,e.verticalAlign=d,e}var xD="__zr_normal__",DD=$i.concat(["ignore"]),Qte=Er($i,function(e,t){return e[t]=!0,e},{ignore:!1}),wd={},Jte=new le(0,0,0,0),TD=function(){function e(t){this.id=ty(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,i){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,n=i.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=n?this:null;var c=!1;if(o.copyTransform(r),i.position!=null){var u=Jte;i.layoutRect?u.copy(i.layoutRect):u.copy(this.getBoundingRect()),n||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(wd,i,u):pc(wd,i,u),o.x=wd.x,o.y=wd.y,a=wd.align,s=wd.verticalAlign;var d=i.origin;if(d&&i.rotation!=null){var h=void 0,p=void 0;d==="center"?(h=u.width*.5,p=u.height*.5):(h=Tr(d[0],u.width),p=Tr(d[1],u.height)),c=!0,o.originX=-o.x+h+(n?0:u.x),o.originY=-o.y+p+(n?0:u.y)}}i.rotation!=null&&(o.rotation=i.rotation);var g=i.offset;g&&(o.x+=g[0],o.y+=g[1],c||(o.originX=-g[0],o.originY=-g[1]));var f=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,w=void 0;f&&this.canBeInsideText()?(m=i.insideFill,y=i.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),w=!0)):(m=i.outsideFill,y=i.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),w=!0)),m=m||"#000",(m!==v.fill||y!==v.stroke||w!==v.autoStroke||a!==v.align||s!==v.verticalAlign)&&(l=!0,v.fill=m,v.stroke=y,v.autoStroke=w,v.align=a,v.verticalAlign=s,r.setDefaultTextStyle(v)),r.__dirty|=sr,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Kp:qp},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),i=typeof r=="string"&&Cr(r);i||(i=[255,255,255,1]);for(var n=i[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)i[a]=i[a]*n+(o?0:255)*(1-n);return i[3]=1,yn(i,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},F(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(J(t))for(var i=t,n=me(i),o=0;o<n.length;o++){var a=n[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,i=0;i<this.animators.length;i++){var n=this.animators[i],o=n.__fromStateTransition;if(!(n.getLoop()||o&&o!==xD)){var a=n.targetName,s=a?r[a]:r;n.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,DD)},e.prototype._savePrimaryToNormal=function(t,r,i){for(var n=0;n<i.length;n++){var o=i[n];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(xD,!1,t)},e.prototype.useState=function(t,r,i,n){var o=t===xD,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(pe(s,t)>=0&&(r||s.length===1))){var c;if(this.stateProxy&&!o&&(c=this.stateProxy(t)),c||(c=this.states&&this.states[t]),!c&&!o){ql("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||n);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,c,this._normalState,r,!i&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,h=this._textGuide;return d&&d.useState(t,r,i,u),h&&h.useState(t,r,i,u),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~sr),c}}},e.prototype.useStates=function(t,r,i){if(!t.length)this.clearStates();else{var n=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var c=t[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,t)),u||(u=this.states[c]),u&&n.push(u)}var d=n[a-1],h=!!(d&&d.hoverLayer||i);h&&this._toggleHoverLayerFlag(!0);var p=this._mergeStates(n),g=this.stateTransition;this.saveCurrentToNormalState(p),this._applyStateObj(t.join(","),p,this._normalState,!1,!r&&!this.__inHover&&g&&g.duration>0,g);var f=this._textContent,v=this._textGuide;f&&f.useStates(t,r,h),v&&v.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~sr)}},e.prototype.isSilent=function(){for(var t=this.silent,r=this.parent;!t&&r;){if(r.silent){t=!0;break}r=r.parent}return t},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=pe(this.currentStates,t);if(r>=0){var i=this.currentStates.slice();i.splice(r,1),this.useStates(i)}},e.prototype.replaceState=function(t,r,i){var n=this.currentStates.slice(),o=pe(n,t),a=pe(n,r)>=0;o>=0?a?n.splice(o,1):n[o]=r:i&&!a&&n.push(r),this.useStates(n)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},i,n=0;n<t.length;n++){var o=t[n];F(r,o),o.textConfig&&(i=i||{},F(i,o.textConfig))}return i&&(r.textConfig=i),r},e.prototype._applyStateObj=function(t,r,i,n,o,a){var s=!(r&&n);r&&r.textConfig?(this.textConfig=F({},n?this.textConfig:i.textConfig),F(this.textConfig,r.textConfig)):s&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},c=!1,u=0;u<DD.length;u++){var d=DD[u],h=o&&Qte[d];r&&r[d]!=null?h?(c=!0,l[d]=r[d]):this[d]=r[d]:s&&i[d]!=null&&(h?(c=!0,l[d]=i[d]):this[d]=i[d])}if(!o)for(var u=0;u<this.animators.length;u++){var p=this.animators[u],g=p.targetName;p.getLoop()||p.__changeFinalValue(g?(r||i)[g]:r||i)}c&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new xi,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),F(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=sr;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,i=this._textGuide;r&&(r.__inHover=t),i&&(i.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.addAnimator(r[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.removeAnimator(r[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,i){var n=t?this[t]:this,o=new $p(n,r,i);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var i=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(r)}).done(function(){var o=n.animators,a=pe(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var i=this.animators,n=i.length,o=[],a=0;a<n;a++){var s=i[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,i){ED(this,t,r,i)},e.prototype.animateFrom=function(t,r,i){ED(this,t,r,i,!0)},e.prototype._transitionState=function(t,r,i,n){for(var o=ED(this,r,i,n),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=sr;var r={};function i(o,a,s){r[o+a+s]||(console.warn("DEPRECATED: '"+o+"' has been deprecated. use '"+a+"', '"+s+"' instead"),r[o+a+s]=!0)}function n(o,a,s,l){Object.defineProperty(t,o,{get:function(){if(!this[a]){var u=this[a]=[];c(this,u)}return this[a]},set:function(u){this[s]=u[0],this[l]=u[1],this[a]=u,c(this,u)}});function c(u,d){Object.defineProperty(d,0,{get:function(){return u[s]},set:function(h){u[s]=h}}),Object.defineProperty(d,1,{get:function(){return u[l]},set:function(h){u[l]=h}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();ot(TD,ir);ot(TD,xi);function ED(e,t,r,i,n){r=r||{};var o=[];OO(e,"",e,t,r,i,o,n);var a=o.length,s=!1,l=r.done,c=r.aborted,u=function(){s=!0,a--,a<=0&&(s?l&&l():c&&c())},d=function(){a--,a<=0&&(s?l&&l():c&&c())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(g,f){r.during(f)});for(var h=0;h<o.length;h++){var p=o[h];u&&p.done(u),d&&p.aborted(d),r.force&&p.duration(r.duration),p.start(r.easing)}return o}function MD(e,t,r){for(var i=0;i<r;i++)e[i]=t[i]}function ere(e){return Vt(e[0])}function tre(e,t,r){if(Vt(t[r]))if(Vt(e[r])||(e[r]=[]),Zt(t[r])){var i=t[r].length;e[r].length!==i&&(e[r]=new t[r].constructor(i),MD(e[r],t[r],i))}else{var n=t[r],o=e[r],a=n.length;if(ere(n))for(var s=n[0].length,l=0;l<a;l++)o[l]?MD(o[l],n[l],s):o[l]=Array.prototype.slice.call(n[l]);else MD(o,n,a);o.length=n.length}else e[r]=t[r]}function rre(e,t){return e===t||Vt(e)&&Vt(t)&&ire(e,t)}function ire(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function OO(e,t,r,i,n,o,a,s){for(var l=me(i),c=n.duration,u=n.delay,d=n.additive,h=n.setToFinal,p=!J(o),g=e.animators,f=[],v=0;v<l.length;v++){var m=l[v],y=i[m];if(y!=null&&r[m]!=null&&(p||o[m]))if(J(y)&&!Vt(y)&&!Ss(y)){if(t){s||(r[m]=y,e.updateDuringAnimation(t));continue}OO(e,m,r[m],y,n,o&&o[m],a,s)}else f.push(m);else s||(r[m]=y,e.updateDuringAnimation(t),f.push(m))}var w=f.length;if(!d&&w)for(var C=0;C<g.length;C++){var S=g[C];if(S.targetName===t){var b=S.stopTracks(f);if(b){var x=pe(g,S);g.splice(x,1)}}}if(n.force||(f=Pe(f,function(_){return!rre(i[_],r[_])}),w=f.length),w>0||n.force&&!a.length){var E=void 0,M=void 0,T=void 0;if(s){M={},h&&(E={});for(var C=0;C<w;C++){var m=f[C];M[m]=r[m],h?E[m]=i[m]:r[m]=i[m]}}else if(h){T={};for(var C=0;C<w;C++){var m=f[C];T[m]=sc(r[m]),tre(r,i,m)}}var S=new $p(r,!1,!1,d?Pe(g,function(R){return R.targetName===t}):null);S.targetName=t,n.scope&&(S.scope=n.scope),h&&E&&S.whenWithKeys(0,E,f),T&&S.whenWithKeys(0,T,f),S.whenWithKeys(c??500,s?M:i,f).delay(u||0),e.addAnimator(S,t),a.push(S)}}var zy=TD;var NO=function(e){ke(t,e);function t(r){var i=e.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var i=this._children,n=0;n<i.length;n++)if(i[n].name===r)return i[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,i){if(r&&r!==this&&r.parent!==this&&i&&i.parent===this){var n=this._children,o=n.indexOf(i);o>=0&&(n.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,i){var n=pe(this._children,r);return n>=0&&this.replaceAt(i,n),this},t.prototype.replaceAt=function(r,i){var n=this._children,o=n[i];if(r&&r!==this&&r.parent!==this&&r!==o){n[i]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var i=this.__zr;i&&i!==r.__zr&&r.addSelfToZr(i),i&&i.refresh()},t.prototype.remove=function(r){var i=this.__zr,n=this._children,o=pe(n,r);return o<0?this:(n.splice(o,1),r.parent=null,i&&r.removeSelfFromZr(i),i&&i.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,i=this.__zr,n=0;n<r.length;n++){var o=r[n];i&&o.removeSelfFromZr(i),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,i){for(var n=this._children,o=0;o<n.length;o++){var a=n[o];r.call(i,a,o)}return this},t.prototype.traverse=function(r,i){for(var n=0;n<this._children.length;n++){var o=this._children[n],a=r.call(i,o);o.isGroup&&!a&&o.traverse(r,i)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var i=new le(0,0,0,0),n=r||this._children,o=[],a=null,s=0;s<n.length;s++){var l=n[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(o);u?(le.applyTransform(i,c,u),a=a||i.clone(),a.union(i)):(a=a||c.clone(),a.union(c))}}return a||i},t}(zy);NO.prototype.type="group";var ee=NO;var Vy={},zO={};function nre(e){delete zO[e]}function ore(e){if(!e)return!1;if(typeof e=="string")return fd(e,1)<Yp;if(e.colorStops){for(var t=e.colorStops,r=0,i=t.length,n=0;n<i;n++)r+=fd(t[n].color,1);return r/=i,r<Yp}return!1}var are=function(){function e(t,r,i){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=r,this.id=t;var o=new JF,a=i.renderer||"canvas";Vy[a]||(a=me(Vy)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var s=new Vy[a](r,o,i,t),l=i.ssr||s.ssrOnly;this.storage=o,this.painter=s;var c=!Re.node&&!Re.worker&&!l?new RO(s.getViewportRoot(),s.root):null,u=i.useCoarsePointer,d=u==null||u==="auto"?Re.touchEventsSupported:!!u,h=44,p;d&&(p=de(i.pointerSize,h)),this.handler=new YF(o,s,c,s.root,p),this.animation=new DO({stage:{update:l?null:function(){return n._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh())},e.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=ore(t))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(t){var r,i=lc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var n=lc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},e.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){if(!this._disposed)return this.handler.findHover(t,r)},e.prototype.on=function(t,r,i){return this._disposed||this.handler.on(t,r,i),this},e.prototype.off=function(t,r){this._disposed||this.handler.off(t,r)},e.prototype.trigger=function(t,r){this._disposed||this.handler.trigger(t,r)},e.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof ee&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,nre(this.id))},e}();function RD(e,t){var r=new are(ty(),e,t);return zO[r.id]=r,r}function VO(e,t){Vy[e]=t}var _D;function BO(e){if(typeof _D=="function")return _D(e)}function GO(e){_D=e}var HO=1e-4,UO=20;function lre(e){return e.replace(/^\s+|\s+$/g,"")}function Ye(e,t,r,i){var n=t[0],o=t[1],a=r[0],s=r[1],l=o-n,c=s-a;if(l===0)return c===0?a:(a+s)/2;if(i)if(l>0){if(e<=n)return a;if(e>=o)return s}else{if(e>=n)return a;if(e<=o)return s}else{if(e===n)return a;if(e===o)return s}return(e-n)/l*c+a}function j(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return H(e)?lre(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function gt(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),UO),e=(+e).toFixed(t),r?e:+e}function lr(e){return e.sort(function(t,r){return t-r}),e}function Qr(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return cre(e)}function cre(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),i=r>0?+t.slice(r+1):0,n=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:n-1-o;return Math.max(0,a-i)}function By(e,t){var r=Math.log,i=Math.LN10,n=Math.floor(r(e[1]-e[0])/i),o=Math.round(r(Math.abs(t[1]-t[0]))/i),a=Math.min(Math.max(-n+o,0),20);return isFinite(a)?a:20}function WO(e,t){var r=Er(e,function(p,g){return p+(isNaN(g)?0:g)},0);if(r===0)return[];for(var i=Math.pow(10,t),n=N(e,function(p){return(isNaN(p)?0:p)/r*i*100}),o=i*100,a=N(n,function(p){return Math.floor(p)}),s=Er(a,function(p,g){return p+g},0),l=N(n,function(p,g){return p-a[g]});s<o;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,h=l.length;d<h;++d)l[d]>c&&(c=l[d],u=d);++a[u],l[u]=0,++s}return N(a,function(p){return p/i})}function jO(e,t){var r=Math.max(Qr(e),Qr(t)),i=e+t;return r>UO?i:gt(i,r)}var AD=9007199254740991;function ID(e){var t=Math.PI*2;return(e%t+t)%t}function gc(e){return e>-HO&&e<HO}var ure=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Jr(e){if(e instanceof Date)return e;if(H(e)){var t=ure.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function $O(e){return Math.pow(10,Gy(e))}function Gy(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function Hy(e,t){var r=Gy(e),i=Math.pow(10,r),n=e/i,o;return t?n<1.5?o=1:n<2.5?o=2:n<4?o=3:n<7?o=5:o=10:n<1?o=1:n<2?o=2:n<3?o=3:n<5?o=5:o=10,e=o*i,r>=-20?+e.toFixed(r<0?-r:0):e}function Uy(e,t){var r=(e.length-1)*t+1,i=Math.floor(r),n=+e[i-1],o=r-i;return o?n+o*(e[i]-n):n}function PD(e){e.sort(function(l,c){return s(l,c,0)?-1:1});for(var t=-1/0,r=1,i=0;i<e.length;){for(var n=e[i].interval,o=e[i].close,a=0;a<2;a++)n[a]<=t&&(n[a]=t,o[a]=a?1:1-r),t=n[a],r=o[a];n[0]===n[1]&&o[0]*o[1]!==1?e.splice(i,1):i++}return e;function s(l,c,u){return l.interval[u]<c.interval[u]||l.interval[u]===c.interval[u]&&(l.close[u]-c.close[u]===(u?-1:1)||!u&&s(l,c,1))}}function wn(e){var t=parseFloat(e);return t==e&&(t!==0||!H(e)||e.indexOf("x")<=0)?t:NaN}function Zp(e){return!isNaN(wn(e))}function Wy(){return Math.round(Math.random()*9)}function YO(e,t){return t===0?e:YO(t,e%t)}function kD(e,t){return e==null?t:t==null?e:e*t/YO(e,t)}var dre="[ECharts] ",qO={},hre=typeof console<"u"&&console.warn&&console.log;function pre(e,t,r){if(hre){if(r){if(qO[t])return;qO[t]=!0}console[e](dre+t)}}function KO(e,t){pre("warn",e,t)}function qe(e){throw new Error(e)}function ZO(e,t,r){return(t-e)*r+e}var XO="series\0",QO="\0_ec_\0";function Ge(e){return e instanceof Array?e:e==null?[]:[e]}function Yi(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,n=r.length;i<n;i++){var o=r[i];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var LD=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function eo(e){return J(e)&&!O(e)&&!(e instanceof Date)?e.value:e}function JO(e){return J(e)&&!(e instanceof Array)}function jy(e,t,r){var i=r==="normalMerge",n=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=Y();D(t,function(l,c){if(!J(l)){t[c]=null;return}});var s=gre(e,a,r);return(i||n)&&fre(s,e,a,t),i&&vre(s,t),i||n?mre(s,t,n):o&&yre(s,t),wre(s),s}function gre(e,t,r){var i=[];if(r==="replaceAll")return i;for(var n=0;n<e.length;n++){var o=e[n];o&&o.id!=null&&t.set(o.id,n),i.push({existing:r==="replaceMerge"||Cd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return i}function fre(e,t,r,i){D(i,function(n,o){if(!(!n||n.id==null)){var a=Xp(n.id),s=r.get(a);if(s!=null){var l=e[s];St(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=n,l.existing=t[s],i[o]=null}}})}function vre(e,t){D(t,function(r,i){if(!(!r||r.name==null))for(var n=0;n<e.length;n++){var o=e[n].existing;if(!e[n].newOption&&o&&(o.id==null||r.id==null)&&!Cd(r)&&!Cd(o)&&eN("name",o,r)){e[n].newOption=r,t[i]=null;return}}})}function mre(e,t,r){D(t,function(i){if(i){for(var n,o=0;(n=e[o])&&(n.newOption||Cd(n.existing)||n.existing&&i.id!=null&&!eN("id",i,n.existing));)o++;n?(n.newOption=i,n.brandNew=r):e.push({newOption:i,brandNew:r,existing:null,keyInfo:null}),o++}})}function yre(e,t){D(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function wre(e){var t=Y();D(e,function(r){var i=r.existing;i&&t.set(i.id,r)}),D(e,function(r){var i=r.newOption;St(!i||i.id==null||!t.get(i.id)||t.get(i.id)===r,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&t.set(i.id,r),!r.keyInfo&&(r.keyInfo={})}),D(e,function(r,i){var n=r.existing,o=r.newOption,a=r.keyInfo;if(J(o)){if(a.name=o.name!=null?Xp(o.name):n?n.name:XO+i,n)a.id=Xp(n.id);else if(o.id!=null)a.id=Xp(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function eN(e,t,r){var i=Mt(t[e],null),n=Mt(r[e],null);return i!=null&&n!=null&&i===n}function Xp(e){return Mt(e,"")}function Mt(e,t){return e==null?t:H(e)?e:be(e)||Rp(e)?e+"":t}function bd(e){var t=e.name;return!!(t&&t.indexOf(XO))}function Cd(e){return e&&e.id!=null&&Xp(e.id).indexOf(QO)===0}function tN(e){return QO+e}function rN(e,t,r){D(e,function(i){var n=i.newOption;J(n)&&(i.keyInfo.mainType=t,i.keyInfo.subType=Cre(t,n,i.existing,r))})}function Cre(e,t,r,i){var n=t.type?t.type:r?r.subType:i.determineSubType(e,t);return n}function iN(e,t){var r={},i={};return n(e||[],r),n(t||[],i,r),[o(r),o(i)];function n(a,s,l){for(var c=0,u=a.length;c<u;c++){var d=Mt(a[c].seriesId,null);if(d==null)return;for(var h=Ge(a[c].dataIndex),p=l&&l[d],g=0,f=h.length;g<f;g++){var v=h[g];p&&p[v]?p[v]=null:(s[d]||(s[d]={}))[v]=1}}}function o(a,s){var l=[];for(var c in a)if(a.hasOwnProperty(c)&&a[c]!=null)if(s)l.push(+c);else{var u=o(a[c],!0);u.length&&l.push({seriesId:c,dataIndex:u})}return l}}function Cn(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return O(t.dataIndex)?N(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return O(t.name)?N(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function he(){var e="__ec_inner_"+bre++;return function(t){return t[e]||(t[e]={})}}var bre=Wy();function Ps(e,t,r){var i=Qp(t,r),n=i.mainTypeSpecified,o=i.queryOptionMap,a=i.others,s=a,l=r?r.defaultMainType:null;return!n&&l&&o.set(l,{}),o.each(function(c,u){var d=ks(e,u,c,{useDefault:l===u,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[u+"Models"]=d.models,s[u+"Model"]=d.models[0]}),s}function Qp(e,t){var r;if(H(e)){var i={};i[e+"Index"]=0,r=i}else r=e;var n=Y(),o={},a=!1;return D(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||t&&t.includeMainTypes&&pe(t.includeMainTypes,u)<0)){a=a||!!u;var h=n.get(u)||n.set(u,{});h[d]=s}}),{mainTypeSpecified:a,queryOptionMap:n,others:o}}var dt={useDefault:!0,enableAll:!1,enableNone:!1},nN={useDefault:!1,enableAll:!0,enableNone:!0};function ks(e,t,r,i){i=i||dt;var n=r.index,o=r.id,a=r.name,s={models:null,specified:n!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=i.useDefault&&(l=e.getComponent(t))?[l]:[],s}return n==="none"||n===!1?(St(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(n==="all"&&(St(i.enableAll,'`"all"` is not a valid value on index option.'),n=o=a=null),s.models=e.queryComponents({mainType:t,index:n,id:o,name:a}),s)}function FD(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function oN(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function aN(e){return e==="auto"?Re.domSupported?"html":"richText":e||"html"}function Jp(e,t){var r=Y(),i=[];return D(e,function(n){var o=t(n);(r.get(o)||(i.push(o),r.set(o,[]))).push(n)}),{keys:i,buckets:r}}function $y(e,t,r,i,n){var o=t==null||t==="auto";if(i==null)return i;if(be(i)){var a=ZO(r||0,i,n);return gt(a,o?Math.max(Qr(r||0),Qr(i)):t)}else{if(H(i))return n<1?r:i;for(var s=[],l=r,c=i,u=Math.max(l?l.length:0,c.length),d=0;d<u;++d){var h=e.getDimensionInfo(d);if(h&&h.type==="ordinal")s[d]=(n<1&&l?l:c)[d];else{var p=l&&l[d]?l[d]:0,g=c[d],a=ZO(p,g,n);s[d]=gt(a,o?Math.max(Qr(p),Qr(g)):t)}}return s}}var Sre=".",fc="___EC__COMPONENT__CONTAINER___",sN="___EC__EXTENDED_CLASS___";function Mi(e){var t={main:"",sub:""};if(e){var r=e.split(Sre);t.main=r[0]||"",t.sub=r[1]||""}return t}function xre(e){St(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function lN(e){return!!(e&&e[sN])}function Sd(e,t){e.$constructor=e,e.extend=function(r){var i=this,n;return Dre(i)?n=function(o){I(a,o);function a(){return o.apply(this,arguments)||this}return a}(i):(n=function(){(r.$constructor||i).apply(this,arguments)},_F(n,this)),F(n.prototype,r),n[sN]=!0,n.extend=this.extend,n.superCall=Mre,n.superApply=Tre,n.superClass=i,n}}function Dre(e){return Z(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function Yy(e,t){e.extend=t.extend}var Ere=Math.round(Math.random()*10);function cN(e){var t=["__\0is_clz",Ere++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function Mre(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.superClass.prototype[t].apply(e,r)}function Tre(e,t,r){return this.superClass.prototype[t].apply(e,r)}function Ls(e){var t={};e.registerClass=function(i){var n=i.type||i.prototype.type;if(n){xre(n),i.prototype.type=n;var o=Mi(n);if(!o.sub)t[o.main]=i;else if(o.sub!==fc){var a=r(o);a[o.sub]=i}}return i},e.getClass=function(i,n,o){var a=t[i];if(a&&a[fc]&&(a=n?a[n]:null),o&&!a)throw new Error(n?"Component "+i+"."+(n||"")+" is used but not imported.":i+".type should be specified.");return a},e.getClassesByMainType=function(i){var n=Mi(i),o=[],a=t[n.main];return a&&a[fc]?D(a,function(s,l){l!==fc&&o.push(s)}):o.push(a),o},e.hasClass=function(i){var n=Mi(i);return!!t[n.main]},e.getAllClassMainTypes=function(){var i=[];return D(t,function(n,o){i.push(o)}),i},e.hasSubTypes=function(i){var n=Mi(i),o=t[n.main];return o&&o[fc]};function r(i){var n=t[i.main];return(!n||!n[fc])&&(n=t[i.main]={},n[fc]=!0),n}}function Ti(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(i,n,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(n&&pe(n,l)>=0||o&&pe(o,l)<0)){var c=i.getShallow(l,t);c!=null&&(a[e[s][0]]=c)}}return a}}var _re=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Rre=Ti(_re),uN=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return Rre(this,t,r)},e}();var ND=new Ta(50);function hN(e){if(typeof e=="string"){var t=ND.get(e);return t&&t.image}else return e}function eg(e,t,r,i,n){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=ND.get(e),a={hostEl:r,cb:i,cbPayload:n};return o?(t=o.image,!xd(t)&&o.pending.push(a)):(t=Vr.loadImage(e,dN,dN),t.__zrImageSrc=e,ND.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function dN(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],i=r.cb;i&&i(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function xd(e){return e&&e.width&&e.height}var zD=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Ire(e,t,r,i,n){if(!t)return"";var o=(e+"").split(`
`);n=gN(t,r,i,n);for(var a=0,s=o.length;a<s;a++)o[a]=fN(o[a],n);return o.join(`
`)}function gN(e,t,r,i){i=i||{};var n=F({},i);n.font=t,r=de(r,"..."),n.maxIterations=de(i.maxIterations,2);var o=n.minChar=de(i.minChar,0);n.cnCharWidth=Di("\u56FD",t);var a=n.ascCharWidth=Di("a",t);n.placeholder=de(i.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var c=Di(r,t);return c>s&&(r="",c=0),s=e-c,n.ellipsis=r,n.ellipsisWidth=c,n.contentWidth=s,n.containerWidth=e,n}function fN(e,t){var r=t.containerWidth,i=t.font,n=t.contentWidth;if(!r)return"";var o=Di(e,i);if(o<=r)return e;for(var a=0;;a++){if(o<=n||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?Pre(e,n,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*n/o):0;e=e.substr(0,s),o=Di(e,i)}return e===""&&(e=t.placeholder),e}function Pre(e,t,r,i){for(var n=0,o=0,a=e.length;o<a&&n<t;o++){var s=e.charCodeAt(o);n+=0<=s&&s<=127?r:i}return o}function vN(e,t){e!=null&&(e+="");var r=t.overflow,i=t.padding,n=t.font,o=r==="truncate",a=yd(n),s=de(t.lineHeight,a),l=!!t.backgroundColor,c=t.lineOverflow==="truncate",u=t.width,d;u!=null&&(r==="break"||r==="breakAll")?d=e?yN(e,t.font,u,r==="breakAll",0).lines:[]:d=e?e.split(`
`):[];var h=d.length*s,p=de(t.height,h);if(h>p&&c){var g=Math.floor(p/s);d=d.slice(0,g)}if(e&&o&&u!=null)for(var f=gN(u,n,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),v=0;v<d.length;v++)d[v]=fN(d[v],f);for(var m=p,y=0,v=0;v<d.length;v++)y=Math.max(Di(d[v],n),y);u==null&&(u=y);var w=y;return i&&(m+=i[0]+i[2],w+=i[1]+i[3],u+=i[1]+i[3]),l&&(w=u),{lines:d,height:p,outerWidth:w,outerHeight:m,lineHeight:s,calculatedLineHeight:a,contentWidth:y,contentHeight:h,width:u}}var kre=function(){function e(){}return e}(),pN=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),Lre=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function mN(e,t){var r=new Lre;if(e!=null&&(e+=""),!e)return r;for(var i=t.width,n=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:o==="breakAll"}:null,s=zD.lastIndex=0,l;(l=zD.exec(e))!=null;){var c=l.index;c>s&&VD(r,e.substring(s,c),t,a),VD(r,l[2],t,a,l[1]),s=zD.lastIndex}s<e.length&&VD(r,e.substring(s,e.length),t,a);var u=[],d=0,h=0,p=t.padding,g=o==="truncate",f=t.lineOverflow==="truncate";function v(z,B,K){z.width=B,z.lineHeight=K,d+=K,h=Math.max(h,B)}e:for(var m=0;m<r.lines.length;m++){for(var y=r.lines[m],w=0,C=0,S=0;S<y.tokens.length;S++){var b=y.tokens[S],x=b.styleName&&t.rich[b.styleName]||{},E=b.textPadding=x.padding,M=E?E[1]+E[3]:0,T=b.font=x.font||t.font;b.contentHeight=yd(T);var _=de(x.height,b.contentHeight);if(b.innerHeight=_,E&&(_+=E[0]+E[2]),b.height=_,b.lineHeight=ur(x.lineHeight,t.lineHeight,_),b.align=x&&x.align||t.align,b.verticalAlign=x&&x.verticalAlign||"middle",f&&n!=null&&d+b.lineHeight>n){S>0?(y.tokens=y.tokens.slice(0,S),v(y,C,w),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break e}var R=x.width,A=R==null||R==="auto";if(typeof R=="string"&&R.charAt(R.length-1)==="%")b.percentWidth=R,u.push(b),b.contentWidth=Di(b.text,T);else{if(A){var P=x.backgroundColor,k=P&&P.image;k&&(k=hN(k),xd(k)&&(b.width=Math.max(b.width,k.width*_/k.height)))}var L=g&&i!=null?i-C:null;L!=null&&L<b.width?!A||L<M?(b.text="",b.width=b.contentWidth=0):(b.text=Ire(b.text,L-M,T,t.ellipsis,{minChar:t.truncateMinChar}),b.width=b.contentWidth=Di(b.text,T)):b.contentWidth=Di(b.text,T)}b.width+=M,C+=b.width,x&&(w=Math.max(w,b.lineHeight))}v(y,C,w)}r.outerWidth=r.width=de(i,h),r.outerHeight=r.height=de(n,d),r.contentHeight=d,r.contentWidth=h,p&&(r.outerWidth+=p[1]+p[3],r.outerHeight+=p[0]+p[2]);for(var m=0;m<u.length;m++){var b=u[m],V=b.percentWidth;b.width=parseInt(V,10)/100*r.width}return r}function VD(e,t,r,i,n){var o=t==="",a=n&&r.rich[n]||{},s=e.lines,l=a.font||r.font,c=!1,u,d;if(i){var h=a.padding,p=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var g=Tr(a.width,i.width)+p;s.length>0&&g+i.accumWidth>i.width&&(u=t.split(`
`),c=!0),i.accumWidth=g}else{var f=yN(t,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=f.accumWidth+p,d=f.linesWidths,u=f.lines}}else u=t.split(`
`);for(var v=0;v<u.length;v++){var m=u[v],y=new kre;if(y.styleName=n,y.text=m,y.isLineHolder=!m&&!o,typeof a.width=="number"?y.width=a.width:y.width=d?d[v]:Di(m,l),!v&&!c){var w=(s[s.length-1]||(s[0]=new pN)).tokens,C=w.length;C===1&&w[0].isLineHolder?w[0]=y:(m||!C||o)&&w.push(y)}else s.push(new pN([y]))}}function Fre(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var Ore=Er(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function Nre(e){return Fre(e)?!!Ore[e]:!0}function yN(e,t,r,i,n){for(var o=[],a=[],s="",l="",c=0,u=0,d=0;d<e.length;d++){var h=e.charAt(d);if(h===`
`){l&&(s+=l,u+=c),o.push(s),a.push(u),s="",l="",c=0,u=0;continue}var p=Di(h,t),g=i?!1:!Nre(h);if(o.length?u+p>r:n+u+p>r){u?(s||l)&&(g?(s||(s=l,l="",c=0,u=c),o.push(s),a.push(u-c),l+=h,c+=p,s="",u=c):(l&&(s+=l,l="",c=0),o.push(s),a.push(u),s=h,u=p)):g?(o.push(l),a.push(c),l=h,c=p):(o.push(h),a.push(p));continue}u+=p,g?(l+=h,c+=p):(l&&(s+=l,l="",c=0),s+=h)}return!o.length&&!s&&(s=e,l="",c=0),l&&(s+=l),s&&(o.push(s),a.push(u)),o.length===1&&(u+=n),{accumWidth:u,lines:o,linesWidths:a}}var HD="__zr_style_"+Math.round(Math.random()*10),Go={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},vc={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Go[HD]=!0;var wN=["z","z2","invisible"],zre=["invisible"],Vre=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var i=me(r),n=0;n<i.length;n++){var o=i[n];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,i,n,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Bre(this,r,i)||a&&!a[0]&&!a[3])return!1;if(n&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,i){return this.rectContain(r,i)},t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.rectContain=function(r,i){var n=this.transformCoordToLocal(r,i),o=this.getBoundingRect();return o.contain(n[0],n[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,n=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new le(0,0,0,0)),i?le.applyTransform(r,n,i):r.copy(n),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var c=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-c),r.y=Math.floor(r.y-c),r.width=Math.ceil(r.width+1+c*2),r.height=Math.ceil(r.height+1+c*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new le(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,i){r!=="style"?e.prototype.attrKV.call(this,r,i):this.style?this.setStyle(i):this.useStyle(i)},t.prototype.setStyle=function(r,i){return typeof r=="string"?this.style[r]=i:F(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=rc,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&rc)},t.prototype.styleUpdated=function(){this.__dirty&=~rc},t.prototype.createStyle=function(r){return Ds(Go,r)},t.prototype.useStyle=function(r){r[HD]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[HD]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,i,wN)},t.prototype._applyStateObj=function(r,i,n,o,a,s){e.prototype._applyStateObj.call(this,r,i,n,o,a,s);var l=!(i&&o),c;if(i&&i.style?a?o?c=i.style:(c=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(c,i.style)):(c=this._mergeStyle(this.createStyle(),o?this.style:n.style),this._mergeStyle(c,i.style)):l&&(c=n.style),c)if(a){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=me(u),h=0;h<d.length;h++){var p=d[h];p in c&&(c[p]=c[p],this.style[p]=u[p])}for(var g=me(c),h=0;h<g.length;h++){var p=g[h];this.style[p]=this.style[p]}this._transitionState(r,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var f=this.__inHover?zre:wN,h=0;h<f.length;h++){var p=f[h];i&&i[p]!=null?this[p]=i[p]:l&&n[p]!=null&&(this[p]=n[p])}},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,o=0;o<r.length;o++){var a=r[o];a.style&&(n=n||{},this._mergeStyle(n,a.style))}return n&&(i.style=n),i},t.prototype._mergeStyle=function(r,i){return F(r,i),r},t.prototype.getAnimationStyleProps=function(){return vc},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=sr|rc}(),t}(zy),BD=new le(0,0,0,0),GD=new le(0,0,0,0);function Bre(e,t,r){return BD.copy(e.getBoundingRect()),e.transform&&BD.applyTransform(e.transform),GD.width=t,GD.height=r,!BD.intersect(GD)}var Yt=Vre;var _i=Math.min,Ri=Math.max,UD=Math.sin,WD=Math.cos,mc=Math.PI*2,qy=No(),Ky=No(),Zy=No();function yc(e,t,r){if(e.length!==0){for(var i=e[0],n=i[0],o=i[0],a=i[1],s=i[1],l=1;l<e.length;l++)i=e[l],n=_i(n,i[0]),o=Ri(o,i[0]),a=_i(a,i[1]),s=Ri(s,i[1]);t[0]=n,t[1]=a,r[0]=o,r[1]=s}}function jD(e,t,r,i,n,o){n[0]=_i(e,r),n[1]=_i(t,i),o[0]=Ri(e,r),o[1]=Ri(t,i)}var CN=[],bN=[];function SN(e,t,r,i,n,o,a,s,l,c){var u=vy,d=Gt,h=u(e,r,n,a,CN);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var p=0;p<h;p++){var g=d(e,r,n,a,CN[p]);l[0]=_i(g,l[0]),c[0]=Ri(g,c[0])}h=u(t,i,o,s,bN);for(var p=0;p<h;p++){var f=d(t,i,o,s,bN[p]);l[1]=_i(f,l[1]),c[1]=Ri(f,c[1])}l[0]=_i(e,l[0]),c[0]=Ri(e,c[0]),l[0]=_i(a,l[0]),c[0]=Ri(a,c[0]),l[1]=_i(t,l[1]),c[1]=Ri(t,c[1]),l[1]=_i(s,l[1]),c[1]=Ri(s,c[1])}function xN(e,t,r,i,n,o,a,s){var l=yy,c=$t,u=Ri(_i(l(e,r,n),1),0),d=Ri(_i(l(t,i,o),1),0),h=c(e,r,n,u),p=c(t,i,o,d);a[0]=_i(e,n,h),a[1]=_i(t,o,p),s[0]=Ri(e,n,h),s[1]=Ri(t,o,p)}function DN(e,t,r,i,n,o,a,s,l){var c=Ui,u=Wi,d=Math.abs(n-o);if(d%mc<1e-4&&d>1e-4){s[0]=e-r,s[1]=t-i,l[0]=e+r,l[1]=t+i;return}if(qy[0]=WD(n)*r+e,qy[1]=UD(n)*i+t,Ky[0]=WD(o)*r+e,Ky[1]=UD(o)*i+t,c(s,qy,Ky),u(l,qy,Ky),n=n%mc,n<0&&(n=n+mc),o=o%mc,o<0&&(o=o+mc),n>o&&!a?o+=mc:n<o&&a&&(n+=mc),a){var h=o;o=n,n=h}for(var p=0;p<o;p+=Math.PI/2)p>n&&(Zy[0]=WD(p)*r+e,Zy[1]=UD(p)*i+t,c(s,Zy,s),u(l,Zy,l))}var xt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},wc=[],Cc=[],Ho=[],Fs=[],Uo=[],Wo=[],$D=Math.min,YD=Math.max,bc=Math.cos,Sc=Math.sin,Ra=Math.abs,ZD=Math.PI,Os=ZD*2,qD=typeof Float32Array<"u",tg=[];function KD(e){var t=Math.round(e/ZD*1e8)/1e8;return t%2*ZD}function rg(e,t){var r=KD(e[0]);r<0&&(r+=Os);var i=r-e[0],n=e[1];n+=i,!t&&n-r>=Os?n=r+Os:t&&r-n>=Os?n=r-Os:!t&&r>n?n=r+(Os-KD(r-n)):t&&r<n&&(n=r-(Os-KD(n-r))),e[0]=r,e[1]=n}var Gre=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,i){i=i||0,i>0&&(this._ux=Ra(i/cc/t)||0,this._uy=Ra(i/cc/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(xt.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var i=Ra(t-this._xi),n=Ra(r-this._yi),o=i>this._ux||n>this._uy;if(this.addData(xt.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=i*i+n*n;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,i,n,o,a){return this._drawPendingPt(),this.addData(xt.C,t,r,i,n,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,i,n,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,i,n){return this._drawPendingPt(),this.addData(xt.Q,t,r,i,n),this._ctx&&this._ctx.quadraticCurveTo(t,r,i,n),this._xi=i,this._yi=n,this},e.prototype.arc=function(t,r,i,n,o,a){this._drawPendingPt(),tg[0]=n,tg[1]=o,rg(tg,a),n=tg[0],o=tg[1];var s=o-n;return this.addData(xt.A,t,r,i,i,n,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,i,n,o,a),this._xi=bc(o)*i+t,this._yi=Sc(o)*i+r,this},e.prototype.arcTo=function(t,r,i,n,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,i,n,o),this},e.prototype.rect=function(t,r,i,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,i,n),this.addData(xt.R,t,r,i,n),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(xt.Z);var t=this._ctx,r=this._x0,i=this._y0;return t&&t.closePath(),this._xi=r,this._yi=i,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&qD&&(this.data=new Float32Array(r));for(var i=0;i<r;i++)this.data[i]=t[i];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,i=0,n=this._len,o=0;o<r;o++)i+=t[o].len();qD&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[n++]=a[s];this._len=n},e.prototype.addData=function(t,r,i,n,o,a,s,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,qD&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Ho[0]=Ho[1]=Uo[0]=Uo[1]=Number.MAX_VALUE,Fs[0]=Fs[1]=Wo[0]=Wo[1]=-Number.MAX_VALUE;var t=this.data,r=0,i=0,n=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],i=t[a+1],n=r,o=i),s){case xt.M:r=n=t[a++],i=o=t[a++],Uo[0]=n,Uo[1]=o,Wo[0]=n,Wo[1]=o;break;case xt.L:jD(r,i,t[a],t[a+1],Uo,Wo),r=t[a++],i=t[a++];break;case xt.C:SN(r,i,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Uo,Wo),r=t[a++],i=t[a++];break;case xt.Q:xN(r,i,t[a++],t[a++],t[a],t[a+1],Uo,Wo),r=t[a++],i=t[a++];break;case xt.A:var c=t[a++],u=t[a++],d=t[a++],h=t[a++],p=t[a++],g=t[a++]+p;a+=1;var f=!t[a++];l&&(n=bc(p)*d+c,o=Sc(p)*h+u),DN(c,u,d,h,p,g,f,Uo,Wo),r=bc(g)*d+c,i=Sc(g)*h+u;break;case xt.R:n=r=t[a++],o=i=t[a++];var v=t[a++],m=t[a++];jD(n,o,n+v,o+m,Uo,Wo);break;case xt.Z:r=n,i=o;break}Ui(Ho,Ho,Uo),Wi(Fs,Fs,Wo)}return a===0&&(Ho[0]=Ho[1]=Fs[0]=Fs[1]=0),new le(Ho[0],Ho[1],Fs[0]-Ho[0],Fs[1]-Ho[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,i=this._ux,n=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,h=0;h<r;){var p=t[h++],g=h===1;g&&(o=t[h],a=t[h+1],s=o,l=a);var f=-1;switch(p){case xt.M:o=s=t[h++],a=l=t[h++];break;case xt.L:{var v=t[h++],m=t[h++],y=v-o,w=m-a;(Ra(y)>i||Ra(w)>n||h===r-1)&&(f=Math.sqrt(y*y+w*w),o=v,a=m);break}case xt.C:{var C=t[h++],S=t[h++],v=t[h++],m=t[h++],b=t[h++],x=t[h++];f=nO(o,a,C,S,v,m,b,x,10),o=b,a=x;break}case xt.Q:{var C=t[h++],S=t[h++],v=t[h++],m=t[h++];f=aO(o,a,C,S,v,m,10),o=v,a=m;break}case xt.A:var E=t[h++],M=t[h++],T=t[h++],_=t[h++],R=t[h++],A=t[h++],P=A+R;h+=1,g&&(s=bc(R)*T+E,l=Sc(R)*_+M),f=YD(T,_)*$D(Os,Math.abs(A)),o=bc(P)*T+E,a=Sc(P)*_+M;break;case xt.R:{s=o=t[h++],l=a=t[h++];var k=t[h++],L=t[h++];f=k*2+L*2;break}case xt.Z:{var y=s-o,w=l-a;f=Math.sqrt(y*y+w*w),o=s,a=l;break}}f>=0&&(c[d++]=f,u+=f)}return this._pathLen=u,u},e.prototype.rebuildPath=function(t,r){var i=this.data,n=this._ux,o=this._uy,a=this._len,s,l,c,u,d,h,p=r<1,g,f,v=0,m=0,y,w=0,C,S;if(!(p&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,f=this._pathLen,y=r*f,!y)))e:for(var b=0;b<a;){var x=i[b++],E=b===1;switch(E&&(c=i[b],u=i[b+1],s=c,l=u),x!==xt.L&&w>0&&(t.lineTo(C,S),w=0),x){case xt.M:s=c=i[b++],l=u=i[b++],t.moveTo(c,u);break;case xt.L:{d=i[b++],h=i[b++];var M=Ra(d-c),T=Ra(h-u);if(M>n||T>o){if(p){var _=g[m++];if(v+_>y){var R=(y-v)/_;t.lineTo(c*(1-R)+d*R,u*(1-R)+h*R);break e}v+=_}t.lineTo(d,h),c=d,u=h,w=0}else{var A=M*M+T*T;A>w&&(C=d,S=h,w=A)}break}case xt.C:{var P=i[b++],k=i[b++],L=i[b++],V=i[b++],z=i[b++],B=i[b++];if(p){var _=g[m++];if(v+_>y){var R=(y-v)/_;vn(c,P,L,z,R,wc),vn(u,k,V,B,R,Cc),t.bezierCurveTo(wc[1],Cc[1],wc[2],Cc[2],wc[3],Cc[3]);break e}v+=_}t.bezierCurveTo(P,k,L,V,z,B),c=z,u=B;break}case xt.Q:{var P=i[b++],k=i[b++],L=i[b++],V=i[b++];if(p){var _=g[m++];if(v+_>y){var R=(y-v)/_;Rs(c,P,L,R,wc),Rs(u,k,V,R,Cc),t.quadraticCurveTo(wc[1],Cc[1],wc[2],Cc[2]);break e}v+=_}t.quadraticCurveTo(P,k,L,V),c=L,u=V;break}case xt.A:var K=i[b++],X=i[b++],oe=i[b++],ye=i[b++],we=i[b++],Oe=i[b++],$e=i[b++],Ne=!i[b++],xe=oe>ye?oe:ye,ze=Ra(oe-ye)>.001,Ae=we+Oe,ve=!1;if(p){var _=g[m++];v+_>y&&(Ae=we+Oe*(y-v)/_,ve=!0),v+=_}if(ze&&t.ellipse?t.ellipse(K,X,oe,ye,$e,we,Ae,Ne):t.arc(K,X,xe,we,Ae,Ne),ve)break e;E&&(s=bc(we)*oe+K,l=Sc(we)*ye+X),c=bc(Ae)*oe+K,u=Sc(Ae)*ye+X;break;case xt.R:s=c=i[b],l=u=i[b+1],d=i[b++],h=i[b++];var Ie=i[b++],At=i[b++];if(p){var _=g[m++];if(v+_>y){var Ze=y-v;t.moveTo(d,h),t.lineTo(d+$D(Ze,Ie),h),Ze-=Ie,Ze>0&&t.lineTo(d+Ie,h+$D(Ze,At)),Ze-=At,Ze>0&&t.lineTo(d+YD(Ie-Ze,0),h+At),Ze-=Ie,Ze>0&&t.lineTo(d,h+YD(At-Ze,0));break e}v+=_}t.rect(d,h,Ie,At);break;case xt.Z:if(p){var _=g[m++];if(v+_>y){var R=(y-v)/_;t.lineTo(c*(1-R)+s*R,u*(1-R)+l*R);break e}v+=_}t.closePath(),c=s,u=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=xt,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}(),vr=Gre;function jo(e,t,r,i,n,o,a){if(n===0)return!1;var s=n,l=0,c=e;if(a>t+s&&a>i+s||a<t-s&&a<i-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-i)/(e-r),c=(e*i-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var u=l*o-a+c,d=u*u/(l*l+1);return d<=s/2*s/2}function TN(e,t,r,i,n,o,a,s,l,c,u){if(l===0)return!1;var d=l;if(u>t+d&&u>i+d&&u>o+d&&u>s+d||u<t-d&&u<i-d&&u<o-d&&u<s-d||c>e+d&&c>r+d&&c>n+d&&c>a+d||c<e-d&&c<r-d&&c<n-d&&c<a-d)return!1;var h=my(e,t,r,i,n,o,a,s,c,u,null);return h<=d/2}function Xy(e,t,r,i,n,o,a,s,l){if(a===0)return!1;var c=a;if(l>t+c&&l>i+c&&l>o+c||l<t-c&&l<i-c&&l<o-c||s>e+c&&s>r+c&&s>n+c||s<e-c&&s<r-c&&s<n-c)return!1;var u=wy(e,t,r,i,n,o,s,l,null);return u<=c/2}var RN=Math.PI*2;function _r(e){return e%=RN,e<0&&(e+=RN),e}var ig=Math.PI*2;function AN(e,t,r,i,n,o,a,s,l){if(a===0)return!1;var c=a;s-=e,l-=t;var u=Math.sqrt(s*s+l*l);if(u-c>r||u+c<r)return!1;if(Math.abs(i-n)%ig<1e-4)return!0;if(o){var d=i;i=_r(n),n=_r(d)}else i=_r(i),n=_r(n);i>n&&(n+=ig);var h=Math.atan2(l,s);return h<0&&(h+=ig),h>=i&&h<=n||h+ig>=i&&h+ig<=n}function bn(e,t,r,i,n,o){if(o>t&&o>i||o<t&&o<i||i===t)return 0;var a=(o-t)/(i-t),s=i<t?1:-1;(a===1||a===0)&&(s=i<t?.5:-.5);var l=a*(r-e)+e;return l===n?1/0:l>n?s:0}var Ns=vr.CMD,xc=Math.PI*2,Wre=1e-4;function jre(e,t){return Math.abs(e-t)<Wre}var ei=[-1,-1,-1],Sn=[-1,-1];function $re(){var e=Sn[0];Sn[0]=Sn[1],Sn[1]=e}function Yre(e,t,r,i,n,o,a,s,l,c){if(c>t&&c>i&&c>o&&c>s||c<t&&c<i&&c<o&&c<s)return 0;var u=ic(t,i,o,s,c,ei);if(u===0)return 0;for(var d=0,h=-1,p=void 0,g=void 0,f=0;f<u;f++){var v=ei[f],m=v===0||v===1?.5:1,y=Gt(e,r,n,a,v);y<l||(h<0&&(h=vy(t,i,o,s,Sn),Sn[1]<Sn[0]&&h>1&&$re(),p=Gt(t,i,o,s,Sn[0]),h>1&&(g=Gt(t,i,o,s,Sn[1]))),h===2?v<Sn[0]?d+=p<t?m:-m:v<Sn[1]?d+=g<p?m:-m:d+=s<g?m:-m:v<Sn[0]?d+=p<t?m:-m:d+=s<p?m:-m)}return d}function qre(e,t,r,i,n,o,a,s){if(s>t&&s>i&&s>o||s<t&&s<i&&s<o)return 0;var l=oO(t,i,o,s,ei);if(l===0)return 0;var c=yy(t,i,o);if(c>=0&&c<=1){for(var u=0,d=$t(t,i,o,c),h=0;h<l;h++){var p=ei[h]===0||ei[h]===1?.5:1,g=$t(e,r,n,ei[h]);g<a||(ei[h]<c?u+=d<t?p:-p:u+=o<d?p:-p)}return u}else{var p=ei[0]===0||ei[0]===1?.5:1,g=$t(e,r,n,ei[0]);return g<a?0:o<t?p:-p}}function Kre(e,t,r,i,n,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);ei[0]=-l,ei[1]=l;var c=Math.abs(i-n);if(c<1e-4)return 0;if(c>=xc-1e-4){i=0,n=xc;var u=o?1:-1;return a>=ei[0]+e&&a<=ei[1]+e?u:0}if(i>n){var d=i;i=n,n=d}i<0&&(i+=xc,n+=xc);for(var h=0,p=0;p<2;p++){var g=ei[p];if(g+e>a){var f=Math.atan2(s,g),u=o?1:-1;f<0&&(f=xc+f),(f>=i&&f<=n||f+xc>=i&&f+xc<=n)&&(f>Math.PI/2&&f<Math.PI*1.5&&(u=-u),h+=u)}}return h}function IN(e,t,r,i,n){for(var o=e.data,a=e.len(),s=0,l=0,c=0,u=0,d=0,h,p,g=0;g<a;){var f=o[g++],v=g===1;switch(f===Ns.M&&g>1&&(r||(s+=bn(l,c,u,d,i,n))),v&&(l=o[g],c=o[g+1],u=l,d=c),f){case Ns.M:u=o[g++],d=o[g++],l=u,c=d;break;case Ns.L:if(r){if(jo(l,c,o[g],o[g+1],t,i,n))return!0}else s+=bn(l,c,o[g],o[g+1],i,n)||0;l=o[g++],c=o[g++];break;case Ns.C:if(r){if(TN(l,c,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],t,i,n))return!0}else s+=Yre(l,c,o[g++],o[g++],o[g++],o[g++],o[g],o[g+1],i,n)||0;l=o[g++],c=o[g++];break;case Ns.Q:if(r){if(Xy(l,c,o[g++],o[g++],o[g],o[g+1],t,i,n))return!0}else s+=qre(l,c,o[g++],o[g++],o[g],o[g+1],i,n)||0;l=o[g++],c=o[g++];break;case Ns.A:var m=o[g++],y=o[g++],w=o[g++],C=o[g++],S=o[g++],b=o[g++];g+=1;var x=!!(1-o[g++]);h=Math.cos(S)*w+m,p=Math.sin(S)*C+y,v?(u=h,d=p):s+=bn(l,c,h,p,i,n);var E=(i-m)*C/w+m;if(r){if(AN(m,y,C,S,S+b,x,t,E,n))return!0}else s+=Kre(m,y,C,S,S+b,x,E,n);l=Math.cos(S+b)*w+m,c=Math.sin(S+b)*C+y;break;case Ns.R:u=l=o[g++],d=c=o[g++];var M=o[g++],T=o[g++];if(h=u+M,p=d+T,r){if(jo(u,d,h,d,t,i,n)||jo(h,d,h,p,t,i,n)||jo(h,p,u,p,t,i,n)||jo(u,p,u,d,t,i,n))return!0}else s+=bn(h,d,h,p,i,n),s+=bn(u,p,u,d,i,n);break;case Ns.Z:if(r){if(jo(l,c,u,d,t,i,n))return!0}else s+=bn(l,c,u,d,i,n);l=u,c=d;break}}return!r&&!jre(c,d)&&(s+=bn(l,c,u,d,i,n)||0),s!==0}function PN(e,t,r){return IN(e,0,!1,t,r)}function kN(e,t,r,i){return IN(e,t,!0,r,i)}var Dd=Q({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Go),Xre={style:Q({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},vc.style)},XD=$i.concat(["invisible","culling","z","z2","zlevel","parent"]),Qre=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var i=this.style;if(i.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(l){r.buildPath(l,r.shape)}),n.silent=!0;var o=n.style;for(var a in i)o[a]!==i[a]&&(o[a]=i[a]);o.fill=i.fill?i.decal:null,o.decal=null,o.shadowColor=null,i.strokeFirst&&(o.stroke=null);for(var s=0;s<XD.length;++s)n[XD[s]]=this[XD[s]];n.__dirty|=sr}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var i=me(r);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var o=0;o<i.length;o++){var a=i[o],s=r[a];a==="style"?this.style?F(this.style,s):this.useStyle(s):a==="shape"?F(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(H(r)){var i=fd(r,0);return i>.5?qp:i>.2?IO:Kp}else if(r)return Kp}return qp},t.prototype.getInsideTextStroke=function(r){var i=this.style.fill;if(H(i)){var n=this.__zr,o=!!(n&&n.isDarkMode()),a=fd(r,0)<Yp;if(o===a)return i}},t.prototype.buildPath=function(r,i,n){},t.prototype.pathUpdated=function(){this.__dirty&=~Ms},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new vr(!1)},t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return!(i==null||i==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,i=this.style,n=!r;if(n){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&Ms)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||n){s.copy(r);var l=i.strokeNoScale?this.getLineScale():1,c=i.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return r},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),o=this.getBoundingRect(),a=this.style;if(r=n[0],i=n[1],o.contain(r,i)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,c=a.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),kN(s,l/c,r,i)))return!0}if(this.hasFill())return PN(s,r,i)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Ms,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,i){r==="shape"?this.setShape(i):e.prototype.attrKV.call(this,r,i)},t.prototype.setShape=function(r,i){var n=this.shape;return n||(n=this.shape={}),typeof r=="string"?n[r]=i:F(n,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Ms)},t.prototype.createStyle=function(r){return Ds(Dd,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.shape&&!i.shape&&(i.shape=F({},this.shape))},t.prototype._applyStateObj=function(r,i,n,o,a,s){e.prototype._applyStateObj.call(this,r,i,n,o,a,s);var l=!(i&&o),c;if(i&&i.shape?a?o?c=i.shape:(c=F({},n.shape),F(c,i.shape)):(c=F({},o?this.shape:n.shape),F(c,i.shape)):l&&(c=n.shape),c)if(a){this.shape=F({},this.shape);for(var u={},d=me(c),h=0;h<d.length;h++){var p=d[h];typeof c[p]=="object"?this.shape[p]=c[p]:u[p]=c[p]}this._transitionState(r,{shape:u},s)}else this.shape=c,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,o=0;o<r.length;o++){var a=r[o];a.shape&&(n=n||{},this._mergeStyle(n,a.shape))}return n&&(i.shape=n),i},t.prototype.getAnimationStyleProps=function(){return Xre},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var i=function(o){ke(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return re(r.style)},a.prototype.getDefaultShape=function(){return re(r.shape)},a}(t);for(var n in r)typeof r[n]=="function"&&(i.prototype[n]=r[n]);return i},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=sr|rc|Ms}(),t}(Yt),ce=Qre;var Jre=Q({strokeFirst:!0,font:Hi,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Dd),LN=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return i!=null&&i!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.createStyle=function(r){return Ds(Jre,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var i=r.text;i!=null?i+="":i="";var n=Bo(i,r.font,r.textAlign,r.textBaseline);if(n.x+=r.x||0,n.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;n.x-=o/2,n.y-=o/2,n.width+=o,n.height+=o}this._rect=n}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Yt);LN.prototype.type="tspan";var Aa=LN;var eie=Q({x:0,y:0},Go),tie={style:Q({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},vc.style)};function rie(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var FN=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return Ds(eie,r)},t.prototype._getSize=function(r){var i=this.style,n=i[r];if(n!=null)return n;var o=rie(i.image)?i.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=i[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return tie},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new le(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Yt);FN.prototype.type="image";var vt=FN;function ON(e,t){var r=t.x,i=t.y,n=t.width,o=t.height,a=t.r,s,l,c,u;n<0&&(r=r+n,n=-n),o<0&&(i=i+o,o=-o),typeof a=="number"?s=l=c=u=a:a instanceof Array?a.length===1?s=l=c=u=a[0]:a.length===2?(s=c=a[0],l=u=a[1]):a.length===3?(s=a[0],l=u=a[1],c=a[2]):(s=a[0],l=a[1],c=a[2],u=a[3]):s=l=c=u=0;var d;s+l>n&&(d=s+l,s*=n/d,l*=n/d),c+u>n&&(d=c+u,c*=n/d,u*=n/d),l+c>o&&(d=l+c,l*=o/d,c*=o/d),s+u>o&&(d=s+u,s*=o/d,u*=o/d),e.moveTo(r+s,i),e.lineTo(r+n-l,i),l!==0&&e.arc(r+n-l,i+l,l,-Math.PI/2,0),e.lineTo(r+n,i+o-c),c!==0&&e.arc(r+n-c,i+o-c,c,0,Math.PI/2),e.lineTo(r+u,i+o),u!==0&&e.arc(r+u,i+o-u,u,Math.PI/2,Math.PI),e.lineTo(r,i+s),s!==0&&e.arc(r+s,i+s,s,Math.PI,Math.PI*1.5)}var Ed=Math.round;function Qy(e,t,r){if(t){var i=t.x1,n=t.x2,o=t.y1,a=t.y2;e.x1=i,e.x2=n,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(Ed(i*2)===Ed(n*2)&&(e.x1=e.x2=zs(i,s,!0)),Ed(o*2)===Ed(a*2)&&(e.y1=e.y2=zs(o,s,!0))),e}}function Jy(e,t,r){if(t){var i=t.x,n=t.y,o=t.width,a=t.height;e.x=i,e.y=n,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=zs(i,s,!0),e.y=zs(n,s,!0),e.width=Math.max(zs(i+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(zs(n+a,s,!1)-e.y,a===0?0:1)),e}}function zs(e,t,r){if(!t)return e;var i=Ed(e*2);return(i+Ed(t))%2===0?i/2:(i+(r?1:-1))/2}var oie=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}();var aie={},NN=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new oie},t.prototype.buildPath=function(r,i){var n,o,a,s;if(this.subPixelOptimize){var l=Jy(aie,i,this.style);n=l.x,o=l.y,a=l.width,s=l.height,l.r=i.r,i=l}else n=i.x,o=i.y,a=i.width,s=i.height;i.r?ON(r,i):r.rect(n,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(ce);NN.prototype.type="rect";var Ce=NN;var zN={fill:"#000"},VN=2,sie={style:Q({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},vc.style)},YN=function(e){ke(t,e);function t(r){var i=e.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=zN,i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var i=this._children[r];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var i=this.innerTransformable;return i?i.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,uie(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new le(0,0,0,0),i=this._children,n=[],o=null,a=0;a<i.length;a++){var s=i[a],l=s.getBoundingRect(),c=s.getLocalTransform(n);c?(r.copy(l),r.applyTransform(c),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||zN},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,i){if(!i)return r;var n=i.rich,o=r.rich||n&&{};return F(r,i),n&&o?(this._mergeRich(o,n),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,i){for(var n=me(i),o=0;o<n.length;o++){var a=n[o];r[a]=r[a]||{},F(r[a],i[a])}},t.prototype.getAnimationStyleProps=function(){return sie},t.prototype._getOrCreateChild=function(r){var i=this._children[this._childCursor];return(!i||!(i instanceof r))&&(i=new r),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},t.prototype._updatePlainTexts=function(){var r=this.style,i=r.font||Hi,n=r.padding,o=$N(r),a=vN(o,r),s=QD(r),l=!!r.backgroundColor,c=a.outerHeight,u=a.outerWidth,d=a.contentWidth,h=a.lines,p=a.lineHeight,g=this._defaultStyle,f=r.x||0,v=r.y||0,m=r.align||g.align||"left",y=r.verticalAlign||g.verticalAlign||"top",w=f,C=hc(v,a.contentHeight,y);if(s||n){var S=md(f,u,m),b=hc(v,c,y);s&&this._renderBackground(r,r,S,b,u,c)}C+=p/2,n&&(w=jN(f,m,n),y==="top"?C+=n[0]:y==="bottom"&&(C-=n[2]));for(var x=0,E=!1,M=WN("fill"in r?r.fill:(E=!0,g.fill)),T=UN("stroke"in r?r.stroke:!l&&(!g.autoStroke||E)?(x=VN,g.stroke):null),_=r.textShadowBlur>0,R=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),A=a.calculatedLineHeight,P=0;P<h.length;P++){var k=this._getOrCreateChild(Aa),L=k.createStyle();k.useStyle(L),L.text=h[P],L.x=w,L.y=C,m&&(L.textAlign=m),L.textBaseline="middle",L.opacity=r.opacity,L.strokeFirst=!0,_&&(L.shadowBlur=r.textShadowBlur||0,L.shadowColor=r.textShadowColor||"transparent",L.shadowOffsetX=r.textShadowOffsetX||0,L.shadowOffsetY=r.textShadowOffsetY||0),L.stroke=T,L.fill=M,T&&(L.lineWidth=r.lineWidth||x,L.lineDash=r.lineDash,L.lineDashOffset=r.lineDashOffset||0),L.font=i,GN(L,r),C+=p,R&&k.setBoundingRect(new le(md(L.x,r.width,L.textAlign),hc(L.y,A,L.textBaseline),d,A))}},t.prototype._updateRichTexts=function(){var r=this.style,i=$N(r),n=mN(i,r),o=n.width,a=n.outerWidth,s=n.outerHeight,l=r.padding,c=r.x||0,u=r.y||0,d=this._defaultStyle,h=r.align||d.align,p=r.verticalAlign||d.verticalAlign,g=md(c,a,h),f=hc(u,s,p),v=g,m=f;l&&(v+=l[3],m+=l[0]);var y=v+o;QD(r)&&this._renderBackground(r,r,g,f,a,s);for(var w=!!r.backgroundColor,C=0;C<n.lines.length;C++){for(var S=n.lines[C],b=S.tokens,x=b.length,E=S.lineHeight,M=S.width,T=0,_=v,R=y,A=x-1,P=void 0;T<x&&(P=b[T],!P.align||P.align==="left");)this._placeToken(P,r,E,m,_,"left",w),M-=P.width,_+=P.width,T++;for(;A>=0&&(P=b[A],P.align==="right");)this._placeToken(P,r,E,m,R,"right",w),M-=P.width,R-=P.width,A--;for(_+=(o-(_-v)-(y-R)-M)/2;T<=A;)P=b[T],this._placeToken(P,r,E,m,_+P.width/2,"center",w),_+=P.width,T++;m+=E}},t.prototype._placeToken=function(r,i,n,o,a,s,l){var c=i.rich[r.styleName]||{};c.text=r.text;var u=r.verticalAlign,d=o+n/2;u==="top"?d=o+r.height/2:u==="bottom"&&(d=o+n-r.height/2);var h=!r.isLineHolder&&QD(c);h&&this._renderBackground(c,i,s==="right"?a-r.width:s==="center"?a-r.width/2:a,d-r.height/2,r.width,r.height);var p=!!c.backgroundColor,g=r.textPadding;g&&(a=jN(a,s,g),d-=r.height/2-g[0]-r.innerHeight/2);var f=this._getOrCreateChild(Aa),v=f.createStyle();f.useStyle(v);var m=this._defaultStyle,y=!1,w=0,C=WN("fill"in c?c.fill:"fill"in i?i.fill:(y=!0,m.fill)),S=UN("stroke"in c?c.stroke:"stroke"in i?i.stroke:!p&&!l&&(!m.autoStroke||y)?(w=VN,m.stroke):null),b=c.textShadowBlur>0||i.textShadowBlur>0;v.text=r.text,v.x=a,v.y=d,b&&(v.shadowBlur=c.textShadowBlur||i.textShadowBlur||0,v.shadowColor=c.textShadowColor||i.textShadowColor||"transparent",v.shadowOffsetX=c.textShadowOffsetX||i.textShadowOffsetX||0,v.shadowOffsetY=c.textShadowOffsetY||i.textShadowOffsetY||0),v.textAlign=s,v.textBaseline="middle",v.font=r.font||Hi,v.opacity=ur(c.opacity,i.opacity,1),GN(v,c),S&&(v.lineWidth=ur(c.lineWidth,i.lineWidth,w),v.lineDash=de(c.lineDash,i.lineDash),v.lineDashOffset=i.lineDashOffset||0,v.stroke=S),C&&(v.fill=C);var x=r.contentWidth,E=r.contentHeight;f.setBoundingRect(new le(md(v.x,x,v.textAlign),hc(v.y,E,v.textBaseline),x,E))},t.prototype._renderBackground=function(r,i,n,o,a,s){var l=r.backgroundColor,c=r.borderWidth,u=r.borderColor,d=l&&l.image,h=l&&!d,p=r.borderRadius,g=this,f,v;if(h||r.lineHeight||c&&u){f=this._getOrCreateChild(Ce),f.useStyle(f.createStyle()),f.style.fill=null;var m=f.shape;m.x=n,m.y=o,m.width=a,m.height=s,m.r=p,f.dirtyShape()}if(h){var y=f.style;y.fill=l||null,y.fillOpacity=de(r.fillOpacity,1)}else if(d){v=this._getOrCreateChild(vt),v.onload=function(){g.dirtyStyle()};var w=v.style;w.image=l.image,w.x=n,w.y=o,w.width=a,w.height=s}if(c&&u){var y=f.style;y.lineWidth=c,y.stroke=u,y.strokeOpacity=de(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,f.strokeContainThreshold=0,f.hasFill()&&f.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var C=(f||v).style;C.shadowBlur=r.shadowBlur||0,C.shadowColor=r.shadowColor||"transparent",C.shadowOffsetX=r.shadowOffsetX||0,C.shadowOffsetY=r.shadowOffsetY||0,C.opacity=ur(r.opacity,i.opacity,1)},t.makeFont=function(r){var i="";return eE(r)&&(i=[r.fontStyle,r.fontWeight,JD(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),i&&dr(i)||r.textFont||r.font},t}(Yt),lie={left:!0,right:1,center:1},cie={top:1,bottom:1,middle:1},BN=["fontStyle","fontWeight","fontSize","fontFamily"];function JD(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?Qm+"px":e+"px"}function GN(e,t){for(var r=0;r<BN.length;r++){var i=BN[r],n=t[i];n!=null&&(e[i]=n)}}function eE(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function uie(e){return HN(e),D(e.rich,HN),e}function HN(e){if(e){e.font=YN.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||lie[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||cie[r]?r:"top";var i=e.padding;i&&(e.padding=od(e.padding))}}function UN(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function WN(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function jN(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function $N(e){var t=e.text;return t!=null&&(t+=""),t}function QD(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var De=YN;var ae=he(),ng=function(e,t,r,i){if(i){var n=ae(i);n.dataIndex=r,n.dataType=t,n.seriesIndex=e,n.ssrType="chart",i.type==="group"&&i.traverse(function(o){var a=ae(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t,a.ssrType="chart"})}};var qN=1,KN={},ez=he(),iE=he(),nE=0,Dc=1,og=2,cr=["emphasis","blur","select"],Vs=["normal","emphasis","blur","select"],Ia=10,die=9,Bs="highlight",ag="downplay",Td="select",sg="unselect",_d="toggleSelect";function Md(e){return e!=null&&e!=="none"}function t0(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function tz(e){t0(e,"emphasis",og)}function rz(e){e.hoverState===og&&t0(e,"normal",nE)}function oE(e){t0(e,"blur",Dc)}function iz(e){e.hoverState===Dc&&t0(e,"normal",nE)}function hie(e){e.selected=!0}function pie(e){e.selected=!1}function ZN(e,t,r){t(e,r)}function Pa(e,t,r){ZN(e,t,r),e.isGroup&&e.traverse(function(i){ZN(i,t,r)})}function Ec(e,t){switch(t){case"emphasis":e.hoverState=og;break;case"normal":e.hoverState=nE;break;case"blur":e.hoverState=Dc;break;case"select":e.selected=!0}}function gie(e,t,r,i){for(var n=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=n[s];o[s]=l??(i&&i[s])}for(var a=0;a<e.animators.length;a++){var c=e.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(r)<0&&c.targetName==="style"&&c.saveTo(o,t)}return o}function fie(e,t,r,i){var n=r&&pe(r,"select")>=0,o=!1;if(e instanceof ce){var a=ez(e),s=n&&a.selectFill||a.normalFill,l=n&&a.selectStroke||a.normalStroke;if(Md(s)||Md(l)){i=i||{};var c=i.style||{};c.fill==="inherit"?(o=!0,i=F({},i),c=F({},c),c.fill=s):!Md(c.fill)&&Md(s)?(o=!0,i=F({},i),c=F({},c),c.fill=Gp(s)):!Md(c.stroke)&&Md(l)&&(o||(i=F({},i),c=F({},c)),c.stroke=Gp(l)),i.style=c}}if(i&&i.z2==null){o||(i=F({},i));var u=e.z2EmphasisLift;i.z2=e.z2+(u??Ia)}return i}function vie(e,t,r){if(r&&r.z2==null){r=F({},r);var i=e.z2SelectLift;r.z2=e.z2+(i??die)}return r}function mie(e,t,r){var i=pe(e.currentStates,t)>=0,n=e.style.opacity,o=i?null:gie(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=F({},r),a=F({opacity:i?n:o.opacity*.1},a),r.style=a),r}function tE(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return fie(this,e,t,r);if(e==="blur")return mie(this,e,r);if(e==="select")return vie(this,e,r)}return r}function to(e){e.stateProxy=tE;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=tE),r&&(r.stateProxy=tE)}function XN(e,t){!nz(e,t)&&!e.__highByOuter&&Pa(e,tz)}function QN(e,t){!nz(e,t)&&!e.__highByOuter&&Pa(e,rz)}function Br(e,t){e.__highByOuter|=1<<(t||0),Pa(e,tz)}function Gr(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Pa(e,rz)}function r0(e){Pa(e,oE)}function lg(e){Pa(e,iz)}function aE(e){Pa(e,hie)}function sE(e){Pa(e,pie)}function nz(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function lE(e){var t=e.getModel(),r=[],i=[];t.eachComponent(function(n,o){var a=iE(o),s=n==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&i.push(l),a.isBlured&&(l.group.traverse(function(c){iz(c)}),s&&r.push(o)),a.isBlured=!1}),D(i,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(r,!1,t)})}function rE(e,t,r,i){var n=i.getModel();r=r||"coordinateSystem";function o(c,u){for(var d=0;d<u.length;d++){var h=c.getItemGraphicEl(u[d]);h&&lg(h)}}if(e!=null&&!(!t||t==="none")){var a=n.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];n.eachSeries(function(c){var u=a===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var h=d&&s?d===s:u;if(!(r==="series"&&!u||r==="coordinateSystem"&&!h||t==="series"&&u)){var p=i.getViewOfSeriesModel(c);if(p.group.traverse(function(v){v.__highByOuter&&u&&t==="self"||oE(v)}),Vt(t))o(c.getData(),t);else if(J(t))for(var g=me(t),f=0;f<g.length;f++)o(c.getData(g[f]),t[g[f]]);l.push(c),iE(c).isBlured=!0}}),n.eachComponent(function(c,u){if(c!=="series"){var d=i.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,n)}})}}function e0(e,t,r){if(!(e==null||t==null)){var i=r.getModel().getComponent(e,t);if(i){iE(i).isBlured=!0;var n=r.getViewOfComponentModel(i);!n||!n.focusBlurEnabled||n.group.traverse(function(o){oE(o)})}}}function oz(e,t,r){var i=e.seriesIndex,n=e.getData(t.dataType);if(n){var o=Cn(n,t);o=(O(o)?o[0]:o)||0;var a=n.getItemGraphicEl(o);if(!a)for(var s=n.count(),l=0;!a&&l<s;)a=n.getItemGraphicEl(l++);if(a){var c=ae(a);rE(i,c.focus,c.blurScope,r)}else{var u=e.get(["emphasis","focus"]),d=e.get(["emphasis","blurScope"]);u!=null&&rE(i,u,d,r)}}}function i0(e,t,r,i){var n={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return n;var o=i.getModel().getComponent(e,t);if(!o)return n;var a=i.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return n;for(var s=a.findHighDownDispatchers(r),l,c=0;c<s.length;c++)if(ae(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function az(e,t,r){var i=ae(e),n=i0(i.componentMainType,i.componentIndex,i.componentHighDownName,r),o=n.dispatchers,a=n.focusSelf;o?(a&&e0(i.componentMainType,i.componentIndex,r),D(o,function(s){return XN(s,t)})):(rE(i.seriesIndex,i.focus,i.blurScope,r),i.focus==="self"&&e0(i.componentMainType,i.componentIndex,r),XN(e,t))}function sz(e,t,r){lE(r);var i=ae(e),n=i0(i.componentMainType,i.componentIndex,i.componentHighDownName,r).dispatchers;n?D(n,function(o){return QN(o,t)}):QN(e,t)}function lz(e,t,r){if(o0(t)){var i=t.dataType,n=e.getData(i),o=Cn(n,t);O(o)||(o=[o]),e[t.type===_d?"toggleSelect":t.type===Td?"select":"unselect"](o,i)}}function cE(e){var t=e.getAllData();D(t,function(r){var i=r.data,n=r.type;i.eachItemGraphicEl(function(o,a){e.isSelected(a,n)?aE(o):sE(o)})})}function cz(e){var t=[];return e.eachSeries(function(r){var i=r.getAllData();D(i,function(n){var o=n.data,a=n.type,s=r.getSelectedDataIndices();if(s.length>0){var l={dataIndex:s,seriesIndex:r.seriesIndex};a!=null&&(l.dataType=a),t.push(l)}})}),t}function $o(e,t,r){ka(e,!0),Pa(e,to),n0(e,t,r)}function yie(e){ka(e,!1)}function We(e,t,r,i){i?yie(e):$o(e,t,r)}function n0(e,t,r){var i=ae(e);t!=null?(i.focus=t,i.blurScope=r):i.focus&&(i.focus=null)}var JN=["emphasis","blur","select"],wie={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Dt(e,t,r,i){r=r||"itemStyle";for(var n=0;n<JN.length;n++){var o=JN[n],a=t.getModel([o,r]),s=e.ensureState(o);s.style=i?i(a):a[wie[r]]()}}function ka(e,t){var r=t===!1,i=e;e.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!r)}function Gs(e){return!!(e&&e.__highDownDispatcher)}function uz(e,t,r){var i=ae(e);i.componentMainType=t.mainType,i.componentIndex=t.componentIndex,i.componentHighDownName=r}function dz(e){var t=KN[e];return t==null&&qN<=32&&(t=KN[e]=qN++),t}function o0(e){var t=e.type;return t===Td||t===sg||t===_d}function uE(e){var t=e.type;return t===Bs||t===ag}function hz(e){var t=ez(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Se={};Kq(Se,{Arc:()=>pg,BezierCurve:()=>_c,BoundingRect:()=>le,Circle:()=>ti,CompoundPath:()=>Pd,Ellipse:()=>ug,Group:()=>ee,Image:()=>vt,IncrementalDisplayable:()=>Oz,Line:()=>_t,LinearGradient:()=>qo,OrientedBoundingRect:()=>kd,Path:()=>ce,Point:()=>_e,Polygon:()=>It,Polyline:()=>Rt,RadialGradient:()=>p0,Rect:()=>Ce,Ring:()=>Tc,Sector:()=>qt,Text:()=>De,applyTransform:()=>Rr,clipPointsByRect:()=>wE,clipRectByRect:()=>Qie,createIcon:()=>za,extendPath:()=>Kie,extendShape:()=>Yie,getShapeClass:()=>gg,getTransform:()=>no,groupTransition:()=>Na,initProps:()=>je,isElementRemoved:()=>La,lineLineIntersect:()=>Wz,linePolygonIntersect:()=>Fd,makeImage:()=>yE,makePath:()=>Ld,mergePath:()=>Ur,registerShape:()=>io,removeElement:()=>xn,removeElementWithFadeOut:()=>Fa,resizePath:()=>Uz,setTooltipConfig:()=>oo,subPixelOptimize:()=>fg,subPixelOptimizeLine:()=>Oa,subPixelOptimizeRect:()=>Zie,transformDirection:()=>Ic,traverseElements:()=>ri,updateProps:()=>Me});var Rd=vr.CMD,Cie=[[],[],[]],pz=Math.sqrt,bie=Math.atan2;function a0(e,t){if(t){var r=e.data,i=e.len(),n,o,a,s,l,c,u=Rd.M,d=Rd.C,h=Rd.L,p=Rd.R,g=Rd.A,f=Rd.Q;for(a=0,s=0;a<i;){switch(n=r[a++],s=a,o=0,n){case u:o=1;break;case h:o=1;break;case d:o=3;break;case f:o=2;break;case g:var v=t[4],m=t[5],y=pz(t[0]*t[0]+t[1]*t[1]),w=pz(t[2]*t[2]+t[3]*t[3]),C=bie(-t[1]/w,t[0]/y);r[a]*=y,r[a++]+=v,r[a]*=w,r[a++]+=m,r[a++]*=y,r[a++]*=w,r[a++]+=C,r[a++]+=C,a+=2,s=a;break;case p:c[0]=r[a++],c[1]=r[a++],Bt(c,c,t),r[s++]=c[0],r[s++]=c[1],c[0]+=r[a++],c[1]+=r[a++],Bt(c,c,t),r[s++]=c[0],r[s++]=c[1]}for(l=0;l<o;l++){var S=Cie[l];S[0]=r[a++],S[1]=r[a++],Bt(S,S,t),r[s++]=S[0],r[s++]=S[1]}}e.increaseVersion()}}var dE=Math.sqrt,s0=Math.sin,l0=Math.cos,cg=Math.PI;function gz(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function hE(e,t){return(e[0]*t[0]+e[1]*t[1])/(gz(e)*gz(t))}function fz(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(hE(e,t))}function vz(e,t,r,i,n,o,a,s,l,c,u){var d=l*(cg/180),h=l0(d)*(e-r)/2+s0(d)*(t-i)/2,p=-1*s0(d)*(e-r)/2+l0(d)*(t-i)/2,g=h*h/(a*a)+p*p/(s*s);g>1&&(a*=dE(g),s*=dE(g));var f=(n===o?-1:1)*dE((a*a*(s*s)-a*a*(p*p)-s*s*(h*h))/(a*a*(p*p)+s*s*(h*h)))||0,v=f*a*p/s,m=f*-s*h/a,y=(e+r)/2+l0(d)*v-s0(d)*m,w=(t+i)/2+s0(d)*v+l0(d)*m,C=fz([1,0],[(h-v)/a,(p-m)/s]),S=[(h-v)/a,(p-m)/s],b=[(-1*h-v)/a,(-1*p-m)/s],x=fz(S,b);if(hE(S,b)<=-1&&(x=cg),hE(S,b)>=1&&(x=0),x<0){var E=Math.round(x/cg*1e6)/1e6;x=cg*2+E%2*cg}u.addData(c,y,w,a,s,C,x,d,o)}var Sie=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,xie=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Die(e){var t=new vr;if(!e)return t;var r=0,i=0,n=r,o=i,a,s=vr.CMD,l=e.match(Sie);if(!l)return t;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),h=void 0,p=u.match(xie)||[],g=p.length,f=0;f<g;f++)p[f]=parseFloat(p[f]);for(var v=0;v<g;){var m=void 0,y=void 0,w=void 0,C=void 0,S=void 0,b=void 0,x=void 0,E=r,M=i,T=void 0,_=void 0;switch(d){case"l":r+=p[v++],i+=p[v++],h=s.L,t.addData(h,r,i);break;case"L":r=p[v++],i=p[v++],h=s.L,t.addData(h,r,i);break;case"m":r+=p[v++],i+=p[v++],h=s.M,t.addData(h,r,i),n=r,o=i,d="l";break;case"M":r=p[v++],i=p[v++],h=s.M,t.addData(h,r,i),n=r,o=i,d="L";break;case"h":r+=p[v++],h=s.L,t.addData(h,r,i);break;case"H":r=p[v++],h=s.L,t.addData(h,r,i);break;case"v":i+=p[v++],h=s.L,t.addData(h,r,i);break;case"V":i=p[v++],h=s.L,t.addData(h,r,i);break;case"C":h=s.C,t.addData(h,p[v++],p[v++],p[v++],p[v++],p[v++],p[v++]),r=p[v-2],i=p[v-1];break;case"c":h=s.C,t.addData(h,p[v++]+r,p[v++]+i,p[v++]+r,p[v++]+i,p[v++]+r,p[v++]+i),r+=p[v-2],i+=p[v-1];break;case"S":m=r,y=i,T=t.len(),_=t.data,a===s.C&&(m+=r-_[T-4],y+=i-_[T-3]),h=s.C,E=p[v++],M=p[v++],r=p[v++],i=p[v++],t.addData(h,m,y,E,M,r,i);break;case"s":m=r,y=i,T=t.len(),_=t.data,a===s.C&&(m+=r-_[T-4],y+=i-_[T-3]),h=s.C,E=r+p[v++],M=i+p[v++],r+=p[v++],i+=p[v++],t.addData(h,m,y,E,M,r,i);break;case"Q":E=p[v++],M=p[v++],r=p[v++],i=p[v++],h=s.Q,t.addData(h,E,M,r,i);break;case"q":E=p[v++]+r,M=p[v++]+i,r+=p[v++],i+=p[v++],h=s.Q,t.addData(h,E,M,r,i);break;case"T":m=r,y=i,T=t.len(),_=t.data,a===s.Q&&(m+=r-_[T-4],y+=i-_[T-3]),r=p[v++],i=p[v++],h=s.Q,t.addData(h,m,y,r,i);break;case"t":m=r,y=i,T=t.len(),_=t.data,a===s.Q&&(m+=r-_[T-4],y+=i-_[T-3]),r+=p[v++],i+=p[v++],h=s.Q,t.addData(h,m,y,r,i);break;case"A":w=p[v++],C=p[v++],S=p[v++],b=p[v++],x=p[v++],E=r,M=i,r=p[v++],i=p[v++],h=s.A,vz(E,M,r,i,b,x,w,C,S,h,t);break;case"a":w=p[v++],C=p[v++],S=p[v++],b=p[v++],x=p[v++],E=r,M=i,r+=p[v++],i+=p[v++],h=s.A,vz(E,M,r,i,b,x,w,C,S,h,t);break}}(d==="z"||d==="Z")&&(h=s.Z,t.addData(h),r=n,i=o),a=h}return t.toStatic(),t}var mz=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(ce);function yz(e){return e.setData!=null}function wz(e,t){var r=Die(e),i=F({},t);return i.buildPath=function(n){if(yz(n)){n.setData(r.data);var o=n.getContext();o&&n.rebuildPath(o,1)}else{var o=n;r.rebuildPath(o,1)}},i.applyTransform=function(n){a0(r,n),this.dirtyShape()},i}function c0(e,t){return new mz(wz(e,t))}function Cz(e,t){var r=wz(e,t),i=function(n){ke(o,n);function o(a){var s=n.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}(mz);return i}function bz(e,t){for(var r=[],i=e.length,n=0;n<i;n++){var o=e[n];r.push(o.getUpdatedPathProxy(!0))}var a=new ce(t);return a.createPathProxy(),a.buildPath=function(s){if(yz(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}function Ad(e,t){t=t||{};var r=new ce;return e.shape&&r.setShape(e.shape),r.setStyle(e.style),t.bakeTransform?a0(r.path,e.getComputedTransform()):t.toLocal?r.setLocalTransform(e.getComputedTransform()):r.copyTransform(e),r.buildPath=e.buildPath,r.applyTransform=r.applyTransform,r.z=e.z,r.z2=e.z2,r.zlevel=e.zlevel,r}var Mie=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}();var Sz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Mie},t.prototype.buildPath=function(r,i){r.moveTo(i.cx+i.r,i.cy),r.arc(i.cx,i.cy,i.r,0,Math.PI*2)},t}(ce);Sz.prototype.type="circle";var ti=Sz;var Tie=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}();var xz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Tie},t.prototype.buildPath=function(r,i){var n=.5522848,o=i.cx,a=i.cy,s=i.rx,l=i.ry,c=s*n,u=l*n;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-u,o-c,a-l,o,a-l),r.bezierCurveTo(o+c,a-l,o+s,a-u,o+s,a),r.bezierCurveTo(o+s,a+u,o+c,a+l,o,a+l),r.bezierCurveTo(o-c,a+l,o-s,a+u,o-s,a),r.closePath()},t}(ce);xz.prototype.type="ellipse";var ug=xz;var Ez=Math.PI,pE=Ez*2,Mc=Math.sin,Id=Math.cos,_ie=Math.acos,Hr=Math.atan2,Dz=Math.abs,hg=Math.sqrt,dg=Math.max,Yo=Math.min,ro=1e-4;function Rie(e,t,r,i,n,o,a,s){var l=r-e,c=i-t,u=a-n,d=s-o,h=d*l-u*c;if(!(h*h<ro))return h=(u*(t-o)-d*(e-n))/h,[e+h*l,t+h*c]}function u0(e,t,r,i,n,o,a){var s=e-r,l=t-i,c=(a?o:-o)/hg(s*s+l*l),u=c*l,d=-c*s,h=e+u,p=t+d,g=r+u,f=i+d,v=(h+g)/2,m=(p+f)/2,y=g-h,w=f-p,C=y*y+w*w,S=n-o,b=h*f-g*p,x=(w<0?-1:1)*hg(dg(0,S*S*C-b*b)),E=(b*w-y*x)/C,M=(-b*y-w*x)/C,T=(b*w+y*x)/C,_=(-b*y+w*x)/C,R=E-v,A=M-m,P=T-v,k=_-m;return R*R+A*A>P*P+k*k&&(E=T,M=_),{cx:E,cy:M,x0:-u,y0:-d,x1:E*(n/S-1),y1:M*(n/S-1)}}function Aie(e){var t;if(O(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Mz(e,t){var r,i=dg(t.r,0),n=dg(t.r0||0,0),o=i>0,a=n>0;if(!(!o&&!a)){if(o||(i=n,n=0),n>i){var s=i;i=n,n=s}var l=t.startAngle,c=t.endAngle;if(!(isNaN(l)||isNaN(c))){var u=t.cx,d=t.cy,h=!!t.clockwise,p=Dz(c-l),g=p>pE&&p%pE;if(g>ro&&(p=g),!(i>ro))e.moveTo(u,d);else if(p>pE-ro)e.moveTo(u+i*Id(l),d+i*Mc(l)),e.arc(u,d,i,l,c,!h),n>ro&&(e.moveTo(u+n*Id(c),d+n*Mc(c)),e.arc(u,d,n,c,l,h));else{var f=void 0,v=void 0,m=void 0,y=void 0,w=void 0,C=void 0,S=void 0,b=void 0,x=void 0,E=void 0,M=void 0,T=void 0,_=void 0,R=void 0,A=void 0,P=void 0,k=i*Id(l),L=i*Mc(l),V=n*Id(c),z=n*Mc(c),B=p>ro;if(B){var K=t.cornerRadius;K&&(r=Aie(K),f=r[0],v=r[1],m=r[2],y=r[3]);var X=Dz(i-n)/2;if(w=Yo(X,m),C=Yo(X,y),S=Yo(X,f),b=Yo(X,v),M=x=dg(w,C),T=E=dg(S,b),(x>ro||E>ro)&&(_=i*Id(c),R=i*Mc(c),A=n*Id(l),P=n*Mc(l),p<Ez)){var oe=Rie(k,L,A,P,_,R,V,z);if(oe){var ye=k-oe[0],we=L-oe[1],Oe=_-oe[0],$e=R-oe[1],Ne=1/Mc(_ie((ye*Oe+we*$e)/(hg(ye*ye+we*we)*hg(Oe*Oe+$e*$e)))/2),xe=hg(oe[0]*oe[0]+oe[1]*oe[1]);M=Yo(x,(i-xe)/(Ne+1)),T=Yo(E,(n-xe)/(Ne-1))}}}if(!B)e.moveTo(u+k,d+L);else if(M>ro){var ze=Yo(m,M),Ae=Yo(y,M),ve=u0(A,P,k,L,i,ze,h),Ie=u0(_,R,V,z,i,Ae,h);e.moveTo(u+ve.cx+ve.x0,d+ve.cy+ve.y0),M<x&&ze===Ae?e.arc(u+ve.cx,d+ve.cy,M,Hr(ve.y0,ve.x0),Hr(Ie.y0,Ie.x0),!h):(ze>0&&e.arc(u+ve.cx,d+ve.cy,ze,Hr(ve.y0,ve.x0),Hr(ve.y1,ve.x1),!h),e.arc(u,d,i,Hr(ve.cy+ve.y1,ve.cx+ve.x1),Hr(Ie.cy+Ie.y1,Ie.cx+Ie.x1),!h),Ae>0&&e.arc(u+Ie.cx,d+Ie.cy,Ae,Hr(Ie.y1,Ie.x1),Hr(Ie.y0,Ie.x0),!h))}else e.moveTo(u+k,d+L),e.arc(u,d,i,l,c,!h);if(!(n>ro)||!B)e.lineTo(u+V,d+z);else if(T>ro){var ze=Yo(f,T),Ae=Yo(v,T),ve=u0(V,z,_,R,n,-Ae,h),Ie=u0(k,L,A,P,n,-ze,h);e.lineTo(u+ve.cx+ve.x0,d+ve.cy+ve.y0),T<E&&ze===Ae?e.arc(u+ve.cx,d+ve.cy,T,Hr(ve.y0,ve.x0),Hr(Ie.y0,Ie.x0),!h):(Ae>0&&e.arc(u+ve.cx,d+ve.cy,Ae,Hr(ve.y0,ve.x0),Hr(ve.y1,ve.x1),!h),e.arc(u,d,n,Hr(ve.cy+ve.y1,ve.cx+ve.x1),Hr(Ie.cy+Ie.y1,Ie.cx+Ie.x1),h),ze>0&&e.arc(u+Ie.cx,d+Ie.cy,ze,Hr(Ie.y1,Ie.x1),Hr(Ie.y0,Ie.x0),!h))}else e.lineTo(u+V,d+z),e.arc(u,d,n,c,l,h)}e.closePath()}}}var Pie=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}();var Tz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Pie},t.prototype.buildPath=function(r,i){Mz(r,i)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(ce);Tz.prototype.type="sector";var qt=Tz;var kie=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}();var _z=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new kie},t.prototype.buildPath=function(r,i){var n=i.cx,o=i.cy,a=Math.PI*2;r.moveTo(n+i.r,o),r.arc(n,o,i.r,0,a,!1),r.moveTo(n+i.r0,o),r.arc(n,o,i.r0,0,a,!0)},t}(ce);_z.prototype.type="ring";var Tc=_z;function gE(e,t,r,i){var n=[],o=[],a=[],s=[],l,c,u,d;if(i){u=[1/0,1/0],d=[-1/0,-1/0];for(var h=0,p=e.length;h<p;h++)Ui(u,u,e[h]),Wi(d,d,e[h]);Ui(u,u,i[0]),Wi(d,d,i[1])}for(var h=0,p=e.length;h<p;h++){var g=e[h];if(r)l=e[h?h-1:p-1],c=e[(h+1)%p];else if(h===0||h===p-1){n.push(yi(e[h]));continue}else l=e[h-1],c=e[h+1];Xn(o,c,l),sd(o,o,t);var f=oy(g,l),v=oy(g,c),m=f+v;m!==0&&(f/=m,v/=m),sd(a,o,-f),sd(s,o,v);var y=j1([],g,a),w=j1([],g,s);i&&(Wi(y,y,u),Ui(y,y,d),Wi(w,w,u),Ui(w,w,d)),n.push(y),n.push(w)}return r&&n.push(n.shift()),n}function d0(e,t,r){var i=t.smooth,n=t.points;if(n&&n.length>=2){if(i){var o=gE(n,i,r,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var a=n.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],c=o[s*2+1],u=n[(s+1)%a];e.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{e.moveTo(n[0][0],n[0][1]);for(var s=1,d=n.length;s<d;s++)e.lineTo(n[s][0],n[s][1])}r&&e.closePath()}}var Lie=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}();var Az=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Lie},t.prototype.buildPath=function(r,i){d0(r,i,!0)},t}(ce);Az.prototype.type="polygon";var It=Az;var Fie=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}();var Iz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Fie},t.prototype.buildPath=function(r,i){d0(r,i,!1)},t}(ce);Iz.prototype.type="polyline";var Rt=Iz;var Oie={},Nie=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();var Pz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Nie},t.prototype.buildPath=function(r,i){var n,o,a,s;if(this.subPixelOptimize){var l=Qy(Oie,i,this.style);n=l.x1,o=l.y1,a=l.x2,s=l.y2}else n=i.x1,o=i.y1,a=i.x2,s=i.y2;var c=i.percent;c!==0&&(r.moveTo(n,o),c<1&&(a=n*(1-c)+a*c,s=o*(1-c)+s*c),r.lineTo(a,s))},t.prototype.pointAt=function(r){var i=this.shape;return[i.x1*(1-r)+i.x2*r,i.y1*(1-r)+i.y2*r]},t}(ce);Pz.prototype.type="line";var _t=Pz;var Ai=[],zie=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function kz(e,t,r){var i=e.cpx2,n=e.cpy2;return i!=null||n!=null?[(r?iD:Gt)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?iD:Gt)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?zp:$t)(e.x1,e.cpx1,e.x2,t),(r?zp:$t)(e.y1,e.cpy1,e.y2,t)]}var Lz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zie},t.prototype.buildPath=function(r,i){var n=i.x1,o=i.y1,a=i.x2,s=i.y2,l=i.cpx1,c=i.cpy1,u=i.cpx2,d=i.cpy2,h=i.percent;h!==0&&(r.moveTo(n,o),u==null||d==null?(h<1&&(Rs(n,l,a,h,Ai),l=Ai[1],a=Ai[2],Rs(o,c,s,h,Ai),c=Ai[1],s=Ai[2]),r.quadraticCurveTo(l,c,a,s)):(h<1&&(vn(n,l,u,a,h,Ai),l=Ai[1],u=Ai[2],a=Ai[3],vn(o,c,d,s,h,Ai),c=Ai[1],d=Ai[2],s=Ai[3]),r.bezierCurveTo(l,c,u,d,a,s)))},t.prototype.pointAt=function(r){return kz(this.shape,r,!1)},t.prototype.tangentAt=function(r){var i=kz(this.shape,r,!0);return hn(i,i)},t}(ce);Lz.prototype.type="bezier-curve";var _c=Lz;var Vie=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}();var Fz=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Vie},t.prototype.buildPath=function(r,i){var n=i.cx,o=i.cy,a=Math.max(i.r,0),s=i.startAngle,l=i.endAngle,c=i.clockwise,u=Math.cos(s),d=Math.sin(s);r.moveTo(u*a+n,d*a+o),r.arc(n,o,a,s,l,!c)},t}(ce);Fz.prototype.type="arc";var pg=Fz;var Bie=function(e){ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,i=this.shapeChanged(),n=0;n<r.length;n++)i=i||r[n].shapeChanged();i&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],i=this.getGlobalScale(),n=0;n<r.length;n++)r[n].path||r[n].createPathProxy(),r[n].path.setScale(i[0],i[1],r[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,i){for(var n=i.paths||[],o=0;o<n.length;o++)n[o].buildPath(r,n[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],i=0;i<r.length;i++)r[i].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ce.prototype.getBoundingRect.call(this)},t}(ce),Pd=Bie;var Gie=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}(),h0=Gie;var Hie=function(e){ke(t,e);function t(r,i,n,o,a,s){var l=e.call(this,a)||this;return l.x=r??0,l.y=i??0,l.x2=n??1,l.y2=o??0,l.type="linear",l.global=s||!1,l}return t}(h0),qo=Hie;var Uie=function(e){ke(t,e);function t(r,i,n,o,a){var s=e.call(this,o)||this;return s.x=r??.5,s.y=i??.5,s.r=n??.5,s.type="radial",s.global=a||!1,s}return t}(h0),p0=Uie;var Rc=[0,0],Ac=[0,0],g0=new _e,f0=new _e,Wie=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new _e;for(var i=0;i<2;i++)this._axes[i]=new _e;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var i=this._corners,n=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(i[0].set(o,a),i[1].set(s,a),i[2].set(s,l),i[3].set(o,l),r)for(var c=0;c<4;c++)i[c].transform(r);_e.sub(n[0],i[1],i[0]),_e.sub(n[1],i[3],i[0]),n[0].normalize(),n[1].normalize();for(var c=0;c<2;c++)this._origin[c]=n[c].dot(i[0])},e.prototype.intersect=function(t,r){var i=!0,n=!r;return g0.set(1/0,1/0),f0.set(0,0),!this._intersectCheckOneSide(this,t,g0,f0,n,1)&&(i=!1,n)||!this._intersectCheckOneSide(t,this,g0,f0,n,-1)&&(i=!1,n)||n||_e.copy(r,i?g0:f0),i},e.prototype._intersectCheckOneSide=function(t,r,i,n,o,a){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,Rc),this._getProjMinMaxOnAxis(l,r._corners,Ac),Rc[1]<Ac[0]||Rc[0]>Ac[1]){if(s=!1,o)return s;var u=Math.abs(Ac[0]-Rc[1]),d=Math.abs(Rc[0]-Ac[1]);Math.min(u,d)>n.len()&&(u<d?_e.scale(n,c,-u*a):_e.scale(n,c,d*a))}else if(i){var u=Math.abs(Ac[0]-Rc[1]),d=Math.abs(Rc[0]-Ac[1]);Math.min(u,d)<i.len()&&(u<d?_e.scale(i,c,u*a):_e.scale(i,c,-d*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,i){for(var n=this._axes[t],o=this._origin,a=r[0].dot(n)+o[t],s=a,l=a,c=1;c<r.length;c++){var u=r[c].dot(n)+o[t];s=Math.min(u,s),l=Math.max(u,l)}i[0]=s,i[1]=l},e}(),kd=Wie;var jie=[],$ie=function(e){ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,i){i?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,i){i=i||!1;for(var n=0;n<r.length;n++)this.addDisplayable(r[n],i)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var i=this._cursor;i<this._displayables.length;i++)r&&r(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)r&&r(this._temporaryDisplayables[i])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var i=this._displayables[r];i.parent=this,i.update(),i.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var i=this._temporaryDisplayables[r];i.parent=this,i.update(),i.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new le(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var n=this._displayables[i],o=n.getBoundingRect().clone();n.needLocalTransform()&&o.applyTransform(n.getLocalTransform(jie)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),o=this.getBoundingRect();if(o.contain(n[0],n[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,i))return!0}return!1},t}(Yt),Oz=$ie;var zz=he();function Ko(e,t,r,i,n){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var c=void 0,u=void 0,d=void 0;i?(c=de(i.duration,200),u=de(i.easing,"cubicOut"),d=0):(c=t.getShallow(l?"animationDurationUpdate":"animationDuration"),u=t.getShallow(l?"animationEasingUpdate":"animationEasing"),d=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(c=o.duration),o.easing!=null&&(u=o.easing),o.delay!=null&&(d=o.delay)),Z(d)&&(d=d(r,n)),Z(c)&&(c=c(r));var h={duration:c||0,delay:d,easing:u};return h}else return null}function fE(e,t,r,i,n,o,a){var s=!1,l;Z(n)?(a=o,o=n,n=null):J(n)&&(o=n.cb,a=n.during,s=n.isFrom,l=n.removeOpt,n=n.dataIndex);var c=e==="leave";c||t.stopAnimation("leave");var u=Ko(e,i,n,c?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(t,n):null);if(u&&u.duration>0){var d=u.duration,h=u.delay,p=u.easing,g={duration:d,delay:h||0,easing:p,done:o,force:!!o||!!a,setToFinal:!c,scope:e,during:a};s?t.animateFrom(r,g):t.animateTo(r,g)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function Me(e,t,r,i,n,o){fE("update",e,t,r,i,n,o)}function je(e,t,r,i,n,o){fE("enter",e,t,r,i,n,o)}function La(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function xn(e,t,r,i,n,o){La(e)||fE("leave",e,t,r,i,n,o)}function Nz(e,t,r,i){e.removeTextContent(),e.removeTextGuideLine(),xn(e,{style:{opacity:0}},t,r,i)}function Fa(e,t,r){function i(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(n){n.isGroup||Nz(n,t,r,i)}):Nz(e,t,r,i)}function nr(e){zz(e).oldStyle=e.style}function Vz(e){return zz(e).oldStyle}var v0=Math.max,m0=Math.min,mE={};function Yie(e){return ce.extend(e)}var qie=Cz;function Kie(e,t){return qie(e,t)}function io(e,t){mE[e]=t}function gg(e){if(mE.hasOwnProperty(e))return mE[e]}function Ld(e,t,r,i){var n=c0(e,t);return r&&(i==="center"&&(r=Hz(r,n.getBoundingRect())),Uz(n,r)),n}function yE(e,t,r){var i=new vt({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(r==="center"){var o={width:n.width,height:n.height};i.setStyle(Hz(t,o))}}});return i}function Hz(e,t){var r=t.width/t.height,i=e.height*r,n;i<=e.width?n=e.height:(i=e.width,n=i/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-i/2,y:a-n/2,width:i,height:n}}var Ur=bz;function Uz(e,t){if(e.applyTransform){var r=e.getBoundingRect(),i=r.calculateTransform(t);e.applyTransform(i)}}function Oa(e,t){return Qy(e,e,{lineWidth:t}),e}function Zie(e){return Jy(e.shape,e.shape,e.style),e}var fg=zs;function no(e,t){for(var r=Es([]);e&&e!==t;)bi(r,e.getLocalTransform(),r),e=e.parent;return r}function Rr(e,t,r){return t&&!Vt(t)&&(t=xi.getLocalTransform(t)),r&&(t=gn([],t)),Bt([],e,t)}function Ic(e,t,r){var i=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),n=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-i:e==="right"?i:0,e==="top"?-n:e==="bottom"?n:0];return o=Rr(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function Bz(e){return!e.isGroup}function Xie(e){return e.shape!=null}function Na(e,t,r){if(!e||!t)return;function i(a){var s={};return a.traverse(function(l){Bz(l)&&l.anid&&(s[l.anid]=l)}),s}function n(a){var s={x:a.x,y:a.y,rotation:a.rotation};return Xie(a)&&(s.shape=F({},a.shape)),s}var o=i(e);t.traverse(function(a){if(Bz(a)&&a.anid){var s=o[a.anid];if(s){var l=n(a);a.attr(n(s)),Me(a,l,r,ae(a).dataIndex)}}})}function wE(e,t){return N(e,function(r){var i=r[0];i=v0(i,t.x),i=m0(i,t.x+t.width);var n=r[1];return n=v0(n,t.y),n=m0(n,t.y+t.height),[i,n]})}function Qie(e,t){var r=v0(e.x,t.x),i=m0(e.x+e.width,t.x+t.width),n=v0(e.y,t.y),o=m0(e.y+e.height,t.y+t.height);if(i>=r&&o>=n)return{x:r,y:n,width:i-r,height:o-n}}function za(e,t,r){var i=F({rectHover:!0},t),n=i.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(n.image=e.slice(8),Q(n,r),new vt(i)):Ld(e.replace("path://",""),i,r,"center")}function Fd(e,t,r,i,n){for(var o=0,a=n[n.length-1];o<n.length;o++){var s=n[o];if(Wz(e,t,r,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function Wz(e,t,r,i,n,o,a,s){var l=r-e,c=i-t,u=a-n,d=s-o,h=vE(u,d,l,c);if(Jie(h))return!1;var p=e-n,g=t-o,f=vE(p,g,l,c)/h;if(f<0||f>1)return!1;var v=vE(p,g,u,d)/h;return!(v<0||v>1)}function vE(e,t,r,i){return e*i-r*t}function Jie(e){return e<=1e-6&&e>=-1e-6}function oo(e){var t=e.itemTooltipOption,r=e.componentModel,i=e.itemName,n=H(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:i,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&D(me(l),function(u){ne(s,u)||(s[u]=l[u],s.$vars.push(u))});var c=ae(e.el);c.componentMainType=o,c.componentIndex=a,c.tooltipConfig={name:i,option:Q({content:i,encodeHTMLContent:!0,formatterParams:s},n)}}function Gz(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function ri(e,t){if(e)if(O(e))for(var r=0;r<e.length;r++)Gz(e[r],t);else Gz(e,t)}io("circle",ti);io("ellipse",ug);io("sector",qt);io("ring",Tc);io("polygon",It);io("polyline",Rt);io("rect",Ce);io("line",_t);io("bezierCurve",_c);io("arc",pg);var y0={};function Kz(e,t){for(var r=0;r<cr.length;r++){var i=cr[r],n=t[i],o=e.ensureState(i);o.style=o.style||{},o.style.text=n}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function CE(e,t,r){var i=e.labelFetcher,n=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;i&&(s=i.getFormattedLabel(n,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Z(e.defaultText)?e.defaultText(n,e,r):e.defaultText);for(var l={normal:s},c=0;c<cr.length;c++){var u=cr[c],d=t[u];l[u]=de(i?i.getFormattedLabel(n,u,null,o,d&&d.get("formatter")):null,s)}return l}function ft(e,t,r,i){r=r||y0;for(var n=e instanceof De,o=!1,a=0;a<Vs.length;a++){var s=t[Vs[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=n?e:e.getTextContent();if(o){n||(l||(l=new De,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var c=CE(r,t),u=t.normal,d=!!u.getShallow("show"),h=Ke(u,i&&i.normal,r,!1,!n);h.text=c.normal,n||e.setTextConfig(vg(u,r,!1));for(var a=0;a<cr.length;a++){var p=cr[a],s=t[p];if(s){var g=l.ensureState(p),f=!!de(s.getShallow("show"),d);if(f!==d&&(g.ignore=!f),g.style=Ke(s,i&&i[p],r,!0,!n),g.style.text=c[p],!n){var v=e.ensureState(p);v.textConfig=vg(s,r,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!d,l.useStyle(h),l.dirty(),r.enableTextSetter&&(Va(l).setLabelText=function(m){var y=CE(r,t,m);Kz(l,y)})}else l&&(l.ignore=!0);e.dirty()}function at(e,t){t=t||"label";for(var r={normal:e.getModel(t)},i=0;i<cr.length;i++){var n=cr[i];r[n]=e.getModel([n,t])}return r}function Ke(e,t,r,i,n){var o={};return ene(o,e,r,i,n),t&&F(o,t),o}function vg(e,t,r){t=t||{};var i={},n,o=e.getShallow("rotate"),a=de(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return n=e.getShallow("position")||(r?null:"inside"),n==="outside"&&(n=t.defaultOutsidePosition||"top"),n!=null&&(i.position=n),s!=null&&(i.offset=s),o!=null&&(o*=Math.PI/180,i.rotation=o),a!=null&&(i.distance=a),i.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",i}function ene(e,t,r,i,n){r=r||y0;var o=t.ecModel,a=o&&o.option.textStyle,s=tne(t),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var u=t.getModel(["rich",c]);qz(l[c]={},u,a,r,i,n,!1,!0)}}l&&(e.rich=l);var d=t.get("overflow");d&&(e.overflow=d);var h=t.get("minMargin");h!=null&&(e.margin=h),qz(e,t,a,r,i,n,!0,!1)}function tne(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||y0).rich;if(r){t=t||{};for(var i=me(r),n=0;n<i.length;n++){var o=i[n];t[o]=1}}e=e.parentModel}return t}var jz=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],$z=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Yz=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function qz(e,t,r,i,n,o,a,s){r=!n&&r||y0;var l=i&&i.inheritColor,c=t.getShallow("color"),u=t.getShallow("textBorderColor"),d=de(t.getShallow("opacity"),r.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),o||(c=c||r.color,u=u||r.textBorderColor),c!=null&&(e.fill=c),u!=null&&(e.stroke=u);var h=de(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var p=de(t.getShallow("textBorderType"),r.textBorderType);p!=null&&(e.lineDash=p);var g=de(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);g!=null&&(e.lineDashOffset=g),!n&&d==null&&!s&&(d=i&&i.defaultOpacity),d!=null&&(e.opacity=d),!n&&!o&&e.fill==null&&i.inheritColor&&(e.fill=i.inheritColor);for(var f=0;f<jz.length;f++){var v=jz[f],m=de(t.getShallow(v),r[v]);m!=null&&(e[v]=m)}for(var f=0;f<$z.length;f++){var v=$z[f],m=t.getShallow(v);m!=null&&(e[v]=m)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!a||!i.disableBox){for(var f=0;f<Yz.length;f++){var v=Yz[f],m=t.getShallow(v);m!=null&&(e[v]=m)}var w=t.getShallow("borderType");w!=null&&(e.borderDash=w),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function Od(e,t){var r=t&&t.getModel("textStyle");return dr([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var Va=he();function w0(e,t,r,i){if(e){var n=Va(e);n.prevValue=n.value,n.value=r;var o=t.normal;n.valueAnimation=o.get("valueAnimation"),n.valueAnimation&&(n.precision=o.get("precision"),n.defaultInterpolatedText=i,n.statesModels=t)}}function C0(e,t,r,i,n){var o=Va(e);if(!o.valueAnimation||o.prevValue===o.value)return;var a=o.defaultInterpolatedText,s=de(o.interpolatedValue,o.prevValue),l=o.value;function c(u){var d=$y(r,o.precision,s,l,u);o.interpolatedValue=u===1?null:d;var h=CE({labelDataIndex:t,labelFetcher:n,defaultText:a?a(d):d+""},o.statesModels,d);Kz(e,h)}e.percent=0,(o.prevValue==null?je:Me)(e,{percent:1},i,t,null,c)}var ine=["textStyle","color"],bE=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],SE=new De,nne=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(ine):null)},e.prototype.getFont=function(){return Od({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<bE.length;i++)r[bE[i]]=this.getShallow(bE[i]);return SE.useStyle(r),SE.update(),SE.getBoundingRect()},e}(),Zz=nne;var xE=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],one=Ti(xE),Xz=function(){function e(){}return e.prototype.getLineStyle=function(t){return one(this,t)},e}();var DE=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ane=Ti(DE),Qz=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return ane(this,t,r)},e}();var Pc=function(){function e(t,r,i){this.parentModel=r,this.ecModel=i,this.option=t}return e.prototype.init=function(t,r,i){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o]},e.prototype.mergeOption=function(t,r){fe(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var i=this.option,n=i==null?i:i[t];if(n==null&&!r){var o=this.parentModel;o&&(n=o.getShallow(t))}return n},e.prototype.getModel=function(t,r){var i=t!=null,n=i?this.parsePath(t):null,o=i?this._doGet(n):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(re(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Re.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var i=this.option;if(!t)return i;for(var n=0;n<t.length&&!(t[n]&&(i=i&&typeof i=="object"?i[t[n]]:null,i==null));n++);return i==null&&r&&(i=r._doGet(this.resolveParentPath(t),r.parentModel)),i},e}();Sd(Pc);cN(Pc);ot(Pc,Xz);ot(Pc,Qz);ot(Pc,uN);ot(Pc,Zz);var Ve=Pc;var sne=Math.round(Math.random()*10);function Dn(e){return[e||"",sne++].join("_")}function Jz(e){var t={};e.registerSubTypeDefaulter=function(r,i){var n=Mi(r);t[n.main]=i},e.determineSubType=function(r,i){var n=i.type;if(!n){var o=Mi(r).main;e.hasSubTypes(r)&&t[o]&&(n=t[o](i))}return n}}function e6(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var c=r(a),u=c.graph,d=c.noEntryList,h={};for(D(o,function(y){h[y]=!0});d.length;){var p=d.pop(),g=u[p],f=!!h[p];f&&(s.call(l,p,g.originalDeps.slice()),delete h[p]),D(g.successor,f?m:v)}D(h,function(){var y="";throw new Error(y)});function v(y){u[y].entryCount--,u[y].entryCount===0&&d.push(y)}function m(y){h[y]=!0,v(y)}};function r(o){var a={},s=[];return D(o,function(l){var c=i(a,l),u=c.originalDeps=t(l),d=n(u,o);c.entryCount=d.length,c.entryCount===0&&s.push(l),D(d,function(h){pe(c.predecessor,h)<0&&c.predecessor.push(h);var p=i(a,h);pe(p.successor,h)<0&&p.successor.push(l)})}),{graph:a,noEntryList:s}}function i(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function n(o,a){var s=[];return D(o,function(l){pe(a,l)>=0&&s.push(l)}),s}}function Wr(e,t){return fe(fe({},e,!0),t,!0)}var t6={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}};var r6={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE",custom:"\u81EA\u5B9A\u4E49\u56FE\u8868",chart:"\u56FE\u8868"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var S0="ZH",ME="EN",Nd=ME,b0={},TE={},x0=Re.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Nd).toUpperCase();return e.indexOf(S0)>-1?S0:Nd}():Nd;function i6(e,t){e=e.toUpperCase(),TE[e]=new Ve(t),b0[e]=t}function n6(e){if(H(e)){var t=b0[e.toUpperCase()]||{};return e===S0||e===ME?re(t):fe(re(t),re(b0[Nd]),!1)}else return fe(re(e),re(b0[Nd]),!1)}function mg(e){return TE[e]}function o6(){return TE[Nd]}i6(ME,t6);i6(S0,r6);var E0=1e3,M0=E0*60,Vd=M0*60,qi=Vd*24,RE=qi*365,yg={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},D0="{yyyy}-{MM}-{dd}",AE={year:"{yyyy}",month:"{yyyy}-{MM}",day:D0,hour:D0+" "+yg.hour,minute:D0+" "+yg.minute,second:D0+" "+yg.second,millisecond:yg.none},_E=["year","month","day","hour","minute","second","millisecond"],IE=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Ba(e,t){return e+="","0000".substr(0,t-e.length)+e}function Lc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function a6(e){return e===Lc(e)}function s6(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Fc(e,t,r,i){var n=Jr(e),o=n[T0(r)](),a=n[kc(r)]()+1,s=Math.floor((a-1)/3)+1,l=n[wg(r)](),c=n["get"+(r?"UTC":"")+"Day"](),u=n[zd(r)](),d=(u-1)%12+1,h=n[Cg(r)](),p=n[bg(r)](),g=n[Sg(r)](),f=u>=12?"pm":"am",v=f.toUpperCase(),m=i instanceof Ve?i:mg(i||x0)||o6(),y=m.getModel("time"),w=y.get("month"),C=y.get("monthAbbr"),S=y.get("dayOfWeek"),b=y.get("dayOfWeekAbbr");return(t||"").replace(/{a}/g,f+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,Ba(o%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,w[a-1]).replace(/{MMM}/g,C[a-1]).replace(/{MM}/g,Ba(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Ba(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,S[c]).replace(/{ee}/g,b[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Ba(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Ba(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Ba(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Ba(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,Ba(g,3)).replace(/{S}/g,g+"")}function l6(e,t,r,i,n){var o=null;if(H(r))o=r;else if(Z(r))o=r(e.value,t,{level:e.level});else{var a=F({},yg);if(e.level>0)for(var s=0;s<_E.length;++s)a[_E[s]]="{primary|"+a[_E[s]]+"}";var l=r?r.inherit===!1?r:Q(r,a):a,c=c6(e.value,n);if(l[c])o=l[c];else if(l.inherit){for(var u=IE.indexOf(c),s=u-1;s>=0;--s)if(l[c]){o=l[c];break}o=o||a.none}if(O(o)){var d=e.level==null?0:e.level>=0?e.level:o.length+e.level;d=Math.min(d,o.length-1),o=o[d]}}return Fc(new Date(e.value),o,n,i)}function c6(e,t){var r=Jr(e),i=r[kc(t)]()+1,n=r[wg(t)](),o=r[zd(t)](),a=r[Cg(t)](),s=r[bg(t)](),l=r[Sg(t)](),c=l===0,u=c&&s===0,d=u&&a===0,h=d&&o===0,p=h&&n===1,g=p&&i===1;return g?"year":p?"month":h?"day":d?"hour":u?"minute":c?"second":"millisecond"}function PE(e,t,r){var i=be(e)?Jr(e):e;switch(t=t||c6(e,r),t){case"year":return i[T0(r)]();case"half-year":return i[kc(r)]()>=6?1:0;case"quarter":return Math.floor((i[kc(r)]()+1)/4);case"month":return i[kc(r)]();case"day":return i[wg(r)]();case"half-day":return i[zd(r)]()/24;case"hour":return i[zd(r)]();case"minute":return i[Cg(r)]();case"second":return i[bg(r)]();case"millisecond":return i[Sg(r)]()}}function T0(e){return e?"getUTCFullYear":"getFullYear"}function kc(e){return e?"getUTCMonth":"getMonth"}function wg(e){return e?"getUTCDate":"getDate"}function zd(e){return e?"getUTCHours":"getHours"}function Cg(e){return e?"getUTCMinutes":"getMinutes"}function bg(e){return e?"getUTCSeconds":"getSeconds"}function Sg(e){return e?"getUTCMilliseconds":"getMilliseconds"}function u6(e){return e?"setUTCFullYear":"setFullYear"}function kE(e){return e?"setUTCMonth":"setMonth"}function LE(e){return e?"setUTCDate":"setDate"}function FE(e){return e?"setUTCHours":"setHours"}function OE(e){return e?"setUTCMinutes":"setMinutes"}function NE(e){return e?"setUTCSeconds":"setSeconds"}function zE(e){return e?"setUTCMilliseconds":"setMilliseconds"}function BE(e){if(!Zp(e))return H(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function _0(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,i){return i.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var ao=od;function R0(e,t,r){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(u){return u&&dr(u)?u:"-"}function o(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?Jr(e):e;if(isNaN(+l)){if(s)return"-"}else return Fc(l,i,r)}if(t==="ordinal")return Rp(e)?n(e):be(e)&&o(e)?e+"":"-";var c=wn(e);return o(c)?BE(c):Rp(e)?n(e):typeof e=="boolean"?e+"":"-"}var d6=["a","b","c","d","e","f","g"],VE=function(e,t){return"{"+e+(t??"")+"}"};function A0(e,t,r){O(t)||(t=[t]);var i=t.length;if(!i)return"";for(var n=t[0].$vars||[],o=0;o<n.length;o++){var a=d6[o];e=e.replace(VE(a),VE(a,0))}for(var s=0;s<i;s++)for(var l=0;l<n.length;l++){var c=t[s][n[l]];e=e.replace(VE(d6[l],s),r?gr(c):c)}return e}function h6(e,t,r){return D(t,function(i,n){e=e.replace("{"+n+"}",r?gr(i):i)}),e}function p6(e,t){var r=H(e)?{color:e,extraCssText:t}:e||{},i=r.color,n=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!i)return"";if(o==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+gr(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+gr(i)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function so(e,t){return t=t||"transparent",H(e)?e:J(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function Oc(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var I0=D,GE=["left","right","top","bottom","width","height"],Nc=[["width","left","right"],["height","top","bottom"]];function HE(e,t,r,i,n){var o=0,a=0;i==null&&(i=1/0),n==null&&(n=1/0);var s=0;t.eachChild(function(l,c){var u=l.getBoundingRect(),d=t.childAt(c+1),h=d&&d.getBoundingRect(),p,g;if(e==="horizontal"){var f=u.width+(h?-h.x+u.x:0);p=o+f,p>i||l.newline?(o=0,p=f,a+=s+r,s=u.height):s=Math.max(s,u.height)}else{var v=u.height+(h?-h.y+u.y:0);g=a+v,g>n||l.newline?(o+=s+r,a=0,g=v,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=p+r:a=g+r)})}var lo=HE,JOe=se(HE,"vertical"),eNe=se(HE,"horizontal");function g6(e,t,r){var i=t.width,n=t.height,o=j(e.left,i),a=j(e.top,n),s=j(e.right,i),l=j(e.bottom,n);return(isNaN(o)||isNaN(parseFloat(e.left)))&&(o=0),(isNaN(s)||isNaN(parseFloat(e.right)))&&(s=i),(isNaN(a)||isNaN(parseFloat(e.top)))&&(a=0),(isNaN(l)||isNaN(parseFloat(e.bottom)))&&(l=n),r=ao(r||0),{width:Math.max(s-o-r[1]-r[3],0),height:Math.max(l-a-r[0]-r[2],0)}}function Je(e,t,r){r=ao(r||0);var i=t.width,n=t.height,o=j(e.left,i),a=j(e.top,n),s=j(e.right,i),l=j(e.bottom,n),c=j(e.width,i),u=j(e.height,n),d=r[2]+r[0],h=r[1]+r[3],p=e.aspect;switch(isNaN(c)&&(c=i-s-h-o),isNaN(u)&&(u=n-l-d-a),p!=null&&(isNaN(c)&&isNaN(u)&&(p>i/n?c=i*.8:u=n*.8),isNaN(c)&&(c=p*u),isNaN(u)&&(u=c/p)),isNaN(o)&&(o=i-s-c-h),isNaN(a)&&(a=n-l-u-d),e.left||e.right){case"center":o=i/2-c/2-r[3];break;case"right":o=i-c-h;break}switch(e.top||e.bottom){case"middle":case"center":a=n/2-u/2-r[0];break;case"bottom":a=n-u-d;break}o=o||0,a=a||0,isNaN(c)&&(c=i-h-o-(s||0)),isNaN(u)&&(u=n-d-a-(l||0));var g=new le(o+r[3],a+r[0],c,u);return g.margin=r,g}function Hs(e,t,r,i,n,o){var a=!n||!n.hv||n.hv[0],s=!n||!n.hv||n.hv[1],l=n&&n.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var c;if(l==="raw")c=e.type==="group"?new le(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(c=e.getBoundingRect(),e.needLocalTransform()){var u=e.getLocalTransform();c=c.clone(),c.applyTransform(u)}var d=Je(Q({width:c.width,height:c.height},t),r,i),h=a?d.x-c.x:0,p=s?d.y-c.y:0;return l==="raw"?(o.x=h,o.y=p):(o.x+=h,o.y+=p),o===e&&e.markRedraw(),!0}function f6(e,t){return e[Nc[t][0]]!=null||e[Nc[t][1]]!=null&&e[Nc[t][2]]!=null}function Us(e){var t=e.layoutMode||e.constructor.layoutMode;return J(t)?t:t?{type:t}:null}function Ii(e,t,r){var i=r&&r.ignoreSize;!O(i)&&(i=[i,i]);var n=a(Nc[0],0),o=a(Nc[1],1);c(Nc[0],e,n),c(Nc[1],e,o);function a(u,d){var h={},p=0,g={},f=0,v=2;if(I0(u,function(w){g[w]=e[w]}),I0(u,function(w){s(t,w)&&(h[w]=g[w]=t[w]),l(h,w)&&p++,l(g,w)&&f++}),i[d])return l(t,u[1])?g[u[2]]=null:l(t,u[2])&&(g[u[1]]=null),g;if(f===v||!p)return g;if(p>=v)return h;for(var m=0;m<u.length;m++){var y=u[m];if(!s(h,y)&&s(e,y)){h[y]=e[y];break}}return h}function s(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,h){I0(u,function(p){d[p]=h[p]})}}function En(e){return UE({},e)}function UE(e,t){return t&&e&&I0(GE,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var lne=he(),Bd=function(e){I(t,e);function t(r,i,n){var o=e.call(this,r,i,n)||this;return o.uid=Dn("ec_cpt_model"),o}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=Us(this),o=n?En(r):{},a=i.getTheme();fe(r,a.get(this.mainType)),fe(r,this.getDefaultOption()),n&&Ii(r,o,n)},t.prototype.mergeOption=function(r,i){fe(this.option,r,!0);var n=Us(this);n&&Ii(this.option,r,n)},t.prototype.optionUpdated=function(r,i){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!lN(r))return r.defaultOption;var i=lne(this);if(!i.defaultOption){for(var n=[],o=r;o;){var a=o.prototype.defaultOption;a&&n.push(a),o=o.superClass}for(var s={},l=n.length-1;l>=0;l--)s=fe(s,n[l],!0);i.defaultOption=s}return i.defaultOption},t.prototype.getReferringComponents=function(r,i){var n=r+"Index",o=r+"Id";return ks(this.ecModel,r,{index:this.get(n,!0),id:this.get(o,!0)},i)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Ve);Yy(Bd,Ve);Ls(Bd);Jz(Bd);e6(Bd,cne);function cne(e){var t=[];return D(Bd.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=N(t,function(r){return Mi(r).main}),e!=="dataset"&&pe(t,"dataset")<=0&&t.unshift("dataset"),t}var Ee=Bd;var v6="";typeof navigator<"u"&&(v6=navigator.platform||"");var Gd="rgba(0, 0, 0, 0.2)",m6={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Gd,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Gd,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Gd,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Gd,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Gd,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Gd,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:v6.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var P0=Y(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),br="original",Qt="arrayRows",Ir="objectRows",Ki="keyedColumns",Zi="typedArray",WE="unknown",Pi="column",Ga="row";var mr={Must:1,Might:2,Not:3},y6=he();function w6(e){y6(e).datasetMap=Y()}function k0(e,t,r){var i={},n=L0(t);if(!n||!e)return i;var o=[],a=[],s=t.ecModel,l=y6(s).datasetMap,c=n.uid+"_"+r.seriesLayoutBy,u,d;e=e.slice(),D(e,function(f,v){var m=J(f)?f:e[v]={name:f};m.type==="ordinal"&&u==null&&(u=v,d=g(m)),i[m.name]=[]});var h=l.get(c)||l.set(c,{categoryWayDim:d,valueWayDim:0});D(e,function(f,v){var m=f.name,y=g(f);if(u==null){var w=h.valueWayDim;p(i[m],w,y),p(a,w,y),h.valueWayDim+=y}else if(u===v)p(i[m],0,y),p(o,0,y);else{var w=h.categoryWayDim;p(i[m],w,y),p(a,w,y),h.categoryWayDim+=y}});function p(f,v,m){for(var y=0;y<m;y++)f.push(v+y)}function g(f){var v=f.dimsDef;return v?v.length:1}return o.length&&(i.itemName=o),a.length&&(i.seriesName=a),i}function Hd(e,t,r){var i={},n=L0(e);if(!n)return i;var o=t.sourceFormat,a=t.dimensionsDefine,s;(o===Ir||o===Ki)&&D(a,function(u,d){(J(u)?u.name:u)==="name"&&(s=d)});var l=function(){for(var u={},d={},h=[],p=0,g=Math.min(5,r);p<g;p++){var f=b6(t.data,o,t.seriesLayoutBy,a,t.startIndex,p);h.push(f);var v=f===mr.Not;if(v&&u.v==null&&p!==s&&(u.v=p),(u.n==null||u.n===u.v||!v&&h[u.n]===mr.Not)&&(u.n=p),m(u)&&h[u.n]!==mr.Not)return u;v||(f===mr.Might&&d.v==null&&p!==s&&(d.v=p),(d.n==null||d.n===d.v)&&(d.n=p))}function m(y){return y.v!=null&&y.n!=null}return m(u)?u:m(d)?d:null}();if(l){i.value=[l.v];var c=s??l.n;i.itemName=[c],i.seriesName=[c]}return i}function L0(e){var t=e.get("data",!0);if(!t)return ks(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},dt).models[0]}function C6(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:ks(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},dt).models}function F0(e,t){return b6(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function b6(e,t,r,i,n,o){var a,s=5;if(Zt(e))return mr.Not;var l,c;if(i){var u=i[o];J(u)?(l=u.name,c=u.type):H(u)&&(l=u)}if(c!=null)return c==="ordinal"?mr.Must:mr.Not;if(t===Qt){var d=e;if(r===Ga){for(var h=d[o],p=0;p<(h||[]).length&&p<s;p++)if((a=C(h[n+p]))!=null)return a}else for(var p=0;p<d.length&&p<s;p++){var g=d[n+p];if(g&&(a=C(g[o]))!=null)return a}}else if(t===Ir){var f=e;if(!l)return mr.Not;for(var p=0;p<f.length&&p<s;p++){var v=f[p];if(v&&(a=C(v[l]))!=null)return a}}else if(t===Ki){var m=e;if(!l)return mr.Not;var h=m[l];if(!h||Zt(h))return mr.Not;for(var p=0;p<h.length&&p<s;p++)if((a=C(h[p]))!=null)return a}else if(t===br)for(var y=e,p=0;p<y.length&&p<s;p++){var v=y[p],w=eo(v);if(!O(w))return mr.Not;if((a=C(w[o]))!=null)return a}function C(S){var b=H(S);if(S!=null&&Number.isFinite(Number(S))&&S!=="")return b?mr.Might:mr.Not;if(b&&S!=="-")return mr.Must}return mr.Not}var jE=Y();function S6(e,t){St(jE.get(e)==null&&t),jE.set(e,t)}function x6(e,t,r){var i=jE.get(t);if(!i)return r;var n=i(e);if(!n)return r;if(0)for(var o;o<n.length;o++);return r.concat(n)}var D6=he(),une=he(),Dg=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,i){var n=Ge(this.get("color",!0)),o=this.get("colorLayer",!0);return E6(this,D6,n,o,t,r,i)},e.prototype.clearColorPalette=function(){hne(this,D6)},e}();function Eg(e,t,r,i){var n=Ge(e.get(["aria","decal","decals"]));return E6(e,une,n,null,t,r,i)}function dne(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i].length>t)return e[i];return e[r-1]}function E6(e,t,r,i,n,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(n))return c[n];var u=a==null||!i?r:dne(i,a);if(u=u||r,!(!u||!u.length)){var d=u[l];return n&&(c[n]=d),s.paletteIdx=(l+1)%u.length,d}}function hne(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var O0,Mg,M6,T6="\0_ec_inner",pne=1;var I6=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,i,n,o,a,s){o=o||{},this.option=null,this._theme=new Ve(o),this._locale=new Ve(a),this._optionManager=s},t.prototype.setOption=function(r,i,n){var o=A6(i);this._optionManager.setOption(r,n,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,i){return this._resetOption(r,A6(i))},t.prototype._resetOption=function(r,i){var n=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?M6(this,a):(this.restoreData(),this._mergeOption(a,i)),n=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(n=!0,this._mergeOption(s,i))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&D(l,function(c){n=!0,this._mergeOption(c,i)},this)}return n},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,i){var n=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=Y(),c=i&&i.replaceMergeMainTypeMap;w6(this),D(r,function(d,h){d!=null&&(Ee.hasClass(h)?h&&(s.push(h),l.set(h,!0)):n[h]=n[h]==null?re(d):fe(n[h],d,!0))}),c&&c.each(function(d,h){Ee.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Ee.topologicalTravel(s,Ee.getAllClassMainTypes(),u,this);function u(d){var h=x6(this,d,Ge(r[d])),p=o.get(d),g=p?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",f=jy(p,h,g);rN(f,d,Ee),n[d]=null,o.set(d,null),a.set(d,0);var v=[],m=[],y=0,w,C;D(f,function(S,b){var x=S.existing,E=S.newOption;if(!E)x&&(x.mergeOption({},this),x.optionUpdated({},!1));else{var M=d==="series",T=Ee.getClass(d,S.keyInfo.subType,!M);if(!T){if(0)var _,R;return}if(d==="tooltip"){if(w)return;w=!0}if(x&&x.constructor===T)x.name=S.keyInfo.name,x.mergeOption(E,this),x.optionUpdated(E,!1);else{var A=F({componentIndex:b},S.keyInfo);x=new T(E,this,this,A),F(x,A),S.brandNew&&(x.__requireNewView=!0),x.init(E,this,this),x.optionUpdated(null,!0)}}x?(v.push(x.option),m.push(x),y++):(v.push(void 0),m.push(void 0))},this),n[d]=v,o.set(d,m),a.set(d,y),d==="series"&&O0(this)}this._seriesIndices||O0(this)},t.prototype.getOption=function(){var r=re(this.option);return D(r,function(i,n){if(Ee.hasClass(n)){for(var o=Ge(i),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Cd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[n]=o}}),delete r[T6],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,i){var n=this._componentsMap.get(r);if(n){var o=n[i||0];if(o)return o;if(i==null){for(var a=0;a<n.length;a++)if(n[a])return n[a]}}},t.prototype.queryComponents=function(r){var i=r.mainType;if(!i)return[];var n=r.index,o=r.id,a=r.name,s=this._componentsMap.get(i);if(!s||!s.length)return[];var l;return n!=null?(l=[],D(Ge(n),function(c){s[c]&&l.push(s[c])})):o!=null?l=_6("id",o,s):a!=null?l=_6("name",a,s):l=Pe(s,function(c){return!!c}),R6(l,r)},t.prototype.findComponents=function(r){var i=r.query,n=r.mainType,o=s(i),a=o?this.queryComponents(o):Pe(this._componentsMap.get(n),function(c){return!!c});return l(R6(a,r));function s(c){var u=n+"Index",d=n+"Id",h=n+"Name";return c&&(c[u]!=null||c[d]!=null||c[h]!=null)?{mainType:n,index:c[u],id:c[d],name:c[h]}:null}function l(c){return r.filter?Pe(c,r.filter):c}},t.prototype.eachComponent=function(r,i,n){var o=this._componentsMap;if(Z(r)){var a=i,s=r;o.each(function(d,h){for(var p=0;d&&p<d.length;p++){var g=d[p];g&&s.call(a,h,g,g.componentIndex)}})}else for(var l=H(r)?o.get(r):J(r)?this.findComponents(r):null,c=0;l&&c<l.length;c++){var u=l[c];u&&i.call(n,u,u.componentIndex)}},t.prototype.getSeriesByName=function(r){var i=Mt(r,null);return Pe(this._componentsMap.get("series"),function(n){return!!n&&i!=null&&n.name===i})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Pe(this._componentsMap.get("series"),function(i){return!!i&&i.subType===r})},t.prototype.getSeries=function(){return Pe(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,i){Mg(this),D(this._seriesIndices,function(n){var o=this._componentsMap.get("series")[n];r.call(i,o,n)},this)},t.prototype.eachRawSeries=function(r,i){D(this._componentsMap.get("series"),function(n){n&&r.call(i,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(r,i,n){Mg(this),D(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&i.call(n,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,i,n){return D(this.getSeriesByType(r),i,n)},t.prototype.isSeriesFiltered=function(r){return Mg(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,i){Mg(this);var n=[];D(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(i,a,o)&&n.push(o)},this),this._seriesIndices=n,this._seriesIndicesMap=Y(n)},t.prototype.restoreData=function(r){O0(this);var i=this._componentsMap,n=[];i.each(function(o,a){Ee.hasClass(a)&&n.push(a)}),Ee.topologicalTravel(n,Ee.getAllClassMainTypes(),function(o){D(i.get(o),function(a){a&&(o!=="series"||!gne(a,r))&&a.restoreData()})})},t.internalField=function(){O0=function(r){var i=r._seriesIndices=[];D(r._componentsMap.get("series"),function(n){n&&i.push(n.componentIndex)}),r._seriesIndicesMap=Y(i)},Mg=function(r){},M6=function(r,i){r.option={},r.option[T6]=pne,r._componentsMap=Y({series:[]}),r._componentsCount=Y();var n=i.aria;J(n)&&n.enabled==null&&(n.enabled=!0),fne(i,r._theme.option),fe(i,m6,!1),r._mergeOption(i,null)}}(),t}(Ve);function gne(e,t){if(t){var r=t.seriesIndex,i=t.seriesId,n=t.seriesName;return r!=null&&e.componentIndex!==r||i!=null&&e.id!==i||n!=null&&e.name!==n}}function fne(e,t){var r=e.color&&!e.colorLayer;D(t,function(i,n){n==="colorLayer"&&r||Ee.hasClass(n)||(typeof i=="object"?e[n]=e[n]?fe(e[n],i,!1):re(i):e[n]==null&&(e[n]=i))})}function _6(e,t,r){if(O(t)){var i=Y();return D(t,function(o){if(o!=null){var a=Mt(o,null);a!=null&&i.set(o,!0)}}),Pe(r,function(o){return o&&i.get(o[e])})}else{var n=Mt(t,null);return Pe(r,function(o){return o&&n!=null&&o[e]===n})}}function R6(e,t){return t.hasOwnProperty("subType")?Pe(e,function(r){return r&&r.subType===t.subType}):e}function A6(e){var t=Y();return e&&D(Ge(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}ot(I6,Dg);var N0=I6;var vne=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],mne=function(){function e(t){D(vne,function(r){this[r]=$(t[r],t)},this)}return e}(),z0=mne;var $E={},yne=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var i=[];D($E,function(n,o){var a=n.create(t,r);i=i.concat(a||[])}),this._coordinateSystems=i},e.prototype.update=function(t,r){D(this._coordinateSystems,function(i){i.update&&i.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){$E[t]=r},e.get=function(t){return $E[t]},e}(),Ha=yne;var wne=/^(min|max)?(.+)$/,Cne=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,i){t&&(D(Ge(t.series),function(a){a&&a.data&&Zt(a.data)&&Kl(a.data)}),D(Ge(t.dataset),function(a){a&&a.source&&Zt(a.source)&&Kl(a.source)})),t=re(t);var n=this._optionBackup,o=bne(t,r,!n);this._newBaseOption=o.baseOption,n?(o.timelineOptions.length&&(n.timelineOptions=o.timelineOptions),o.mediaList.length&&(n.mediaList=o.mediaList),o.mediaDefault&&(n.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],re(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(r=re(i[n.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!n.length&&!o)return s;for(var l=0,c=n.length;l<c;l++)Sne(n[l].query,r,i)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!Dne(a,this._currentMediaIndices)&&(s=N(a,function(u){return re(u===-1?o.option:n[u].option)})),this._currentMediaIndices=a,s},e}();function bne(e,t,r){var i=[],n,o,a=e.baseOption,s=e.timeline,l=e.options,c=e.media,u=!!e.media,d=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((d||u)&&(e.options=e.media=null),o=e),u&&O(c)&&D(c,function(p){p&&p.option&&(p.query?i.push(p):n||(n=p))}),h(o),D(l,function(p){return h(p)}),D(i,function(p){return h(p.option)});function h(p){D(t,function(g){g(p,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:n,mediaList:i}}function Sne(e,t,r){var i={width:t,height:r,aspectratio:t/r},n=!0;return D(e,function(o,a){var s=a.match(wne);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();xne(i[c],o,l)||(n=!1)}}),n}function xne(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Dne(e,t){return e.join(",")===t.join(",")}var P6=Cne;var co=D,_g=J,k6=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function YE(e){var t=e&&e.itemStyle;if(t)for(var r=0,i=k6.length;r<i;r++){var n=k6[r],o=t.normal,a=t.emphasis;o&&o[n]&&(e[n]=e[n]||{},e[n].normal?fe(e[n].normal,o[n]):e[n].normal=o[n],o[n]=null),a&&a[n]&&(e[n]=e[n]||{},e[n].emphasis?fe(e[n].emphasis,a[n]):e[n].emphasis=a[n],a[n]=null)}}function jr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,n=e[t].emphasis;i&&(r?(e[t].normal=e[t].emphasis=null,Q(e[t],i)):e[t]=i),n&&(e.emphasis=e.emphasis||{},e.emphasis[t]=n,n.focus&&(e.emphasis.focus=n.focus),n.blurScope&&(e.emphasis.blurScope=n.blurScope))}}function Tg(e){jr(e,"itemStyle"),jr(e,"lineStyle"),jr(e,"areaStyle"),jr(e,"label"),jr(e,"labelLine"),jr(e,"upperLabel"),jr(e,"edgeLabel")}function or(e,t){var r=_g(e)&&e[t],i=_g(r)&&r.textStyle;if(i)for(var n=0,o=LD.length;n<o;n++){var a=LD[n];i.hasOwnProperty(a)&&(r[a]=i[a])}}function Mn(e){e&&(Tg(e),or(e,"label"),e.emphasis&&or(e.emphasis,"label"))}function Ene(e){if(_g(e)){YE(e),Tg(e),or(e,"label"),or(e,"upperLabel"),or(e,"edgeLabel"),e.emphasis&&(or(e.emphasis,"label"),or(e.emphasis,"upperLabel"),or(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(YE(t),Mn(t));var r=e.markLine;r&&(YE(r),Mn(r));var i=e.markArea;i&&Mn(i);var n=e.data;if(e.type==="graph"){n=n||e.nodes;var o=e.links||e.edges;if(o&&!Zt(o))for(var a=0;a<o.length;a++)Mn(o[a]);D(e.categories,function(c){Tg(c)})}if(n&&!Zt(n))for(var a=0;a<n.length;a++)Mn(n[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)Mn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)O(l[a])?(Mn(l[a][0]),Mn(l[a][1])):Mn(l[a]);e.type==="gauge"?(or(e,"axisLabel"),or(e,"title"),or(e,"detail")):e.type==="treemap"?(jr(e.breadcrumb,"itemStyle"),D(e.levels,function(c){Tg(c)})):e.type==="tree"&&Tg(e.leaves)}}function Ua(e){return O(e)?e:e?[e]:[]}function L6(e){return(O(e)?e[0]:e)||{}}function qE(e,t){co(Ua(e.series),function(i){_g(i)&&Ene(i)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),co(r,function(i){co(Ua(e[i]),function(n){n&&(or(n,"axisLabel"),or(n.axisPointer,"label"))})}),co(Ua(e.parallel),function(i){var n=i&&i.parallelAxisDefault;or(n,"axisLabel"),or(n&&n.axisPointer,"label")}),co(Ua(e.calendar),function(i){jr(i,"itemStyle"),or(i,"dayLabel"),or(i,"monthLabel"),or(i,"yearLabel")}),co(Ua(e.radar),function(i){or(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),co(Ua(e.geo),function(i){_g(i)&&(Mn(i),co(Ua(i.regions),function(n){Mn(n)}))}),co(Ua(e.timeline),function(i){Mn(i),jr(i,"label"),jr(i,"itemStyle"),jr(i,"controlStyle",!0);var n=i.data;O(n)&&D(n,function(o){J(o)&&(jr(o,"label"),jr(o,"itemStyle"))})}),co(Ua(e.toolbox),function(i){jr(i,"iconStyle"),co(i.feature,function(n){jr(n,"iconStyle")})}),or(L6(e.axisPointer),"label"),or(L6(e.tooltip).axisPointer,"label")}function Mne(e,t){for(var r=t.split(","),i=e,n=0;n<r.length&&(i=i&&i[r[n]],i!=null);n++);return i}function Tne(e,t,r,i){for(var n=t.split(","),o=e,a,s=0;s<n.length-1;s++)a=n[s],o[a]==null&&(o[a]={}),o=o[a];(i||o[n[s]]==null)&&(o[n[s]]=r)}function F6(e){e&&D(_ne,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var _ne=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Rne=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],KE=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Rg(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<KE.length;r++){var i=KE[r][1],n=KE[r][0];t[i]!=null&&(t[n]=t[i])}}function O6(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function N6(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function Ane(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function z6(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&z6(e[r].children,t)}function V0(e,t){qE(e,t),e.series=Ge(e.series),D(e.series,function(r){if(J(r)){var i=r.type;if(i==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(i==="pie"||i==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),O6(r.label);var n=r.data;if(n&&!Zt(n))for(var o=0;o<n.length;o++)O6(n[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(i==="gauge"){var a=Mne(r,"pointer.color");a!=null&&Tne(r,"itemStyle.color",a)}else if(i==="bar"){Rg(r),Rg(r.backgroundStyle),Rg(r.emphasis);var n=r.data;if(n&&!Zt(n))for(var o=0;o<n.length;o++)typeof n[o]=="object"&&(Rg(n[o]),Rg(n[o]&&n[o].emphasis))}else if(i==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),N6(r),z6(r.data,N6)}else i==="graph"||i==="sankey"?Ane(r):i==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&Q(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),F6(r)}}),e.dataRange&&(e.visualMap=e.dataRange),D(Rne,function(r){var i=e[r];i&&(O(i)||(i=[i]),D(i,function(n){F6(n)}))})}function ZE(e){var t=Y();e.eachSeries(function(r){var i=r.get("stack");if(i){var n=t.get(i)||t.set(i,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;n.length&&o.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(a)}}),t.each(Ine)}function Ine(e){D(e,function(t,r){var i=[],n=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(c,u,d){var h=a.get(t.stackedDimension,d);if(isNaN(h))return n;var p,g;s?g=a.getRawIndex(d):p=a.get(t.stackedByDimension,d);for(var f=NaN,v=r-1;v>=0;v--){var m=e[v];if(s||(g=m.data.rawIndexOf(m.stackedByDimension,p)),g>=0){var y=m.data.getByRawIndex(m.stackResultDimension,g);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=jO(h,y),f=y;break}}}return i[0]=h,i[1]=f,i})})}var B0=function(){function e(t){this.data=t.data||(t.sourceFormat===Ki?{}:[]),this.sourceFormat=t.sourceFormat||WE,this.seriesLayoutBy=t.seriesLayoutBy||Pi,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var i=0;i<r.length;i++){var n=r[i];n.type==null&&F0(this,i)===mr.Must&&(n.type="ordinal")}}return e}();function Ud(e){return e instanceof B0}function Ag(e,t,r){r=r||XE(e);var i=t.seriesLayoutBy,n=Pne(e,r,i,t.sourceHeader,t.dimensions),o=new B0({data:e,sourceFormat:r,seriesLayoutBy:i,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:re(t)});return o}function Wd(e){return new B0({data:e,sourceFormat:Zt(e)?Zi:br})}function G6(e){return new B0({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:re(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function XE(e){var t=WE;if(Zt(e))t=Zi;else if(O(e)){e.length===0&&(t=Qt);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n!=null){if(O(n)||Zt(n)){t=Qt;break}else if(J(n)){t=Ir;break}}}}else if(J(e)){for(var o in e)if(ne(e,o)&&Vt(e[o])){t=Ki;break}}return t}function Pne(e,t,r,i,n){var o,a;if(!e)return{dimensionsDefine:V6(n),startIndex:a,dimensionsDetectedCount:o};if(t===Qt){var s=e;i==="auto"||i==null?B6(function(c){c!=null&&c!=="-"&&(H(c)?a==null&&(a=1):a=0)},r,s,10):a=be(i)?i:i?1:0,!n&&a===1&&(n=[],B6(function(c,u){n[u]=c!=null?c+"":""},r,s,1/0)),o=n?n.length:r===Ga?s.length:s[0]?s[0].length:null}else if(t===Ir)n||(n=kne(e));else if(t===Ki)n||(n=[],D(e,function(c,u){n.push(u)}));else if(t===br){var l=eo(e[0]);o=O(l)&&l.length||1}return{startIndex:a,dimensionsDefine:V6(n),dimensionsDetectedCount:o}}function kne(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r)return me(r)}function V6(e){if(e){var t=Y();return N(e,function(r,i){r=J(r)?r:{name:r};var n={name:r.name,displayName:r.displayName,type:r.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var o=t.get(n.name);return o?n.name+="-"+o.count++:t.set(n.name,{count:1}),n})}}function B6(e,t,r,i){if(t===Ga)for(var n=0;n<r.length&&n<i;n++)e(r[n]?r[n][0]:null,n);else for(var o=r[0]||[],n=0;n<o.length&&n<i;n++)e(o[n],n)}function G0(e){var t=e.sourceFormat;return t===Ir||t===Ki}var zc,Vc,Bc,H6,U6,H0=function(){function e(t,r){var i=Ud(t)?t:Wd(t);this._source=i;var n=this._data=i.data;i.sourceFormat===Zi&&(this._offset=0,this._dimSize=r,this._data=n),U6(this,n,i)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;U6=function(a,s,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,h=l.dimensionsDefine,p=H6[rM(c,u)];if(F(a,p),c===Zi)a.getItem=r,a.count=n,a.fillStorage=i;else{var g=JE(c,u);a.getItem=$(g,null,s,d,h);var f=eM(c,u);a.count=$(f,null,s,d,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,u=c*a,d=0;d<c;d++)s[d]=l[u+d];return s},i=function(a,s,l,c){for(var u=this._data,d=this._dimSize,h=0;h<d;h++){for(var p=c[h],g=p[0]==null?1/0:p[0],f=p[1]==null?-1/0:p[1],v=s-a,m=l[h],y=0;y<v;y++){var w=u[y*d+h];m[a+y]=w,w<g&&(g=w),w>f&&(f=w)}p[0]=g,p[1]=f}},n=function(){return this._data?this._data.length/this._dimSize:0};H6=(t={},t[Qt+"_"+Pi]={pure:!0,appendData:o},t[Qt+"_"+Ga]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Ir]={pure:!0,appendData:o},t[Ki]={pure:!0,appendData:function(a){var s=this._data;D(a,function(l,c){for(var u=s[c]||(s[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},t[br]={appendData:o},t[Zi]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}();var W6=function(e,t,r,i){return e[i]},Lne=(zc={},zc[Qt+"_"+Pi]=function(e,t,r,i){return e[i+t]},zc[Qt+"_"+Ga]=function(e,t,r,i,n){i+=t;for(var o=n||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[i]:null}return o},zc[Ir]=W6,zc[Ki]=function(e,t,r,i,n){for(var o=n||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[i]:null}return o},zc[br]=W6,zc);function JE(e,t){var r=Lne[rM(e,t)];return r}var j6=function(e,t,r){return e.length},Fne=(Vc={},Vc[Qt+"_"+Pi]=function(e,t,r){return Math.max(0,e.length-t)},Vc[Qt+"_"+Ga]=function(e,t,r){var i=e[0];return i?Math.max(0,i.length-t):0},Vc[Ir]=j6,Vc[Ki]=function(e,t,r){var i=r[0].name,n=e[i];return n?n.length:0},Vc[br]=j6,Vc);function eM(e,t){var r=Fne[rM(e,t)];return r}var QE=function(e,t,r){return e[t]},One=(Bc={},Bc[Qt]=QE,Bc[Ir]=function(e,t,r){return e[r]},Bc[Ki]=QE,Bc[br]=function(e,t,r){var i=eo(e);return i instanceof Array?i[t]:i},Bc[Zi]=QE,Bc);function tM(e){var t=One[e];return t}function rM(e,t){return e===Qt?e+"_"+t:e}function Wa(e,t,r){if(e){var i=e.getRawDataItem(t);if(i!=null){var n=e.getStore(),o=n.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=n.getDimensionProperty(a);return tM(o)(i,a,s)}else{var l=i;return o===br&&(l=eo(i)),l}}}}var Nne=/\{@(.+?)\}/g,Gc=function(){function e(){}return e.prototype.getDataParams=function(t,r){var i=this.getData(r),n=this.getRawValue(t,r),o=i.getRawIndex(t),a=i.getName(t),s=i.getRawDataItem(t),l=i.getItemVisual(t,"style"),c=l&&l[i.getItemVisual(t,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,h=d==="series",p=i.userOutput&&i.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:n,color:c,borderColor:u,dimensionNames:p?p.fullDimensions:null,encode:p?p.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,i,n,o,a){r=r||"normal";var s=this.getData(i),l=this.getDataParams(t,i);if(a&&(l.value=a.interpolatedValue),n!=null&&O(l.value)&&(l.value=l.value[n]),!o){var c=s.getItemModel(t);o=c.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Z(o))return l.status=r,l.dimensionIndex=n,o(l);if(H(o)){var u=A0(o,l);return u.replace(Nne,function(d,h){var p=h.length,g=h;g.charAt(0)==="["&&g.charAt(p-1)==="]"&&(g=+g.slice(1,p-1));var f=Wa(s,t,g);if(a&&O(a.interpolatedValue)){var v=s.getDimensionIndex(g);v>=0&&(f=a.interpolatedValue[v])}return f!=null?f+"":""})}},e.prototype.getRawValue=function(t,r){return Wa(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,i){},e}();function iM(e){var t,r;return J(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Ws(e){return new zne(e)}var zne=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,i=t&&t.skip;if(this._dirty&&r){var n=this.context;n.data=n.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!i&&(o=this._plan(this.context));var a=u(this._modBy),s=this._modDataCount||0,l=u(t&&t.modBy),c=t&&t.modDataCount||0;(a!==l||s!==c)&&(o="reset");function u(y){return!(y>=1)&&(y=1),y}var d;(this._dirty||o==="reset")&&(this._dirty=!1,d=this._doReset(i)),this._modBy=l,this._modDataCount=c;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var p=this._dueIndex,g=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!i&&(d||p<g)){var f=this._progress;if(O(f))for(var v=0;v<f.length;v++)this._doProgress(f[v],p,g,l,c);else this._doProgress(f,p,g,l,c)}this._dueIndex=g;var m=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,i,n,o){$6.reset(r,i,n,o),this._callingProgress=t,this._callingProgress({start:r,end:i,count:i-r,next:$6.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,i;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(i=r.forceFirstProgress,r=r.progress),O(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),i},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}();var $6=function(){var e,t,r,i,n,o={reset:function(l,c,u,d){t=l,e=c,r=u,i=d,n=Math.ceil(i/r),o.next=r>1&&i>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%n*r+Math.ceil(t/n),c=t>=e?null:l<i?l:t;return t++,c}}();function Tn(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!be(e)&&e!=null&&e!=="-"&&(e=+Jr(e)),e==null||e===""?NaN:Number(e))}var Vne=Y({number:function(e){return parseFloat(e)},time:function(e){return+Jr(e)},trim:function(e){return H(e)?dr(e):e}});function U0(e){return Vne.get(e)}var Y6={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},Bne=function(){function e(t,r){if(!be(r)){var i="";qe(i)}this._opFn=Y6[t],this._rvalFloat=wn(r)}return e.prototype.evaluate=function(t){return be(t)?this._opFn(t,this._rvalFloat):this._opFn(wn(t),this._rvalFloat)},e}(),W0=function(){function e(t,r){var i=t==="desc";this._resultLT=i?1:-1,r==null&&(r=i?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var i=be(t)?t:wn(t),n=be(r)?r:wn(r),o=isNaN(i),a=isNaN(n);if(o&&(i=this._incomparable),a&&(n=this._incomparable),o&&a){var s=H(t),l=H(r);s&&(i=l?t:0),l&&(n=s?r:0)}return i<n?this._resultLT:i>n?-this._resultLT:0},e}();var Gne=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=wn(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var i=typeof t;i!==this._rvalTypeof&&(i==="number"||this._rvalTypeof==="number")&&(r=wn(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function q6(e,t){return e==="eq"||e==="ne"?new Gne(e==="eq",t):ne(Y6,e)?new Bne(e,t):null}var Hne=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Tn(t,r)},e}();function Une(e,t){var r=new Hne,i=e.data,n=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==Pi&&qe(a);var s=[],l={},c=e.dimensionsDefine;if(c)D(c,function(f,v){var m=f.name,y={index:v,name:m,displayName:f.displayName};if(s.push(y),m!=null){var w="";ne(l,m)&&qe(w),l[m]=y}});else for(var u=0;u<e.dimensionsDetectedCount;u++)s.push({index:u});var d=JE(n,Pi);t.__isBuiltIn&&(r.getRawDataItem=function(f){return d(i,o,s,f)},r.getRawData=$(Wne,null,e)),r.cloneRawData=$(jne,null,e);var h=eM(n,Pi);r.count=$(h,null,i,o,s);var p=tM(n);r.retrieveValue=function(f,v){var m=d(i,o,s,f);return g(m,v)};var g=r.retrieveValueFromItem=function(f,v){if(f!=null){var m=s[v];if(m)return p(f,v,m.name)}};return r.getDimensionInfo=$($ne,null,s,l),r.cloneAllDimensionInfo=$(Yne,null,s),r}function Wne(e){var t=e.sourceFormat;if(!nM(t)){var r="";qe(r)}return e.data}function jne(e){var t=e.sourceFormat,r=e.data;if(!nM(t)){var i="";qe(i)}if(t===Qt){for(var n=[],o=0,a=r.length;o<a;o++)n.push(r[o].slice());return n}else if(t===Ir){for(var n=[],o=0,a=r.length;o<a;o++)n.push(F({},r[o]));return n}}function $ne(e,t,r){if(r!=null){if(be(r)||!isNaN(r)&&!ne(t,r))return e[r];if(ne(t,r))return t[r]}}function Yne(e){return re(e)}var K6=Y();function Z6(e){e=re(e);var t=e.type,r="";t||qe(r);var i=t.split(":");i.length!==2&&qe(r);var n=!1;i[0]==="echarts"&&(t=i[1],n=!0),e.__isBuiltIn=n,K6.set(t,e)}function X6(e,t,r){var i=Ge(e),n=i.length,o="";n||qe(o);for(var a=0,s=n;a<s;a++){var l=i[a];t=qne(l,t,r,n===1?null:a),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function qne(e,t,r,i){var n="";t.length||qe(n),J(e)||qe(n);var o=e.type,a=K6.get(o);a||qe(n);var s=N(t,function(u){return Une(u,a)}),l=Ge(a.transform({upstream:s[0],upstreamList:s,config:re(e.config)}));if(0&&e.print)var c;return N(l,function(u,d){var h="";J(u)||qe(h),u.data||qe(h);var p=XE(u.data);nM(p)||qe(h);var g,f=t[0];if(f&&d===0&&!u.dimensions){var v=f.startIndex;v&&(u.data=f.data.slice(0,v).concat(u.data)),g={seriesLayoutBy:Pi,sourceHeader:v,dimensions:f.metaRawOption.dimensions}}else g={seriesLayoutBy:Pi,sourceHeader:0,dimensions:u.dimensions};return Ag(u.data,g,null)})}function nM(e){return e===Qt||e===Ir}var j0="undefined",Kne=typeof Uint32Array===j0?Array:Uint32Array,Zne=typeof Uint16Array===j0?Array:Uint16Array,aM=typeof Int32Array===j0?Array:Int32Array,Q6=typeof Float64Array===j0?Array:Float64Array,e4={float:Q6,int:aM,ordinal:Array,number:Array,time:Q6},oM;function Ig(e){return e>65535?Kne:Zne}function jd(){return[1/0,-1/0]}function Xne(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function J6(e,t,r,i,n){var o=e4[r||"float"];if(n){var a=e[t],s=a&&a.length;if(s!==i){for(var l=new o(i),c=0;c<s;c++)l[c]=a[c];e[t]=l}}else e[t]=new o(i)}var Qne=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Y()}return e.prototype.initData=function(t,r,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),o=this.defaultDimValueGetter=oM[n.sourceFormat];this._dimValueGetter=i||o,this._rawExtent=[];var a=G0(n);this._dimensions=N(r,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var i=this._calcDimNameToIdx,n=this._dimensions,o=i.get(t);if(o!=null){if(n[o].type===r)return o}else o=n.length;return n[o]={type:r},i.set(t,o),this._chunks[o]=new e4[r||"float"](this._rawCount),this._rawExtent[o]=jd(),o},e.prototype.collectOrdinalMeta=function(t,r){var i=this._chunks[t],n=this._dimensions[t],o=this._rawExtent,a=n.ordinalOffset||0,s=i.length;a===0&&(o[t]=jd());for(var l=o[t],c=a;c<s;c++){var u=i[c]=r.parseAndCollect(i[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}n.ordinalMeta=r,n.ordinalOffset=s,n.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],i=r.ordinalMeta;return i},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,i=this.count();r.appendData(t);var n=r.count();return r.persistent||(n+=i),i<n&&this._initDataFromProvider(i,n,!0),[i,n]},e.prototype.appendValues=function(t,r){for(var i=this._chunks,n=this._dimensions,o=n.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),c=0;c<o;c++){var u=n[c];J6(i,c,u.type,l,!0)}for(var d=[],h=s;h<l;h++)for(var p=h-s,g=0;g<o;g++){var u=n[g],f=oM.arrayRows.call(this,t[p]||d,u.property,p,g);i[g][h]=f;var v=a[g];f<v[0]&&(v[0]=f),f>v[1]&&(v[1]=f)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,i){for(var n=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,c=N(a,function(y){return y.property}),u=0;u<s;u++){var d=a[u];l[u]||(l[u]=jd()),J6(o,u,d.type,r,i)}if(n.fillStorage)n.fillStorage(t,r,o,l);else for(var h=[],p=t;p<r;p++){h=n.getItem(p,h);for(var g=0;g<s;g++){var f=o[g],v=this._dimValueGetter(h,c[g],p,g);f[p]=v;var m=l[g];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var i=[],n=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)n.push(o)}else n=t;for(var o=0,a=n.length;o<a;o++)i.push(this.get(n[o],r));return i},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var i=this._chunks[t];return i?i[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],i=0;if(r)for(var n=0,o=this.count();n<o;n++){var a=this.get(t,n);isNaN(a)||(i+=a)}return i},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var i=r.sort(function(o,a){return o-a}),n=this.count();return n===0?0:n%2===1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,i=r[t];if(i!=null&&i<this._count&&i===t)return t;for(var n=0,o=this._count-1;n<=o;){var a=(n+o)/2|0;if(r[a]<t)n=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,i){var n=this._chunks,o=n[t],a=[];if(!o)return a;i==null&&(i=1/0);for(var s=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var h=this.getRawIndex(u),p=r-o[h],g=Math.abs(p);g<=i&&((g<s||g===s&&p>=0&&l<0)&&(s=g,l=p,c=0),p===l&&(a[c++]=u))}return a.length=c,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var i=r.constructor,n=this._count;if(i===Array){t=new i(n);for(var o=0;o<n;o++)t[o]=r[o]}else t=new i(r.buffer,0,n)}else{var i=Ig(this._rawCount);t=new i(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var i=this.clone(),n=i.count(),o=Ig(i._rawCount),a=new o(n),s=[],l=t.length,c=0,u=t[0],d=i._chunks,h=0;h<n;h++){var p=void 0,g=i.getRawIndex(h);if(l===0)p=r(h);else if(l===1){var f=d[u][g];p=r(f,h)}else{for(var v=0;v<l;v++)s[v]=d[t[v]][g];s[v]=h,p=r.apply(null,s)}p&&(a[c++]=g)}return c<n&&(i._indices=a),i._count=c,i._extent=[],i._updateGetRawIdx(),i},e.prototype.selectRange=function(t){var r=this.clone(),i=r._count;if(!i)return this;var n=me(t),o=n.length;if(!o)return this;var a=r.count(),s=Ig(r._rawCount),l=new s(a),c=0,u=n[0],d=t[u][0],h=t[u][1],p=r._chunks,g=!1;if(!r._indices){var f=0;if(o===1){for(var v=p[n[0]],m=0;m<i;m++){var y=v[m];(y>=d&&y<=h||isNaN(y))&&(l[c++]=f),f++}g=!0}else if(o===2){for(var v=p[n[0]],w=p[n[1]],C=t[n[1]][0],S=t[n[1]][1],m=0;m<i;m++){var y=v[m],b=w[m];(y>=d&&y<=h||isNaN(y))&&(b>=C&&b<=S||isNaN(b))&&(l[c++]=f),f++}g=!0}}if(!g)if(o===1)for(var m=0;m<a;m++){var x=r.getRawIndex(m),y=p[n[0]][x];(y>=d&&y<=h||isNaN(y))&&(l[c++]=x)}else for(var m=0;m<a;m++){for(var E=!0,x=r.getRawIndex(m),M=0;M<o;M++){var T=n[M],y=p[T][x];(y<t[T][0]||y>t[T][1])&&(E=!1)}E&&(l[c++]=r.getRawIndex(m))}return c<a&&(r._indices=l),r._count=c,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var i=this.clone(t);return this._updateDims(i,t,r),i},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,i){for(var n=t._chunks,o=[],a=r.length,s=t.count(),l=[],c=t._rawExtent,u=0;u<r.length;u++)c[r[u]]=jd();for(var d=0;d<s;d++){for(var h=t.getRawIndex(d),p=0;p<a;p++)l[p]=n[r[p]][h];l[a]=d;var g=i&&i.apply(null,l);if(g!=null){typeof g!="object"&&(o[0]=g,g=o);for(var u=0;u<g.length;u++){var f=r[u],v=g[u],m=c[f],y=n[f];y&&(y[h]=v),v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}}},e.prototype.lttbDownSample=function(t,r){var i=this.clone([t],!0),n=i._chunks,o=n[t],a=this.count(),s=0,l=Math.floor(1/r),c=this.getRawIndex(0),u,d,h,p=new(Ig(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));p[s++]=c;for(var g=1;g<a-1;g+=l){for(var f=Math.min(g+l,a-1),v=Math.min(g+l*2,a),m=(v+f)/2,y=0,w=f;w<v;w++){var C=this.getRawIndex(w),S=o[C];isNaN(S)||(y+=S)}y/=v-f;var b=g,x=Math.min(g+l,a),E=g-1,M=o[c];u=-1,h=b;for(var T=-1,_=0,w=b;w<x;w++){var C=this.getRawIndex(w),S=o[C];if(isNaN(S)){_++,T<0&&(T=C);continue}d=Math.abs((E-m)*(S-M)-(E-w)*(y-M)),d>u&&(u=d,h=C)}_>0&&_<x-b&&(p[s++]=Math.min(T,h),h=Math.max(T,h)),p[s++]=h,c=h}return p[s++]=this.getRawIndex(a-1),i._count=s,i._indices=p,i.getRawIndex=this._getRawIdx,i},e.prototype.downSample=function(t,r,i,n){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),c=a[t],u=this.count(),d=o._rawExtent[t]=jd(),h=new(Ig(this._rawCount))(Math.ceil(u/l)),p=0,g=0;g<u;g+=l){l>u-g&&(l=u-g,s.length=l);for(var f=0;f<l;f++){var v=this.getRawIndex(g+f);s[f]=c[v]}var m=i(s),y=this.getRawIndex(Math.min(g+n(s,m)||0,u-1));c[y]=m,m<d[0]&&(d[0]=m),m>d[1]&&(d[1]=m),h[p++]=y}return o._count=p,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(this._count)for(var i=t.length,n=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(i){case 0:r(o);break;case 1:r(n[t[0]][s],o);break;case 2:r(n[t[0]][s],n[t[1]][s],o);break;default:for(var l=0,c=[];l<i;l++)c[l]=n[t[l]][s];c[l]=o,r.apply(null,c)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],i=jd();if(!r)return i;var n=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=i;for(var s=a[0],l=a[1],c=0;c<n;c++){var u=this.getRawIndex(c),d=r[u];d<s&&(s=d),d>l&&(l=d)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var i=[],n=this._chunks,o=0;o<n.length;o++)i.push(n[o][r]);return i},e.prototype.clone=function(t,r){var i=new e,n=this._chunks,o=t&&Er(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<n.length;a++)i._chunks[a]=o[a]?Xne(n[a]):n[a];else i._chunks=n;return this._copyCommonProps(i),r||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=re(this._extent),t._rawExtent=re(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var i=this._indices.length;r=new t(i);for(var n=0;n<i;n++)r[n]=this._indices[n]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,i,n,o){return Tn(r[o],this._dimensions[o])}oM={arrayRows:t,objectRows:function(r,i,n,o){return Tn(r[i],this._dimensions[o])},keyedColumns:t,original:function(r,i,n,o){var a=r&&(r.value==null?r:r.value);return Tn(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,i,n,o){return r[o]}}}(),e}(),Pg=Qne;var Y0=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),i=!!r.length,n,o;if($0(t)){var a=t,s=void 0,l=void 0,c=void 0;if(i){var u=r[0];u.prepareSource(),c=u.getSource(),s=c.data,l=c.sourceFormat,o=[u._getVersionSign()]}else s=a.get("data",!0),l=Zt(s)?Zi:br,o=[];var d=this._getSourceMetaRawOption()||{},h=c&&c.metaRawOption||{},p=de(d.seriesLayoutBy,h.seriesLayoutBy)||null,g=de(d.sourceHeader,h.sourceHeader),f=de(d.dimensions,h.dimensions),v=p!==h.seriesLayoutBy||!!g!=!!h.sourceHeader||f;n=v?[Ag(s,{seriesLayoutBy:p,sourceHeader:g,dimensions:f},l)]:[]}else{var m=t;if(i){var y=this._applyTransform(r);n=y.sourceList,o=y.upstreamSignList}else{var w=m.get("source",!0);n=[Ag(w,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(n,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,i=r.get("transform",!0),n=r.get("fromTransformResult",!0);if(n!=null){var o="";t.length!==1&&t4(o)}var a,s=[],l=[];return D(t,function(c){c.prepareSource();var u=c.getSource(n||0),d="";n!=null&&!u&&t4(d),s.push(u),l.push(c._getVersionSign())}),i?a=X6(i,s,{datasetIndex:r.componentIndex}):n!=null&&(a=[G6(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var i=t[r];if(i._isDirty()||this._upstreamSignList[r]!==i._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,i){var n=0,o=this._storeList,a=o[n];a||(a=o[n]={});var s=a[i];if(!s){var l=this._getUpstreamSourceManagers()[0];$0(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,i):(s=new Pg,s.initData(new H0(r,t.length),t)),a[i]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if($0(t)){var r=L0(t);return r?[r.getSourceManager()]:[]}else return N(C6(t),function(i){return i.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,i,n;if($0(t))r=t.get("seriesLayoutBy",!0),i=t.get("sourceHeader",!0),n=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),i=o.get("sourceHeader",!0),n=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:i,dimensions:n}},e}();function sM(e){var t=e.option.transform;t&&Kl(e.option.transform)}function $0(e){return e.mainType==="series"}function t4(e){throw new Error(e)}var r4="line-height:1";function i4(e,t){var r=e.color||"#6e7079",i=e.fontSize||12,n=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+gr(i+"")+"px;color:"+gr(r)+";font-weight:"+gr(n+""),valueStyle:"font-size:"+gr(a+"")+"px;color:"+gr(o)+";font-weight:"+gr(s+"")}:{nameStyle:{fontSize:i,fill:r,fontWeight:n},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Jne=[0,10,20,30],eoe=["",`
`,`

`,`


`];function wt(e,t){return t.type=e,t}function lM(e){return e.type==="section"}function n4(e){return lM(e)?toe:roe}function o4(e){if(lM(e)){var t=0,r=e.blocks.length,i=r>1||r>0&&!e.noHeader;return D(e.blocks,function(n){var o=o4(n);o>=t&&(t=o+ +(i&&(!o||lM(n)&&!n.noHeader)))}),t}return 0}function toe(e,t,r,i){var n=t.noHeader,o=ioe(o4(t)),a=[],s=t.blocks||[];St(!s||O(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(ne(c,l)){var u=new W0(c[l],null);s.sort(function(g,f){return u.evaluate(g.sortParam,f.sortParam)})}else l==="seriesDesc"&&s.reverse()}D(s,function(g,f){var v=t.valueFormatter,m=n4(g)(v?F(F({},e),{valueFormatter:v}):e,g,f>0?o.html:0,i);m!=null&&a.push(m)});var d=e.renderMode==="richText"?a.join(o.richText):cM(a.join(""),n?r:o.html);if(n)return d;var h=R0(t.header,"ordinal",e.useUTC),p=i4(i,e.renderMode).nameStyle;return e.renderMode==="richText"?a4(e,h,p)+o.richText+d:cM('<div style="'+p+";"+r4+';">'+gr(h)+"</div>"+d,r)}function roe(e,t,r,i){var n=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,c=e.useUTC,u=t.valueFormatter||e.valueFormatter||function(C){return C=O(C)?C:[C],N(C,function(S,b){return R0(S,O(p)?p[b]:p,c)})};if(!(o&&a)){var d=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",n),h=o?"":R0(l,"ordinal",c),p=t.valueType,g=a?[]:u(t.value,t.dataIndex),f=!s||!o,v=!s&&o,m=i4(i,n),y=m.nameStyle,w=m.valueStyle;return n==="richText"?(s?"":d)+(o?"":a4(e,h,y))+(a?"":aoe(e,g,f,v,w)):cM((s?"":d)+(o?"":noe(h,!s,y))+(a?"":ooe(g,f,v,w)),r)}}function uM(e,t,r,i,n,o){if(e){var a=n4(e),s={useUTC:n,renderMode:r,orderMode:i,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function ioe(e){return{html:Jne[e],richText:eoe[e]}}function cM(e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0";return'<div style="'+i+";"+r4+';">'+e+r+"</div>"}function noe(e,t,r){var i=t?"margin-left:2px":"";return'<span style="'+r+";"+i+'">'+gr(e)+"</span>"}function ooe(e,t,r,i){var n=r?"10px":"20px",o=t?"float:right;margin-left:"+n:"";return e=O(e)?e:[e],'<span style="'+o+";"+i+'">'+N(e,function(a){return gr(a)}).join("&nbsp;&nbsp;")+"</span>"}function a4(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function aoe(e,t,r,i,n){var o=[n],a=i?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(O(t)?t.join("  "):t,o)}function q0(e,t){var r=e.getData().getItemVisual(t,"style"),i=r[e.visualDrawType];return so(i)}function K0(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var Z0=function(){function e(){this.richTextStyles={},this._nextStyleNameId=Wy()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,i){var n=i==="richText"?this._generateStyleName():null,o=p6({color:r,type:t,renderMode:i,markerId:n});return H(o)?o:(this.richTextStyles[n]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var i={};O(r)?D(r,function(o){return F(i,o)}):F(i,r);var n=this._generateStyleName();return this.richTextStyles[n]=i,"{"+n+"|"+t+"}"},e}();function X0(e){var t=e.series,r=e.dataIndex,i=e.multipleSeries,n=t.getData(),o=n.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=O(s),c=q0(t,r),u,d,h,p;if(a>1||l&&!a){var g=soe(s,t,r,o,c);u=g.inlineValues,d=g.inlineValueTypes,h=g.blocks,p=g.inlineValues[0]}else if(a){var f=n.getDimensionInfo(o[0]);p=u=Wa(n,r,o[0]),d=f.type}else p=u=l?s[0]:s;var v=bd(t),m=v&&t.name||"",y=n.getName(r),w=i?m:y;return wt("section",{header:m,noHeader:i||!v,sortParam:p,blocks:[wt("nameValue",{markerType:"item",markerColor:c,name:w,noName:!dr(w),value:u,valueType:d,dataIndex:r})].concat(h||[])})}function soe(e,t,r,i,n){var o=t.getData(),a=Er(e,function(d,h,p){var g=o.getDimensionInfo(p);return d=d||g&&g.tooltip!==!1&&g.displayName!=null},!1),s=[],l=[],c=[];i.length?D(i,function(d){u(Wa(o,r,d),d)}):D(e,u);function u(d,h){var p=o.getDimensionInfo(h);!p||p.otherDims.tooltip===!1||(a?c.push(wt("nameValue",{markerType:"subItem",markerColor:n,name:p.displayName,value:d,valueType:p.type})):(s.push(d),l.push(p.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var js=he();function Q0(e,t){return e.getName(t)||e.getId(t)}var kg="__universalTransitionEnabled",J0=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,i,n){this.seriesIndex=this.componentIndex,this.dataTask=Ws({count:coe,reset:uoe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,n);var o=js(this).sourceManager=new Y0(this);o.prepareSource();var a=this.getInitialData(r,n);l4(a,this),this.dataTask.context.data=a,js(this).dataBeforeProcessed=a,s4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=Us(this),o=n?En(r):{},a=this.subType;Ee.hasClass(a)&&(a+="Series"),fe(r,i.getTheme().get(this.subType)),fe(r,this.getDefaultOption()),Yi(r,"label",["show"]),this.fillDataTextStyle(r.data),n&&Ii(r,o,n)},t.prototype.mergeOption=function(r,i){r=fe(this.option,r,!0),this.fillDataTextStyle(r.data);var n=Us(this);n&&Ii(this.option,r,n);var o=js(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,i);l4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,js(this).dataBeforeProcessed=a,s4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!Zt(r))for(var i=["show"],n=0;n<r.length;n++)r[n]&&r[n].label&&Yi(r[n],"label",i)},t.prototype.getInitialData=function(r,i){},t.prototype.appendData=function(r){var i=this.getRawData();i.appendData(r.data)},t.prototype.getData=function(r){var i=dM(this);if(i){var n=i.context.data;return r==null||!n.getLinkedData?n:n.getLinkedData(r)}else return js(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var i=dM(this);if(i){var n=i.context;n.outputData=r,i!==this.dataTask&&(n.data=r)}js(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Y(r)},t.prototype.getSourceManager=function(){return js(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return js(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,i,n){return X0({series:this,dataIndex:r,multipleSeries:i})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Re.node&&!(r&&r.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,i,n){var o=this.ecModel,a=Dg.prototype.getColorFromPalette.call(this,r,i,n);return a||(a=o.getColorFromPalette(r,i,n)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,i){this._innerSelect(this.getData(i),r)},t.prototype.unselect=function(r,i){var n=this.option.selectedMap;if(n){var o=this.option.selectedMode,a=this.getData(i);if(o==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],c=Q0(a,l);n[c]=!1,this._selectedDataIndicesMap[c]=-1}}},t.prototype.toggleSelect=function(r,i){for(var n=[],o=0;o<r.length;o++)n[0]=r[o],this.isSelected(r[o],i)?this.unselect(n,i):this.select(n,i)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,i=me(r),n=[],o=0;o<i.length;o++){var a=r[i[o]];a>=0&&n.push(a)}return n},t.prototype.isSelected=function(r,i){var n=this.option.selectedMap;if(!n)return!1;var o=this.getData(i);return(n==="all"||n[Q0(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[kg])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,i){var n,o,a=this.option,s=a.selectedMode,l=i.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){J(a.selectedMap)||(a.selectedMap={});for(var c=a.selectedMap,u=0;u<l;u++){var d=i[u],h=Q0(r,d);c[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(d)}}else if(s==="single"||s===!0){var p=i[l-1],h=Q0(r,p);a.selectedMap=(n={},n[h]=!0,n),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(p),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var i=[];r.hasItemOption&&r.each(function(n){var o=r.getRawDataItem(n);o&&o.selected&&i.push(n)}),i.length>0&&this._innerSelect(r,i)}},t.registerClass=function(r){return Ee.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Ee);ot(J0,Gc);ot(J0,Dg);Yy(J0,Ee);function s4(e){var t=e.name;bd(e)||(e.name=loe(e)||t)}function loe(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),i=[];return D(r,function(n){var o=t.getDimensionInfo(n);o.displayName&&i.push(o.displayName)}),i.join(" ")}function coe(e){return e.model.getRawData().count()}function uoe(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),doe}function doe(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function l4(e,t){D(Zl(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,se(hoe,t))})}function hoe(e,t){var r=dM(e);return r&&r.setOutputEnd((t||this).count()),t}function dM(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var i=r.currentTask;if(i){var n=i.agentStubMap;n&&(i=n.get(e.uid))}return i}}var Be=J0;var hM=function(){function e(){this.group=new ee,this.uid=Dn("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){},e.prototype.updateLayout=function(t,r,i,n){},e.prototype.updateVisual=function(t,r,i,n){},e.prototype.toggleBlurSeries=function(t,r,i){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();Sd(hM);Ls(hM);var He=hM;function Xi(){var e=he();return function(t){var r=e(t),i=t.pipelineContext,n=!!r.large,o=!!r.progressiveRender,a=r.large=!!(i&&i.large),s=r.progressiveRender=!!(i&&i.progressiveRender);return(n!==a||o!==s)&&"reset"}}var d4=he(),poe=Xi(),pM=function(){function e(){this.group=new ee,this.uid=Dn("viewChart"),this.renderTask=Ws({plan:goe,reset:foe}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.highlight=function(t,r,i,n){var o=t.getData(n&&n.dataType);o&&u4(o,n,"emphasis")},e.prototype.downplay=function(t,r,i,n){var o=t.getData(n&&n.dataType);o&&u4(o,n,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateLayout=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateVisual=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.eachRendered=function(t){ri(this.group,t)},e.markUpdateMethod=function(t,r){d4(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function c4(e,t,r){e&&Gs(e)&&(t==="emphasis"?Br:Gr)(e,r)}function u4(e,t,r){var i=Cn(e,t),n=t&&t.highlightKey!=null?dz(t.highlightKey):null;i!=null?D(Ge(i),function(o){c4(e.getItemGraphicEl(o),r,n)}):e.eachItemGraphicEl(function(o){c4(o,r,n)})}Sd(pM,["dispose"]);Ls(pM);function goe(e){return poe(e.model)}function foe(e){var t=e.model,r=e.ecModel,i=e.api,n=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=n&&d4(n).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,i,n),voe[l]}var voe={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Le=pM;var ew="\0__throttleOriginMethod",h4="\0__throttleRate",p4="\0__throttleType";function Lg(e,t,r){var i,n=0,o=0,a=null,s,l,c,u;t=t||0;function d(){o=new Date().getTime(),a=null,e.apply(l,c||[])}var h=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];i=new Date().getTime(),l=this,c=p;var f=u||t,v=u||r;u=null,s=i-(v?n:o)-f,clearTimeout(a),v?a=setTimeout(d,f):s>=0?d():a=setTimeout(d,-s),n=i};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(p){u=p},h}function _n(e,t,r,i){var n=e[t];if(n){var o=n[ew]||n,a=n[p4],s=n[h4];if(s!==r||a!==i){if(r==null||!i)return e[t]=o;n=e[t]=Lg(o,r,i==="debounce"),n[ew]=o,n[p4]=i,n[h4]=r}return n}}function ja(e,t){var r=e[t];r&&r[ew]&&(r.clear&&r.clear(),e[t]=r[ew])}var g4=he(),f4={itemStyle:Ti(DE,!0),lineStyle:Ti(xE,!0)},moe={lineStyle:"stroke",itemStyle:"fill"};function v4(e,t){var r=e.visualStyleMapper||f4[t];return r||(console.warn("Unknown style type '"+t+"'."),f4.itemStyle)}function m4(e,t){var r=e.visualDrawType||moe[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var y4={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=e.getModel(i),o=v4(e,i),a=o(n),s=n.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=m4(e,i),c=a[l],u=Z(c)?c:null,d=a.fill==="auto"||a.stroke==="auto";if(!a[l]||u||d){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Z(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Z(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&u)return r.setVisual("colorFromPalette",!1),{dataEach:function(p,g){var f=e.getDataParams(g),v=F({},a);v[l]=u(f),p.setItemVisual(g,"style",v)}}}},Fg=new Ve,w4={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=v4(e,i),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[i]){Fg.option=l[i];var c=n(Fg),u=a.ensureUniqueItemVisual(s,"style");F(u,c),Fg.option.decal&&(a.setItemVisual(s,"decal",Fg.option.decal),Fg.option.decal.dirty=!0),o in c&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},C4={performRawSeries:!0,overallReset:function(e){var t=Y();e.eachSeries(function(r){var i=r.getColorBy();if(!r.isColorBySeries()){var n=r.type+"-"+i,o=t.get(n);o||(o={},t.set(n,o)),g4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var i=r.getRawData(),n={},o=r.getData(),a=g4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=m4(r,s);o.each(function(c){var u=o.getRawIndex(c);n[u]=c}),i.each(function(c){var u=n[c],d=o.getItemVisual(u,"colorFromPalette");if(d){var h=o.ensureUniqueItemVisual(u,"style"),p=i.getName(c)||c+"",g=i.count();h[l]=r.getColorFromPalette(p,a,g)}})}})}};var rw=Math.PI;function gM(e,t){t=t||{},Q(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new ee,i=new Ce({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(i);var n=new De({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ce({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new pg({shape:{startAngle:-rw/2,endAngle:-rw/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:rw*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:rw*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=n.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,c=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),u=e.getHeight()/2;t.showSpinner&&a.setShape({cx:c,cy:u}),o.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var yoe=function(){function e(t,r,i,n){this._stageTaskMap=Y(),this.ecInstance=t,this.api=r,i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=i.concat(n)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(i){var n=i.overallTask;n&&n.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),n=i.context,o=!r&&i.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>i.blockIndex,a=o?i.step:null,s=n&&n.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var i=this._pipelineMap.get(t.uid),n=t.getData(),o=n.count(),a=i.progressiveEnabled&&r.incrementalPrepareRender&&o>=i.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=i.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,i=r._pipelineMap=Y();t.eachSeries(function(n){var o=n.getProgressive(),a=n.uid;i.set(a,{id:a,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:o&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(n,n.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),i=this.api;D(this._allHandlers,function(n){var o=t.get(n.uid)||t.set(n.uid,{}),a="";St(!(n.reset&&n.overallReset),a),n.reset&&this._createSeriesStageTask(n,o,r,i),n.overallReset&&this._createOverallStageTask(n,o,r,i)},this)},e.prototype.prepareView=function(t,r,i,n){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=i,a.api=n,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,i){this._performStageTasks(this._visualHandlers,t,r,i)},e.prototype._performStageTasks=function(t,r,i,n){n=n||{};var o=!1,a=this;D(t,function(l,c){if(!(n.visualType&&n.visualType!==l.visualType)){var u=a._stageTaskMap.get(l.uid),d=u.seriesTaskMap,h=u.overallTask;if(h){var p,g=h.agentStubMap;g.each(function(v){s(n,v)&&(v.dirty(),p=!0)}),p&&h.dirty(),a.updatePayload(h,i);var f=a.getPerformArgs(h,n.block);g.each(function(v){v.perform(f)}),h.perform(f)&&(o=!0)}else d&&d.each(function(v,m){s(n,v)&&v.dirty();var y=a.getPerformArgs(v,n.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(v.context.model),a.updatePayload(v,i),v.perform(y)&&(o=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(i){r=i.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,i,n){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=Y(),l=t.seriesType,c=t.getTargetSeries;t.createOnAllSeries?i.eachRawSeries(u):l?i.eachRawSeriesByType(l,u):c&&c(i,n).each(u);function u(d){var h=d.uid,p=s.set(h,a&&a.get(h)||Ws({plan:xoe,reset:Doe,count:Moe}));p.context={model:d,ecModel:i,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(d,p)}},e.prototype._createOverallStageTask=function(t,r,i,n){var o=this,a=r.overallTask=r.overallTask||Ws({reset:woe});a.context={ecModel:i,api:n,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=Y(),c=t.seriesType,u=t.getTargetSeries,d=!0,h=!1,p="";St(!t.createOnAllSeries,p),c?i.eachRawSeriesByType(c,g):u?u(i,n).each(g):(d=!1,D(i.getSeries(),g));function g(f){var v=f.uid,m=l.set(v,s&&s.get(v)||(h=!0,Ws({reset:Coe,onDirty:Soe})));m.context={model:f,overallProgress:d},m.agent=a,m.__block=d,o._pipe(f,m)}h&&a.dirty()},e.prototype._pipe=function(t,r){var i=t.uid,n=this._pipelineMap.get(i);!n.head&&(n.head=r),n.tail&&n.tail.pipe(r),n.tail=r,r.__idxInPipeline=n.count++,r.__pipeline=n},e.wrapStageHandler=function(t,r){return Z(t)&&(t={overallReset:t,seriesType:Toe(t)}),t.uid=Dn("stageHandler"),r&&(t.visualType=r),t},e}();function woe(e){e.overallReset(e.ecModel,e.api,e.payload)}function Coe(e){return e.overallProgress&&boe}function boe(){this.agent.dirty(),this.getDownstream().dirty()}function Soe(){this.agent&&this.agent.dirty()}function xoe(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Doe(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ge(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?N(t,function(r,i){return b4(i)}):Eoe}var Eoe=b4(0);function b4(e){return function(t,r){var i=r.data,n=r.resetDefines[e];if(n&&n.dataEach)for(var o=t.start;o<t.end;o++)n.dataEach(i,o);else n&&n.progress&&n.progress(t,i)}}function Moe(e){return e.data.count()}function Toe(e){iw=null;try{e(Og,S4)}catch{}return iw}var Og={},S4={},iw;x4(Og,N0);x4(S4,z0);Og.eachSeriesByType=Og.eachRawSeriesByType=function(e){iw=e};Og.eachComponent=function(e){e.mainType==="series"&&e.subType&&(iw=e.subType)};function x4(e,t){for(var r in t.prototype)e[r]=pt}var fM=yoe;var D4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],E4={color:D4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],D4]};var ii="#B9B8CE",M4="#100C2A",nw=function(){return{axisLine:{lineStyle:{color:ii}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},T4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],_4={darkMode:!0,color:T4,backgroundColor:M4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ii}},textStyle:{color:ii},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ii}},dataZoom:{borderColor:"#71708A",textStyle:{color:ii},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ii}},timeline:{lineStyle:{color:ii},label:{color:ii},controlStyle:{color:ii,borderColor:ii}},calendar:{itemStyle:{color:M4},dayLabel:{color:ii},monthLabel:{color:ii},yearLabel:{color:ii}},timeAxis:nw(),logAxis:nw(),valueAxis:nw(),categoryAxis:nw(),line:{symbol:"circle"},graph:{color:T4},gauge:{title:{color:ii},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ii},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};_4.categoryAxis.splitLine.show=!1;var R4=_4;var A4=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},i={},n={};if(H(t)){var o=Mi(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};D(t,function(l,c){for(var u=!1,d=0;d<a.length;d++){var h=a[d],p=c.lastIndexOf(h);if(p>0&&p===c.length-h.length){var g=c.slice(0,p);g!=="data"&&(r.mainType=g,r[h.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(c)&&(i[c]=l,u=!0),u||(n[c]=l)})}return{cptQuery:r,dataQuery:i,otherQuery:n}},e.prototype.filter=function(t,r){var i=this.eventInfo;if(!i)return!0;var n=i.targetEl,o=i.packedEvent,a=i.model,s=i.view;if(!a||!s)return!0;var l=r.cptQuery,c=r.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(c,o,"name")&&u(c,o,"dataIndex")&&u(c,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,n,o));function u(d,h,p,g){return d[p]==null||h[g||p]===d[p]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}();var vM=["symbol","symbolSize","symbolRotate","symbolOffset"],I4=vM.concat(["symbolKeepAspect"]),P4={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var i={},n={},o=!1,a=0;a<vM.length;a++){var s=vM[a],l=e.get(s);Z(l)?(o=!0,n[s]=l):i[s]=l}if(i.symbol=i.symbol||e.defaultSymbol,r.setVisual(F({legendIcon:e.legendIcon||i.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},i)),t.isSeriesFiltered(e))return;var c=me(n);function u(d,h){for(var p=e.getRawValue(h),g=e.getDataParams(h),f=0;f<c.length;f++){var v=c[f];d.setItemVisual(h,v,n[v](p,g))}}return{dataEach:o?u:null}}},k4={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function i(n,o){for(var a=n.getItemModel(o),s=0;s<I4.length;s++){var l=I4[s],c=a.getShallow(l,!0);c!=null&&n.setItemVisual(o,l,c)}}return{dataEach:r.hasItemOption?i:null}}};function Ng(e,t,r){switch(r){case"color":var i=e.getItemVisual(t,"style");return i[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r);default:}}function Zo(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t);default:}}function mM(e,t,r,i){switch(r){case"color":var n=e.ensureUniqueItemVisual(t,"style");n[e.getVisual("drawType")]=i,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,i);break;default:}}function ow(e,t){function r(i,n){var o=[];return i.eachComponent({mainType:"series",subType:e,query:n},function(a){o.push(a.seriesIndex)}),o}D([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(i){t(i[0],function(n,o,a){n=F({},n),a.dispatchAction(F(n,{type:i[1],seriesIndex:r(o,n)}))})})}function $d(e,t,r,i,n){var o=e+t;r.isSilent(o)||i.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,c=n.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===s){var d=a.getData(),h=Cn(d,n.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:O(h)?d.getName(h[0]):d.getName(h),selected:H(l)?l:F({},l)})}})}function L4(e,t,r){e.on("selectchanged",function(i){var n=r.getModel();i.isFromClick?($d("map","selectchanged",t,n,i),$d("pie","selectchanged",t,n,i)):i.fromAction==="select"?($d("map","selected",t,n,i),$d("pie","selected",t,n,i)):i.fromAction==="unselect"&&($d("map","unselected",t,n,i),$d("pie","unselected",t,n,i))})}function uo(e,t,r){for(var i;e&&!(t(e)&&(i=e,r));)e=e.__hostTarget||e.parent;return i}var _oe=Math.round(Math.random()*9),Roe=typeof Object.defineProperty=="function",Aoe=function(){function e(){this._id="__ec_inner_"+_oe++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var i=this._guard(t);return Roe?Object.defineProperty(i,this._id,{value:r,enumerable:!1,configurable:!0}):i[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}(),F4=Aoe;var Ioe=ce.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,o=t.height/2;e.moveTo(r,i-o),e.lineTo(r+n,i+o),e.lineTo(r-n,i+o),e.closePath()}}),Poe=ce.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,o=t.height/2;e.moveTo(r,i-o),e.lineTo(r+n,i),e.lineTo(r,i+o),e.lineTo(r-n,i),e.closePath()}}),koe=ce.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,i=t.y,n=t.width/5*3,o=Math.max(n,t.height),a=n/2,s=a*a/(o-a),l=i-o+a+s,c=Math.asin(s/a),u=Math.cos(c)*a,d=Math.sin(c),h=Math.cos(c),p=a*.6,g=a*.7;e.moveTo(r-u,l+s),e.arc(r,l,a,Math.PI-c,Math.PI*2+c),e.bezierCurveTo(r+u-d*p,l+s+h*p,r,i-g,r,i),e.bezierCurveTo(r,i-g,r-u+d*p,l+s+h*p,r-u,l+s),e.closePath()}}),Loe=ce.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,i=t.width,n=t.x,o=t.y,a=i/3*2;e.moveTo(n,o),e.lineTo(n+a,o+r),e.lineTo(n,o+r/4*3),e.lineTo(n-a,o+r),e.lineTo(n,o),e.closePath()}}),Foe={line:_t,rect:Ce,roundRect:Ce,square:Ce,circle:ti,diamond:Poe,pin:koe,arrow:Loe,triangle:Ioe},Ooe={line:function(e,t,r,i,n){n.x1=e,n.y1=t+i/2,n.x2=e+r,n.y2=t+i/2},rect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i},roundRect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i,n.r=Math.min(r,i)/4},square:function(e,t,r,i,n){var o=Math.min(r,i);n.x=e,n.y=t,n.width=o,n.height=o},circle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.r=Math.min(r,i)/2},diamond:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i},pin:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},arrow:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},triangle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i}},zg={};D(Foe,function(e,t){zg[t]=new e});var Noe=ce.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var i=pc(e,t,r),n=this.shape;return n&&n.symbolType==="pin"&&t.position==="inside"&&(i.y=r.y+r.height*.4),i},buildPath:function(e,t,r){var i=t.symbolType;if(i!=="none"){var n=zg[i];n||(i="rect",n=zg[i]),Ooe[i](t.x,t.y,t.width,t.height,n.shape),n.buildPath(e,n.shape,r)}}});function zoe(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function et(e,t,r,i,n,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=yE(e.slice(8),new le(t,r,i,n),a?"center":"cover"):e.indexOf("path://")===0?l=Ld(e.slice(7),{},new le(t,r,i,n),a?"center":"cover"):l=new Noe({shape:{symbolType:e,x:t,y:r,width:i,height:n}}),l.__isEmptyBrush=s,l.setColor=zoe,o&&l.setColor(o),l}function ho(e){return O(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function Qi(e,t){if(e!=null)return O(e)||(e=[e,e]),[j(e[0],t[0])||0,j(de(e[1],e[0]),t[1])||0]}function Hc(e){return isFinite(e)}function Voe(e,t,r){var i=t.x==null?0:t.x,n=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(i=i*r.width+r.x,n=n*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),i=Hc(i)?i:0,n=Hc(n)?n:1,o=Hc(o)?o:0,a=Hc(a)?a:0;var s=e.createLinearGradient(i,o,n,a);return s}function Boe(e,t,r){var i=r.width,n=r.height,o=Math.min(i,n),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*i+r.x,s=s*n+r.y,l=l*o),a=Hc(a)?a:.5,s=Hc(s)?s:.5,l=l>=0&&Hc(l)?l:.5;var c=e.createRadialGradient(a,s,0,a,s,l);return c}function Vg(e,t,r){for(var i=t.type==="radial"?Boe(e,t,r):Voe(e,t,r),n=t.colorStops,o=0;o<n.length;o++)i.addColorStop(n[o].offset,n[o].color);return i}function N4(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function aw(e){return parseInt(e,10)}function $s(e,t,r){var i=["width","height"][t],n=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[i]!=null&&r[i]!=="auto")return parseFloat(r[i]);var s=document.defaultView.getComputedStyle(e);return(e[n]||aw(s[i])||aw(e.style[i]))-(aw(s[o])||0)-(aw(s[a])||0)|0}function Goe(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:be(e)?[e]:O(e)?e:null}function Bg(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&Goe(t.lineDash,t.lineWidth),i=t.lineDashOffset;if(r){var n=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;n&&n!==1&&(r=N(r,function(o){return o/n}),i/=n)}return[r,i]}var Hoe=new vr(!0);function sw(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function z4(e){return typeof e=="string"&&e!=="none"}function lw(e){var t=e.fill;return t!=null&&t!=="none"}function V4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function B4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function cw(e,t,r){var i=eg(t.image,t.__image,r);if(xd(i)){var n=e.createPattern(i,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*ad),o.scaleSelf(t.scaleX||1,t.scaleY||1),n.setTransform(o)}return n}}function Uoe(e,t,r,i){var n,o=sw(r),a=lw(r),s=r.strokePercent,l=s<1,c=!t.path;(!t.silent||l)&&c&&t.createPathProxy();var u=t.path||Hoe,d=t.__dirty;if(!i){var h=r.fill,p=r.stroke,g=a&&!!h.colorStops,f=o&&!!p.colorStops,v=a&&!!h.image,m=o&&!!p.image,y=void 0,w=void 0,C=void 0,S=void 0,b=void 0;(g||f)&&(b=t.getBoundingRect()),g&&(y=d?Vg(e,h,b):t.__canvasFillGradient,t.__canvasFillGradient=y),f&&(w=d?Vg(e,p,b):t.__canvasStrokeGradient,t.__canvasStrokeGradient=w),v&&(C=d||!t.__canvasFillPattern?cw(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=C),m&&(S=d||!t.__canvasStrokePattern?cw(e,p,t):t.__canvasStrokePattern,t.__canvasStrokePattern=C),g?e.fillStyle=y:v&&(C?e.fillStyle=C:a=!1),f?e.strokeStyle=w:m&&(S?e.strokeStyle=S:o=!1)}var x=t.getGlobalScale();u.setScale(x[0],x[1],t.segmentIgnoreThreshold);var E,M;e.setLineDash&&r.lineDash&&(n=Bg(t),E=n[0],M=n[1]);var T=!0;(c||d&Ms)&&(u.setDPR(e.dpr),l?u.setContext(null):(u.setContext(e),T=!1),u.reset(),t.buildPath(u,t.shape,i),u.toStatic(),t.pathUpdated()),T&&u.rebuildPath(e,l?s:1),E&&(e.setLineDash(E),e.lineDashOffset=M),i||(r.strokeFirst?(o&&B4(e,r),a&&V4(e,r)):(a&&V4(e,r),o&&B4(e,r))),E&&e.setLineDash([])}function Woe(e,t,r){var i=t.__image=eg(r.image,t.__image,t,t.onload);if(!(!i||!xd(i))){var n=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=i.width/i.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=i.width,s=i.height),r.sWidth&&r.sHeight){var c=r.sx||0,u=r.sy||0;e.drawImage(i,c,u,r.sWidth,r.sHeight,n,o,a,s)}else if(r.sx&&r.sy){var c=r.sx,u=r.sy,d=a-c,h=s-u;e.drawImage(i,c,u,d,h,n,o,a,s)}else e.drawImage(i,n,o,a,s)}}function joe(e,t,r){var i,n=r.text;if(n!=null&&(n+=""),n){e.font=r.font||Hi,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(i=Bg(t),o=i[0],a=i[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(sw(r)&&e.strokeText(n,r.x,r.y),lw(r)&&e.fillText(n,r.x,r.y)):(lw(r)&&e.fillText(n,r.x,r.y),sw(r)&&e.strokeText(n,r.x,r.y)),o&&e.setLineDash([])}}var G4=["shadowBlur","shadowOffsetX","shadowOffsetY"],H4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function q4(e,t,r,i,n){var o=!1;if(!i&&(r=r||{},t===r))return!1;if(i||t.opacity!==r.opacity){ki(e,n),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?Go.opacity:a}(i||t.blend!==r.blend)&&(o||(ki(e,n),o=!0),e.globalCompositeOperation=t.blend||Go.blend);for(var s=0;s<G4.length;s++){var l=G4[s];(i||t[l]!==r[l])&&(o||(ki(e,n),o=!0),e[l]=e.dpr*(t[l]||0))}return(i||t.shadowColor!==r.shadowColor)&&(o||(ki(e,n),o=!0),e.shadowColor=t.shadowColor||Go.shadowColor),o}function U4(e,t,r,i,n){var o=Gg(t,n.inHover),a=i?null:r&&Gg(r,n.inHover)||{};if(o===a)return!1;var s=q4(e,o,a,i,n);if((i||o.fill!==a.fill)&&(s||(ki(e,n),s=!0),z4(o.fill)&&(e.fillStyle=o.fill)),(i||o.stroke!==a.stroke)&&(s||(ki(e,n),s=!0),z4(o.stroke)&&(e.strokeStyle=o.stroke)),(i||o.opacity!==a.opacity)&&(s||(ki(e,n),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,c=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==c&&(s||(ki(e,n),s=!0),e.lineWidth=c)}for(var u=0;u<H4.length;u++){var d=H4[u],h=d[0];(i||o[h]!==a[h])&&(s||(ki(e,n),s=!0),e[h]=o[h]||d[1])}return s}function $oe(e,t,r,i,n){return q4(e,Gg(t,n.inHover),r&&Gg(r,n.inHover),i,n)}function K4(e,t){var r=t.transform,i=e.dpr||1;r?e.setTransform(i*r[0],i*r[1],i*r[2],i*r[3],i*r[4],i*r[5]):e.setTransform(i,0,0,i,0,0)}function Yoe(e,t,r){for(var i=!1,n=0;n<e.length;n++){var o=e[n];i=i||o.isZeroArea(),K4(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=i}function qoe(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var W4=1,j4=2,$4=3,Y4=4;function Koe(e){var t=lw(e),r=sw(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function ki(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function Gg(e,t){return t&&e.__hoverStyle||e.style}function uw(e,t){Ys(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ys(e,t,r,i){var n=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~sr,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||N4(o,a))&&(a&&a.length&&(ki(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(ki(e,r),e.save(),Yoe(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var c=r.prevEl;c||(l=s=!0);var u=t instanceof ce&&t.autoBatch&&Koe(t.style);s||qoe(n,c.transform)?(ki(e,r),K4(e,t)):u||ki(e,r);var d=Gg(t,r.inHover);t instanceof ce?(r.lastDrawType!==W4&&(l=!0,r.lastDrawType=W4),U4(e,t,c,l,r),(!u||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Uoe(e,t,d,u),u&&(r.batchFill=d.fill||"",r.batchStroke=d.stroke||"")):t instanceof Aa?(r.lastDrawType!==$4&&(l=!0,r.lastDrawType=$4),U4(e,t,c,l,r),joe(e,t,d)):t instanceof vt?(r.lastDrawType!==j4&&(l=!0,r.lastDrawType=j4),$oe(e,t,c,l,r),Woe(e,t,d)):t.getTemporalDisplayables&&(r.lastDrawType!==Y4&&(l=!0,r.lastDrawType=Y4),Zoe(e,t,r)),u&&i&&ki(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function Zoe(e,t,r){var i=t.getDisplayables(),n=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=i.length;a<s;a++){var l=i[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ys(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var c=0,u=n.length;c<u;c++){var l=n[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ys(e,l,o,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var yM=new F4,Z4=new Ta(100),X4=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function po(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),i=t.getZr(),n=i.painter.type==="svg";e.dirty&&yM.delete(e);var o=yM.get(e);if(o)return o;var a=Q(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=n?1:1/r,yM.set(e,s),e.dirty=!1,s;function l(c){for(var u=[r],d=!0,h=0;h<X4.length;++h){var p=a[X4[h]];if(p!=null&&!O(p)&&!H(p)&&!be(p)&&typeof p!="boolean"){d=!1;break}u.push(p)}var g;if(d){g=u.join(",")+(n?"-svg":"");var f=Z4.get(g);f&&(n?c.svgElement=f:c.image=f)}var v=J4(a.dashArrayX),m=Xoe(a.dashArrayY),y=Q4(a.symbol),w=Qoe(v),C=eV(m),S=!n&&Vr.createCanvas(),b=n&&{tag:"g",attrs:{},key:"dcl",children:[]},x=M(),E;S&&(S.width=x.width*r,S.height=x.height*r,E=S.getContext("2d")),T(),d&&Z4.put(g,S||b),c.image=S,c.svgElement=b,c.svgWidth=x.width,c.svgHeight=x.height;function M(){for(var _=1,R=0,A=w.length;R<A;++R)_=kD(_,w[R]);for(var P=1,R=0,A=y.length;R<A;++R)P=kD(P,y[R].length);_*=P;var k=C*w.length*y.length;if(0)var L;return{width:Math.max(1,Math.min(_,a.maxTileWidth)),height:Math.max(1,Math.min(k,a.maxTileHeight))}}function T(){E&&(E.clearRect(0,0,S.width,S.height),a.backgroundColor&&(E.fillStyle=a.backgroundColor,E.fillRect(0,0,S.width,S.height)));for(var _=0,R=0;R<m.length;++R)_+=m[R];if(_<=0)return;for(var A=-C,P=0,k=0,L=0;A<x.height;){if(P%2===0){for(var V=k/2%y.length,z=0,B=0,K=0;z<x.width*2;){for(var X=0,R=0;R<v[L].length;++R)X+=v[L][R];if(X<=0)break;if(B%2===0){var oe=(1-a.symbolSize)*.5,ye=z+v[L][B]*oe,we=A+m[P]*oe,Oe=v[L][B]*a.symbolSize,$e=m[P]*a.symbolSize,Ne=K/2%y[V].length;xe(ye,we,Oe,$e,y[V][Ne])}z+=v[L][B],++K,++B,B===v[L].length&&(B=0)}++L,L===v.length&&(L=0)}A+=m[P],++k,++P,P===m.length&&(P=0)}function xe(ze,Ae,ve,Ie,At){var Ze=n?1:r,Wt=et(At,ze*Ze,Ae*Ze,ve*Ze,Ie*Ze,a.color,a.symbolKeepAspect);if(n){var Ot=i.painter.renderOneToVNode(Wt);Ot&&b.children.push(Ot)}else uw(E,Wt)}}}}function Q4(e){if(!e||e.length===0)return[["rect"]];if(H(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!H(e[r])){t=!1;break}if(t)return Q4([e]);for(var i=[],r=0;r<e.length;++r)H(e[r])?i.push([e[r]]):i.push(e[r]);return i}function J4(e){if(!e||e.length===0)return[[0,0]];if(be(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,i=0;i<e.length;++i)if(!be(e[i])){r=!1;break}if(r)return J4([e]);for(var n=[],i=0;i<e.length;++i)if(be(e[i])){var t=Math.ceil(e[i]);n.push([t,t])}else{var t=N(e[i],function(s){return Math.ceil(s)});t.length%2===1?n.push(t.concat(t)):n.push(t)}return n}function Xoe(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(be(e)){var t=Math.ceil(e);return[t,t]}var r=N(e,function(i){return Math.ceil(i)});return e.length%2?r.concat(r):r}function Qoe(e){return N(e,function(t){return eV(t)})}function eV(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function wM(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var i=r.getData();i.hasItemVisual()&&i.each(function(a){var s=i.getItemVisual(a,"decal");if(s){var l=i.ensureUniqueItemVisual(a,"style");l.decal=po(s,t)}});var n=i.getVisual("decal");if(n){var o=i.getVisual("style");o.decal=po(n,t)}}})}var Joe=new ir,Rn=Joe;var tV={};function rV(e,t){tV[e]=t}function iV(e){return tV[e]}var eae=1,tae=800,rae=900,iae=1e3,nae=2e3,oae=5e3,pV=1e3,aae=1100,AM=2e3,gV=3e3,sae=4e3,fw=4500,lae=4600,cae=5e3,uae=6e3,fV=7e3,vV={PROCESSOR:{FILTER:iae,SERIES_FILTER:tae,STATISTIC:oae},VISUAL:{LAYOUT:pV,PROGRESSIVE_LAYOUT:aae,GLOBAL:AM,CHART:gV,POST_CHART_LAYOUT:lae,COMPONENT:sae,BRUSH:cae,CHART_ITEM:fw,ARIA:uae,DECAL:fV}},$r="__flagInMainProcess",Li="__pendingUpdate",CM="__needsUpdateStatus",nV=/^[a-zA-Z0-9_]+$/,bM="__connectUpdateStatus",oV=0,dae=1,hae=2;function mV(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return wV(this,e,t)}}function yV(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return wV(this,e,t)}}function wV(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),ir.prototype[t].apply(e,r)}var CV=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ir),bV=CV.prototype;bV.on=yV("on");bV.off=yV("off");var Yd,SM,dw,qs,xM,DM,EM,Hg,Ug,aV,sV,MM,lV,hw,cV,SV,An,uV,xV=function(e){I(t,e);function t(r,i,n){var o=e.call(this,new A4)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],n=n||{},H(i)&&(i=DV[i]),o._dom=r;var a="canvas",s="auto",l=!1;if(0)var c;n.ssr&&GO(function(p){var g=ae(p),f=g.dataIndex;if(f!=null){var v=Y();return v.set("series_index",g.seriesIndex),v.set("data_index",f),g.ssrType&&v.set("ssr_type",g.ssrType),v}});var u=o._zr=RD(r,{renderer:n.renderer||a,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:de(n.useDirtyRect,l),useCoarsePointer:de(n.useCoarsePointer,s),pointerSize:n.pointerSize});o._ssr=n.ssr,o._throttledZrFlush=Lg($(u.flush,u),17),i=re(i),i&&V0(i,!0),o._theme=i,o._locale=n6(n.locale||x0),o._coordSysMgr=new Ha;var d=o._api=cV(o);function h(p,g){return p.__prio-g.__prio}return tc(gw,h),tc(TM,h),o._scheduler=new fM(o,d,TM,gw),o._messageCenter=new CV,o._initEvents(),o.resize=$(o.resize,o),u.animation.on("frame",o._onframe,o),aV(u,o),sV(u,o),Kl(o),o}return t.prototype._onframe=function(){if(!this._disposed){uV(this);var r=this._scheduler;if(this[Li]){var i=this[Li].silent;this[$r]=!0;try{Yd(this),qs.update.call(this,null,this[Li].updateParams)}catch(l){throw this[$r]=!1,this[Li]=null,l}this._zr.flush(),this[$r]=!1,this[Li]=null,Hg.call(this,i),Ug.call(this,i)}else if(r.unfinished){var n=eae,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),DM(this,o),r.performVisualTasks(o),hw(this,this._model,a,"remain",{}),n-=+new Date-s}while(n>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,i,n){if(!this[$r]){if(this._disposed){this.id;return}var o,a,s;if(J(i)&&(n=i.lazyUpdate,o=i.silent,a=i.replaceMerge,s=i.transition,i=i.notMerge),this[$r]=!0,!this._model||i){var l=new P6(this._api),c=this._theme,u=this._model=new N0;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(r,{replaceMerge:a},_M);var d={seriesTransition:s,optionChanged:!0};if(n)this[Li]={silent:o,updateParams:d},this[$r]=!1,this.getZr().wakeUp();else{try{Yd(this),qs.update.call(this,null,d)}catch(h){throw this[Li]=null,this[$r]=!1,h}this._ssr||this._zr.flush(),this[Li]=null,this[$r]=!1,Hg.call(this,o),Ug.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Re.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var i=this._zr.painter;return i.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(Re.svgSupported){var r=this._zr,i=r.storage.getDisplayList();return D(i,function(n){n.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var i=r.excludeComponents,n=this._model,o=[],a=this;D(i,function(l){n.eachComponent({mainType:l},function(c){var u=a._componentsMap[c.__viewId];u.group.ignore||(o.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return D(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var i=r.type==="svg",n=this.group,o=Math.min,a=Math.max,s=1/0;if(dV[n]){var l=s,c=s,u=-s,d=-s,h=[],p=r&&r.pixelRatio||this.getDevicePixelRatio();D(jg,function(w,C){if(w.group===n){var S=i?w.getZr().painter.getSvgDom().innerHTML:w.renderToCanvas(re(r)),b=w.getDom().getBoundingClientRect();l=o(b.left,l),c=o(b.top,c),u=a(b.right,u),d=a(b.bottom,d),h.push({dom:S,left:b.left,top:b.top})}}),l*=p,c*=p,u*=p,d*=p;var g=u-l,f=d-c,v=Vr.createCanvas(),m=RD(v,{renderer:i?"svg":"canvas"});if(m.resize({width:g,height:f}),i){var y="";return D(h,function(w){var C=w.left-l,S=w.top-c;y+='<g transform="translate('+C+","+S+')">'+w.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Ce({shape:{x:0,y:0,width:g,height:f},style:{fill:r.connectedBackgroundColor}})),D(h,function(w){var C=new vt({style:{x:w.left*p-l,y:w.top*p-c,image:w.dom}});m.add(C)}),m.refreshImmediately(),v.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,i){return xM(this,"convertToPixel",r,i)},t.prototype.convertFromPixel=function(r,i){return xM(this,"convertFromPixel",r,i)},t.prototype.containPixel=function(r,i){if(this._disposed){this.id;return}var n=this._model,o,a=Ps(n,r);return D(a,function(s,l){l.indexOf("Models")>=0&&D(s,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)o=o||!!u.containPoint(i);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(o=o||d.containPoint(i,c))}},this)},this),!!o},t.prototype.getVisual=function(r,i){var n=this._model,o=Ps(n,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?Ng(s,l,i):Zo(s,i)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;D(pae,function(i){var n=function(o){var a=r.getModel(),s=o.target,l,c=i==="globalout";if(c?l={}:s&&uo(s,function(g){var f=ae(g);if(f&&f.dataIndex!=null){var v=f.dataModel||a.getSeriesByIndex(f.seriesIndex);return l=v&&v.getDataParams(f.dataIndex,f.dataType,s)||{},!0}else if(f.eventData)return l=F({},f.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var h=u&&d!=null&&a.getComponent(u,d),p=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=i,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:p},r.trigger(i,l)}};n.zrEventfulCallAtLast=!0,r._zr.on(i,n,r)}),D(Wg,function(i,n){r._messageCenter.on(n,function(o){this.trigger(n,o)},r)}),D(["selectchanged"],function(i){r._messageCenter.on(i,function(n){this.trigger(i,n)},r)}),L4(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&FD(this.getDom(),PM,"");var i=this,n=i._api,o=i._model;D(i._componentsViews,function(a){a.dispose(o,n)}),D(i._chartsViews,function(a){a.dispose(o,n)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete jg[i.id]},t.prototype.resize=function(r){if(!this[$r]){if(this._disposed){this.id;return}this._zr.resize(r);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var n=i.resetOption("media"),o=r&&r.silent;this[Li]&&(o==null&&(o=this[Li].silent),n=!0,this[Li]=null),this[$r]=!0;try{n&&Yd(this),qs.update.call(this,{type:"resize",animation:F({duration:0},r&&r.animation)})}catch(a){throw this[$r]=!1,a}this[$r]=!1,Hg.call(this,o),Ug.call(this,o)}}},t.prototype.showLoading=function(r,i){if(this._disposed){this.id;return}if(J(r)&&(i=r,r=""),r=r||"default",this.hideLoading(),!!RM[r]){var n=RM[r](this._api,i),o=this._zr;this._loadingFX=n,o.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var i=F({},r);return i.type=Wg[r.type],i},t.prototype.dispatchAction=function(r,i){if(this._disposed){this.id;return}if(J(i)||(i={silent:!!i}),!!pw[r.type]&&this._model){if(this[$r]){this._pendingActions.push(r);return}var n=i.silent;EM.call(this,r,n);var o=i.flush;o?this._zr.flush():o!==!1&&Re.browser.weChat&&this._throttledZrFlush(),Hg.call(this,n),Ug.call(this,n)}},t.prototype.updateLabelLayout=function(){Rn.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var i=r.seriesIndex,n=this.getModel(),o=n.getSeriesByIndex(i);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Yd=function(d){var h=d._scheduler;h.restorePipelines(d._model),h.prepareStageTasks(),SM(d,!0),SM(d,!1),h.plan()},SM=function(d,h){for(var p=d._model,g=d._scheduler,f=h?d._componentsViews:d._chartsViews,v=h?d._componentsMap:d._chartsMap,m=d._zr,y=d._api,w=0;w<f.length;w++)f[w].__alive=!1;h?p.eachComponent(function(b,x){b!=="series"&&C(x)}):p.eachSeries(C);function C(b){var x=b.__requireNewView;b.__requireNewView=!1;var E="_ec_"+b.id+"_"+b.type,M=!x&&v[E];if(!M){var T=Mi(b.type),_=h?He.getClass(T.main,T.sub):Le.getClass(T.sub);M=new _,M.init(p,y),v[E]=M,f.push(M),m.add(M.group)}b.__viewId=M.__id=E,M.__alive=!0,M.__model=b,M.group.__ecComponentInfo={mainType:b.mainType,index:b.componentIndex},!h&&g.prepareView(M,b,p,y)}for(var w=0;w<f.length;){var S=f[w];S.__alive?w++:(!h&&S.renderTask.dispose(),m.remove(S.group),S.dispose(p,y),f.splice(w,1),v[S.__id]===S&&delete v[S.__id],S.__id=S.group.__ecComponentInfo=null)}},dw=function(d,h,p,g,f){var v=d._model;if(v.setUpdatePayload(p),!g){D([].concat(d._componentsViews).concat(d._chartsViews),S);return}var m={};m[g+"Id"]=p[g+"Id"],m[g+"Index"]=p[g+"Index"],m[g+"Name"]=p[g+"Name"];var y={mainType:g,query:m};f&&(y.subType=f);var w=p.excludeSeriesId,C;w!=null&&(C=Y(),D(Ge(w),function(b){var x=Mt(b,null);x!=null&&C.set(x,!0)})),v&&v.eachComponent(y,function(b){var x=C&&C.get(b.id)!=null;if(!x)if(uE(p))if(b instanceof Be)p.type===Bs&&!p.notBlur&&!b.get(["emphasis","disabled"])&&oz(b,p,d._api);else{var E=i0(b.mainType,b.componentIndex,p.name,d._api),M=E.focusSelf,T=E.dispatchers;p.type===Bs&&M&&!p.notBlur&&e0(b.mainType,b.componentIndex,d._api),T&&D(T,function(_){p.type===Bs?Br(_):Gr(_)})}else o0(p)&&b instanceof Be&&(lz(b,p,d._api),cE(b),An(d))},d),v&&v.eachComponent(y,function(b){var x=C&&C.get(b.id)!=null;x||S(d[g==="series"?"_chartsMap":"_componentsMap"][b.__viewId])},d);function S(b){b&&b.__alive&&b[h]&&b[h](b.__model,v,d._api,p)}},qs={prepareAndUpdate:function(d){Yd(this),qs.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,h){var p=this._model,g=this._api,f=this._zr,v=this._coordSysMgr,m=this._scheduler;if(p){p.setUpdatePayload(d),m.restoreData(p,d),m.performSeriesTasks(p),v.create(p,g),m.performDataProcessorTasks(p,d),DM(this,p),v.update(p,g),r(p),m.performVisualTasks(p,d),MM(this,p,g,d,h);var y=p.get("backgroundColor")||"transparent",w=p.get("darkMode");f.setBackgroundColor(y),w!=null&&w!=="auto"&&f.setDarkMode(w),Rn.trigger("afterupdate",p,g)}},updateTransform:function(d){var h=this,p=this._model,g=this._api;if(p){p.setUpdatePayload(d);var f=[];p.eachComponent(function(m,y){if(m!=="series"){var w=h.getViewOfComponentModel(y);if(w&&w.__alive)if(w.updateTransform){var C=w.updateTransform(y,p,g,d);C&&C.update&&f.push(w)}else f.push(w)}});var v=Y();p.eachSeries(function(m){var y=h._chartsMap[m.__viewId];if(y.updateTransform){var w=y.updateTransform(m,p,g,d);w&&w.update&&v.set(m.uid,1)}else v.set(m.uid,1)}),r(p),this._scheduler.performVisualTasks(p,d,{setDirty:!0,dirtyMap:v}),hw(this,p,g,d,{},v),Rn.trigger("afterupdate",p,g)}},updateView:function(d){var h=this._model;h&&(h.setUpdatePayload(d),Le.markUpdateMethod(d,"updateView"),r(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0}),MM(this,h,this._api,d,{}),Rn.trigger("afterupdate",h,this._api))},updateVisual:function(d){var h=this,p=this._model;p&&(p.setUpdatePayload(d),p.eachSeries(function(g){g.getData().clearAllVisual()}),Le.markUpdateMethod(d,"updateVisual"),r(p),this._scheduler.performVisualTasks(p,d,{visualType:"visual",setDirty:!0}),p.eachComponent(function(g,f){if(g!=="series"){var v=h.getViewOfComponentModel(f);v&&v.__alive&&v.updateVisual(f,p,h._api,d)}}),p.eachSeries(function(g){var f=h._chartsMap[g.__viewId];f.updateVisual(g,p,h._api,d)}),Rn.trigger("afterupdate",p,this._api))},updateLayout:function(d){qs.update.call(this,d)}},xM=function(d,h,p,g){if(d._disposed){d.id;return}for(var f=d._model,v=d._coordSysMgr.getCoordinateSystems(),m,y=Ps(f,p),w=0;w<v.length;w++){var C=v[w];if(C[h]&&(m=C[h](f,y,g))!=null)return m}},DM=function(d,h){var p=d._chartsMap,g=d._scheduler;h.eachSeries(function(f){g.updateStreamModes(f,p[f.__viewId])})},EM=function(d,h){var p=this,g=this.getModel(),f=d.type,v=d.escapeConnect,m=pw[f],y=m.actionInfo,w=(y.update||"update").split(":"),C=w.pop(),S=w[0]!=null&&Mi(w[0]);this[$r]=!0;var b=[d],x=!1;d.batch&&(x=!0,b=N(d.batch,function(P){return P=Q(F({},P),d),P.batch=null,P}));var E=[],M,T=o0(d),_=uE(d);if(_&&lE(this._api),D(b,function(P){if(M=m.action(P,p._model,p._api),M=M||F({},P),M.type=y.event||M.type,E.push(M),_){var k=Qp(d),L=k.queryOptionMap,V=k.mainTypeSpecified,z=V?L.keys()[0]:"series";dw(p,C,P,z),An(p)}else T?(dw(p,C,P,"series"),An(p)):S&&dw(p,C,P,S.main,S.sub)}),C!=="none"&&!_&&!T&&!S)try{this[Li]?(Yd(this),qs.update.call(this,d),this[Li]=null):qs[C].call(this,d)}catch(P){throw this[$r]=!1,P}if(x?M={type:y.event||f,escapeConnect:v,batch:E}:M=E[0],this[$r]=!1,!h){var R=this._messageCenter;if(R.trigger(M.type,M),T){var A={type:"selectchanged",escapeConnect:v,selected:cz(g),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};R.trigger(A.type,A)}}},Hg=function(d){for(var h=this._pendingActions;h.length;){var p=h.shift();EM.call(this,p,d)}},Ug=function(d){!d&&this.trigger("updated")},aV=function(d,h){d.on("rendered",function(p){h.trigger("rendered",p),d.animation.isFinished()&&!h[Li]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},sV=function(d,h){d.on("mouseover",function(p){var g=p.target,f=uo(g,Gs);f&&(az(f,p,h._api),An(h))}).on("mouseout",function(p){var g=p.target,f=uo(g,Gs);f&&(sz(f,p,h._api),An(h))}).on("click",function(p){var g=p.target,f=uo(g,function(y){return ae(y).dataIndex!=null},!0);if(f){var v=f.selected?"unselect":"select",m=ae(f);h._api.dispatchAction({type:v,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(d){d.clearColorPalette(),d.eachSeries(function(h){h.clearColorPalette()})}function i(d){var h=[],p=[],g=!1;if(d.eachComponent(function(y,w){var C=w.get("zlevel")||0,S=w.get("z")||0,b=w.getZLevelKey();g=g||!!b,(y==="series"?p:h).push({zlevel:C,z:S,idx:w.componentIndex,type:y,key:b})}),g){var f=h.concat(p),v,m;tc(f,function(y,w){return y.zlevel===w.zlevel?y.z-w.z:y.zlevel-w.zlevel}),D(f,function(y){var w=d.getComponent(y.type,y.idx),C=y.zlevel,S=y.key;v!=null&&(C=Math.max(v,C)),S?(C===v&&S!==m&&C++,m=S):m&&(C===v&&C++,m=""),v=C,w.setZLevel(C)})}}MM=function(d,h,p,g,f){i(h),lV(d,h,p,g,f),D(d._chartsViews,function(v){v.__alive=!1}),hw(d,h,p,g,f),D(d._chartsViews,function(v){v.__alive||v.remove(h,p)})},lV=function(d,h,p,g,f,v){D(v||d._componentsViews,function(m){var y=m.__model;c(y,m),m.render(y,h,p,g),s(y,m),u(y,m)})},hw=function(d,h,p,g,f,v){var m=d._scheduler;f=F(f||{},{updatedSeries:h.getSeries()}),Rn.trigger("series:beforeupdate",h,p,f);var y=!1;h.eachSeries(function(w){var C=d._chartsMap[w.__viewId];C.__alive=!0;var S=C.renderTask;m.updatePayload(S,g),c(w,C),v&&v.get(w.uid)&&S.dirty(),S.perform(m.getPerformArgs(S))&&(y=!0),C.group.silent=!!w.get("silent"),a(w,C),cE(w)}),m.unfinished=y||m.unfinished,Rn.trigger("series:layoutlabels",h,p,f),Rn.trigger("series:transition",h,p,f),h.eachSeries(function(w){var C=d._chartsMap[w.__viewId];s(w,C),u(w,C)}),o(d,h),Rn.trigger("series:afterupdate",h,p,f)},An=function(d){d[CM]=!0,d.getZr().wakeUp()},uV=function(d){d[CM]&&(d.getZr().storage.traverse(function(h){La(h)||n(h)}),d[CM]=!1)};function n(d){for(var h=[],p=d.currentStates,g=0;g<p.length;g++){var f=p[g];f==="emphasis"||f==="blur"||f==="select"||h.push(f)}d.selected&&d.states.select&&h.push("select"),d.hoverState===og&&d.states.emphasis?h.push("emphasis"):d.hoverState===Dc&&d.states.blur&&h.push("blur"),d.useStates(h)}function o(d,h){var p=d._zr,g=p.storage,f=0;g.traverse(function(v){v.isGroup||f++}),f>h.get("hoverLayerThreshold")&&!Re.node&&!Re.worker&&h.eachSeries(function(v){if(!v.preventUsingHoverLayer){var m=d._chartsMap[v.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(d,h){var p=d.get("blendMode")||null;h.eachRendered(function(g){g.isGroup||(g.style.blend=p)})}function s(d,h){if(!d.preventAutoZ){var p=d.get("z")||0,g=d.get("zlevel")||0;h.eachRendered(function(f){return l(f,p,g,-1/0),!0})}}function l(d,h,p,g){var f=d.getTextContent(),v=d.getTextGuideLine(),m=d.isGroup;if(m)for(var y=d.childrenRef(),w=0;w<y.length;w++)g=Math.max(l(y[w],h,p,g),g);else d.z=h,d.zlevel=p,g=Math.max(d.z2,g);if(f&&(f.z=h,f.zlevel=p,isFinite(g)&&(f.z2=g+2)),v){var C=d.textGuideLineConfig;v.z=h,v.zlevel=p,isFinite(g)&&(v.z2=g+(C&&C.showAbove?1:-1))}return g}function c(d,h){h.eachRendered(function(p){if(!La(p)){var g=p.getTextContent(),f=p.getTextGuideLine();p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),f&&f.stateTransition&&(f.stateTransition=null),p.hasState()?(p.prevStates=p.currentStates,p.clearStates()):p.prevStates&&(p.prevStates=null)}})}function u(d,h){var p=d.getModel("stateAnimation"),g=d.isAnimationEnabled(),f=p.get("duration"),v=f>0?{duration:f,delay:p.get("delay"),easing:p.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(La(m))return;if(m instanceof ce&&hz(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(g){m.stateTransition=v;var w=m.getTextContent(),C=m.getTextGuideLine();w&&(w.stateTransition=v),C&&(C.stateTransition=v)}m.__dirty&&n(m)}})}cV=function(d){return new(function(h){I(p,h);function p(){return h!==null&&h.apply(this,arguments)||this}return p.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},p.prototype.getComponentByElement=function(g){for(;g;){var f=g.__ecComponentInfo;if(f!=null)return d._model.getComponent(f.mainType,f.index);g=g.parent}},p.prototype.enterEmphasis=function(g,f){Br(g,f),An(d)},p.prototype.leaveEmphasis=function(g,f){Gr(g,f),An(d)},p.prototype.enterBlur=function(g){r0(g),An(d)},p.prototype.leaveBlur=function(g){lg(g),An(d)},p.prototype.enterSelect=function(g){aE(g),An(d)},p.prototype.leaveSelect=function(g){sE(g),An(d)},p.prototype.getModel=function(){return d.getModel()},p.prototype.getViewOfComponentModel=function(g){return d.getViewOfComponentModel(g)},p.prototype.getViewOfSeriesModel=function(g){return d.getViewOfSeriesModel(g)},p}(z0))(d)},SV=function(d){function h(p,g){for(var f=0;f<p.length;f++){var v=p[f];v[bM]=g}}D(Wg,function(p,g){d._messageCenter.on(g,function(f){if(dV[d.group]&&d[bM]!==oV){if(f&&f.escapeConnect)return;var v=d.makeActionFromEvent(f),m=[];D(jg,function(y){y!==d&&y.group===d.group&&m.push(y)}),h(m,oV),D(m,function(y){y[bM]!==dae&&y.dispatchAction(v)}),h(m,hae)}})})}}(),t}(ir),IM=xV.prototype;IM.on=mV("on");IM.off=mV("off");IM.one=function(e,t,r){var i=this;function n(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),i.off(e,n)}this.on.call(this,e,n,r)};var pae=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var pw={},Wg={},TM=[],_M=[],gw=[],DV={},RM={},jg={},dV={},gae=+new Date-0,eVe=+new Date-0,PM="_echarts_instance_";function kM(e,t,r){var i=!(r&&r.ssr);if(i){var n=fae(e);if(n)return n}var o=new xV(e,t,r);return o.id="ec_"+gae++,jg[o.id]=o,i&&FD(e,PM,o.id),SV(o),Rn.trigger("afterinit",o),o}function fae(e){return jg[oN(e,PM)]}function EV(e,t){DV[e]=t}function LM(e){pe(_M,e)<0&&_M.push(e)}function FM(e,t){OM(TM,e,t,nae)}function MV(e){vw("afterinit",e)}function TV(e){vw("afterupdate",e)}function vw(e,t){Rn.on(e,t)}function ni(e,t,r){Z(t)&&(r=t,t="");var i=J(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,!Wg[t]&&(St(nV.test(i)&&nV.test(t)),pw[i]||(pw[i]={action:r,actionInfo:e}),Wg[t]=i)}function _V(e,t){Ha.register(e,t)}function RV(e,t){OM(gw,e,t,pV,"layout")}function Ks(e,t){OM(gw,e,t,gV,"visual")}var hV=[];function OM(e,t,r,i,n){if((Z(t)||J(t))&&(r=t,t=i),!(pe(hV,r)>=0)){hV.push(r);var o=fM.wrapStageHandler(r,n);o.__prio=t,o.__raw=r,e.push(o)}}function NM(e,t){RM[e]=t}function AV(e,t,r){var i=iV("registerMap");i&&i(e,t,r)}var IV=Z6;Ks(AM,y4);Ks(fw,w4);Ks(fw,C4);Ks(AM,P4);Ks(fw,k4);Ks(fV,wM);LM(V0);FM(rae,ZE);NM("default",gM);ni({type:Bs,event:Bs,update:Bs},pt);ni({type:ag,event:ag,update:ag},pt);ni({type:Td,event:Td,update:Td},pt);ni({type:sg,event:sg,update:sg},pt);ni({type:_d,event:_d,update:_d},pt);EV("light",E4);EV("dark",R4);var PV=[],vae={registerPreprocessor:LM,registerProcessor:FM,registerPostInit:MV,registerPostUpdate:TV,registerUpdateLifecycle:vw,registerAction:ni,registerCoordinateSystem:_V,registerLayout:RV,registerVisual:Ks,registerTransform:IV,registerLoading:NM,registerMap:AV,registerImpl:rV,PRIORITY:vV,ComponentModel:Ee,ComponentView:He,SeriesModel:Be,ChartView:Le,registerComponentModel:function(e){Ee.registerClass(e)},registerComponentView:function(e){He.registerClass(e)},registerSeriesModel:function(e){Be.registerClass(e)},registerChartView:function(e){Le.registerClass(e)},registerSubTypeDefaulter:function(e,t){Ee.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){VO(e,t)}};function Te(e){if(O(e)){D(e,function(t){Te(t)});return}pe(PV,e)>=0||(PV.push(e),Z(e)&&(e={install:e}),e.install(vae))}function $g(e){return e==null?0:e.length||1}function kV(e){return e}var mae=function(){function e(t,r,i,n,o,a){this._old=t,this._new=r,this._oldKeyGetter=i||kV,this._newKeyGetter=n||kV,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,i={},n=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(r,i,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=n[a],l=i[s],c=$g(l);if(c>1){var u=l.shift();l.length===1&&(i[s]=l[0]),this._update&&this._update(u,a)}else c===1?(i[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,i)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,i={},n={},o=[],a=[];this._initIndexMap(t,i,o,"_oldKeyGetter"),this._initIndexMap(r,n,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],c=i[l],u=n[l],d=$g(c),h=$g(u);if(d>1&&h===1)this._updateManyToOne&&this._updateManyToOne(u,c),n[l]=null;else if(d===1&&h>1)this._updateOneToMany&&this._updateOneToMany(u,c),n[l]=null;else if(d===1&&h===1)this._update&&this._update(u,c),n[l]=null;else if(d>1&&h>1)this._updateManyToMany&&this._updateManyToMany(u,c),n[l]=null;else if(d>1)for(var p=0;p<d;p++)this._remove&&this._remove(c[p]);else this._remove&&this._remove(c)}this._performRestAdd(a,n)},e.prototype._performRestAdd=function(t,r){for(var i=0;i<t.length;i++){var n=t[i],o=r[n],a=$g(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[n]=null}},e.prototype._initIndexMap=function(t,r,i,n){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[n](t[a],a);if(o||(i[a]=s),!!r){var l=r[s],c=$g(l);c===0?(r[s]=a,o&&i.push(s)):c===1?r[s]=[l,a]:l.push(a)}}},e}(),Pr=mae;var yae=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function LV(e,t){var r={},i=r.encode={},n=Y(),o=[],a=[],s={};D(e.dimensions,function(h){var p=e.getDimensionInfo(h),g=p.coordDim;if(g){var f=p.coordDimIndex;zM(i,g)[f]=h,p.isExtraCoord||(n.set(g,1),wae(p.type)&&(o[0]=h),zM(s,g)[f]=e.getDimensionIndex(p.name)),p.defaultTooltip&&a.push(h)}P0.each(function(v,m){var y=zM(i,m),w=p.otherDims[m];w!=null&&w!==!1&&(y[w]=p.name)})});var l=[],c={};n.each(function(h,p){var g=i[p];c[p]=g[0],l=l.concat(g)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=N(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=c;var u=i.label;u&&u.length&&(o=u.slice());var d=i.tooltip;return d&&d.length?a=d.slice():a.length||(a=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=a,r.userOutput=new yae(s,t),r}function zM(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Uc(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function wae(e){return!(e==="ordinal"||e==="time")}var Cae=function(){function e(t){this.otherDims={},t!=null&&F(this,t)}return e}(),qd=Cae;var bae=he(),Sae={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},VM=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=GM(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return de(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=G0(this.source),i=!HM(t),n="",o=[],a=0,s=0;a<t;a++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[s];if(d&&d.storeDimIndex===a)l=r?d.name:null,c=d.type,u=d.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,c=h.type)}o.push({property:l,type:c,ordinalMeta:u}),r&&l!=null&&(!d||!d.isCalculationCoord)&&(n+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=Sae[c]||"f",u&&(n+=u.uid),n+="$"}var p=this.source,g=[p.seriesLayoutBy,p.startIndex,n].join("$$");return{dimensions:o,hash:g}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,i=0;r<this._fullDimCount;r++){var n=void 0,o=this.dimensions[i];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(n=o.name),i++;else{var a=this.getSourceDimension(r);a&&(n=a.name)}t.push(n)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function yw(e){return e instanceof VM}function BM(e){for(var t=Y(),r=0;r<(e||[]).length;r++){var i=e[r],n=J(i)?i.name:i;n!=null&&t.get(n)==null&&t.set(n,r)}return t}function GM(e){var t=bae(e);return t.dimNameMap||(t.dimNameMap=BM(e.dimensionsDefine))}function HM(e){return e>30}var Yg=J,Zs=N,xae=typeof Int32Array>"u"?Array:Int32Array,Dae="e\0\0",FV=-1,Eae=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Mae=["_approximateExtent"],OV,ww,qg,Kg,UM,Cw,WM,Tae=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,n=!1;yw(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,i=t),i=i||["x","y"];for(var o={},a=[],s={},l=!1,c={},u=0;u<i.length;u++){var d=i[u],h=H(d)?new qd({name:d}):d instanceof qd?d:new qd(d),p=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=p,h.coordDimIndex=0);var g=h.otherDims=h.otherDims||{};a.push(p),o[p]=h,c[p]!=null&&(l=!0),h.createInvertedIndices&&(s[p]=[]),g.itemName===0&&(this._nameDimIdx=u),g.itemId===0&&(this._idDimIdx=u),n&&(h.storeDimIndex=u)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var f=this._dimIdxToName=Y();D(a,function(v){f.set(o[v].storeDimIndex,v)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var i=this._dimIdxToName.get(r);if(i!=null)return i;var n=this._schema.getSourceDimension(r);if(n)return n.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(be(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(i){return r.hasOwnProperty(i)?r[i]:void 0}:function(i){return r[i]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var i=this._dimSummary;if(r==null)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return n?n[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,i=r.encode[t];return(i||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,i){var n=this,o;if(t instanceof Pg&&(o=t),!o){var a=this.dimensions,s=Ud(t)||Vt(t)?new H0(t,a.length):t;o=new Pg;var l=Zs(a,function(c){return{type:n._dimInfos[c].type,property:c}});o.initData(s,l,i)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=LV(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var i=this._store.appendValues(t,r.length),n=i.start,o=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=n;s<o;s++){var l=s-n;this._nameList[s]=r[l],a&&WM(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,i=0;i<r.length;i++){var n=this._dimInfos[r[i]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Zi&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var i=this._store,n=i.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=n.getSource().sourceFormat,l=s===br;if(l&&!n.pure)for(var c=[],u=t;u<r;u++){var d=n.getItem(u,c);if(!this.hasItemOption&&JO(d)&&(this.hasItemOption=!0),d){var h=d.name;o[u]==null&&h!=null&&(o[u]=Mt(h,null));var p=d.id;a[u]==null&&p!=null&&(a[u]=Mt(p,null))}}if(this._shouldMakeIdFromName())for(var u=t;u<r;u++)WM(this,u);OV(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){Yg(t)?F(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),i=this._nameList[r];return i==null&&this._nameDimIdx!=null&&(i=qg(this,this._nameDimIdx,r)),i==null&&(i=""),i},e.prototype._getCategory=function(t,r){var i=this._store.get(t,r),n=this._store.getOrdinalMeta(t);return n?n.categories[i]:i},e.prototype.getId=function(t){return ww(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.get(n.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.getByRawIndex(n.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var i=this,n=this._store;return O(t)?n.getValues(Zs(t,function(o){return i._getStoreDimIndex(o)}),r):n.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,i=0,n=r.length;i<n;i++)if(isNaN(this._store.get(r[i],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,i=this._store.count();r<i;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var i=t&&this._invertedIndicesMap[t],n=i[r];return n==null||isNaN(n)?FV:n},e.prototype.indicesOfNearest=function(t,r,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,i)},e.prototype.each=function(t,r,i){"use strict";Z(t)&&(i=r,r=t,t=[]);var n=i||this,o=Zs(Kg(t),this._getStoreDimIndex,this);this._store.each(o,n?$(r,n):r)},e.prototype.filterSelf=function(t,r,i){"use strict";Z(t)&&(i=r,r=t,t=[]);var n=i||this,o=Zs(Kg(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,n?$(r,n):r),this},e.prototype.selectRange=function(t){"use strict";var r=this,i={},n=me(t),o=[];return D(n,function(a){var s=r._getStoreDimIndex(a);i[s]=t[a],o.push(s)}),this._store=this._store.selectRange(i),this},e.prototype.mapArray=function(t,r,i){"use strict";Z(t)&&(i=r,r=t,t=[]),i=i||this;var n=[];return this.each(t,function(){n.push(r&&r.apply(this,arguments))},i),n},e.prototype.map=function(t,r,i,n){"use strict";var o=i||n||this,a=Zs(Kg(t),this._getStoreDimIndex,this),s=Cw(this);return s._store=this._store.map(a,o?$(r,o):r),s},e.prototype.modify=function(t,r,i,n){var o=this,a=i||n||this,s=Zs(Kg(t),this._getStoreDimIndex,this);this._store.modify(s,a?$(r,a):r)},e.prototype.downSample=function(t,r,i,n){var o=Cw(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,i,n),o},e.prototype.lttbDownSample=function(t,r){var i=Cw(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),i},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,i=this.getRawDataItem(t);return new Ve(i,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new Pr(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return ww(t,i)},function(i){return ww(r,i)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},Yg(t)?F(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var i=this._itemVisuals[t],n=i&&i[r];return n??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var i=this._itemVisuals,n=i[t];n||(n=i[t]={});var o=n[r];return o==null&&(o=this.getVisual(r),O(o)?o=o.slice():Yg(o)&&(o=F({},o)),n[r]=o),o},e.prototype.setItemVisual=function(t,r,i){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,Yg(r)?F(n,r):n[r]=i},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){Yg(t)?F(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,i){this._itemLayouts[t]=i?F(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var i=this.hostModel&&this.hostModel.seriesIndex;ng(i,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){D(this._graphicEls,function(i,n){i&&t&&t.call(r,i,n)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Zs(this.dimensions,this._getDimInfo,this),this.hostModel)),UM(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var i=this[t];Z(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=i.apply(this,arguments);return r.apply(this,[n].concat(ry(arguments)))})},e.internalField=function(){OV=function(t){var r=t._invertedIndicesMap;D(r,function(i,n){var o=t._dimInfos[n],a=o.ordinalMeta,s=t._store;if(a){i=r[n]=new xae(a.categories.length);for(var l=0;l<i.length;l++)i[l]=FV;for(var l=0;l<s.count();l++)i[s.get(o.storeDimIndex,l)]=l}})},qg=function(t,r,i){return Mt(t._getCategory(r,i),null)},ww=function(t,r){var i=t._idList[r];return i==null&&t._idDimIdx!=null&&(i=qg(t,t._idDimIdx,r)),i==null&&(i=Dae+r),i},Kg=function(t){return O(t)||(t=t!=null?[t]:[]),t},Cw=function(t){var r=new e(t._schema?t._schema:Zs(t.dimensions,t._getDimInfo,t),t.hostModel);return UM(r,t),r},UM=function(t,r){D(Eae.concat(r.__wrappedMethods||[]),function(i){r.hasOwnProperty(i)&&(t[i]=r[i])}),t.__wrappedMethods=r.__wrappedMethods,D(Mae,function(i){t[i]=re(r[i])}),t._calculationInfo=F({},r._calculationInfo)},WM=function(t,r){var i=t._nameList,n=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=i[r],l=n[r];if(s==null&&o!=null&&(i[r]=s=qg(t,o,r)),l==null&&a!=null&&(n[r]=l=qg(t,a,r)),l==null&&s!=null){var c=t._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),n[r]=l}}}(),e}(),Pt=Tae;function go(e,t){Ud(e)||(e=Wd(e)),t=t||{};var r=t.coordDimensions||[],i=t.dimensionsDefine||e.dimensionsDefine||[],n=Y(),o=[],a=Rae(e,r,i,t.dimensionsCount),s=t.canOmitUnusedDimensions&&HM(a),l=i===e.dimensionsDefine,c=l?GM(e):BM(i),u=t.encodeDefine;!u&&t.encodeDefaulter&&(u=t.encodeDefaulter(e,a));for(var d=Y(u),h=new aM(a),p=0;p<h.length;p++)h[p]=-1;function g(M){var T=h[M];if(T<0){var _=i[M],R=J(_)?_:{name:_},A=new qd,P=R.name;P!=null&&c.get(P)!=null&&(A.name=A.displayName=P),R.type!=null&&(A.type=R.type),R.displayName!=null&&(A.displayName=R.displayName);var k=o.length;return h[M]=k,A.storeDimIndex=M,o.push(A),A}return o[T]}if(!s)for(var p=0;p<a;p++)g(p);d.each(function(M,T){var _=Ge(M).slice();if(_.length===1&&!H(_[0])&&_[0]<0){d.set(T,!1);return}var R=d.set(T,[]);D(_,function(A,P){var k=H(A)?c.get(A):A;k!=null&&k<a&&(R[P]=k,v(g(k),T,P))})});var f=0;D(r,function(M){var T,_,R,A;if(H(M))T=M,A={};else{A=M,T=A.name;var P=A.ordinalMeta;A.ordinalMeta=null,A=F({},A),A.ordinalMeta=P,_=A.dimsDef,R=A.otherDims,A.name=A.coordDim=A.coordDimIndex=A.dimsDef=A.otherDims=null}var k=d.get(T);if(k!==!1){if(k=Ge(k),!k.length)for(var L=0;L<(_&&_.length||1);L++){for(;f<a&&g(f).coordDim!=null;)f++;f<a&&k.push(f++)}D(k,function(V,z){var B=g(V);if(l&&A.type!=null&&(B.type=A.type),v(Q(B,A),T,z),B.name==null&&_){var K=_[z];!J(K)&&(K={name:K}),B.name=B.displayName=K.name,B.defaultTooltip=K.defaultTooltip}R&&Q(B.otherDims,R)})}});function v(M,T,_){P0.get(T)!=null?M.otherDims[T]=_:(M.coordDim=T,M.coordDimIndex=_,n.set(T,!0))}var m=t.generateCoord,y=t.generateCoordCount,w=y!=null;y=m?y||1:0;var C=m||"value";function S(M){M.name==null&&(M.name=M.coordDim)}if(s)D(o,function(M){S(M)}),o.sort(function(M,T){return M.storeDimIndex-T.storeDimIndex});else for(var b=0;b<a;b++){var x=g(b),E=x.coordDim;E==null&&(x.coordDim=Aae(C,n,w),x.coordDimIndex=0,(!m||y<=0)&&(x.isExtraCoord=!0),y--),S(x),x.type==null&&(F0(e,b)===mr.Must||x.isExtraCoord&&(x.otherDims.itemName!=null||x.otherDims.seriesName!=null))&&(x.type="ordinal")}return _ae(o),new VM({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function _ae(e){for(var t=Y(),r=0;r<e.length;r++){var i=e[r],n=i.name,o=t.get(n)||0;o>0&&(i.name=n+(o-1)),o++,t.set(n,o)}}function Rae(e,t,r,i){var n=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,i||0);return D(t,function(o){var a;J(o)&&(a=o.dimsDef)&&(n=Math.max(n,a.length))}),n}function Aae(e,t,r){if(r||t.hasKey(e)){for(var i=0;t.hasKey(e+i);)i++;e+=i}return t.set(e,!0),e}var Iae=function(){function e(t){this.coordSysDims=[],this.axisMap=Y(),this.categoryAxisMap=Y(),this.coordSysName=t}return e}();function NV(e){var t=e.get("coordinateSystem"),r=new Iae(t),i=Pae[t];if(i)return i(e,r,r.axisMap,r.categoryAxisMap),r}var Pae={cartesian2d:function(e,t,r,i){var n=e.getReferringComponents("xAxis",dt).models[0],o=e.getReferringComponents("yAxis",dt).models[0];t.coordSysDims=["x","y"],r.set("x",n),r.set("y",o),Kd(n)&&(i.set("x",n),t.firstCategoryDimIndex=0),Kd(o)&&(i.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,i){var n=e.getReferringComponents("singleAxis",dt).models[0];t.coordSysDims=["single"],r.set("single",n),Kd(n)&&(i.set("single",n),t.firstCategoryDimIndex=0)},polar:function(e,t,r,i){var n=e.getReferringComponents("polar",dt).models[0],o=n.findAxisModel("radiusAxis"),a=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),Kd(o)&&(i.set("radius",o),t.firstCategoryDimIndex=0),Kd(a)&&(i.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,i){var n=e.ecModel,o=n.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();D(o.parallelAxisIndex,function(s,l){var c=n.getComponent("parallelAxis",s),u=a[l];r.set(u,c),Kd(c)&&(i.set(u,c),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Kd(e){return e.get("type")==="category"}function zV(e,t,r){r=r||{};var i=r.byIndex,n=r.stackedCoordDimension,o,a,s;kae(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),c,u,d,h;if(D(o,function(y,w){H(y)&&(o[w]=y={name:y}),l&&!y.isExtraCoord&&(!i&&!c&&y.ordinalMeta&&(c=y),!u&&y.type!=="ordinal"&&y.type!=="time"&&(!n||n===y.coordDim)&&(u=y))}),u&&!i&&!c&&(i=!0),u){d="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,c&&(c.createInvertedIndices=!0);var p=u.coordDim,g=u.type,f=0;D(o,function(y){y.coordDim===p&&f++});var v={name:d,coordDim:p,coordDimIndex:f,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:h,coordDim:h,coordDimIndex:f+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(v.storeDimIndex=s.ensureCalculationDimension(h,g),m.storeDimIndex=s.ensureCalculationDimension(d,g)),a.appendCalculationDimension(v),a.appendCalculationDimension(m)):(o.push(v),o.push(m))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:i,stackedOverDimension:h,stackResultDimension:d}}function kae(e){return!yw(e.schema)}function Ji(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function bw(e,t){return Ji(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Lae(e,t){var r=e.get("coordinateSystem"),i=Ha.get(r),n;return t&&t.coordSysDims&&(n=N(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=Uc(l)}return a})),n||(n=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),n}function Fae(e,t,r){var i,n;return r&&D(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(i==null&&(i=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(n=!0)}),!n&&i!=null&&(e[i].otherDims.itemName=0),i}function Oae(e,t,r){r=r||{};var i=t.getSourceManager(),n,o=!1;e?(o=!0,n=Wd(e)):(n=i.getSource(),o=n.sourceFormat===br);var a=NV(t),s=Lae(t,a),l=r.useEncodeDefaulter,c=Z(l)?l:l?se(k0,s,t):null,u={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!o},d=go(n,u),h=Fae(d.dimensions,r.createInvertedIndices,a),p=o?null:i.getSharedDataStore(d),g=zV(t,{schema:d,store:p}),f=new Pt(d,t);f.setCalculationInfo(g);var v=h!=null&&Nae(n)?function(m,y,w,C){return C===h?w:this.defaultDimValueGetter(m,y,w,C)}:null;return f.hasItemOption=!1,f.initData(o?n:p,null,v),f}function Nae(e){if(e.sourceFormat===br){var t=zae(e.data||[]);return!O(eo(t))}}function zae(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var Sr=Oae;var VV=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(r)||(i[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();Ls(VV);var Fi=VV;var Vae=0,Bae=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Vae}return e.createByAxisModel=function(t){var r=t.option,i=r.data,n=i&&N(i,Gae);return new e({categories:n,needCollect:!n,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,i=this._needCollect;if(!H(t)&&!i)return t;if(i&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var n=this._getOrCreateMap();return r=n.get(t),r==null&&(i?(r=this.categories.length,this.categories[r]=t,n.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Y(this.categories))},e}();function Gae(e){return J(e)&&e.value!=null?e.value:e+""}var Zg=Bae;function Xg(e){return e.type==="interval"||e.type==="log"}function GV(e,t,r,i){var n={},o=e[1]-e[0],a=n.interval=Hy(o/t,!0);r!=null&&a<r&&(a=n.interval=r),i!=null&&a>i&&(a=n.interval=i);var s=n.intervalPrecision=jM(a),l=n.niceTickExtent=[gt(Math.ceil(e[0]/a)*a,s),gt(Math.floor(e[1]/a)*a,s)];return Hae(l,e),n}function Sw(e){var t=Math.pow(10,Gy(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,gt(r*t)}function jM(e){return Qr(e)+2}function BV(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Hae(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),BV(e,0,t),BV(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function Xs(e,t){return e>=t[0]&&e<=t[1]}function Qs(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function Js(e,t){return e*(t[1]-t[0])+t[0]}var HV=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;i.type="ordinal";var n=i.getSetting("ordinalMeta");return n||(n=new Zg({})),O(n)&&(n=new Zg({categories:N(n,function(o){return J(o)?o.value:o})})),i._ordinalMeta=n,i._extent=i.getSetting("extent")||[0,n.categories.length-1],i}return t.prototype.parse=function(r){return r==null?NaN:H(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),Xs(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),Qs(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(Js(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],i=this._extent,n=i[0];n<=i[1];)r.push({value:n}),n++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=r.ordinalNumbers,n=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,i.length);a<l;++a){var c=i[a];n[a]=c,o[c]=a}for(var u=0;a<s;++a){for(;o[u]!=null;)u++;n.push(u),o[u]=a}},t.prototype._getTickNumber=function(r){var i=this._ticksByOrdinalNumber;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getRawOrdinalNumber=function(r){var i=this._ordinalNumbersByTick;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var i=this.getRawOrdinalNumber(r.value),n=this._ordinalMeta.categories[i];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Fi);Fi.registerClass(HV);var Qg=HV;var Wc=gt,UV=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return Xs(r,this._extent)},t.prototype.normalize=function(r){return Qs(r,this._extent)},t.prototype.scale=function(r){return Js(r,this._extent)},t.prototype.setExtent=function(r,i){var n=this._extent;isNaN(r)||(n[0]=parseFloat(r)),isNaN(i)||(n[1]=parseFloat(i))},t.prototype.unionExtent=function(r){var i=this._extent;r[0]<i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1]),this.setExtent(i[0],i[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=jM(r)},t.prototype.getTicks=function(r){var i=this._interval,n=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!i)return s;var l=1e4;n[0]<o[0]&&(r?s.push({value:Wc(o[0]-i,a)}):s.push({value:n[0]}));for(var c=o[0];c<=o[1]&&(s.push({value:c}),c=Wc(c+i,a),c!==s[s.length-1].value);)if(s.length>l)return[];var u=s.length?s[s.length-1].value:o[1];return n[1]>u&&(r?s.push({value:Wc(u+i,a)}):s.push({value:n[1]})),s},t.prototype.getMinorTicks=function(r){for(var i=this.getTicks(!0),n=[],o=this.getExtent(),a=1;a<i.length;a++){for(var s=i[a],l=i[a-1],c=0,u=[],d=s.value-l.value,h=d/r;c<r-1;){var p=Wc(l.value+(c+1)*h);p>o[0]&&p<o[1]&&u.push(p),c++}n.push(u)}return n},t.prototype.getLabel=function(r,i){if(r==null)return"";var n=i&&i.precision;n==null?n=Qr(r.value)||0:n==="auto"&&(n=this._intervalPrecision);var o=Wc(r.value,n,!0);return BE(o)},t.prototype.calcNiceTicks=function(r,i,n){r=r||5;var o=this._extent,a=o[1]-o[0];if(isFinite(a)){a<0&&(a=-a,o.reverse());var s=GV(o,r,i,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var n=Math.abs(i[0]);r.fixMax||(i[1]+=n/2),i[0]-=n/2}else i[1]=1;var o=i[1]-i[0];isFinite(o)||(i[0]=0,i[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(i[0]=Wc(Math.floor(i[0]/a)*a)),r.fixMax||(i[1]=Wc(Math.ceil(i[1]/a)*a))},t.prototype.setNiceExtent=function(r,i){this._niceExtent=[r,i]},t.type="interval",t}(Fi);Fi.registerClass(UV);var Oi=UV;var WV=typeof Float32Array<"u",Uae=WV?Float32Array:Array;function oi(e){return O(e)?WV?new Float32Array(e):e:new Uae(e)}var $M="__ec_stack_";function YM(e){return e.get("stack")||$M+e.seriesIndex}function qM(e){return e.dim+e.index}function jV(e){var t=[],r=e.axis,i="axis0";if(r.type==="category"){for(var n=r.getBandWidth(),o=0;o<e.count;o++)t.push(Q({bandWidth:n,axisKey:i,stackId:$M+o},e));for(var a=$V(t),s=[],o=0;o<e.count;o++){var l=a[i][$M+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function KM(e,t){var r=[];return t.eachSeriesByType(e,function(i){qV(i)&&r.push(i)}),r}function Wae(e){var t={};D(e,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var d=l.getData(),h=u.dim+"_"+u.index,p=d.getDimensionIndex(d.mapDimension(u.dim)),g=d.getStore(),f=0,v=g.count();f<v;++f){var m=g.get(p,f);t[h]?t[h].push(m):t[h]=[m]}});var r={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(n){n.sort(function(l,c){return l-c});for(var o=null,a=1;a<n.length;++a){var s=n[a]-n[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[i]=o}}return r}function ZM(e){var t=Wae(e),r=[];return D(e,function(i){var n=i.coordinateSystem,o=n.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,c=t[l],u=Math.abs(a[1]-a[0]),d=o.scale.getExtent(),h=Math.abs(d[1]-d[0]);s=c?u/h*c:u}else{var p=i.getData();s=Math.abs(a[1]-a[0])/p.count()}var g=j(i.get("barWidth"),s),f=j(i.get("barMaxWidth"),s),v=j(i.get("barMinWidth")||(KV(i)?.5:1),s),m=i.get("barGap"),y=i.get("barCategoryGap");r.push({bandWidth:s,barWidth:g,barMaxWidth:f,barMinWidth:v,barGap:m,barCategoryGap:y,axisKey:qM(o),stackId:YM(i)})}),$V(r)}function $V(e){var t={};D(e,function(i,n){var o=i.axisKey,a=i.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var c=i.stackId;l[c]||s.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=i.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(s.remainedWidth,u),s.remainedWidth-=u);var d=i.barMaxWidth;d&&(l[c].maxWidth=d);var h=i.barMinWidth;h&&(l[c].minWidth=h);var p=i.barGap;p!=null&&(s.gap=p);var g=i.barCategoryGap;g!=null&&(s.categoryGap=g)});var r={};return D(t,function(i,n){r[n]={};var o=i.stacks,a=i.bandWidth,s=i.categoryGap;if(s==null){var l=me(o).length;s=Math.max(35-l*4,15)+"%"}var c=j(s,a),u=j(i.gap,1),d=i.remainedWidth,h=i.autoWidthCount,p=(d-c)/(h+(h-1)*u);p=Math.max(p,0),D(o,function(m){var y=m.maxWidth,w=m.minWidth;if(m.width){var C=m.width;y&&(C=Math.min(C,y)),w&&(C=Math.max(C,w)),m.width=C,d-=C+u*C,h--}else{var C=p;y&&y<C&&(C=Math.min(y,d)),w&&w>C&&(C=w),C!==p&&(m.width=C,d-=C+u*C,h--)}}),p=(d-c)/(h+(h-1)*u),p=Math.max(p,0);var g=0,f;D(o,function(m,y){m.width||(m.width=p),f=m,g+=m.width*(1+u)}),f&&(g-=f.width*u);var v=-g/2;D(o,function(m,y){r[n][y]=r[n][y]||{bandWidth:a,offset:v,width:m.width},v+=m.width*(1+u)})}),r}function YV(e,t,r){if(e&&t){var i=e[qM(t)];return i!=null&&r!=null?i[YM(r)]:i}}function Dw(e,t){var r=KM(e,t),i=ZM(r);D(r,function(n){var o=n.getData(),a=n.coordinateSystem,s=a.getBaseAxis(),l=YM(n),c=i[qM(s)][l],u=c.offset,d=c.width;o.setLayout({bandWidth:c.bandWidth,offset:u,size:d})})}function Ew(e){return{seriesType:e,plan:Xi(),reset:function(t){if(qV(t)){var r=t.getData(),i=t.coordinateSystem,n=i.getBaseAxis(),o=i.getOtherAxis(n),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(n.dim)),l=t.get("showBackground",!0),c=r.mapDimension(o.dim),u=r.getCalculationInfo("stackResultDimension"),d=Ji(r,c)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),p=jae(n,o),g=KV(t),f=t.get("barMinHeight")||0,v=u&&r.getDimensionIndex(u),m=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(w,C){for(var S=w.count,b=g&&oi(S*3),x=g&&l&&oi(S*3),E=g&&oi(S),M=i.master.getRect(),T=h?M.width:M.height,_,R=C.getStore(),A=0;(_=w.next())!=null;){var P=R.get(d?v:a,_),k=R.get(s,_),L=p,V=void 0;d&&(V=+P-R.get(a,_));var z=void 0,B=void 0,K=void 0,X=void 0;if(h){var oe=i.dataToPoint([P,k]);if(d){var ye=i.dataToPoint([V,k]);L=ye[0]}z=L,B=oe[1]+y,K=oe[0]-L,X=m,Math.abs(K)<f&&(K=(K<0?-1:1)*f)}else{var oe=i.dataToPoint([k,P]);if(d){var ye=i.dataToPoint([k,V]);L=ye[1]}z=oe[0]+y,B=L,K=m,X=oe[1]-L,Math.abs(X)<f&&(X=(X<=0?-1:1)*f)}g?(b[A]=z,b[A+1]=B,b[A+2]=h?K:X,x&&(x[A]=h?M.x:z,x[A+1]=h?B:M.y,x[A+2]=T),E[_]=_):C.setItemLayout(_,{x:z,y:B,width:K,height:X}),A+=3}g&&C.setLayout({largePoints:b,largeDataIndices:E,largeBackgroundPoints:x,valueAxisHorizontal:h})}}}}}}function qV(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function KV(e){return e.pipelineContext&&e.pipelineContext.large}function jae(e,t){var r=t.model.get("startValue");return r||(r=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?r>0?r:1:r))}var $ae=function(e,t,r,i){for(;r<i;){var n=r+i>>>1;e[n][1]<t?r=n+1:i=n}return r},XV=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="time",i}return t.prototype.getLabel=function(r){var i=this.getSetting("useUTC");return Fc(r.value,AE[s6(Lc(this._minLevelUnit))]||AE.second,i,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,i,n){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return l6(r,i,n,a,o)},t.prototype.getTicks=function(){var r=this._interval,i=this._extent,n=[];if(!r)return n;n.push({value:i[0],level:0});var o=this.getSetting("useUTC"),a=Jae(this._minLevelUnit,this._approxInterval,o,i);return n=n.concat(a),n.push({value:i[1],level:0}),n},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1]&&(i[0]-=qi,i[1]+=qi),i[1]===-1/0&&i[0]===1/0){var n=new Date;i[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),i[0]=i[1]-qi}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,i,n){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,i!=null&&this._approxInterval<i&&(this._approxInterval=i),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=Mw.length,l=Math.min($ae(Mw,this._approxInterval,0,s),s-1);this._interval=Mw[l][1],this._minLevelUnit=Mw[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return be(r)?r:+Jr(r)},t.prototype.contain=function(r){return Xs(this.parse(r),this._extent)},t.prototype.normalize=function(r){return Qs(this.parse(r),this._extent)},t.prototype.scale=function(r){return Js(r,this._extent)},t.type="time",t}(Oi),Mw=[["second",E0],["minute",M0],["hour",Vd],["quarter-day",Vd*6],["half-day",Vd*12],["day",qi*1.2],["half-week",qi*3.5],["week",qi*7],["month",qi*31],["quarter",qi*95],["half-year",RE/2],["year",RE]];function Yae(e,t,r,i){var n=Jr(t),o=Jr(r),a=function(g){return PE(n,g,i)===PE(o,g,i)},s=function(){return a("year")},l=function(){return s()&&a("month")},c=function(){return l()&&a("day")},u=function(){return c()&&a("hour")},d=function(){return u()&&a("minute")},h=function(){return d()&&a("second")},p=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return c();case"hour":return u();case"minute":return d();case"second":return h();case"millisecond":return p()}}function qae(e,t){return e/=qi,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Kae(e){var t=30*qi;return e/=t,e>6?6:e>3?3:e>2?2:1}function Zae(e){return e/=Vd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function ZV(e,t){return e/=t?M0:E0,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Xae(e){return Hy(e,!0)}function Qae(e,t,r){var i=new Date(e);switch(Lc(t)){case"year":case"month":i[kE(r)](0);case"day":i[LE(r)](1);case"hour":i[FE(r)](0);case"minute":i[OE(r)](0);case"second":i[NE(r)](0),i[zE(r)](0)}return i.getTime()}function Jae(e,t,r,i){var n=1e4,o=IE,a=0;function s(T,_,R,A,P,k,L){for(var V=new Date(_),z=_,B=V[A]();z<R&&z<=i[1];)L.push({value:z}),B+=T,V[P](B),z=V.getTime();L.push({value:z,notAdd:!0})}function l(T,_,R){var A=[],P=!_.length;if(!Yae(Lc(T),i[0],i[1],r)){P&&(_=[{value:Qae(new Date(i[0]),T,r)},{value:i[1]}]);for(var k=0;k<_.length-1;k++){var L=_[k].value,V=_[k+1].value;if(L!==V){var z=void 0,B=void 0,K=void 0,X=!1;switch(T){case"year":z=Math.max(1,Math.round(t/qi/365)),B=T0(r),K=u6(r);break;case"half-year":case"quarter":case"month":z=Kae(t),B=kc(r),K=kE(r);break;case"week":case"half-week":case"day":z=qae(t,31),B=wg(r),K=LE(r),X=!0;break;case"half-day":case"quarter-day":case"hour":z=Zae(t),B=zd(r),K=FE(r);break;case"minute":z=ZV(t,!0),B=Cg(r),K=OE(r);break;case"second":z=ZV(t,!1),B=bg(r),K=NE(r);break;case"millisecond":z=Xae(t),B=Sg(r),K=zE(r);break}s(z,L,V,B,K,X,A),T==="year"&&R.length>1&&k===0&&R.unshift({value:R[0].value-z})}}for(var k=0;k<A.length;k++)R.push(A[k]);return A}}for(var c=[],u=[],d=0,h=0,p=0;p<o.length&&a++<n;++p){var g=Lc(o[p]);if(a6(o[p])){l(o[p],c[c.length-1]||[],u);var f=o[p+1]?Lc(o[p+1]):null;if(g!==f){if(u.length){h=d,u.sort(function(T,_){return T.value-_.value});for(var v=[],m=0;m<u.length;++m){var y=u[m].value;(m===0||u[m-1].value!==y)&&(v.push(u[m]),y>=i[0]&&y<=i[1]&&d++)}var w=(i[1]-i[0])/t;if(d>w*1.5&&h>w/1.5||(c.push(v),d>w||e===o[p]))break}u=[]}}}for(var C=Pe(N(c,function(T){return Pe(T,function(_){return _.value>=i[0]&&_.value<=i[1]&&!_.notAdd})}),function(T){return T.length>0}),S=[],b=C.length-1,p=0;p<C.length;++p)for(var x=C[p],E=0;E<x.length;++E)S.push({value:x[E].value,level:b-p});S.sort(function(T,_){return T.value-_.value});for(var M=[],p=0;p<S.length;++p)(p===0||S[p].value!==S[p-1].value)&&M.push(S[p]);return M}Fi.registerClass(XV);var Tw=XV;var QV=Fi.prototype,Jg=Oi.prototype,ese=gt,tse=Math.floor,rse=Math.ceil,_w=Math.pow,fo=Math.log,XM=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Oi,r._interval=0,r}return t.prototype.getTicks=function(r){var i=this._originalScale,n=this._extent,o=i.getExtent(),a=Jg.getTicks.call(this,r);return N(a,function(s){var l=s.value,c=gt(_w(this.base,l));return c=l===n[0]&&this._fixMin?Rw(c,o[0]):c,c=l===n[1]&&this._fixMax?Rw(c,o[1]):c,{value:c}},this)},t.prototype.setExtent=function(r,i){var n=fo(this.base);r=fo(Math.max(0,r))/n,i=fo(Math.max(0,i))/n,Jg.setExtent.call(this,r,i)},t.prototype.getExtent=function(){var r=this.base,i=QV.getExtent.call(this);i[0]=_w(r,i[0]),i[1]=_w(r,i[1]);var n=this._originalScale,o=n.getExtent();return this._fixMin&&(i[0]=Rw(i[0],o[0])),this._fixMax&&(i[1]=Rw(i[1],o[1])),i},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var i=this.base;r[0]=fo(r[0])/fo(i),r[1]=fo(r[1])/fo(i),QV.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.calcNiceTicks=function(r){r=r||10;var i=this._extent,n=i[1]-i[0];if(!(n===1/0||n<=0)){var o=$O(n),a=r/n*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[gt(rse(i[0]/o)*o),gt(tse(i[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Jg.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=fo(r)/fo(this.base),Xs(r,this._extent)},t.prototype.normalize=function(r){return r=fo(r)/fo(this.base),Qs(r,this._extent)},t.prototype.scale=function(r){return r=Js(r,this._extent),_w(this.base,r)},t.type="log",t}(Fi),JV=XM.prototype;JV.getMinorTicks=Jg.getMinorTicks;JV.getLabel=Jg.getLabel;function Rw(e,t){return ese(e,Qr(t))}Fi.registerClass(XM);var e5=XM;var ise=function(){function e(t,r,i){this._prepareParams(t,r,i)}return e.prototype._prepareParams=function(t,r,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=r.get("min",!0);o==null&&(o=r.get("startValue",!0));var a=this._modelMinRaw=o;Z(a)?this._modelMinNum=Aw(t,a({min:i[0],max:i[1]})):a!=="dataMin"&&(this._modelMinNum=Aw(t,a));var s=this._modelMaxRaw=r.get("max",!0);if(Z(s)?this._modelMaxNum=Aw(t,s({min:i[0],max:i[1]})):s!=="dataMax"&&(this._modelMaxNum=Aw(t,s)),n)this._axisDataLen=r.getCategories().length;else{var l=r.get("boundaryGap"),c=O(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Tr(c[0],1),Tr(c[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,i=this._dataMax,n=this._axisDataLen,o=this._boundaryGapInner,a=t?null:i-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,c=s!=null,u=l!=null;s==null&&(s=t?n?0:NaN:r-o[0]*a),l==null&&(l=t?n?n-1:NaN:i+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var d=xs(s)||xs(l)||t&&!n;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!u&&(l=0));var h=this._determinedMin,p=this._determinedMax;return h!=null&&(s=h,c=!0),p!=null&&(l=p,u=!0),{min:s,max:l,minFixed:c,maxFixed:u,isBlank:d}},e.prototype.modifyDataMinMax=function(t,r){this[ose[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var i=nse[t];this[i]=r},e.prototype.freeze=function(){this.frozen=!0},e}();var nse={min:"_determinedMin",max:"_determinedMax"},ose={min:"_dataMin",max:"_dataMax"};function Iw(e,t,r){var i=e.rawExtentInfo;return i||(i=new ise(e,t,r),e.rawExtentInfo=i,i)}function Aw(e,t){return t==null?null:xs(t)?NaN:e.parse(t)}function QM(e,t){var r=e.type,i=Iw(e,t,e.getExtent()).calculate();e.setBlank(i.isBlank);var n=i.min,o=i.max,a=t.ecModel;if(a&&r==="time"){var s=KM("bar",a),l=!1;if(D(s,function(d){l=l||d.getBaseAxis()===t.axis}),l){var c=ZM(s),u=ase(n,o,t,c);n=u.min,o=u.max}}return{extent:[n,o],fixMin:i.minFixed,fixMax:i.maxFixed}}function ase(e,t,r,i){var n=r.axis.getExtent(),o=n[1]-n[0],a=YV(i,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;D(a,function(p){s=Math.min(p.offset,s)});var l=-1/0;D(a,function(p){l=Math.max(p.offset+p.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=t-e,d=1-(s+l)/o,h=u/d-u;return t+=h*(l/c),e-=h*(s/c),{min:e,max:t}}function Xo(e,t){var r=t,i=QM(e,r),n=i.extent,o=r.get("splitNumber");e instanceof e5&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(n[0],n[1]),e.calcNiceExtent({splitNumber:o,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function el(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new Qg({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Tw({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Fi.getClass(t)||Oi)}}function t5(e){var t=e.scale.getExtent(),r=t[0],i=t[1];return!(r>0&&i>0||r<0&&i<0)}function jc(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(i){return function(n,o){return e.scale.getFormattedLabel(n,o,i)}}(t):H(t)?function(i){return function(n){var o=e.scale.getLabel(n),a=i.replace("{value}",o??"");return a}}(t):Z(t)?function(i){return function(n,o){return r!=null&&(o=n.value-r),i(ef(e,n),o,n.level!=null?{level:n.level}:null)}}(t):function(i){return e.scale.getLabel(i)}}function ef(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function r5(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var i,n,o=r.getExtent();r instanceof Qg?n=r.count():(i=r.getTicks(),n=i.length);var a=e.getLabelModel(),s=jc(e),l,c=1;n>40&&(c=Math.ceil(n/40));for(var u=0;u<n;u+=c){var d=i?i[u]:{value:o[0]+u},h=s(d,u),p=a.getTextRect(h),g=sse(p,a.get("rotate")||0);l?l.union(g):l=g}return l}}function sse(e,t){var r=t*Math.PI/180,i=e.width,n=e.height,o=i*Math.abs(Math.cos(r))+Math.abs(n*Math.sin(r)),a=i*Math.abs(Math.sin(r))+Math.abs(n*Math.cos(r)),s=new le(e.x,e.y,o,a);return s}function Pw(e){var t=e.get("interval");return t??"auto"}function kw(e){return e.type==="category"&&Pw(e.getLabelModel())===0}function Zd(e,t){var r={};return D(e.mapDimensionsAll(t),function(i){r[bw(e,i)]=!0}),me(r)}function i5(e,t,r){t&&D(Zd(t,r),function(i){var n=t.getApproximateExtent(i);n[0]<e[0]&&(e[0]=n[0]),n[1]>e[1]&&(e[1]=n[1])})}var Qo=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}();var lse=1e-8;function n5(e,t){return Math.abs(e-t)<lse}function $a(e,t,r){var i=0,n=e[0];if(!n)return!1;for(var o=1;o<e.length;o++){var a=e[o];i+=bn(n[0],n[1],a[0],a[1],t,r),n=a}var s=e[0];return(!n5(n[0],s[0])||!n5(n[1],s[1]))&&(i+=bn(n[0],n[1],s[0],s[1],t,r)),i!==0}var cse=[];function JM(e,t){for(var r=0;r<e.length;r++)Bt(e[r],e[r],t)}function a5(e,t,r,i){for(var n=0;n<e.length;n++){var o=e[n];i&&(o=i.project(o)),o&&isFinite(o[0])&&isFinite(o[1])&&(Ui(t,t,o),Wi(r,r,o))}}function use(e){for(var t=0,r=0,i=0,n=e.length,o=e[n-1][0],a=e[n-1][1],s=0;s<n;s++){var l=e[s][0],c=e[s][1],u=o*c-l*a;t+=u,r+=(o+l)*u,i+=(a+c)*u,o=l,a=c}return t?[r/t/3,i/t/3,t]:[e[0][0]||0,e[0][1]||0]}var s5=function(){function e(t){this.name=t}return e.prototype.setCenter=function(t){this._center=t},e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},e}();var eT=function(){function e(t,r){this.type="polygon",this.exterior=t,this.interiors=r}return e}();var tT=function(){function e(t){this.type="linestring",this.points=t}return e}();var Fw=function(e){I(t,e);function t(r,i,n){var o=e.call(this,r)||this;return o.type="geoJSON",o.geometries=i,o._center=n&&[n[0],n[1]],o}return t.prototype.calcCenter=function(){for(var r=this.geometries,i,n=0,o=0;o<r.length;o++){var a=r[o],s=a.exterior,l=s&&s.length;l>n&&(i=a,n=l)}if(i)return use(i.exterior);var c=this.getBoundingRect();return[c.x+c.width/2,c.y+c.height/2]},t.prototype.getBoundingRect=function(r){var i=this._rect;if(i&&!r)return i;var n=[1/0,1/0],o=[-1/0,-1/0],a=this.geometries;return D(a,function(s){s.type==="polygon"?a5(s.exterior,n,o,r):D(s.points,function(l){a5(l,n,o,r)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])||(n[0]=n[1]=o[0]=o[1]=0),i=new le(n[0],n[1],o[0]-n[0],o[1]-n[1]),r||(this._rect=i),i},t.prototype.contain=function(r){var i=this.getBoundingRect(),n=this.geometries;if(!i.contain(r[0],r[1]))return!1;e:for(var o=0,a=n.length;o<a;o++){var s=n[o];if(s.type==="polygon"){var l=s.exterior,c=s.interiors;if($a(l,r[0],r[1])){for(var u=0;u<(c?c.length:0);u++)if($a(c[u],r[0],r[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(r,i,n,o){var a=this.getBoundingRect(),s=a.width/a.height;n?o||(o=n/s):n=s*o;for(var l=new le(r,i,n,o),c=a.calculateTransform(l),u=this.geometries,d=0;d<u.length;d++){var h=u[d];h.type==="polygon"?(JM(h.exterior,c),D(h.interiors,function(p){JM(p,c)})):D(h.points,function(p){JM(p,c)})}a=this._rect,a.copy(l),this._center=[a.x+a.width/2,a.y+a.height/2]},t.prototype.cloneShallow=function(r){r==null&&(r=this.name);var i=new t(r,this.geometries,this._center);return i._rect=this._rect,i.transformTo=null,i},t}(s5);var l5=function(e){I(t,e);function t(r,i){var n=e.call(this,r)||this;return n.type="geoSVG",n._elOnlyForCalculate=i,n}return t.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,i=r.getBoundingRect(),n=[i.x+i.width/2,i.y+i.height/2],o=Es(cse),a=r;a&&!a.isGeoSVGGraphicRoot;)bi(o,a.getLocalTransform(),o),a=a.parent;return gn(o,o),Bt(n,n,o),n},t}(s5);function dse(e){if(!e.UTF8Encoding)return e;var t=e,r=t.UTF8Scale;r==null&&(r=1024);var i=t.features;return D(i,function(n){var o=n.geometry,a=o.encodeOffsets,s=o.coordinates;if(a)switch(o.type){case"LineString":o.coordinates=c5(s,a,r);break;case"Polygon":rT(s,a,r);break;case"MultiLineString":rT(s,a,r);break;case"MultiPolygon":D(s,function(l,c){return rT(l,a[c],r)})}}),t.UTF8Encoding=!1,t}function rT(e,t,r){for(var i=0;i<e.length;i++)e[i]=c5(e[i],t[i],r)}function c5(e,t,r){for(var i=[],n=t[0],o=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,l=e.charCodeAt(a+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=n,l+=o,n=s,o=l,i.push([s/r,l/r])}return i}function iT(e,t){return e=dse(e),N(Pe(e.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var i=r.properties,n=r.geometry,o=[];switch(n.type){case"Polygon":var a=n.coordinates;o.push(new eT(a[0],a.slice(1)));break;case"MultiPolygon":D(n.coordinates,function(l){l[0]&&o.push(new eT(l[0],l.slice(1)))});break;case"LineString":o.push(new tT([n.coordinates]));break;case"MultiLineString":o.push(new tT(n.coordinates))}var s=new Fw(i[t||"name"],o,i.cp);return s.properties=i,s})}var tf=he();function u5(e,t){var r=N(t,function(i){return e.scale.parse(i)});return e.type==="time"&&r.length>0&&(r.sort(),r.unshift(r[0]),r.push(r[r.length-1])),r}function d5(e){var t=e.getLabelModel().get("customValues");if(t){var r=jc(e);return{labels:u5(e,t).map(function(i){var n={value:i};return{formattedLabel:r(n),rawLabel:e.scale.getLabel(n),tickValue:i}})}}return e.type==="category"?hse(e):gse(e)}function h5(e,t){var r=e.getTickModel().get("customValues");return r?{ticks:u5(e,r)}:e.type==="category"?pse(e,t):{ticks:N(e.scale.getTicks(),function(i){return i.value})}}function hse(e){var t=e.getLabelModel(),r=p5(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function p5(e,t){var r=g5(e,"labels"),i=Pw(t),n=f5(r,i);if(n)return n;var o,a;return Z(i)?o=w5(e,i):(a=i==="auto"?fse(e):i,o=y5(e,a)),v5(r,i,{labels:o,labelCategoryInterval:a})}function pse(e,t){var r=g5(e,"ticks"),i=Pw(t),n=f5(r,i);if(n)return n;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Z(i))o=w5(e,i,!0);else if(i==="auto"){var s=p5(e,e.getLabelModel());a=s.labelCategoryInterval,o=N(s.labels,function(l){return l.tickValue})}else a=i,o=y5(e,a,!0);return v5(r,i,{ticks:o,tickCategoryInterval:a})}function gse(e){var t=e.scale.getTicks(),r=jc(e);return{labels:N(t,function(i,n){return{level:i.level,formattedLabel:r(i,n),rawLabel:e.scale.getLabel(i),tickValue:i.value}})}}function g5(e,t){return tf(e)[t]||(tf(e)[t]=[])}function f5(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function v5(e,t,r){return e.push({key:t,value:r}),r}function fse(e){var t=tf(e).autoInterval;return t??(tf(e).autoInterval=e.calculateCategoryInterval())}function m5(e){var t=vse(e),r=jc(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,n=e.scale,o=n.getExtent(),a=n.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],c=e.dataToCoord(l+1)-e.dataToCoord(l),u=Math.abs(c*Math.cos(i)),d=Math.abs(c*Math.sin(i)),h=0,p=0;l<=o[1];l+=s){var g=0,f=0,v=Bo(r({value:l}),t.font,"center","top");g=v.width*1.3,f=v.height*1.3,h=Math.max(h,g,7),p=Math.max(p,f,7)}var m=h/u,y=p/d;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var w=Math.max(0,Math.floor(Math.min(m,y))),C=tf(e.model),S=e.getExtent(),b=C.lastAutoInterval,x=C.lastTickCount;return b!=null&&x!=null&&Math.abs(b-w)<=1&&Math.abs(x-a)<=1&&b>w&&C.axisExtent0===S[0]&&C.axisExtent1===S[1]?w=b:(C.lastTickCount=a,C.lastAutoInterval=w,C.axisExtent0=S[0],C.axisExtent1=S[1]),w}function vse(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function y5(e,t,r){var i=jc(e),n=e.scale,o=n.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),c=o[0],u=n.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var d=kw(e),h=a.get("showMinLabel")||d,p=a.get("showMaxLabel")||d;h&&c!==o[0]&&f(o[0]);for(var g=c;g<=o[1];g+=l)f(g);p&&g-l!==o[1]&&f(o[1]);function f(v){var m={value:v};s.push(r?v:{formattedLabel:i(m),rawLabel:n.getLabel(m),tickValue:v})}return s}function w5(e,t,r){var i=e.scale,n=jc(e),o=[];return D(i.getTicks(),function(a){var s=i.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:n(a),rawLabel:s,tickValue:l})}),o}var C5=[0,1],mse=function(){function e(t,r,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=i||[0,0]}return e.prototype.contain=function(t){var r=this._extent,i=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return t>=i&&t<=n},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return By(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;i[0]=t,i[1]=r},e.prototype.dataToCoord=function(t,r){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(i=i.slice(),b5(i,n.count())),Ye(t,C5,i,r)},e.prototype.coordToData=function(t,r){var i=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(i=i.slice(),b5(i,n.count()));var o=Ye(t,i,C5,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),i=h5(this,r),n=i.ticks,o=N(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return yse(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var i=this.scale.getMinorTicks(r),n=N(i,function(o){return N(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return n},e.prototype.getViewLabels=function(){return d5(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),i=r[1]-r[0]+(this.onBand?1:0);i===0&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/i},e.prototype.calculateCategoryInterval=function(){return m5(this)},e}();function b5(e,t){var r=e[1]-e[0],i=t,n=r/i/2;e[0]+=n,e[1]-=n}function yse(e,t,r,i){var n=t.length;if(!e.onBand||r||!n)return;var o=e.getExtent(),a,s;if(n===1)t[0].coord=o[0],a=t[1]={coord:o[1]};else{var l=t[n-1].tickValue-t[0].tickValue,c=(t[n-1].coord-t[0].coord)/l;D(t,function(p){p.coord-=c/2});var u=e.scale.getExtent();s=1+u[1]-t[n-1].tickValue,a={coord:t[n-1].coord+c*s},t.push(a)}var d=o[0]>o[1];h(t[0].coord,o[0])&&(i?t[0].coord=o[0]:t.shift()),i&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(i?a.coord=o[1]:t.pop()),i&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(p,g){return p=gt(p),g=gt(g),d?p>g:p<g}}var xr=mse;var rf=Math.PI*2,$c=vr.CMD,wse=["top","right","bottom","left"];function Cse(e,t,r,i,n){var o=r.width,a=r.height;switch(e){case"top":i.set(r.x+o/2,r.y-t),n.set(0,-1);break;case"bottom":i.set(r.x+o/2,r.y+a+t),n.set(0,1);break;case"left":i.set(r.x-t,r.y+a/2),n.set(-1,0);break;case"right":i.set(r.x+o+t,r.y+a/2),n.set(1,0);break}}function bse(e,t,r,i,n,o,a,s,l){a-=e,s-=t;var c=Math.sqrt(a*a+s*s);a/=c,s/=c;var u=a*r+e,d=s*r+t;if(Math.abs(i-n)%rf<1e-4)return l[0]=u,l[1]=d,c-r;if(o){var h=i;i=_r(n),n=_r(h)}else i=_r(i),n=_r(n);i>n&&(n+=rf);var p=Math.atan2(s,a);if(p<0&&(p+=rf),p>=i&&p<=n||p+rf>=i&&p+rf<=n)return l[0]=u,l[1]=d,c-r;var g=r*Math.cos(i)+e,f=r*Math.sin(i)+t,v=r*Math.cos(n)+e,m=r*Math.sin(n)+t,y=(g-a)*(g-a)+(f-s)*(f-s),w=(v-a)*(v-a)+(m-s)*(m-s);return y<w?(l[0]=g,l[1]=f,Math.sqrt(y)):(l[0]=v,l[1]=m,Math.sqrt(w))}function Ow(e,t,r,i,n,o,a,s){var l=n-e,c=o-t,u=r-e,d=i-t,h=Math.sqrt(u*u+d*d);u/=h,d/=h;var p=l*u+c*d,g=p/h;s&&(g=Math.min(Math.max(g,0),1)),g*=h;var f=a[0]=e+g*u,v=a[1]=t+g*d;return Math.sqrt((f-n)*(f-n)+(v-o)*(v-o))}function S5(e,t,r,i,n,o,a){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i);var s=e+r,l=t+i,c=a[0]=Math.min(Math.max(n,e),s),u=a[1]=Math.min(Math.max(o,t),l);return Math.sqrt((c-n)*(c-n)+(u-o)*(u-o))}var vo=[];function Sse(e,t,r){var i=S5(t.x,t.y,t.width,t.height,e.x,e.y,vo);return r.set(vo[0],vo[1]),i}function xse(e,t,r){for(var i=0,n=0,o=0,a=0,s,l,c=1/0,u=t.data,d=e.x,h=e.y,p=0;p<u.length;){var g=u[p++];p===1&&(i=u[p],n=u[p+1],o=i,a=n);var f=c;switch(g){case $c.M:o=u[p++],a=u[p++],i=o,n=a;break;case $c.L:f=Ow(i,n,u[p],u[p+1],d,h,vo,!0),i=u[p++],n=u[p++];break;case $c.C:f=my(i,n,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],d,h,vo),i=u[p++],n=u[p++];break;case $c.Q:f=wy(i,n,u[p++],u[p++],u[p],u[p+1],d,h,vo),i=u[p++],n=u[p++];break;case $c.A:var v=u[p++],m=u[p++],y=u[p++],w=u[p++],C=u[p++],S=u[p++];p+=1;var b=!!(1-u[p++]);s=Math.cos(C)*y+v,l=Math.sin(C)*w+m,p<=1&&(o=s,a=l);var x=(d-v)*w/y+v;f=bse(v,m,w,C,C+S,b,x,h,vo),i=Math.cos(C+S)*y+v,n=Math.sin(C+S)*w+m;break;case $c.R:o=i=u[p++],a=n=u[p++];var E=u[p++],M=u[p++];f=S5(o,a,E,M,d,h,vo);break;case $c.Z:f=Ow(i,n,o,a,d,h,vo,!0),i=o,n=a;break}f<c&&(c=f,r.set(vo[0],vo[1]))}return c}var mo=new _e,Tt=new _e,Jt=new _e,ea=new _e,Jo=new _e;function oT(e,t){if(e){var r=e.getTextGuideLine(),i=e.getTextContent();if(i&&r){var n=e.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],a=n.candidates||wse,s=i.getBoundingRect().clone();s.applyTransform(i.getComputedTransform());var l=1/0,c=n.anchor,u=e.getComputedTransform(),d=u&&gn([],u),h=t.get("length2")||0;c&&Jt.copy(c);for(var p=0;p<a.length;p++){var g=a[p];Cse(g,0,s,mo,ea),_e.scaleAndAdd(Tt,mo,ea,h),Tt.transform(d);var f=e.getBoundingRect(),v=c?c.distance(Tt):e instanceof ce?xse(Tt,e.path,Jt):Sse(Tt,f,Jt);v<l&&(l=v,Tt.transform(u),Jt.transform(u),Jt.toArray(o[0]),Tt.toArray(o[1]),mo.toArray(o[2]))}aT(o,t.get("minTurnAngle")),r.setShape({points:o})}}}var Nw=[],ai=new _e;function aT(e,t){if(t<=180&&t>0){t=t/180*Math.PI,mo.fromArray(e[0]),Tt.fromArray(e[1]),Jt.fromArray(e[2]),_e.sub(ea,mo,Tt),_e.sub(Jo,Jt,Tt);var r=ea.len(),i=Jo.len();if(!(r<.001||i<.001)){ea.scale(1/r),Jo.scale(1/i);var n=ea.dot(Jo),o=Math.cos(t);if(o<n){var a=Ow(Tt.x,Tt.y,Jt.x,Jt.y,mo.x,mo.y,Nw,!1);ai.fromArray(Nw),ai.scaleAndAdd(Jo,a/Math.tan(Math.PI-t));var s=Jt.x!==Tt.x?(ai.x-Tt.x)/(Jt.x-Tt.x):(ai.y-Tt.y)/(Jt.y-Tt.y);if(isNaN(s))return;s<0?_e.copy(ai,Tt):s>1&&_e.copy(ai,Jt),ai.toArray(e[1])}}}}function x5(e,t,r){if(r<=180&&r>0){r=r/180*Math.PI,mo.fromArray(e[0]),Tt.fromArray(e[1]),Jt.fromArray(e[2]),_e.sub(ea,Tt,mo),_e.sub(Jo,Jt,Tt);var i=ea.len(),n=Jo.len();if(!(i<.001||n<.001)){ea.scale(1/i),Jo.scale(1/n);var o=ea.dot(t),a=Math.cos(r);if(o<a){var s=Ow(Tt.x,Tt.y,Jt.x,Jt.y,mo.x,mo.y,Nw,!1);ai.fromArray(Nw);var l=Math.PI/2,c=Math.acos(Jo.dot(t)),u=l+c-r;if(u>=l)_e.copy(ai,Jt);else{ai.scaleAndAdd(Jo,s/Math.tan(Math.PI/2-u));var d=Jt.x!==Tt.x?(ai.x-Tt.x)/(Jt.x-Tt.x):(ai.y-Tt.y)/(Jt.y-Tt.y);if(isNaN(d))return;d<0?_e.copy(ai,Tt):d>1&&_e.copy(ai,Jt)}ai.toArray(e[1])}}}}function nT(e,t,r,i){var n=r==="normal",o=n?e:e.ensureState(r);o.ignore=t;var a=i.get("smooth");a&&a===!0&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=i.getModel("lineStyle").getLineStyle();n?e.useStyle(s):o.style=s}function Dse(e,t){var r=t.smooth,i=t.points;if(i)if(e.moveTo(i[0][0],i[0][1]),r>0&&i.length>=3){var n=pn(i[0],i[1]),o=pn(i[1],i[2]);if(!n||!o){e.lineTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]);return}var a=Math.min(n,o)*r,s=ld([],i[1],i[0],a/n),l=ld([],i[1],i[2],a/o),c=ld([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var u=1;u<i.length;u++)e.lineTo(i[u][0],i[u][1])}function Xd(e,t,r){var i=e.getTextGuideLine(),n=e.getTextContent();if(!n){i&&e.removeTextGuideLine();return}for(var o=t.normal,a=o.get("show"),s=n.ignore,l=0;l<Vs.length;l++){var c=Vs[l],u=t[c],d=c==="normal";if(u){var h=u.get("show"),p=d?s:de(n.states[c]&&n.states[c].ignore,s);if(p||!de(h,a)){var g=d?i:i&&i.states[c];g&&(g.ignore=!0),i&&nT(i,!0,c,u);continue}i||(i=new Rt,e.setTextGuideLine(i),!d&&(s||!a)&&nT(i,!0,"normal",t.normal),e.stateProxy&&(i.stateProxy=e.stateProxy)),nT(i,!1,c,u)}}if(i){Q(i.style,r),i.style.fill=null;var f=o.get("showAbove"),v=e.textGuideLineConfig=e.textGuideLineConfig||{};v.showAbove=f||!1,i.buildPath=Dse}}function Qd(e,t){t=t||"labelLine";for(var r={normal:e.getModel(t)},i=0;i<cr.length;i++){var n=cr[i];r[n]=e.getModel([n,t])}return r}function zw(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(!i.defaultAttr.ignore){var n=i.label,o=n.getComputedTransform(),a=n.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=n.style.margin||0,c=a.clone();c.applyTransform(o),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new kd(a,o):null;t.push({label:n,labelLine:i.labelLine,rect:c,localRect:a,obb:u,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:s,transform:o})}}return t}function D5(e,t,r,i,n,o){var a=e.length;if(a<2)return;e.sort(function(M,T){return M.rect[t]-T.rect[t]});for(var s=0,l,c=!1,u=[],d=0,h=0;h<a;h++){var p=e[h],g=p.rect;l=g[t]-s,l<0&&(g[t]-=l,p.label[t]-=l,c=!0);var f=Math.max(-l,0);u.push(f),d+=f,s=g[t]+g[r]}d>0&&o&&b(-d/a,0,a);var v=e[0],m=e[a-1],y,w;C(),y<0&&x(-y,.8),w<0&&x(w,.8),C(),S(y,w,1),S(w,y,-1),C(),y<0&&E(-y),w<0&&E(w);function C(){y=v.rect[t]-i,w=n-m.rect[t]-m.rect[r]}function S(M,T,_){if(M<0){var R=Math.min(T,-M);if(R>0){b(R*_,0,a);var A=R+M;A<0&&x(-A*_,1)}else x(-M*_,1)}}function b(M,T,_){M!==0&&(c=!0);for(var R=T;R<_;R++){var A=e[R],P=A.rect;P[t]+=M,A.label[t]+=M}}function x(M,T){for(var _=[],R=0,A=1;A<a;A++){var P=e[A-1].rect,k=Math.max(e[A].rect[t]-P[t]-P[r],0);_.push(k),R+=k}if(R){var L=Math.min(Math.abs(M)/R,T);if(M>0)for(var A=0;A<a-1;A++){var V=_[A]*L;b(V,0,A+1)}else for(var A=a-1;A>0;A--){var V=_[A-1]*L;b(-V,A,a)}}}function E(M){var T=M<0?-1:1;M=Math.abs(M);for(var _=Math.ceil(M/(a-1)),R=0;R<a-1;R++)if(T>0?b(_,0,R+1):b(-_,a-R-1,a),M-=_,M<=0)return}return c}function E5(e,t,r,i){return D5(e,"x","width",t,r,i)}function Vw(e,t,r,i){return D5(e,"y","height",t,r,i)}function Bw(e){var t=[];e.sort(function(f,v){return v.priority-f.priority});var r=new le(0,0,0,0);function i(f){if(!f.ignore){var v=f.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}f.ignore=!0}for(var n=0;n<e.length;n++){var o=e[n],a=o.axisAligned,s=o.localRect,l=o.transform,c=o.label,u=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var d=o.obb,h=!1,p=0;p<t.length;p++){var g=t[p];if(r.intersect(g.rect)){if(a&&g.axisAligned){h=!0;break}if(g.obb||(g.obb=new kd(g.localRect,g.transform)),d||(d=new kd(s,l)),d.intersect(g.obb)){h=!0;break}}}h?(i(c),u&&i(u)):(c.attr("ignore",o.defaultAttr.ignore),u&&u.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function Ese(e){if(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].slice());return t}}function Mse(e,t){var r=e.label,i=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:Ese(i&&i.shape.points)}}var M5=["align","verticalAlign","width","height","fontSize"],si=new xi,sT=he(),Tse=he();function Gw(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];t[n]!=null&&(e[n]=t[n])}}var Hw=["x","y","rotation"],_se=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(t,r,i,n,o){var a=n.style,s=n.__hostTarget,l=s.textConfig||{},c=n.getComputedTransform(),u=n.getBoundingRect().plain();le.applyTransform(u,u,c),c?si.setLocalTransform(c):(si.x=si.y=si.rotation=si.originX=si.originY=0,si.scaleX=si.scaleY=1),si.rotation=_r(si.rotation);var d=n.__hostTarget,h;if(d){h=d.getBoundingRect().plain();var p=d.getComputedTransform();le.applyTransform(h,h,p)}var g=h&&d.getTextGuideLine();this._labelList.push({label:n,labelLine:g,seriesModel:i,dataIndex:t,dataType:r,layoutOption:o,computedLayoutOption:null,rect:u,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:n.ignore,labelGuideIgnore:g&&g.ignore,x:si.x,y:si.y,scaleX:si.scaleX,scaleY:si.scaleY,rotation:si.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:n.cursor,attachedPos:l.position,attachedRot:l.rotation}})},e.prototype.addLabelsOfSeries=function(t){var r=this;this._chartViewList.push(t);var i=t.__model,n=i.get("labelLayout");(Z(n)||me(n).length)&&t.group.traverse(function(o){if(o.ignore)return!0;var a=o.getTextContent(),s=ae(o);a&&!a.disableLabelLayout&&r._addLabel(s.dataIndex,s.dataType,i,a,n)})},e.prototype.updateLayoutConfig=function(t){var r=t.getWidth(),i=t.getHeight();function n(w,C){return function(){oT(w,C)}}for(var o=0;o<this._labelList.length;o++){var a=this._labelList[o],s=a.label,l=s.__hostTarget,c=a.defaultAttr,u=void 0;Z(a.layoutOption)?u=a.layoutOption(Mse(a,l)):u=a.layoutOption,u=u||{},a.computedLayoutOption=u;var d=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*d:c.attachedRot,offset:[u.dx||0,u.dy||0]});var h=!1;if(u.x!=null?(s.x=j(u.x,r),s.setStyle("x",0),h=!0):(s.x=c.x,s.setStyle("x",c.style.x)),u.y!=null?(s.y=j(u.y,i),s.setStyle("y",0),h=!0):(s.y=c.y,s.setStyle("y",c.style.y)),u.labelLinePoints){var p=l.getTextGuideLine();p&&(p.setShape({points:u.labelLinePoints}),h=!1)}var g=sT(s);g.needsUpdateLabelLine=h,s.rotation=u.rotate!=null?u.rotate*d:c.rotation,s.scaleX=c.scaleX,s.scaleY=c.scaleY;for(var f=0;f<M5.length;f++){var v=M5[f];s.setStyle(v,u[v]!=null?u[v]:c.style[v])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var m=a.seriesModel;if(a.dataIndex!=null){var y=a.seriesModel.getData(a.dataType);m=y.getItemModel(a.dataIndex)}s.on("drag",n(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=c.cursor}},e.prototype.layout=function(t){var r=t.getWidth(),i=t.getHeight(),n=zw(this._labelList),o=Pe(n,function(l){return l.layoutOption.moveOverlap==="shiftX"}),a=Pe(n,function(l){return l.layoutOption.moveOverlap==="shiftY"});E5(o,0,r),Vw(a,0,i);var s=Pe(n,function(l){return l.layoutOption.hideOverlap});Bw(s)},e.prototype.processLabelsOverall=function(){var t=this;D(this._chartViewList,function(r){var i=r.__model,n=r.ignoreLabelLineUpdate,o=i.isAnimationEnabled();r.group.traverse(function(a){if(a.ignore&&!a.forceLabelAnimation)return!0;var s=!n,l=a.getTextContent();!s&&l&&(s=sT(l).needsUpdateLabelLine),s&&t._updateLabelLine(a,i),o&&t._animateLabels(a,i)})})},e.prototype._updateLabelLine=function(t,r){var i=t.getTextContent(),n=ae(t),o=n.dataIndex;if(i&&o!=null){var a=r.getData(n.dataType),s=a.getItemModel(o),l={},c=a.getItemVisual(o,"style");if(c){var u=a.getVisual("drawType");l.stroke=c[u]}var d=s.getModel("labelLine");Xd(t,Qd(s),l),oT(t,d)}},e.prototype._animateLabels=function(t,r){var i=t.getTextContent(),n=t.getTextGuideLine();if(i&&(t.forceLabelAnimation||!i.ignore&&!i.invisible&&!t.disableLabelAnimation&&!La(t))){var o=sT(i),a=o.oldLayout,s=ae(t),l=s.dataIndex,c={x:i.x,y:i.y,rotation:i.rotation},u=r.getData(s.dataType);if(a){i.attr(a);var h=t.prevStates;h&&(pe(h,"select")>=0&&i.attr(o.oldLayoutSelect),pe(h,"emphasis")>=0&&i.attr(o.oldLayoutEmphasis)),Me(i,c,r,l)}else if(i.attr(c),!Va(i).valueAnimation){var d=de(i.style.opacity,1);i.style.opacity=0,je(i,{style:{opacity:d}},r,l)}if(o.oldLayout=c,i.states.select){var p=o.oldLayoutSelect={};Gw(p,c,Hw),Gw(p,i.states.select,Hw)}if(i.states.emphasis){var g=o.oldLayoutEmphasis={};Gw(g,c,Hw),Gw(g,i.states.emphasis,Hw)}C0(i,l,u,r,r)}if(n&&!n.ignore&&!n.invisible){var o=Tse(n),a=o.oldLayout,f={points:n.shape.points};a?(n.attr({shape:a}),Me(n,{shape:f},r)):(n.setShape(f),n.style.strokePercent=0,je(n,{style:{strokePercent:1}},r)),o.oldLayout=f}},e}(),T5=_se;var lT=he();function cT(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){var n=lT(r).labelManager;n||(n=lT(r).labelManager=new T5),n.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(t,r,i){var n=lT(r).labelManager;i.updatedSeries.forEach(function(o){n.addLabelsOfSeries(r.getViewOfSeriesModel(o))}),n.updateLayoutConfig(r),n.layout(r),n.processLabelsOverall()})}var uT=Math.sin,dT=Math.cos,_5=Math.PI,Yc=Math.PI*2,Rse=180/_5,Ase=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,i,n,o,a){this._add("C",t,r,i,n,o,a)},e.prototype.quadraticCurveTo=function(t,r,i,n){this._add("Q",t,r,i,n)},e.prototype.arc=function(t,r,i,n,o,a){this.ellipse(t,r,i,i,0,n,o,a)},e.prototype.ellipse=function(t,r,i,n,o,a,s,l){var c=s-a,u=!l,d=Math.abs(c),h=Vo(d-Yc)||(u?c>=Yc:-c>=Yc),p=c>0?c%Yc:c%Yc+Yc,g=!1;h?g=!0:Vo(d)?g=!1:g=p>=_5==!!u;var f=t+i*dT(a),v=r+n*uT(a);this._start&&this._add("M",f,v);var m=Math.round(o*Rse);if(h){var y=1/this._p,w=(u?1:-1)*(Yc-y);this._add("A",i,n,m,1,+u,t+i*dT(a+w),r+n*uT(a+w)),y>.01&&this._add("A",i,n,m,0,+u,f,v)}else{var C=t+i*dT(s),S=r+n*uT(s);this._add("A",i,n,m,+g,+u,C,S)}},e.prototype.rect=function(t,r,i,n){this._add("M",t,r),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,i,n,o,a,s,l,c){for(var u=[],d=this._p,h=1;h<arguments.length;h++){var p=arguments[h];if(isNaN(p)){this._invalid=!0;return}u.push(Math.round(p*d)/d)}this._d.push(t+u.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),Uw=Ase;var nf="none",Ise=Math.round;function Pse(e){var t=e.fill;return t!=null&&t!==nf}function kse(e){var t=e.stroke;return t!=null&&t!==nf}var hT=["lineCap","miterLimit","lineJoin"],Lse=N(hT,function(e){return"stroke-"+e.toLowerCase()});function pT(e,t,r,i){var n=t.opacity==null?1:t.opacity;if(r instanceof vt){e("opacity",n);return}if(Pse(t)){var o=Is(t.fill);e("fill",o.color);var a=t.fillOpacity!=null?t.fillOpacity*o.opacity*n:o.opacity*n;(i||a<1)&&e("fill-opacity",a)}else e("fill",nf);if(kse(t)){var s=Is(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?r.getLineScale():1,c=l?(t.lineWidth||0)/l:0,u=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*n:s.opacity*n,d=t.strokeFirst;if((i||c!==1)&&e("stroke-width",c),(i||d)&&e("paint-order",d?"stroke":"fill"),(i||u<1)&&e("stroke-opacity",u),t.lineDash){var h=Bg(r),p=h[0],g=h[1];p&&(g=Ise(g||0),e("stroke-dasharray",p.join(",")),(g||i)&&e("stroke-dashoffset",g))}else i&&e("stroke-dasharray",nf);for(var f=0;f<hT.length;f++){var v=hT[f];if(i||t[v]!==Dd[v]){var m=t[v]||Dd[v];m&&e(Lse[f],m)}}}else i&&e("stroke",nf)}var R5="http://www.w3.org/2000/svg",gT="http://www.w3.org/1999/xlink",A5="http://www.w3.org/2000/xmlns/",I5="http://www.w3.org/XML/1998/namespace",fT="ecmeta_";function Ww(e){return document.createElementNS(R5,e)}function er(e,t,r,i,n){return{tag:e,attrs:r||{},children:i,text:n,key:t}}function Fse(e,t){var r=[];if(t)for(var i in t){var n=t[i],o=i;n!==!1&&(n!==!0&&n!=null&&(o+='="'+n+'"'),r.push(o))}return"<"+e+" "+r.join(" ")+">"}function Ose(e){return"</"+e+">"}function of(e,t){t=t||{};var r=t.newline?`
`:"";function i(n){var o=n.children,a=n.tag,s=n.attrs,l=n.text;return Fse(a,s)+(a!=="style"?gr(l):l||"")+(o?""+r+N(o,function(c){return i(c)}).join(r)+r:"")+Ose(a)}return i(e)}function P5(e,t,r){r=r||{};var i=r.newline?`
`:"",n=" {"+i,o=i+"}",a=N(me(e),function(l){return l+n+N(me(e[l]),function(c){return c+":"+e[l][c]+";"}).join(i)+o}).join(i),s=N(me(t),function(l){return"@keyframes "+l+n+N(me(t[l]),function(c){return c+n+N(me(t[l][c]),function(u){var d=t[l][c][u];return u==="d"&&(d='path("'+d+'")'),u+":"+d+";"}).join(i)+o}).join(i)+o}).join(i);return!a&&!s?"":["<![CDATA[",a,s,"]]>"].join(i)}function af(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function vT(e,t,r,i){return er("svg","root",{width:e,height:t,xmlns:R5,"xmlns:xlink":gT,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+e+" "+t:!1},r)}var Nse=0;function jw(){return Nse++}var k5={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},qc="transform-origin";function zse(e,t,r){var i=F({},e.shape);F(i,t),e.buildPath(r,i);var n=new Uw;return n.reset(Ry(e)),r.rebuildPath(n,1),n.generateStr(),n.getStr()}function Vse(e,t){var r=t.originX,i=t.originY;(r||i)&&(e[qc]=r+"px "+i+"px")}var Bse={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function F5(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function Gse(e,t,r){var i=e.shape.paths,n={},o,a;if(D(i,function(l){var c=af(r.zrId);c.animation=!0,sf(l,{},c,!0);var u=c.cssAnims,d=c.cssNodes,h=me(u),p=h.length;if(p){a=h[p-1];var g=u[a];for(var f in g){var v=g[f];n[f]=n[f]||{d:""},n[f].d+=v.d||""}for(var m in d){var y=d[m].animation;y.indexOf(a)>=0&&(o=y)}}}),!!o){t.d=!1;var s=F5(n,r);return o.replace(a,s)}}function L5(e){return H(e)?k5[e]?"cubic-bezier("+k5[e]+")":pd(e)?e:"":""}function sf(e,t,r,i){var n=e.animators,o=n.length,a=[];if(e instanceof Pd){var s=Gse(e,t,r);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},c=0;c<o;c++){var u=n[c],d=[u.getMaxTime()/1e3+"s"],h=L5(u.getClip().easing),p=u.getDelay();h?d.push(h):d.push("linear"),p&&d.push(p/1e3+"s"),u.getLoop()&&d.push("infinite");var g=d.join(" ");l[g]=l[g]||[g,[]],l[g][1].push(u)}function f(y){var w=y[1],C=w.length,S={},b={},x={},E="animation-timing-function";function M(xe,ze,Ae){for(var ve=xe.getTracks(),Ie=xe.getMaxTime(),At=0;At<ve.length;At++){var Ze=ve[At];if(Ze.needsAnimate()){var Wt=Ze.keyframes,Ot=Ze.propName;if(Ae&&(Ot=Ae(Ot)),Ot)for(var Fr=0;Fr<Wt.length;Fr++){var va=Wt[Fr],vi=Math.round(va.time/Ie*100)+"%",yv=L5(va.easing),ss=va.rawValue;(H(ss)||be(ss))&&(ze[vi]=ze[vi]||{},ze[vi][Ot]=va.rawValue,yv&&(ze[vi][E]=yv))}}}}for(var T=0;T<C;T++){var _=w[T],R=_.targetName;R?R==="shape"&&M(_,b):!i&&M(_,S)}for(var A in S){var P={};SD(P,e),F(P,S[A]);var k=Ay(P),L=S[A][E];x[A]=k?{transform:k}:{},Vse(x[A],P),L&&(x[A][E]=L)}var V,z=!0;for(var A in b){x[A]=x[A]||{};var B=!V,L=b[A][E];B&&(V=new vr);var K=V.len();V.reset(),x[A].d=zse(e,b[A],V);var X=V.len();if(!B&&K!==X){z=!1;break}L&&(x[A][E]=L)}if(!z)for(var A in x)delete x[A].d;if(!i)for(var T=0;T<C;T++){var _=w[T],R=_.targetName;R==="style"&&M(_,x,function(ve){return Bse[ve]})}for(var oe=me(x),ye=!0,we,T=1;T<oe.length;T++){var Oe=oe[T-1],$e=oe[T];if(x[Oe][qc]!==x[$e][qc]){ye=!1;break}we=x[Oe][qc]}if(ye&&we){for(var A in x)x[A][qc]&&delete x[A][qc];t[qc]=we}if(Pe(oe,function(xe){return me(x[xe]).length>0}).length){var Ne=F5(x,r);return Ne+" "+y[0]+" both"}}for(var v in l){var s=f(l[v]);s&&a.push(s)}if(a.length){var m=r.zrId+"-cls-"+jw();r.cssNodes["."+m]={animation:a.join(",")},t.class=m}}function N5(e,t,r){if(!e.ignore)if(e.isSilent()){var i={"pointer-events":"none"};O5(i,t,r,!0)}else{var n=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},o=n.fill;if(!o){var a=e.style&&e.style.fill,s=e.states.select&&e.states.select.style&&e.states.select.style.fill,l=e.currentStates.indexOf("select")>=0&&s||a;l&&(o=Gp(l))}var c=n.lineWidth;if(c){var u=!n.strokeNoScale&&e.transform?e.transform[0]:1;c=c/u}var i={cursor:"pointer"};o&&(i.fill=o),n.stroke&&(i.stroke=n.stroke),c&&(i["stroke-width"]=c),O5(i,t,r,!0)}}function O5(e,t,r,i){var n=JSON.stringify(e),o=r.cssStyleCache[n];o||(o=r.zrId+"-cls-"+jw(),r.cssStyleCache[n]=o,r.cssNodes["."+o+(i?":hover":"")]=e),t.class=t.class?t.class+" "+o:o}var lf=Math.round;function G5(e){return e&&H(e.src)}function H5(e){return e&&Z(e.toDataURL)}function mT(e,t,r,i){pT(function(n,o){var a=n==="fill"||n==="stroke";a&&_y(o)?bT(t,e,n,i):a&&Hp(o)?ST(r,e,n,i):a&&o==="none"?e[n]="transparent":e[n]=o},t,r,!1),qse(r,e,i)}function yT(e,t){var r=BO(t);r&&(r.each(function(i,n){i!=null&&(e[(fT+n).toLowerCase()]=i+"")}),t.isSilent()&&(e[fT+"silent"]="true"))}function z5(e){return Vo(e[0]-1)&&Vo(e[1])&&Vo(e[2])&&Vo(e[3]-1)}function Hse(e){return Vo(e[4])&&Vo(e[5])}function wT(e,t,r){if(t&&!(Hse(t)&&z5(t))){var i=r?10:1e4;e.transform=z5(t)?"translate("+lf(t[4]*i)/i+" "+lf(t[5]*i)/i+")":gO(t)}}function V5(e,t,r){for(var i=e.points,n=[],o=0;o<i.length;o++)n.push(lf(i[o][0]*r)/r),n.push(lf(i[o][1]*r)/r);t.points=n.join(" ")}function B5(e){return!e.smooth}function Use(e){var t=N(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,i,n){for(var o=0;o<t.length;o++){var a=t[o],s=r[a[0]];s!=null&&(i[a[1]]=lf(s*n)/n)}}}var Wse={circle:[Use(["cx","cy","r"])],polyline:[V5,B5],polygon:[V5,B5]};function jse(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function U5(e,t){var r=e.style,i=e.shape,n=Wse[e.type],o={},a=t.animation,s="path",l=e.style.strokePercent,c=t.compress&&Ry(e)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](i))&&!(a&&jse(e))&&!(l<1)){s=e.type;var u=Math.pow(10,c);n[0](i,o,u)}else{var d=!e.path||e.shapeChanged();e.path||e.createPathProxy();var h=e.path;d&&(h.beginPath(),e.buildPath(h,e.shape),e.pathUpdated());var p=h.getVersion(),g=e,f=g.__svgPathBuilder;(g.__svgPathVersion!==p||!f||l!==g.__svgPathStrokePercent)&&(f||(f=g.__svgPathBuilder=new Uw),f.reset(c),h.rebuildPath(f,l),f.generateStr(),g.__svgPathVersion=p,g.__svgPathStrokePercent=l),o.d=f.getStr()}return wT(o,e.transform),mT(o,r,e,t),yT(o,e),t.animation&&sf(e,o,t),t.emphasis&&N5(e,o,t),er(s,e.id+"",o)}function $se(e,t){var r=e.style,i=r.image;if(i&&!H(i)&&(G5(i)?i=i.src:H5(i)&&(i=i.toDataURL())),!!i){var n=r.x||0,o=r.y||0,a=r.width,s=r.height,l={href:i,width:a,height:s};return n&&(l.x=n),o&&(l.y=o),wT(l,e.transform),mT(l,r,e,t),yT(l,e),t.animation&&sf(e,l,t),er("image",e.id+"",l)}}function Yse(e,t){var r=e.style,i=r.text;if(i!=null&&(i+=""),!(!i||isNaN(r.x)||isNaN(r.y))){var n=r.font||Hi,o=r.x||0,a=vO(r.y||0,yd(n),r.textBaseline),s=fO[r.textAlign]||r.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(eE(r)){var c="",u=r.fontStyle,d=JD(r.fontSize);if(!parseFloat(d))return;var h=r.fontFamily||G1,p=r.fontWeight;c+="font-size:"+d+";font-family:"+h+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),p&&p!=="normal"&&(c+="font-weight:"+p+";"),l.style=c}else l.style="font: "+n;return i.match(/\s/)&&(l["xml:space"]="preserve"),o&&(l.x=o),a&&(l.y=a),wT(l,e.transform),mT(l,r,e,t),yT(l,e),t.animation&&sf(e,l,t),er("text",e.id+"",l,void 0,i)}}function CT(e,t){if(e instanceof ce)return U5(e,t);if(e instanceof vt)return $se(e,t);if(e instanceof Aa)return Yse(e,t)}function qse(e,t,r){var i=e.style;if(mO(i)){var n=yO(e),o=r.shadowCache,a=o[n];if(!a){var s=e.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=i.shadowOffsetX||0,d=i.shadowOffsetY||0,h=i.shadowBlur,p=Is(i.shadowColor),g=p.opacity,f=p.color,v=h/2/l,m=h/2/c,y=v+" "+m;a=r.zrId+"-s"+r.shadowIdx++,r.defs[a]=er("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[er("feDropShadow","",{dx:u/l,dy:d/c,stdDeviation:y,"flood-color":f,"flood-opacity":g})]),o[n]=a}t.filter=Up(a)}}function bT(e,t,r,i){var n=e[r],o,a={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(My(n))o="linearGradient",a.x1=n.x,a.y1=n.y,a.x2=n.x2,a.y2=n.y2;else if(Ty(n))o="radialGradient",a.cx=de(n.x,.5),a.cy=de(n.y,.5),a.r=de(n.r,.5);else return;for(var s=n.colorStops,l=[],c=0,u=s.length;c<u;++c){var d=Ey(s[c].offset)*100+"%",h=s[c].color,p=Is(h),g=p.color,f=p.opacity,v={offset:d};v["stop-color"]=g,f<1&&(v["stop-opacity"]=f),l.push(er("stop",c+"",v))}var m=er(o,"",a,l),y=of(m),w=i.gradientCache,C=w[y];C||(C=i.zrId+"-g"+i.gradientIdx++,w[y]=C,a.id=C,i.defs[C]=er(o,C,a,l)),t[r]=Up(C)}function ST(e,t,r,i){var n=e.style[r],o=e.getBoundingRect(),a={},s=n.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",d;if(cD(n)){var h=n.imageWidth,p=n.imageHeight,g=void 0,f=n.image;if(H(f)?g=f:G5(f)?g=f.src:H5(f)&&(g=f.toDataURL()),typeof Image>"u"){var v="Image width/height must been given explictly in svg-ssr renderer.";St(h,v),St(p,v)}else if(h==null||p==null){var m=function(T,_){if(T){var R=T.elm,A=h||_.width,P=p||_.height;T.tag==="pattern"&&(c?(P=1,A/=o.width):u&&(A=1,P/=o.height)),T.attrs.width=A,T.attrs.height=P,R&&(R.setAttribute("width",A),R.setAttribute("height",P))}},y=eg(g,null,e,function(T){l||m(b,T),m(d,T)});y&&y.width&&y.height&&(h=h||y.width,p=p||y.height)}d=er("image","img",{href:g,width:h,height:p}),a.width=h,a.height=p}else n.svgElement&&(d=re(n.svgElement),a.width=n.svgWidth,a.height=n.svgHeight);if(d){var w,C;l?w=C=1:c?(C=1,w=a.width/o.width):u?(w=1,C=a.height/o.height):a.patternUnits="userSpaceOnUse",w!=null&&!isNaN(w)&&(a.width=w),C!=null&&!isNaN(C)&&(a.height=C);var S=Ay(n);S&&(a.patternTransform=S);var b=er("pattern","",a,[d]),x=of(b),E=i.patternCache,M=E[x];M||(M=i.zrId+"-p"+i.patternIdx++,E[x]=M,a.id=M,b=i.defs[M]=er("pattern",M,a,[d])),t[r]=Up(M)}}function W5(e,t,r){var i=r.clipPathCache,n=r.defs,o=i[e.id];if(!o){o=r.zrId+"-c"+r.clipPathIdx++;var a={id:o};i[e.id]=o,n[o]=er("clipPath",o,a,[U5(e,r)])}t["clip-path"]=Up(o)}function xT(e){return document.createTextNode(e)}function tl(e,t,r){e.insertBefore(t,r)}function DT(e,t){e.removeChild(t)}function ET(e,t){e.appendChild(t)}function MT(e){return e.parentNode}function TT(e){return e.nextSibling}function $w(e,t){e.textContent=t}var j5=58,Zse=120,Xse=er("","");function _T(e){return e===void 0}function ta(e){return e!==void 0}function Qse(e,t,r){for(var i={},n=t;n<=r;++n){var o=e[n].key;o!==void 0&&(i[o]=n)}return i}function cf(e,t){var r=e.key===t.key,i=e.tag===t.tag;return i&&r}function uf(e){var t,r=e.children,i=e.tag;if(ta(i)){var n=e.elm=Ww(i);if(qw(Xse,e),O(r))for(t=0;t<r.length;++t){var o=r[t];o!=null&&ET(n,uf(o))}else ta(e.text)&&!J(e.text)&&ET(n,xT(e.text))}else e.elm=xT(e.text);return e.elm}function $5(e,t,r,i,n){for(;i<=n;++i){var o=r[i];o!=null&&tl(e,uf(o),t)}}function Yw(e,t,r,i){for(;r<=i;++r){var n=t[r];if(n!=null)if(ta(n.tag)){var o=MT(n.elm);DT(o,n.elm)}else DT(e,n.elm)}}function qw(e,t){var r,i=t.elm,n=e&&e.attrs||{},o=t.attrs||{};if(n!==o){for(r in o){var a=o[r],s=n[r];s!==a&&(a===!0?i.setAttribute(r,""):a===!1?i.removeAttribute(r):r==="style"?i.style.cssText=a:r.charCodeAt(0)!==Zse?i.setAttribute(r,a):r==="xmlns:xlink"||r==="xmlns"?i.setAttributeNS(A5,r,a):r.charCodeAt(3)===j5?i.setAttributeNS(I5,r,a):r.charCodeAt(5)===j5?i.setAttributeNS(gT,r,a):i.setAttribute(r,a))}for(r in n)r in o||i.removeAttribute(r)}}function Jse(e,t,r){for(var i=0,n=0,o=t.length-1,a=t[0],s=t[o],l=r.length-1,c=r[0],u=r[l],d,h,p,g;i<=o&&n<=l;)a==null?a=t[++i]:s==null?s=t[--o]:c==null?c=r[++n]:u==null?u=r[--l]:cf(a,c)?(Jd(a,c),a=t[++i],c=r[++n]):cf(s,u)?(Jd(s,u),s=t[--o],u=r[--l]):cf(a,u)?(Jd(a,u),tl(e,a.elm,TT(s.elm)),a=t[++i],u=r[--l]):cf(s,c)?(Jd(s,c),tl(e,s.elm,a.elm),s=t[--o],c=r[++n]):(_T(d)&&(d=Qse(t,i,o)),h=d[c.key],_T(h)?tl(e,uf(c),a.elm):(p=t[h],p.tag!==c.tag?tl(e,uf(c),a.elm):(Jd(p,c),t[h]=void 0,tl(e,p.elm,a.elm))),c=r[++n]);(i<=o||n<=l)&&(i>o?(g=r[l+1]==null?null:r[l+1].elm,$5(e,g,r,n,l)):Yw(e,t,i,o))}function Jd(e,t){var r=t.elm=e.elm,i=e.children,n=t.children;e!==t&&(qw(e,t),_T(t.text)?ta(i)&&ta(n)?i!==n&&Jse(r,i,n):ta(n)?(ta(e.text)&&$w(r,""),$5(r,null,n,0,n.length-1)):ta(i)?Yw(r,i,0,i.length-1):ta(e.text)&&$w(r,""):e.text!==t.text&&(ta(i)&&Yw(r,i,0,i.length-1),$w(r,t.text)))}function RT(e,t){if(cf(e,t))Jd(e,t);else{var r=e.elm,i=MT(r);uf(t),i!==null&&(tl(i,t.elm,TT(r)),Yw(i,[e],0,0))}return t}var ele=0,tle=function(){function e(t,r,i){if(this.type="svg",this.refreshHover=Y5("refreshHover"),this.configLayer=Y5("configLayer"),this.storage=r,this._opts=i=F({},i),this.root=t,this._id="zr"+ele++,this._oldVNode=vT(i.width,i.height),t&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=Ww("svg");qw(null,this._oldVNode),n.appendChild(o),t.appendChild(n)}this.resize(i.width,i.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",RT(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return CT(t,af(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),i=this._width,n=this._height,o=af(this._id);o.animation=t.animation,o.willUpdate=t.willUpdate,o.compress=t.compress,o.emphasis=t.emphasis;var a=[],s=this._bgVNode=rle(i,n,this._backgroundColor,o);s&&a.push(s);var l=t.compress?null:this._mainVNode=er("g","main",{},[]);this._paintList(r,o,l?l.children:a),l&&a.push(l);var c=N(me(o.defs),function(h){return o.defs[h]});if(c.length&&a.push(er("defs","defs",{},c)),t.animation){var u=P5(o.cssNodes,o.cssAnims,{newline:!0});if(u){var d=er("style","stl",{},[],u);a.push(d)}}return vT(i,n,a,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},of(this.renderToVNode({animation:de(t.cssAnimation,!0),emphasis:de(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:de(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,i){for(var n=t.length,o=[],a=0,s,l,c=0,u=0;u<n;u++){var d=t[u];if(!d.invisible){var h=d.__clipPaths,p=h&&h.length||0,g=l&&l.length||0,f=void 0;for(f=Math.max(p-1,g-1);f>=0&&!(h&&l&&h[f]===l[f]);f--);for(var v=g-1;v>f;v--)a--,s=o[a-1];for(var m=f+1;m<p;m++){var y={};W5(h[m],y,r);var w=er("g","clip-g-"+c++,y,[]);(s?s.children:i).push(w),o[a++]=w,s=w}l=h;var C=CT(d,r);C&&(s?s.children:i).push(C)}}},e.prototype.resize=function(t,r){var i=this._opts,n=this.root,o=this._viewport;if(t!=null&&(i.width=t),r!=null&&(i.height=r),n&&o&&(o.style.display="none",t=$s(n,0,i),r=$s(n,1,i),o.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,o){var a=o.style;a.width=t+"px",a.height=r+"px"}if(Hp(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",r));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),i="data:image/svg+xml;";return t?(r=wO(r),r&&i+"base64,"+r):i+"charset=UTF-8,"+encodeURIComponent(r)},e}();function Y5(e){return function(){}}function rle(e,t,r,i){var n;if(r&&r!=="none")if(n=er("rect","bg",{width:e,height:t,x:"0",y:"0"}),_y(r))bT({fill:r},n.attrs,"fill",i);else if(Hp(r))ST({style:{fill:r},dirty:pt,getBoundingRect:function(){return{width:e,height:t}}},n.attrs,"fill",i);else{var o=Is(r),a=o.color,s=o.opacity;n.attrs.fill=a,s<1&&(n.attrs["fill-opacity"]=s)}return n}var q5=tle;function AT(e){e.registerPainter("svg",q5)}function K5(e,t,r){var i=Vr.createCanvas(),n=t.getWidth(),o=t.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=n+"px",a.height=o+"px",i.setAttribute("data-zr-dom-id",e)),i.width=n*r,i.height=o*r,i}var ile=function(e){ke(t,e);function t(r,i,n){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;n=n||cc,typeof r=="string"?a=K5(r,i,n):J(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(iy(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=i,o.dpr=n,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=K5("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,i,n,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,c=new le(0,0,0,0);function u(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var w=new le(0,0,0,0);w.copy(y),a.push(w)}else{for(var C=!1,S=1/0,b=0,x=0;x<a.length;++x){var E=a[x];if(E.intersect(y)){var M=new le(0,0,0,0);M.copy(E),M.union(y),a[x]=M,C=!0;break}else if(l){c.copy(y),c.union(E);var T=y.width*y.height,_=E.width*E.height,R=c.width*c.height,A=R-T-_;A<S&&(S=A,b=x)}}if(l&&(a[b].union(y),C=!0),!C){var w=new le(0,0,0,0);w.copy(y),a.push(w)}l||(l=a.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var h=r[d];if(h){var p=h.shouldBePainted(n,o,!0,!0),g=h.__isRendered&&(h.__dirty&sr||!p)?h.getPrevPaintRect():null;g&&u(g);var f=p&&(h.__dirty&sr||!h.__isRendered)?h.getPaintRect():null;f&&u(f)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var h=i[d],p=h&&h.shouldBePainted(n,o,!0,!0);if(h&&(!p||!h.__zr)&&h.__isRendered){var g=h.getPrevPaintRect();g&&u(g)}}var v;do{v=!1;for(var d=0;d<a.length;){if(a[d].isZero()){a.splice(d,1);continue}for(var m=d+1;m<a.length;)a[d].intersect(a[m])?(v=!0,a[d].union(a[m]),a.splice(m,1)):m++;d++}}while(v);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,i){var n=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=i+"px"),o.width=r*n,o.height=i*n,s&&(s.width=r*n,s.height=i*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(r,i,n){var o=this.dom,a=this.ctx,s=o.width,l=o.height;i=i||this.clearColor;var c=this.motionBlur&&!r,u=this.lastFrameAlpha,d=this.dpr,h=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/d,l/d));var p=this.domBack;function g(f,v,m,y){if(a.clearRect(f,v,m,y),i&&i!=="transparent"){var w=void 0;if(Ss(i)){var C=i.global||i.__width===m&&i.__height===y;w=C&&i.__canvasGradient||Vg(a,i,{x:0,y:0,width:m,height:y}),i.__canvasGradient=w,i.__width=m,i.__height=y}else AF(i)&&(i.scaleX=i.scaleX||d,i.scaleY=i.scaleY||d,w=cw(a,i,{dirty:function(){h.setUnpainted(),h.painter.refresh()}}));a.save(),a.fillStyle=w||i,a.fillRect(f,v,m,y),a.restore()}c&&(a.save(),a.globalAlpha=u,a.drawImage(p,f,v,m,y),a.restore())}!n||c?g(0,0,s,l):n.length&&D(n,function(f){g(f.x*d,f.y*d,f.width*d,f.height*d)})},t}(ir),Kw=ile;var Z5=1e5,Kc=314159,Zw=.01,nle=.001;function ole(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function ale(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var sle=function(){function e(t,r,i,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=i=F({},i||{}),this.dpr=i.devicePixelRatio||cc,this._singleCanvas=o,this.root=t;var a=t.style;a&&(iy(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var u=t,d=u.width,h=u.height;i.width!=null&&(d=i.width),i.height!=null&&(h=i.height),this.dpr=i.devicePixelRatio||1,u.width=d*this.dpr,u.height=h*this.dpr,this._width=d,this._height=h;var p=new Kw(u,this,this.dpr);p.__builtin__=!0,p.initContext(),l[Kc]=p,p.zlevel=Kc,s.push(Kc),this._domRoot=t}else{this._width=$s(t,0,i),this._height=$s(t,1,i);var c=this._domRoot=ale(this._width,this._height);t.appendChild(c)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),i=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,i,t,this._redrawId);for(var o=0;o<n.length;o++){var a=n[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,i=this._hoverlayer;if(i&&i.clear(),!!r){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(i||(i=this._hoverlayer=this.getLayer(Z5)),o||(o=i.ctx,o.save()),Ys(o,s,n,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(Z5)},e.prototype.paintOne=function(t,r){uw(t,r)},e.prototype._paintList=function(t,r,i,n){if(this._redrawId===n){i=i||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,i),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;Np(function(){l._paintList(t,r,i,n)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Kc).ctx,r=this._domRoot.width,i=this._domRoot.height;t.clearRect(0,0,r,i),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,r,i)})},e.prototype._doPaintList=function(t,r,i){for(var n=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||i)&&o.push(c)}for(var u=!0,d=!1,h=function(f){var v=o[f],m=v.ctx,y=a&&v.createRepaintRects(t,r,p._width,p._height),w=i?v.__startIndex:v.__drawIndex,C=!i&&v.incremental&&Date.now,S=C&&Date.now(),b=v.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,b,y);else if(w===v.__startIndex){var x=t[w];(!x.incremental||!x.notClear||i)&&v.clear(!1,b,y)}w===-1&&(console.error("For some unknown reason. drawIndex is -1"),w=v.__startIndex);var E,M=function(A){var P={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(E=w;E<v.__endIndex;E++){var k=t[E];if(k.__inHover&&(d=!0),n._doPaintEl(k,v,a,A,P,E===v.__endIndex-1),C){var L=Date.now()-S;if(L>15)break}}P.prevElClipPaths&&m.restore()};if(y)if(y.length===0)E=v.__endIndex;else for(var T=p.dpr,_=0;_<y.length;++_){var R=y[_];m.save(),m.beginPath(),m.rect(R.x*T,R.y*T,R.width*T,R.height*T),m.clip(),M(R),m.restore()}else m.save(),M(),m.restore();v.__drawIndex=E,v.__drawIndex<v.__endIndex&&(u=!1)},p=this,g=0;g<o.length;g++)h(g);return Re.wxa&&D(this._layers,function(f){f&&f.ctx&&f.ctx.draw&&f.ctx.draw()}),{finished:u,needsRefreshHover:d}},e.prototype._doPaintEl=function(t,r,i,n,o,a){var s=r.ctx;if(i){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(Ys(s,t,o,a),t.setPrevPaintRect(l))}else Ys(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Kc);var i=this._layers[t];return i||(i=new Kw("zr_"+t,this,this.dpr),i.zlevel=t,i.__builtin__=!0,this._layerConfig[t]?fe(i,this._layerConfig[t],!0):this._layerConfig[t-Zw]&&fe(i,this._layerConfig[t-Zw],!0),r&&(i.virtual=r),this.insertLayer(t,i),i.initContext()),i},e.prototype.insertLayer=function(t,r){var i=this._layers,n=this._zlevelList,o=n.length,a=this._domRoot,s=null,l=-1;if(!i[t]&&ole(r)){if(o>0&&t>n[0]){for(l=0;l<o-1&&!(n[l]<t&&n[l+1]>t);l++);s=i[n[l]]}if(n.splice(l+1,0,t),i[t]=r,!r.virtual)if(s){var c=s.dom;c.nextSibling?a.insertBefore(r.dom,c.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.painter||(r.painter=this)}},e.prototype.eachLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var i=this._zlevelList,n=0;n<i.length;n++){var o=i[n],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(d,h){d.__dirty=d.__used=!1});function r(d){o&&(o.__endIndex!==d&&(o.__dirty=!0),o.__endIndex=d)}if(this._singleCanvas)for(var i=1;i<t.length;i++){var n=t[i];if(n.zlevel!==t[i-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var n=t[l],c=n.zlevel,u=void 0;s!==c&&(s=c,a=0),n.incremental?(u=this.getLayer(c+nle,this._needsManuallyCompositing),u.incremental=!0,a=1):u=this.getLayer(c+(a>0?Zw:0),this._needsManuallyCompositing),u.__builtin__||ql("ZLevel "+c+" has been used by unkown layer "+u.id),u!==o&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,r(l),o=u),n.__dirty&sr&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(d,h){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,D(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var i=this._layerConfig;i[t]?fe(i[t],r,!0):i[t]=r;for(var n=0;n<this._zlevelList.length;n++){var o=this._zlevelList[n];if(o===t||o===t+Zw){var a=this._layers[o];fe(a,i[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,i=this._zlevelList,n=r[t];n&&(n.dom.parentNode.removeChild(n.dom),delete r[t],i.splice(pe(i,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var n=this._opts,o=this.root;if(t!=null&&(n.width=t),r!=null&&(n.height=r),t=$s(o,0,n),r=$s(o,1,n),i.style.display="",this._width!==t||r!==this._height){i.style.width=t+"px",i.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Kc).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Kc].dom;var r=new Kw("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var i=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=r.dom.width,o=r.dom.height;this.eachLayer(function(d){d.__builtin__?i.drawImage(d.dom,0,0,n,o):d.renderToCanvas&&(i.save(),d.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];Ys(i,u,a,l===c-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}(),X5=sle;function IT(e){e.registerPainter("canvas",X5)}var lle=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){if(0)var i;return Sr(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var i=new ee,n=et("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);i.add(n),n.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,c=et(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);i.add(c),c.setStyle(r.itemStyle);var u=r.iconRotate==="inherit"?a:r.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),i},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Be),Q5=lle;function yo(e,t){var r=e.mapDimensionsAll("defaultedLabel"),i=r.length;if(i===1){var n=Wa(e,t,r[0]);return n!=null?n+"":null}else if(i){for(var o=[],a=0;a<r.length;a++)o.push(Wa(e,t,r[a]));return o.join(" ")}}function Xw(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!O(t))return t+"";for(var i=[],n=0;n<r.length;n++){var o=e.getDimensionIndex(r[n]);o>=0&&i.push(t[o])}return i.join(" ")}var cle=function(e){I(t,e);function t(r,i,n,o){var a=e.call(this)||this;return a.updateData(r,i,n,o),a}return t.prototype._createSymbol=function(r,i,n,o,a){this.removeAll();var s=et(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=ule,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Br(this.childAt(0))},t.prototype.downplay=function(){Gr(this.childAt(0))},t.prototype.setZ=function(r,i){var n=this.childAt(0);n.zlevel=r,n.z=i},t.prototype.setDraggable=function(r,i){var n=this.childAt(0);n.draggable=r,n.cursor=!i&&r?"move":n.cursor},t.prototype.updateData=function(r,i,n,o){this.silent=!1;var a=r.getItemVisual(i,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,i),c=a!==this._symbolType,u=o&&o.disableAnimation;if(c){var d=r.getItemVisual(i,"symbolKeepAspect");this._createSymbol(a,r,i,l,d)}else{var h=this.childAt(0);h.silent=!1;var p={scaleX:l[0]/2,scaleY:l[1]/2};u?h.attr(p):Me(h,p,s,i),nr(h)}if(this._updateCommon(r,i,l,n,o),c){var h=this.childAt(0);if(!u){var p={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,je(h,p,s,i)}}u&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,i,n,o,a){var s=this.childAt(0),l=r.hostModel,c,u,d,h,p,g,f,v,m;if(o&&(c=o.emphasisItemStyle,u=o.blurItemStyle,d=o.selectItemStyle,h=o.focus,p=o.blurScope,f=o.labelStatesModels,v=o.hoverScale,m=o.cursorStyle,g=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(i),w=y.getModel("emphasis");c=w.getModel("itemStyle").getItemStyle(),d=y.getModel(["select","itemStyle"]).getItemStyle(),u=y.getModel(["blur","itemStyle"]).getItemStyle(),h=w.get("focus"),p=w.get("blurScope"),g=w.get("disabled"),f=at(y),v=w.getShallow("scale"),m=y.getShallow("cursor")}var C=r.getItemVisual(i,"symbolRotate");s.attr("rotation",(C||0)*Math.PI/180||0);var S=Qi(r.getItemVisual(i,"symbolOffset"),n);S&&(s.x=S[0],s.y=S[1]),m&&s.attr("cursor",m);var b=r.getItemVisual(i,"style"),x=b.fill;if(s instanceof vt){var E=s.style;s.useStyle(F({image:E.image,x:E.x,y:E.y,width:E.width,height:E.height},b))}else s.__isEmptyBrush?s.useStyle(F({},b)):s.useStyle(b),s.style.decal=null,s.setColor(x,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var M=r.getItemVisual(i,"liftZ"),T=this._z2;M!=null?T==null&&(this._z2=s.z2,s.z2+=M):T!=null&&(s.z2=T,this._z2=null);var _=a&&a.useNameLabel;ft(s,f,{labelFetcher:l,labelDataIndex:i,defaultText:R,inheritColor:x,defaultOpacity:b.opacity});function R(k){return _?r.getName(k):yo(r,k)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var A=s.ensureState("emphasis");A.style=c,s.ensureState("select").style=d,s.ensureState("blur").style=u;var P=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;A.scaleX=this._sizeX*P,A.scaleY=this._sizeY*P,this.setSymbolScale(1),We(this,h,p,g)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,i,n){var o=this.childAt(0),a=ae(this).dataIndex,s=n&&n.animation;if(this.silent=o.silent=!0,n&&n.fadeLabel){var l=o.getTextContent();l&&xn(l,{style:{opacity:0}},i,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();xn(o,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,i){return ho(r.getItemVisual(i,"symbolSize"))},t}(ee);function ule(e,t){this.parent.drift(e,t)}var Ya=cle;function PT(e,t,r,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function J5(e){return e!=null&&!J(e)&&(e={isIgnore:e}),e||{}}function eB(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:at(t),cursorStyle:t.get("cursor")}}var dle=function(){function e(t){this.group=new ee,this._SymbolCtor=t||Ya}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=J5(r);var i=this.group,n=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=eB(t),c={disableAnimation:s},u=r.getSymbolPoint||function(d){return t.getItemLayout(d)};o||i.removeAll(),t.diff(o).add(function(d){var h=u(d);if(PT(t,h,d,r)){var p=new a(t,d,l,c);p.setPosition(h),t.setItemGraphicEl(d,p),i.add(p)}}).update(function(d,h){var p=o.getItemGraphicEl(h),g=u(d);if(!PT(t,g,d,r)){i.remove(p);return}var f=t.getItemVisual(d,"symbol")||"circle",v=p&&p.getSymbolType&&p.getSymbolType();if(!p||v&&v!==f)i.remove(p),p=new a(t,d,l,c),p.setPosition(g);else{p.updateData(t,d,l,c);var m={x:g[0],y:g[1]};s?p.attr(m):Me(p,m,n)}i.add(p),t.setItemGraphicEl(d,p)}).remove(function(d){var h=o.getItemGraphicEl(d);h&&h.fadeOut(function(){i.remove(h)},n)}).execute(),this._getSymbolPoint=u,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(i,n){var o=t._getSymbolPoint(n);i.setPosition(o),i.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=eB(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,i){this._progressiveEls=[],i=J5(i);function n(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(PT(r,a,o,i)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(n),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){ri(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(n){n.fadeOut(function(){r.remove(n)},i.hostModel)}):r.removeAll()},e}(),ra=dle;function Qw(e,t,r){var i=e.getBaseAxis(),n=e.getOtherAxis(i),o=hle(n,r),a=i.dim,s=n.dim,l=t.mapDimension(s),c=t.mapDimension(a),u=s==="x"||s==="radius"?1:0,d=N(e.dimensions,function(g){return t.mapDimension(g)}),h=!1,p=t.getCalculationInfo("stackResultDimension");return Ji(t,d[0])&&(h=!0,d[0]=p),Ji(t,d[1])&&(h=!0,d[1]=p),{dataDimsForPoint:d,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function hle(e,t){var r=0,i=e.scale.getExtent();return t==="start"?r=i[0]:t==="end"?r=i[1]:be(t)&&!isNaN(t)?r=t:i[0]>0?r=i[0]:i[1]<0&&(r=i[1]),r}function Jw(e,t,r,i){var n=NaN;e.stacked&&(n=r.get(r.getCalculationInfo("stackedOverDimension"),i)),isNaN(n)&&(n=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,i),a[1-o]=n,t.dataToPoint(a)}function ple(e,t){var r=[];return t.diff(e).add(function(i){r.push({cmd:"+",idx:i})}).update(function(i,n){r.push({cmd:"=",idx:n,idx1:i})}).remove(function(i){r.push({cmd:"-",idx:i})}).execute(),r}function kT(e,t,r,i,n,o,a,s){for(var l=ple(e,t),c=[],u=[],d=[],h=[],p=[],g=[],f=[],v=Qw(n,t,a),m=e.getLayout("points")||[],y=t.getLayout("points")||[],w=0;w<l.length;w++){var C=l[w],S=!0,b=void 0,x=void 0;switch(C.cmd){case"=":b=C.idx*2,x=C.idx1*2;var E=m[b],M=m[b+1],T=y[x],_=y[x+1];(isNaN(E)||isNaN(M))&&(E=T,M=_),c.push(E,M),u.push(T,_),d.push(r[b],r[b+1]),h.push(i[x],i[x+1]),f.push(t.getRawIndex(C.idx1));break;case"+":var R=C.idx,A=v.dataDimsForPoint,P=n.dataToPoint([t.get(A[0],R),t.get(A[1],R)]);x=R*2,c.push(P[0],P[1]),u.push(y[x],y[x+1]);var k=Jw(v,n,t,R);d.push(k[0],k[1]),h.push(i[x],i[x+1]),f.push(t.getRawIndex(R));break;case"-":S=!1}S&&(p.push(C),g.push(g.length))}g.sort(function(Oe,$e){return f[Oe]-f[$e]});for(var L=c.length,V=oi(L),z=oi(L),B=oi(L),K=oi(L),X=[],w=0;w<g.length;w++){var oe=g[w],ye=w*2,we=oe*2;V[ye]=c[we],V[ye+1]=c[we+1],z[ye]=u[we],z[ye+1]=u[we+1],B[ye]=d[we],B[ye+1]=d[we+1],K[ye]=h[we],K[ye+1]=h[we+1],X[w]=p[oe]}return{current:V,next:z,stackedOnCurrent:B,stackedOnNext:K,status:X}}var rl=Math.min,il=Math.max;function Zc(e,t){return isNaN(e)||isNaN(t)}function LT(e,t,r,i,n,o,a,s,l){for(var c,u,d,h,p,g,f=r,v=0;v<i;v++){var m=t[f*2],y=t[f*2+1];if(f>=n||f<0)break;if(Zc(m,y)){if(l){f+=o;continue}break}if(f===r)e[o>0?"moveTo":"lineTo"](m,y),d=m,h=y;else{var w=m-c,C=y-u;if(w*w+C*C<.5){f+=o;continue}if(a>0){for(var S=f+o,b=t[S*2],x=t[S*2+1];b===m&&x===y&&v<i;)v++,S+=o,f+=o,b=t[S*2],x=t[S*2+1],m=t[f*2],y=t[f*2+1],w=m-c,C=y-u;var E=v+1;if(l)for(;Zc(b,x)&&E<i;)E++,S+=o,b=t[S*2],x=t[S*2+1];var M=.5,T=0,_=0,R=void 0,A=void 0;if(E>=i||Zc(b,x))p=m,g=y;else{T=b-c,_=x-u;var P=m-c,k=b-m,L=y-u,V=x-y,z=void 0,B=void 0;if(s==="x"){z=Math.abs(P),B=Math.abs(k);var K=T>0?1:-1;p=m-K*z*a,g=y,R=m+K*B*a,A=y}else if(s==="y"){z=Math.abs(L),B=Math.abs(V);var X=_>0?1:-1;p=m,g=y-X*z*a,R=m,A=y+X*B*a}else z=Math.sqrt(P*P+L*L),B=Math.sqrt(k*k+V*V),M=B/(B+z),p=m-T*a*(1-M),g=y-_*a*(1-M),R=m+T*a*M,A=y+_*a*M,R=rl(R,il(b,m)),A=rl(A,il(x,y)),R=il(R,rl(b,m)),A=il(A,rl(x,y)),T=R-m,_=A-y,p=m-T*z/B,g=y-_*z/B,p=rl(p,il(c,m)),g=rl(g,il(u,y)),p=il(p,rl(c,m)),g=il(g,rl(u,y)),T=m-p,_=y-g,R=m+T*B/z,A=y+_*B/z}e.bezierCurveTo(d,h,p,g,m,y),d=R,h=A}else e.lineTo(m,y)}c=m,u=y,f+=o}return v}var tB=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),rB=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-polyline",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new tB},t.prototype.buildPath=function(r,i){var n=i.points,o=0,a=n.length/2;if(i.connectNulls){for(;a>0&&Zc(n[a*2-2],n[a*2-1]);a--);for(;o<a&&Zc(n[o*2],n[o*2+1]);o++);}for(;o<a;)o+=LT(r,n,o,a,a,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},t.prototype.getPointOn=function(r,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,o=n.data,a=vr.CMD,s,l,c=i==="x",u=[],d=0;d<o.length;){var h=o[d++],p=void 0,g=void 0,f=void 0,v=void 0,m=void 0,y=void 0,w=void 0;switch(h){case a.M:s=o[d++],l=o[d++];break;case a.L:if(p=o[d++],g=o[d++],w=c?(r-s)/(p-s):(r-l)/(g-l),w<=1&&w>=0){var C=c?(g-l)*w+l:(p-s)*w+s;return c?[r,C]:[C,r]}s=p,l=g;break;case a.C:p=o[d++],g=o[d++],f=o[d++],v=o[d++],m=o[d++],y=o[d++];var S=c?ic(s,p,f,m,r,u):ic(l,g,v,y,r,u);if(S>0)for(var b=0;b<S;b++){var x=u[b];if(x<=1&&x>=0){var C=c?Gt(l,g,v,y,x):Gt(s,p,f,m,x);return c?[r,C]:[C,r]}}s=m,l=y;break}}},t}(ce);var gle=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(tB),eC=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-polygon",i}return t.prototype.getDefaultShape=function(){return new gle},t.prototype.buildPath=function(r,i){var n=i.points,o=i.stackedOnPoints,a=0,s=n.length/2,l=i.smoothMonotone;if(i.connectNulls){for(;s>0&&Zc(n[s*2-2],n[s*2-1]);s--);for(;a<s&&Zc(n[a*2],n[a*2+1]);a++);}for(;a<s;){var c=LT(r,n,a,s,s,1,i.smooth,l,i.connectNulls);LT(r,o,a+c-1,c,s,-1,i.stackedOnSmooth,l,i.connectNulls),a+=c+1,r.closePath()}},t}(ce);function FT(e,t,r,i,n){var o=e.getArea(),a=o.x,s=o.y,l=o.width,c=o.height,u=r.get(["lineStyle","width"])||2;a-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var d=new Ce({shape:{x:a,y:s,width:l,height:c}});if(t){var h=e.getBaseAxis(),p=h.isHorizontal(),g=h.inverse;p?(g&&(d.shape.x+=l),d.shape.width=0):(g||(d.shape.y+=c),d.shape.height=0);var f=Z(n)?function(v){n(v,d)}:null;je(d,{shape:{width:l,height:c,x:a,y:s}},r,null,i,f)}return d}function OT(e,t,r){var i=e.getArea(),n=gt(i.r0,1),o=gt(i.r,1),a=new qt({shape:{cx:gt(e.cx,1),cy:gt(e.cy,1),r0:n,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=i.startAngle:a.shape.r=n,je(a,{shape:{endAngle:i.endAngle,r:o}},r)}return a}function ia(e,t,r,i,n){if(e){if(e.type==="polar")return OT(e,t,r);if(e.type==="cartesian2d")return FT(e,t,r,i,n)}else return null;return null}function In(e,t){return e.type===t}function iB(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function nB(e){for(var t=1/0,r=1/0,i=-1/0,n=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),i=Math.max(a,i)),isNaN(s)||(r=Math.min(s,r),n=Math.max(s,n))}return[[t,r],[i,n]]}function oB(e,t){var r=nB(e),i=r[0],n=r[1],o=nB(t),a=o[0],s=o[1];return Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function aB(e){return be(e)?e:e?.5:0}function fle(e,t,r){if(!r.valueDim)return[];for(var i=t.count(),n=oi(i*2),o=0;o<i;o++){var a=Jw(r,e,t,o);n[o*2]=a[0],n[o*2+1]=a[1]}return n}function nl(e,t,r,i){var n=t.getBaseAxis(),o=n.dim==="x"||n.dim==="radius"?0:1,a=[],s=0,l=[],c=[],u=[],d=[];if(i){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&d.push(e[s],e[s+1]);e=d}for(s=0;s<e.length-2;s+=2)switch(u[0]=e[s+2],u[1]=e[s+3],c[0]=e[s],c[1]=e[s+1],a.push(c[0],c[1]),r){case"end":l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1]);break;case"middle":var h=(c[o]+u[o])/2,p=[];l[o]=p[o]=h,l[1-o]=c[1-o],p[1-o]=u[1-o],a.push(l[0],l[1]),a.push(p[0],p[1]);break;default:l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function vle(e,t){var r=[],i=e.length,n,o;function a(u,d,h){var p=u.coord,g=(h-p)/(d.coord-p),f=hO(g,[u.color,d.color]);return{coord:h,color:f}}for(var s=0;s<i;s++){var l=e[s],c=l.coord;if(c<0)n=l;else if(c>t){o?r.push(a(o,l,t)):n&&r.push(a(n,l,0),a(n,l,t));break}else n&&(r.push(a(n,l,0)),n=null),r.push(l),o=l}return r}function mle(e,t,r){var i=e.getVisual("visualMeta");if(!(!i||!i.length||!e.count())&&t.type==="cartesian2d"){for(var n,o,a=i.length-1;a>=0;a--){var s=e.getDimensionInfo(i[a].dimension);if(n=s&&s.coordDim,n==="x"||n==="y"){o=i[a];break}}if(o){var l=t.getAxis(n),c=N(o.stops,function(w){return{coord:l.toGlobalCoord(l.dataToCoord(w.value)),color:w.color}}),u=c.length,d=o.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),d.reverse());var h=vle(c,n==="x"?r.getWidth():r.getHeight()),p=h.length;if(!p&&u)return c[0].coord<0?d[1]?d[1]:c[u-1].color:d[0]?d[0]:c[0].color;var g=10,f=h[0].coord-g,v=h[p-1].coord+g,m=v-f;if(m<.001)return"transparent";D(h,function(w){w.offset=(w.coord-f)/m}),h.push({offset:p?h[p-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:p?h[0].offset:.5,color:d[0]||"transparent"});var y=new qo(0,0,0,0,h,!0);return y[n]=f,y[n+"2"]=v,y}}}function yle(e,t,r){var i=e.get("showAllSymbol"),n=i==="auto";if(!(i&&!n)){var o=r.getAxesByScale("ordinal")[0];if(o&&!(n&&wle(o,t))){var a=t.mapDimension(o.dim),s={};return D(o.getViewLabels(),function(l){var c=o.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function wle(e,t){var r=e.getExtent(),i=Math.abs(r[1]-r[0])/e.scale.count();isNaN(i)&&(i=0);for(var n=t.count(),o=Math.max(1,Math.round(n/5)),a=0;a<n;a+=o)if(Ya.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>i)return!1;return!0}function Cle(e,t){return isNaN(e)||isNaN(t)}function ble(e){for(var t=e.length/2;t>0&&Cle(e[t*2-2],e[t*2-1]);t--);return t-1}function sB(e,t){return[e[t*2],e[t*2+1]]}function Sle(e,t,r){for(var i=e.length/2,n=r==="x"?0:1,o,a,s=0,l=-1,c=0;c<i;c++)if(a=e[c*2+n],!(isNaN(a)||isNaN(e[c*2+1-n]))){if(c===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=c;break}s=c,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function lB(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<cr.length;t++)if(e.get([cr[t],"endLabel","show"]))return!0;return!1}function NT(e,t,r,i){if(In(t,"cartesian2d")){var n=i.getModel("endLabel"),o=n.get("valueAnimation"),a=i.getData(),s={lastFrameIndex:0},l=lB(i)?function(p,g){e._endLabelOnDuring(p,g,a,s,o,n,t)}:null,c=t.getBaseAxis().isHorizontal(),u=FT(t,r,i,function(){var p=e._endLabel;p&&r&&s.originalX!=null&&p.attr({x:s.originalX,y:s.originalY})},l);if(!i.get("clip",!0)){var d=u.shape,h=Math.max(d.width,d.height);c?(d.y-=h,d.height+=h*2):(d.x-=h,d.width+=h*2)}return l&&l(1,u),u}else return OT(t,r,i)}function xle(e,t){var r=t.getBaseAxis(),i=r.isHorizontal(),n=r.inverse,o=i?n?"right":"left":"center",a=i?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var Dle=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new ee,i=new ra;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=r},t.prototype.render=function(r,i,n){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),c=r.getModel("lineStyle"),u=r.getModel("areaStyle"),d=l.getLayout("points")||[],h=a.type==="polar",p=this._coordSys,g=this._symbolDraw,f=this._polyline,v=this._polygon,m=this._lineGroup,y=!i.ssr&&r.get("animation"),w=!u.isEmpty(),C=u.get("origin"),S=Qw(a,l,C),b=w&&fle(a,l,S),x=r.get("showSymbol"),E=r.get("connectNulls"),M=x&&!h&&yle(r,l,a),T=this._data;T&&T.eachItemGraphicEl(function($e,Ne){$e.__temp&&(s.remove($e),T.setItemGraphicEl(Ne,null))}),x||g.remove(),s.add(m);var _=h?!1:r.get("step"),R;a&&a.getArea&&r.get("clip",!0)&&(R=a.getArea(),R.width!=null?(R.x-=.1,R.y-=.1,R.width+=.2,R.height+=.2):R.r0&&(R.r0-=.5,R.r+=.5)),this._clipShapeForSymbol=R;var A=mle(l,a,n)||l.getVisual("style")[l.getVisual("drawType")];if(!(f&&p.type===a.type&&_===this._step))x&&g.updateData(l,{isIgnore:M,clipShape:R,disableAnimation:!0,getSymbolPoint:function($e){return[d[$e*2],d[$e*2+1]]}}),y&&this._initSymbolLabelAnimation(l,a,R),_&&(d=nl(d,a,_,E),b&&(b=nl(b,a,_,E))),f=this._newPolyline(d),w?v=this._newPolygon(d,b):v&&(m.remove(v),v=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,so(A)),m.setClipPath(NT(this,a,!0,r));else{w&&!v?v=this._newPolygon(d,b):v&&!w&&(m.remove(v),v=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,so(A));var P=m.getClipPath();if(P){var k=NT(this,a,!1,r);je(P,{shape:k.shape},r)}else m.setClipPath(NT(this,a,!0,r));x&&g.updateData(l,{isIgnore:M,clipShape:R,disableAnimation:!0,getSymbolPoint:function($e){return[d[$e*2],d[$e*2+1]]}}),(!iB(this._stackedOnPoints,b)||!iB(this._points,d))&&(y?this._doUpdateAnimation(l,b,a,n,_,C,E):(_&&(d=nl(d,a,_,E),b&&(b=nl(b,a,_,E))),f.setShape({points:d}),v&&v.setShape({points:d,stackedOnPoints:b})))}var L=r.getModel("emphasis"),V=L.get("focus"),z=L.get("blurScope"),B=L.get("disabled");if(f.useStyle(Q(c.getLineStyle(),{fill:"none",stroke:A,lineJoin:"bevel"})),Dt(f,r,"lineStyle"),f.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var K=f.getState("emphasis").style;K.lineWidth=+f.style.lineWidth+1}ae(f).seriesIndex=r.seriesIndex,We(f,V,z,B);var X=aB(r.get("smooth")),oe=r.get("smoothMonotone");if(f.setShape({smooth:X,smoothMonotone:oe,connectNulls:E}),v){var ye=l.getCalculationInfo("stackedOnSeries"),we=0;v.useStyle(Q(u.getAreaStyle(),{fill:A,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),ye&&(we=aB(ye.get("smooth"))),v.setShape({smooth:X,stackedOnSmooth:we,smoothMonotone:oe,connectNulls:E}),Dt(v,r,"areaStyle"),ae(v).seriesIndex=r.seriesIndex,We(v,V,z,B)}var Oe=function($e){o._changePolyState($e)};l.eachItemGraphicEl(function($e){$e&&($e.onHoverStateChange=Oe)}),this._polyline.onHoverStateChange=Oe,this._data=l,this._coordSys=a,this._stackedOnPoints=b,this._points=d,this._step=_,this._valueOrigin=C,r.get("triggerLineEvent")&&(this.packEventData(r,f),v&&this.packEventData(r,v))},t.prototype.packEventData=function(r,i){ae(i).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,i,n,o){var a=r.getData(),s=Cn(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),c=a.getItemGraphicEl(s);if(!c){var u=l[s*2],d=l[s*2+1];if(isNaN(u)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,d))return;var h=r.get("zlevel")||0,p=r.get("z")||0;c=new Ya(a,s),c.x=u,c.y=d,c.setZ(h,p);var g=c.getSymbolPath().getTextContent();g&&(g.zlevel=h,g.z=p,g.z2=this._polyline.z2+1),c.__temp=!0,a.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else Le.prototype.highlight.call(this,r,i,n,o)},t.prototype.downplay=function(r,i,n,o){var a=r.getData(),s=Cn(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Le.prototype.downplay.call(this,r,i,n,o)},t.prototype._changePolyState=function(r){var i=this._polygon;Ec(this._polyline,r),i&&Ec(i,r)},t.prototype._newPolyline=function(r){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new rB({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},t.prototype._newPolygon=function(r,i){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new eC({shape:{points:r,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(r,i,n){var o,a,s=i.getBaseAxis(),l=s.inverse;i.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):i.type==="polar"&&(o=s.dim==="angle",a=!0);var c=r.hostModel,u=c.get("animationDuration");Z(u)&&(u=u(null));var d=c.get("animationDelay")||0,h=Z(d)?d(null):d;r.eachItemGraphicEl(function(p,g){var f=p;if(f){var v=[p.x,p.y],m=void 0,y=void 0,w=void 0;if(n)if(a){var C=n,S=i.pointToCoord(v);o?(m=C.startAngle,y=C.endAngle,w=-S[1]/180*Math.PI):(m=C.r0,y=C.r,w=S[0])}else{var b=n;o?(m=b.x,y=b.x+b.width,w=p.x):(m=b.y+b.height,y=b.y,w=p.y)}var x=y===m?0:(w-m)/(y-m);l&&(x=1-x);var E=Z(d)?d(g):u*x+h,M=f.getSymbolPath(),T=M.getTextContent();f.attr({scaleX:0,scaleY:0}),f.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:E}),T&&T.animateFrom({style:{opacity:0}},{duration:300,delay:E}),M.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,i,n){var o=r.getModel("endLabel");if(lB(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new De({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=ble(l);u>=0&&(ft(s,at(r,"endLabel"),{inheritColor:n,labelFetcher:r,labelDataIndex:u,defaultText:function(d,h,p){return p!=null?Xw(a,p):yo(a,d)},enableTextSetter:!0},xle(o,i)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,i,n,o,a,s,l){var c=this._endLabel,u=this._polyline;if(c){r<1&&o.originalX==null&&(o.originalX=c.x,o.originalY=c.y);var d=n.getLayout("points"),h=n.hostModel,p=h.get("connectNulls"),g=s.get("precision"),f=s.get("distance")||0,v=l.getBaseAxis(),m=v.isHorizontal(),y=v.inverse,w=i.shape,C=y?m?w.x:w.y+w.height:m?w.x+w.width:w.y,S=(m?f:0)*(y?-1:1),b=(m?0:-f)*(y?-1:1),x=m?"x":"y",E=Sle(d,C,x),M=E.range,T=M[1]-M[0],_=void 0;if(T>=1){if(T>1&&!p){var R=sB(d,M[0]);c.attr({x:R[0]+S,y:R[1]+b}),a&&(_=h.getRawValue(M[0]))}else{var R=u.getPointOn(C,x);R&&c.attr({x:R[0]+S,y:R[1]+b});var A=h.getRawValue(M[0]),P=h.getRawValue(M[1]);a&&(_=$y(n,g,A,P,E.t))}o.lastFrameIndex=M[0]}else{var k=r===1||o.lastFrameIndex>0?M[0]:0,R=sB(d,k);a&&(_=h.getRawValue(k)),c.attr({x:R[0]+S,y:R[1]+b})}if(a){var L=Va(c);typeof L.setLabelText=="function"&&L.setLabelText(_)}}},t.prototype._doUpdateAnimation=function(r,i,n,o,a,s,l){var c=this._polyline,u=this._polygon,d=r.hostModel,h=kT(this._data,r,this._stackedOnPoints,i,this._coordSys,n,this._valueOrigin,s),p=h.current,g=h.stackedOnCurrent,f=h.next,v=h.stackedOnNext;if(a&&(p=nl(h.current,n,a,l),g=nl(h.stackedOnCurrent,n,a,l),f=nl(h.next,n,a,l),v=nl(h.stackedOnNext,n,a,l)),oB(p,f)>3e3||u&&oB(g,v)>3e3){c.stopAnimation(),c.setShape({points:f}),u&&(u.stopAnimation(),u.setShape({points:f,stackedOnPoints:v}));return}c.shape.__points=h.current,c.shape.points=p;var m={shape:{points:f}};h.current!==p&&(m.shape.__points=h.next),c.stopAnimation(),Me(c,m,d),u&&(u.setShape({points:p,stackedOnPoints:g}),u.stopAnimation(),Me(u,{shape:{stackedOnPoints:v}},d),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var y=[],w=h.status,C=0;C<w.length;C++){var S=w[C].cmd;if(S==="="){var b=r.getItemGraphicEl(w[C].idx1);b&&y.push({el:b,ptIdx:C})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var x=c.shape.__points,E=0;E<y.length;E++){var M=y[E].el,T=y[E].ptIdx*2;M.x=x[T],M.y=x[T+1],M.markRedraw()}})},t.prototype.remove=function(r){var i=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(o,a){o.__temp&&(i.remove(o),n.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Le),cB=Dle;function wo(e,t){return{seriesType:e,plan:Xi(),reset:function(r){var i=r.getData(),n=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(n){var s=N(n.dimensions,function(p){return i.mapDimension(p)}).slice(0,2),l=s.length,c=i.getCalculationInfo("stackResultDimension");Ji(i,s[0])&&(s[0]=c),Ji(i,s[1])&&(s[1]=c);var u=i.getStore(),d=i.getDimensionIndex(s[0]),h=i.getDimensionIndex(s[1]);return l&&{progress:function(p,g){for(var f=p.end-p.start,v=a&&oi(f*l),m=[],y=[],w=p.start,C=0;w<p.end;w++){var S=void 0;if(l===1){var b=u.get(d,w);S=n.dataToPoint(b,null,y)}else m[0]=u.get(d,w),m[1]=u.get(h,w),S=n.dataToPoint(m,null,y);a?(v[C++]=S[0],v[C++]=S[1]):g.setItemLayout(w,S.slice())}a&&g.setLayout("points",v)}}}}}}var Ele={average:function(e){for(var t=0,r=0,i=0;i<e.length;i++)isNaN(e[i])||(t+=e[i],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},minmax:function(e){for(var t=-1/0,r=-1/0,i=0;i<e.length;i++){var n=e[i],o=Math.abs(n);o>t&&(t=o,r=n)}return isFinite(r)?r:NaN},nearest:function(e){return e[0]}},Mle=function(e){return Math.round(e.length/2)};function df(e){return{seriesType:e,reset:function(t,r,i){var n=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=n.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),c=a.getOtherAxis(l),u=l.getExtent(),d=i.getDevicePixelRatio(),h=Math.abs(u[1]-u[0])*(d||1),p=Math.round(s/h);if(isFinite(p)&&p>1){o==="lttb"&&t.setData(n.lttbDownSample(n.mapDimension(c.dim),1/p));var g=void 0;H(o)?g=Ele[o]:Z(o)&&(g=o),g&&t.setData(n.downSample(n.mapDimension(c.dim),1/p,g,Mle))}}}}}function zT(e){e.registerChartView(cB),e.registerSeriesModel(Q5),e.registerLayout(wo("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),i=t.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",i)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,df("line"))}var uB=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){return Sr(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r,i,n){var o=this.coordinateSystem;if(o&&o.clampData){var a=o.clampData(r),s=o.dataToPoint(a);if(n)D(o.getAxes(),function(h,p){if(h.type==="category"&&i!=null){var g=h.getTicksCoords(),f=h.getTickModel().get("alignWithLabel"),v=a[p],m=i[p]==="x1"||i[p]==="y1";if(m&&!f&&(v+=1),g.length<2)return;if(g.length===2){s[p]=h.toGlobalCoord(h.getExtent()[m?1:0]);return}for(var y=void 0,w=void 0,C=1,S=0;S<g.length;S++){var b=g[S].coord,x=S===g.length-1?g[S-1].tickValue+C:g[S].tickValue;if(x===v){w=b;break}else if(x<v)y=b;else if(y!=null&&x>v){w=(b+y)/2;break}S===1&&(C=x-g[0].tickValue)}w==null&&(y?y&&(w=g[g.length-1].coord):w=g[0].coord),s[p]=h.toGlobalCoord(w)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),d=o.getBaseAxis().isHorizontal()?0:1;s[d]+=c+u/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Be);Be.registerClass(uB);var eh=uB;var Tle=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return Sr(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>r&&(r=i),r},t.prototype.brushSelector=function(r,i,n){return n.rect(i.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Wr(eh.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(eh),dB=Tle;var _le=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Rle=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="sausage",i}return t.prototype.getDefaultShape=function(){return new _le},t.prototype.buildPath=function(r,i){var n=i.cx,o=i.cy,a=Math.max(i.r0||0,0),s=Math.max(i.r,0),l=(s-a)*.5,c=a+l,u=i.startAngle,d=i.endAngle,h=i.clockwise,p=Math.PI*2,g=h?d-u<p:u-d<p;g||(u=d-(h?p:-p));var f=Math.cos(u),v=Math.sin(u),m=Math.cos(d),y=Math.sin(d);g?(r.moveTo(f*a+n,v*a+o),r.arc(f*c+n,v*c+o,l,-Math.PI+u,u,!h)):r.moveTo(f*s+n,v*s+o),r.arc(n,o,s,u,d,!h),r.arc(m*c+n,y*c+o,l,d-Math.PI*2,d-Math.PI,!h),a!==0&&r.arc(n,o,a,d,u,h)},t}(ce),th=Rle;function hB(e,t){t=t||{};var r=t.isRoundCap;return function(i,n,o){var a=n.position;if(!a||a instanceof Array)return pc(i,n,o);var s=e(a),l=n.distance!=null?n.distance:5,c=this.shape,u=c.cx,d=c.cy,h=c.r,p=c.r0,g=(h+p)/2,f=c.startAngle,v=c.endAngle,m=(f+v)/2,y=r?Math.abs(h-p)/2:0,w=Math.cos,C=Math.sin,S=u+h*w(f),b=d+h*C(f),x="left",E="top";switch(s){case"startArc":S=u+(p-l)*w(m),b=d+(p-l)*C(m),x="center",E="top";break;case"insideStartArc":S=u+(p+l)*w(m),b=d+(p+l)*C(m),x="center",E="bottom";break;case"startAngle":S=u+g*w(f)+tC(f,l+y,!1),b=d+g*C(f)+rC(f,l+y,!1),x="right",E="middle";break;case"insideStartAngle":S=u+g*w(f)+tC(f,-l+y,!1),b=d+g*C(f)+rC(f,-l+y,!1),x="left",E="middle";break;case"middle":S=u+g*w(m),b=d+g*C(m),x="center",E="middle";break;case"endArc":S=u+(h+l)*w(m),b=d+(h+l)*C(m),x="center",E="bottom";break;case"insideEndArc":S=u+(h-l)*w(m),b=d+(h-l)*C(m),x="center",E="top";break;case"endAngle":S=u+g*w(v)+tC(v,l+y,!0),b=d+g*C(v)+rC(v,l+y,!0),x="left",E="middle";break;case"insideEndAngle":S=u+g*w(v)+tC(v,-l+y,!0),b=d+g*C(v)+rC(v,-l+y,!0),x="right",E="middle";break;default:return pc(i,n,o)}return i=i||{},i.x=S,i.y=b,i.align=x,i.verticalAlign=E,i}}function pB(e,t,r,i){if(be(i)){e.setTextConfig({rotation:i});return}else if(O(t)){e.setTextConfig({rotation:0});return}var n=e.shape,o=n.clockwise?n.startAngle:n.endAngle,a=n.clockwise?n.endAngle:n.startAngle,s=(o+a)/2,l,c=r(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),e.setTextConfig({rotation:u})}function tC(e,t,r){return t*Math.sin(e)*(r?-1:1)}function rC(e,t,r){return t*Math.cos(e)*(r?1:-1)}function na(e,t,r){var i=e.get("borderRadius");if(i==null)return r?{cornerRadius:0}:null;O(i)||(i=[i,i,i,i]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:N(i,function(o){return Tr(o,n)})}}var VT=Math.max,BT=Math.min;function Ale(e,t){var r=e.getArea&&e.getArea();if(In(e,"cartesian2d")){var i=e.getBaseAxis();if(i.type!=="category"||!i.onBand){var n=t.getLayout("bandWidth");i.isHorizontal()?(r.x-=n,r.width+=n*2):(r.y-=n,r.height+=n*2)}}return r}var Ile=function(e){I(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,i,n,o){this._model=r,this._removeOnRenderedListener(n),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,i,n):this._renderNormal(r,i,n,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,i){this._progressiveEls=[],this._incrementalRenderLarge(r,i)},t.prototype.eachRendered=function(r){ri(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var i=r.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(r,i,n,o){var a=this.group,s=r.getData(),l=this._data,c=r.coordinateSystem,u=c.getBaseAxis(),d;c.type==="cartesian2d"?d=u.isHorizontal():c.type==="polar"&&(d=u.dim==="angle");var h=r.isAnimationEnabled()?r:null,p=Ple(r,c);p&&this._enableRealtimeSort(p,s,n);var g=r.get("clip",!0)||p,f=Ale(c,s);a.removeClipPath();var v=r.get("roundCap",!0),m=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),w=y.get("borderRadius")||0,C=[],S=this._backgroundEls,b=o&&o.isInitSort,x=o&&o.type==="changeAxisOrder";function E(_){var R=iC[c.type](s,_),A=Vle(c,d,R);return A.useStyle(y.getItemStyle()),c.type==="cartesian2d"?A.setShape("r",w):A.setShape("cornerRadius",w),C[_]=A,A}s.diff(l).add(function(_){var R=s.getItemModel(_),A=iC[c.type](s,_,R);if(m&&E(_),!(!s.hasValue(_)||!yB[c.type](A))){var P=!1;g&&(P=gB[c.type](f,A));var k=fB[c.type](r,s,_,A,d,h,u.model,!1,v);p&&(k.forceLabelAnimation=!0),wB(k,s,_,R,A,r,d,c.type==="polar"),b?k.attr({shape:A}):p?vB(p,h,k,A,_,d,!1,!1):je(k,{shape:A},r,_),s.setItemGraphicEl(_,k),a.add(k),k.ignore=P}}).update(function(_,R){var A=s.getItemModel(_),P=iC[c.type](s,_,A);if(m){var k=void 0;S.length===0?k=E(R):(k=S[R],k.useStyle(y.getItemStyle()),c.type==="cartesian2d"?k.setShape("r",w):k.setShape("cornerRadius",w),C[_]=k);var L=iC[c.type](s,_),V=DB(d,L,c);Me(k,{shape:V},h,_)}var z=l.getItemGraphicEl(R);if(!s.hasValue(_)||!yB[c.type](P)){a.remove(z);return}var B=!1;if(g&&(B=gB[c.type](f,P),B&&a.remove(z)),z?nr(z):z=fB[c.type](r,s,_,P,d,h,u.model,!!z,v),p&&(z.forceLabelAnimation=!0),x){var K=z.getTextContent();if(K){var X=Va(K);X.prevValue!=null&&(X.prevValue=X.value)}}else wB(z,s,_,A,P,r,d,c.type==="polar");b?z.attr({shape:P}):p?vB(p,h,z,P,_,d,!0,x):Me(z,{shape:P},r,_,null),s.setItemGraphicEl(_,z),z.ignore=B,a.add(z)}).remove(function(_){var R=l.getItemGraphicEl(_);R&&Fa(R,r,_)}).execute();var M=this._backgroundGroup||(this._backgroundGroup=new ee);M.removeAll();for(var T=0;T<C.length;++T)M.add(C[T]);a.add(M),this._backgroundEls=C,this._data=s},t.prototype._renderLarge=function(r,i,n){this._clear(),bB(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,i){this._removeBackground(),bB(i,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var i=r.get("clip",!0)&&ia(r.coordinateSystem,!1,r),n=this.group;i?n.setClipPath(i):n.removeClipPath()},t.prototype._enableRealtimeSort=function(r,i,n){var o=this;if(i.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,r,n),this._isFirstFrame=!1;else{var s=function(l){var c=i.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(a.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){o._updateSortWithinSameData(i,s,a,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,i,n){var o=[];return r.each(r.mapDimension(i.dim),function(a,s){var l=n(s);l=l??NaN,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:N(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,i,n){for(var o=n.scale,a=r.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,c=o.getOrdinalMeta().categories.length;l<c;++l){var u=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:i(r.indexOfRawIndex(u));if(d>s)return!0;s=d}return!1},t.prototype._isOrderDifferentInView=function(r,i){for(var n=i.scale,o=n.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],n.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==n.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,i,n,o){if(this._isOrderChangedWithinSameData(r,i,n)){var a=this._dataSort(r,n,i);this._isOrderDifferentInView(a,n)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,i,n){var o=i.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(i.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,i){this._clear(this._model),this._removeOnRenderedListener(i)},t.prototype.dispose=function(r,i){this._removeOnRenderedListener(i)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var i=this.group,n=this._data;r&&r.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(o){Fa(o,r,ae(o).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Le),gB={cartesian2d:function(e,t){var r=t.width<0?-1:1,i=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,o=e.y+e.height,a=VT(t.x,e.x),s=BT(t.x+t.width,n),l=VT(t.y,e.y),c=BT(t.y+t.height,o),u=s<a,d=c<l;return t.x=u&&a>n?s:a,t.y=d&&l>o?c:l,t.width=u?0:s-a,t.height=d?0:c-l,r<0&&(t.x+=t.width,t.width=-t.width),i<0&&(t.y+=t.height,t.height=-t.height),u||d},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}var n=BT(t.r,e.r),o=VT(t.r0,e.r0);t.r=n,t.r0=o;var a=n-o<0;if(r<0){var i=t.r;t.r=t.r0,t.r0=i}return a}},fB={cartesian2d:function(e,t,r,i,n,o,a,s,l){var c=new Ce({shape:F({},i),z2:1});if(c.__dataIndex=r,c.name="item",o){var u=c.shape,d=n?"height":"width";u[d]=0}return c},polar:function(e,t,r,i,n,o,a,s,l){var c=!n&&l?th:qt,u=new c({shape:i,z2:1});u.name="item";var d=xB(n);if(u.calculateTextPosition=hB(d,{isRoundCap:c===th}),o){var h=u.shape,p=n?"r":"endAngle",g={};h[p]=n?i.r0:i.startAngle,g[p]=i[p],(s?Me:je)(u,{shape:g},o)}return u}};function Ple(e,t){var r=e.get("realtimeSort",!0),i=t.getBaseAxis();if(r&&i.type==="category"&&t.type==="cartesian2d")return{baseAxis:i,otherAxis:t.getOtherAxis(i)}}function vB(e,t,r,i,n,o,a,s){var l,c;o?(c={x:i.x,width:i.width},l={y:i.y,height:i.height}):(c={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(a?Me:je)(r,{shape:l},t,n,null);var u=t?e.baseAxis.model:null;(a?Me:je)(r,{shape:c},u,n)}function mB(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var kle=["x","y","width","height"],Lle=["cx","cy","r","startAngle","endAngle"],yB={cartesian2d:function(e){return!mB(e,kle)},polar:function(e){return!mB(e,Lle)}},iC={cartesian2d:function(e,t,r){var i=e.getItemLayout(t),n=r?Ole(r,i):0,o=i.width>0?1:-1,a=i.height>0?1:-1;return{x:i.x+o*n/2,y:i.y+a*n/2,width:i.width-o*n,height:i.height-a*n}},polar:function(e,t,r){var i=e.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function Fle(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function xB(e){return function(t){var r=t?"Arc":"Angle";return function(i){switch(i){case"start":case"insideStart":case"end":case"insideEnd":return i+r;default:return i}}}(e)}function wB(e,t,r,i,n,o,a,s){var l=t.getItemVisual(r,"style");if(s){if(!o.get("roundCap")){var u=e.shape,d=na(i.getModel("itemStyle"),u,!0);F(u,d),e.setShape(u)}}else{var c=i.get(["itemStyle","borderRadius"])||0;e.setShape("r",c)}e.useStyle(l);var h=i.getShallow("cursor");h&&e.attr("cursor",h);var p=s?a?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":a?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=at(i);ft(e,g,{labelFetcher:o,labelDataIndex:r,defaultText:yo(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var f=e.getTextContent();if(s&&f){var v=i.get(["label","position"]);e.textConfig.inside=v==="middle"?!0:null,pB(e,v==="outside"?p:v,xB(a),i.get(["label","rotate"]))}w0(f,g,o.getRawValue(r),function(y){return Xw(t,y)});var m=i.getModel(["emphasis"]);We(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),Dt(e,i),Fle(n)&&(e.style.fill="none",e.style.stroke="none",D(e.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Ole(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var i=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(i,n,o)}var Nle=function(){function e(){}return e}(),CB=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="largeBar",i}return t.prototype.getDefaultShape=function(){return new Nle},t.prototype.buildPath=function(r,i){for(var n=i.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<n.length;u+=3)l[o]=c,l[a]=n[u+2],s[o]=n[u+o],s[a]=n[u+a],r.rect(s[0],s[1],l[0],l[1])},t}(ce);function bB(e,t,r,i){var n=e.getData(),o=n.getLayout("valueAxisHorizontal")?1:0,a=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=e.getModel("backgroundStyle"),c=n.getLayout("largeBackgroundPoints");if(c){var u=new CB({shape:{points:c},incremental:!!i,silent:!0,z2:0});u.baseDimIdx=o,u.largeDataIndices=a,u.barWidth=s,u.useStyle(l.getItemStyle()),t.add(u),r&&r.push(u)}var d=new CB({shape:{points:n.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=o,d.largeDataIndices=a,d.barWidth=s,t.add(d),d.useStyle(n.getVisual("style")),ae(d).seriesIndex=e.seriesIndex,e.get("silent")||(d.on("mousedown",SB),d.on("mousemove",SB)),r&&r.push(d)}var SB=Lg(function(e){var t=this,r=zle(t,e.offsetX,e.offsetY);ae(t).dataIndex=r>=0?r:null},30,!1);function zle(e,t,r){for(var i=e.baseDimIdx,n=1-i,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],c=e.barWidth,u=0,d=o.length/3;u<d;u++){var h=u*3;if(l[i]=c,l[n]=o[h+2],s[i]=o[h+i],s[n]=o[h+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[u]}return-1}function DB(e,t,r){if(In(r,"cartesian2d")){var i=t,n=r.getArea();return{x:e?i.x:n.x,y:e?n.y:i.y,width:e?i.width:n.width,height:e?n.height:i.height}}else{var n=r.getArea(),o=t;return{cx:n.cx,cy:n.cy,r0:e?n.r0:o.r0,r:e?n.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function Vle(e,t,r){var i=e.type==="polar"?qt:Ce;return new i({shape:DB(t,r,e),silent:!0,z2:0})}var EB=Ile;function GT(e){e.registerChartView(EB),e.registerSeriesModel(dB),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,se(Dw,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ew("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,df("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var i=t.componentType||"series";r.eachComponent({mainType:i,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var MB=Math.PI*2,nC=Math.PI/180;function TB(e,t){return Je(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function HT(e,t){var r=TB(e,t),i=e.get("center"),n=e.get("radius");O(n)||(n=[0,n]);var o=j(r.width,t.getWidth()),a=j(r.height,t.getHeight()),s=Math.min(o,a),l=j(n[0],s/2),c=j(n[1],s/2),u,d,h=e.coordinateSystem;if(h){var p=h.dataToPoint(i);u=p[0]||0,d=p[1]||0}else O(i)||(i=[i,i]),u=j(i[0],o)+r.x,d=j(i[1],a)+r.y;return{cx:u,cy:d,r0:l,r:c}}function UT(e,t,r){t.eachSeriesByType(e,function(i){var n=i.getData(),o=n.mapDimension("value"),a=TB(i,r),s=HT(i,r),l=s.cx,c=s.cy,u=s.r,d=s.r0,h=-i.get("startAngle")*nC,p=i.get("endAngle"),g=i.get("padAngle")*nC;p=p==="auto"?h-MB:-p*nC;var f=i.get("minAngle")*nC,v=f+g,m=0;n.each(o,function(V){!isNaN(V)&&m++});var y=n.getSum(o),w=Math.PI/(y||m)*2,C=i.get("clockwise"),S=i.get("roseType"),b=i.get("stillShowZeroSum"),x=n.getDataExtent(o);x[0]=0;var E=C?1:-1,M=[h,p],T=E*g/2;rg(M,!C),h=M[0],p=M[1];var _=WT(i);_.startAngle=h,_.endAngle=p,_.clockwise=C;var R=Math.abs(p-h),A=R,P=0,k=h;if(n.setLayout({viewRect:a,r:u}),n.each(o,function(V,z){var B;if(isNaN(V)){n.setItemLayout(z,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:C,cx:l,cy:c,r0:d,r:S?NaN:u});return}S!=="area"?B=y===0&&b?w:V*w:B=R/m,B<v?(B=v,A-=v):P+=V;var K=k+E*B,X=0,oe=0;g>B?(X=k+E*B/2,oe=X):(X=k+T,oe=K-T),n.setItemLayout(z,{angle:B,startAngle:X,endAngle:oe,clockwise:C,cx:l,cy:c,r0:d,r:S?Ye(V,x,[d,u]):u}),k=K}),A<MB&&m)if(A<=.001){var L=R/m;n.each(o,function(V,z){if(!isNaN(V)){var B=n.getItemLayout(z);B.angle=L;var K=0,X=0;L<g?(K=h+E*(z+1/2)*L,X=K):(K=h+E*z*L+T,X=h+E*(z+1)*L-T),B.startAngle=K,B.endAngle=X}})}else w=A/P,k=h,n.each(o,function(V,z){if(!isNaN(V)){var B=n.getItemLayout(z),K=B.angle===v?v:V*w,X=0,oe=0;K<g?(X=k+E*K/2,oe=X):(X=k+T,oe=k+E*K-T),B.startAngle=X,B.endAngle=oe,k+=E*K}})})}var WT=he();function Co(e){return{seriesType:e,reset:function(t,r){var i=r.findComponents({mainType:"legend"});if(!(!i||!i.length)){var n=t.getData();n.filterSelf(function(o){for(var a=n.getName(o),s=0;s<i.length;s++)if(!i[s].isSelected(a))return!1;return!0})}}}}var Ble=Math.PI/180;function _B(e,t,r,i,n,o,a,s,l,c){if(e.length<2)return;function u(f){for(var v=f.rB,m=v*v,y=0;y<f.list.length;y++){var w=f.list[y],C=Math.abs(w.label.y-r),S=i+w.len,b=S*S,x=Math.sqrt((1-Math.abs(C*C/m))*b),E=t+(x+w.len2)*n,M=E-w.label.x,T=w.targetTextWidth-M*n;RB(w,T,!0),w.label.x=E}}function d(f){for(var v={list:[],maxY:0},m={list:[],maxY:0},y=0;y<f.length;y++)if(f[y].labelAlignTo==="none"){var w=f[y],C=w.label.y>r?m:v,S=Math.abs(w.label.y-r);if(S>=C.maxY){var b=w.label.x-t-w.len2*n,x=i+w.len,E=Math.abs(b)<x?Math.sqrt(S*S/(1-b*b/x/x)):x;C.rB=E,C.maxY=S}C.list.push(w)}u(v),u(m)}for(var h=e.length,p=0;p<h;p++)if(e[p].position==="outer"&&e[p].labelAlignTo==="labelLine"){var g=e[p].label.x-c;e[p].linePoints[1][0]+=g,e[p].label.x=c}Vw(e,l,l+a)&&d(e)}function Gle(e,t,r,i,n,o,a,s){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<e.length;h++){var p=e[h].label;jT(e[h])||(p.x<t?(u=Math.min(u,p.x),l.push(e[h])):(d=Math.max(d,p.x),c.push(e[h])))}for(var h=0;h<e.length;h++){var g=e[h];if(!jT(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var p=g.label,f=g.linePoints,v=void 0;g.labelAlignTo==="edge"?p.x<t?v=f[2][0]-g.labelDistance-a-g.edgeDistance:v=a+n-g.edgeDistance-f[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?p.x<t?v=u-a-g.bleedMargin:v=a+n-d-g.bleedMargin:p.x<t?v=p.x-a-g.bleedMargin:v=a+n-p.x-g.bleedMargin,g.targetTextWidth=v,RB(g,v)}}_B(c,t,r,i,1,n,o,a,s,d),_B(l,t,r,i,-1,n,o,a,s,u);for(var h=0;h<e.length;h++){var g=e[h];if(!jT(g)&&g.linePoints){var p=g.label,f=g.linePoints,m=g.labelAlignTo==="edge",y=p.style.padding,w=y?y[1]+y[3]:0,C=p.style.backgroundColor?0:w,S=g.rect.width+C,b=f[1][0]-f[2][0];m?p.x<t?f[2][0]=a+g.edgeDistance+S+g.labelDistance:f[2][0]=a+n-g.edgeDistance-S-g.labelDistance:(p.x<t?f[2][0]=p.x+g.labelDistance:f[2][0]=p.x-g.labelDistance,f[1][0]=f[2][0]+b),f[1][1]=f[2][1]=p.y}}}function RB(e,t,r){if(r===void 0&&(r=!1),e.labelStyleWidth==null){var i=e.label,n=i.style,o=e.rect,a=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,c=n.overflow,u=o.width+(a?0:l);if(t<u||r){var d=o.height;if(c&&c.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",t-l);var h=i.getBoundingRect();i.setStyle("width",Math.ceil(h.width)),i.setStyle("backgroundColor",a)}else{var p=t-l,g=t<u?p:r?p>e.unconstrainedWidth?null:p:null;i.setStyle("width",g)}var f=i.getBoundingRect();o.width=f.width;var v=(i.style.margin||0)+2.1;o.height=f.height+v,o.y-=(o.height-d)/2}}}function jT(e){return e.position==="center"}function $T(e){var t=e.getData(),r=[],i,n,o=!1,a=(e.get("minShowLabelAngle")||0)*Ble,s=t.getLayout("viewRect"),l=t.getLayout("r"),c=s.width,u=s.x,d=s.y,h=s.height;function p(b){b.ignore=!0}function g(b){if(!b.ignore)return!0;for(var x in b.states)if(b.states[x].ignore===!1)return!0;return!1}t.each(function(b){var x=t.getItemGraphicEl(b),E=x.shape,M=x.getTextContent(),T=x.getTextGuideLine(),_=t.getItemModel(b),R=_.getModel("label"),A=R.get("position")||_.get(["emphasis","label","position"]),P=R.get("distanceToLabelLine"),k=R.get("alignTo"),L=j(R.get("edgeDistance"),c),V=R.get("bleedMargin"),z=_.getModel("labelLine"),B=z.get("length");B=j(B,c);var K=z.get("length2");if(K=j(K,c),Math.abs(E.endAngle-E.startAngle)<a){D(M.states,p),M.ignore=!0,T&&(D(T.states,p),T.ignore=!0);return}if(g(M)){var X=(E.startAngle+E.endAngle)/2,oe=Math.cos(X),ye=Math.sin(X),we,Oe,$e,Ne;i=E.cx,n=E.cy;var xe=A==="inside"||A==="inner";if(A==="center")we=E.cx,Oe=E.cy,Ne="center";else{var ze=(xe?(E.r+E.r0)/2*oe:E.r*oe)+i,Ae=(xe?(E.r+E.r0)/2*ye:E.r*ye)+n;if(we=ze+oe*3,Oe=Ae+ye*3,!xe){var ve=ze+oe*(B+l-E.r),Ie=Ae+ye*(B+l-E.r),At=ve+(oe<0?-1:1)*K,Ze=Ie;k==="edge"?we=oe<0?u+L:u+c-L:we=At+(oe<0?-P:P),Oe=Ze,$e=[[ze,Ae],[ve,Ie],[At,Ze]]}Ne=xe?"center":k==="edge"?oe>0?"right":"left":oe>0?"left":"right"}var Wt=Math.PI,Ot=0,Fr=R.get("rotate");if(be(Fr))Ot=Fr*(Wt/180);else if(A==="center")Ot=0;else if(Fr==="radial"||Fr===!0){var va=oe<0?-X+Wt:-X;Ot=va}else if(Fr==="tangential"&&A!=="outside"&&A!=="outer"){var vi=Math.atan2(oe,ye);vi<0&&(vi=Wt*2+vi);var yv=ye>0;yv&&(vi=Wt+vi),Ot=vi-Wt}if(o=!!Ot,M.x=we,M.y=Oe,M.rotation=Ot,M.setStyle({verticalAlign:"middle"}),xe){M.setStyle({align:Ne});var vS=M.states.select;vS&&(vS.x+=M.x,vS.y+=M.y)}else{var ss=M.getBoundingRect().clone();ss.applyTransform(M.getComputedTransform());var DP=(M.style.margin||0)+2.1;ss.y-=DP/2,ss.height+=DP,r.push({label:M,labelLine:T,position:A,len:B,len2:K,minTurnAngle:z.get("minTurnAngle"),maxSurfaceAngle:z.get("maxSurfaceAngle"),surfaceNormal:new _e(oe,ye),linePoints:$e,textAlign:Ne,labelDistance:P,labelAlignTo:k,edgeDistance:L,bleedMargin:V,rect:ss,unconstrainedWidth:ss.width,labelStyleWidth:M.style.width})}x.setTextConfig({inside:xe})}}),!o&&e.get("avoidLabelOverlap")&&Gle(r,i,n,l,c,h,u,d);for(var f=0;f<r.length;f++){var v=r[f],m=v.label,y=v.labelLine,w=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),w&&(D(m.states,p),m.ignore=!0);var C=m.states.select;C&&(C.x+=m.x,C.y+=m.y)}if(y){var S=v.linePoints;w||!S?(D(y.states,p),y.ignore=!0):(aT(S,v.minTurnAngle),x5(S,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:S}),m.__hostTarget.textGuideLineConfig={anchor:new _e(S[0][0],S[0][1])})}}}var Hle=function(e){I(t,e);function t(r,i,n){var o=e.call(this)||this;o.z2=2;var a=new De;return o.setTextContent(a),o.updateData(r,i,n,!0),o}return t.prototype.updateData=function(r,i,n,o){var a=this,s=r.hostModel,l=r.getItemModel(i),c=l.getModel("emphasis"),u=r.getItemLayout(i),d=F(na(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){a.setShape(d);return}if(o){a.setShape(d);var h=s.getShallow("animationType");s.ecModel.ssr?(je(a,{scaleX:0,scaleY:0},s,{dataIndex:i,isFrom:!0}),a.originX=d.cx,a.originY=d.cy):h==="scale"?(a.shape.r=u.r0,je(a,{shape:{r:u.r}},s,i)):n!=null?(a.setShape({startAngle:n,endAngle:n}),je(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,i)):(a.shape.endAngle=u.startAngle,Me(a,{shape:{endAngle:u.endAngle}},s,i))}else nr(a),Me(a,{shape:d},s,i);a.useStyle(r.getItemVisual(i,"style")),Dt(a,l);var p=(u.startAngle+u.endAngle)/2,g=s.get("selectedOffset"),f=Math.cos(p)*g,v=Math.sin(p)*g,m=l.getShallow("cursor");m&&a.attr("cursor",m),this._updateLabel(s,r,i),a.ensureState("emphasis").shape=F({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},na(c.getModel("itemStyle"),u)),F(a.ensureState("select"),{x:f,y:v,shape:na(l.getModel(["select","itemStyle"]),u)}),F(a.ensureState("blur"),{shape:na(l.getModel(["blur","itemStyle"]),u)});var y=a.getTextGuideLine(),w=a.getTextContent();y&&F(y.ensureState("select"),{x:f,y:v}),F(w.ensureState("select"),{x:f,y:v}),We(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(r,i,n){var o=this,a=i.getItemModel(n),s=a.getModel("labelLine"),l=i.getItemVisual(n,"style"),c=l&&l.fill,u=l&&l.opacity;ft(o,at(a),{labelFetcher:i.hostModel,labelDataIndex:n,inheritColor:c,defaultOpacity:u,defaultText:r.getFormattedLabel(n,"normal")||i.getName(n)});var d=o.getTextContent();o.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=r.get(["label","position"]);if(h!=="outside"&&h!=="outer")o.removeTextGuideLine();else{var p=this.getTextGuideLine();p||(p=new Rt,this.setTextGuideLine(p)),Xd(this,Qd(a),{stroke:c,opacity:ur(s.get(["lineStyle","opacity"]),u,1)})}},t}(qt),Ule=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,i,n,o){var a=r.getData(),s=this._data,l=this.group,c;if(!s&&a.count()>0){for(var u=a.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<a.count();++d)u=a.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&r.get("showEmptyCircle")){var h=WT(r),p=new qt({shape:F(HT(r,n),h)});p.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=p,l.add(p)}a.diff(s).add(function(g){var f=new Hle(a,g,c);a.setItemGraphicEl(g,f),l.add(f)}).update(function(g,f){var v=s.getItemGraphicEl(f);v.updateData(a,g,c),v.off("click"),l.add(v),a.setItemGraphicEl(g,v)}).remove(function(g){var f=s.getItemGraphicEl(g);Fa(f,r,g)}).execute(),$T(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(r,i){var n=i.getData(),o=n.getItemLayout(0);if(o){var a=r[0]-o.cx,s=r[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},t.type="pie",t}(Le),AB=Ule;function en(e,t,r){t=O(t)&&{coordDimensions:t}||F({encodeDefine:e.getEncode()},t);var i=e.getSource(),n=go(i,t).dimensions,o=new Pt(n,e);return o.initData(i,r),o}var Wle=function(){function e(t,r){this._getDataWithEncodedVisual=t,this._getRawData=r}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var r=this._getRawData();return r.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var r=this._getDataWithEncodedVisual();return r.indexOfName(t)},e.prototype.getItemVisual=function(t,r){var i=this._getDataWithEncodedVisual();return i.getItemVisual(t,r)},e}(),oa=Wle;var jle=he(),$le=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new oa($(this.getData,this),$(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return en(this,{coordDimensions:["value"],encodeDefaulter:se(Hd,this)})},t.prototype.getDataParams=function(r){var i=this.getData(),n=jle(i),o=n.seats;if(!o){var a=[];i.each(i.mapDimension("value"),function(l){a.push(l)}),o=n.seats=WO(a,i.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,r);return s.percent=o[r]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(r){Yi(r,"labelLine",["show"]);var i=r.labelLine,n=r.emphasis.labelLine;i.show=i.show&&r.label.show,n.show=n.show&&r.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Be),IB=$le;function YT(e){return{seriesType:e,reset:function(t,r){var i=t.getData();i.filterSelf(function(n){var o=i.mapDimension("value"),a=i.get(o,n);return!(be(a)&&!isNaN(a)&&a<0)})}}}function qT(e){e.registerChartView(AB),e.registerSeriesModel(IB),ow("pie",e.registerAction),e.registerLayout(se(UT,"pie")),e.registerProcessor(Co("pie")),e.registerProcessor(YT("pie"))}var Yle=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return Sr(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Be),PB=Yle;var kB=4,qle=function(){function e(){}return e}(),Kle=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.getDefaultShape=function(){return new qle},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,i){var n=i.points,o=i.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,c=l&&o[0]<kB,u=this.softClipShape,d;if(c){this._ctx=l;return}for(this._ctx=null,d=this._off;d<n.length;){var h=n[d++],p=n[d++];isNaN(h)||isNaN(p)||u&&!u.contain(h,p)||(s.x=h-o[0]/2,s.y=p-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,i=r.points,n=r.size,o=this._ctx,a=this.softClipShape,s;if(o){for(s=this._off;s<i.length;){var l=i[s++],c=i[s++];isNaN(l)||isNaN(c)||a&&!a.contain(l,c)||o.fillRect(l-n[0]/2,c-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,i){for(var n=this.shape,o=n.points,a=n.size,s=Math.max(a[0],4),l=Math.max(a[1],4),c=o.length/2-1;c>=0;c--){var u=c*2,d=o[u]-s/2,h=o[u+1]-l/2;if(r>=d&&i>=h&&r<=d+s&&i<=h+l)return c}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),o=this.getBoundingRect();if(r=n[0],i=n[1],o.contain(r,i)){var a=this.hoverDataIdx=this.findDataIndex(r,i);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.points,o=i.size,a=o[0],s=o[1],l=1/0,c=1/0,u=-1/0,d=-1/0,h=0;h<n.length;){var p=n[h++],g=n[h++];l=Math.min(p,l),u=Math.max(p,u),c=Math.min(g,c),d=Math.max(g,d)}r=this._rect=new le(l-a/2,c-s/2,u-l+a,d-c+s)}return r},t}(ce),Zle=function(){function e(){this.group=new ee}return e.prototype.updateData=function(t,r){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var n=(i.endIndex-i.startIndex)*2,o=i.startIndex*4*2;r=new Float32Array(r.buffer,o,n)}i.setShape("points",r),i.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,i){var n=this._newAdded[0],o=r.getLayout("points"),a=n&&n.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=t.start,c.endIndex=t.end,c.incremental=!0,c.setShape({points:o}),this._setCommon(c,r,i)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Kle({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;i=i||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=i.clipShape||null,t.symbolProxy=et(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<kB;t.useStyle(n.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var c=ae(t);c.seriesIndex=n.seriesIndex,t.on("mousemove",function(u){c.dataIndex=null;var d=t.hoverDataIdx;d>=0&&(c.dataIndex=d+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),LB=Zle;var Xle=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._symbolDraw.incrementalUpdate(r,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=r.end===i.getData().count()},t.prototype.updateTransform=function(r,i,n){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=wo("").reset(r,i,n);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){if(r.get("clip",!0)){var i=r.coordinateSystem;return i&&i.getArea&&i.getArea(.1)}},t.prototype._updateSymbolDraw=function(r,i){var n=this._symbolDraw,o=i.pipelineContext,a=o.large;return(!n||a!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=a?new LB:new ra,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Le),FB=Xle;var Qle=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Ee),OB=Qle;var oC=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",dt).models[0]},t.type="cartesian2dAxis",t}(Ee);ot(oC,Qo);var NB={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Jle=fe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},NB),KT=fe({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},NB),ece=fe({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},KT),tce=Q({logBase:10},KT),aC={category:Jle,value:KT,time:ece,log:tce};var zB={value:1,category:1,time:1,log:1};function bo(e,t,r,i){D(zB,function(n,o){var a=fe(fe({},aC[o],!0),i,!0),s=function(l){I(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=t+"Axis."+o,u}return c.prototype.mergeDefaultAndTheme=function(u,d){var h=Us(this),p=h?En(u):{},g=d.getTheme();fe(u,g.get(o+"Axis")),fe(u,this.getDefaultOption()),u.type=VB(u),h&&Ii(u,p,h)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=Zg.createByAxisModel(this))},c.prototype.getCategories=function(u){var d=this.option;if(d.type==="category")return u?d.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=t+"Axis."+o,c.defaultOption=a,c}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",VB)}function VB(e){return e.type||(e.data?"category":"value")}var rce=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return N(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Pe(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}(),BB=rce;var sC=["x","y"];function GB(e){return e.type==="interval"||e.type==="time"}var ice=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=sC,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!GB(r)||!GB(i))){var n=r.getExtent(),o=i.getExtent(),a=this.dataToPoint([n[0],o[0]]),s=this.dataToPoint([n[1],o[1]]),l=n[1]-n[0],c=o[1]-o[0];if(!(!l||!c)){var u=(s[0]-a[0])/l,d=(s[1]-a[1])/c,h=a[0]-n[0]*u,p=a[1]-o[0]*d,g=this._transform=[u,0,0,d,h,p];this._invTransform=gn([],g)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var i=this.getAxis("x"),n=this.getAxis("y");return i.contain(i.toLocalCoord(r[0]))&&n.contain(n.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,i){var n=this.dataToPoint(r),o=this.dataToPoint(i),a=this.getArea(),s=new le(n[0],n[1],o[0]-n[0],o[1]-n[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,i,n){n=n||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return Bt(n,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(o,i)),n[1]=l.toGlobalCoord(l.dataToCoord(a,i)),n},t.prototype.clampData=function(r,i){var n=this.getAxis("x").scale,o=this.getAxis("y").scale,a=n.getExtent(),s=o.getExtent(),l=n.parse(r[0]),c=o.parse(r[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),i[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),i},t.prototype.pointToData=function(r,i){var n=[];if(this._invTransform)return Bt(n,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return n[0]=o.coordToData(o.toLocalCoord(r[0]),i),n[1]=a.coordToData(a.toLocalCoord(r[1]),i),n},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(r){r=r||0;var i=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),o=Math.min(i[0],i[1])-r,a=Math.min(n[0],n[1])-r,s=Math.max(i[0],i[1])-o+r,l=Math.max(n[0],n[1])-a+r;return new le(o,a,s,l)},t}(BB),HB=ice;var nce=function(e){I(t,e);function t(r,i,n,o,a){var s=e.call(this,r,i,n)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),r&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(r,i){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(xr),UB=nce;function hf(e,t,r){r=r||{};var i=e.coordinateSystem,n=t.axis,o={},a=n.getAxesOnZeroOf()[0],s=n.position,l=a?"onZero":s,c=n.dim,u=i.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},p=t.get("offset")||0,g=c==="x"?[d[2]-p,d[3]+p]:[d[0]-p,d[1]+p];if(a){var f=a.toGlobalCoord(a.dataToCoord(0));g[h.onZero]=Math.max(Math.min(f,g[1]),g[0])}o.position=[c==="y"?g[h[l]]:d[0],c==="x"?g[h[l]]:d[3]],o.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=v[s],o.labelOffset=a?g[h[s]]-g[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),bt(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function ZT(e){return e.get("coordinateSystem")==="cartesian2d"}function XT(e){var t={xAxisModel:null,yAxisModel:null};return D(t,function(r,i){var n=i.replace(/Model$/,""),o=e.getReferringComponents(n,dt).models[0];t[i]=o}),t}var QT=Math.log;function lC(e,t,r){var i=Oi.prototype,n=i.getTicks.call(r),o=i.getTicks.call(r,!0),a=n.length-1,s=i.getInterval.call(r),l=QM(e,t),c=l.extent,u=l.fixMin,d=l.fixMax;if(e.type==="log"){var h=QT(e.base);c=[QT(c[0])/h,QT(c[1])/h]}e.setExtent(c[0],c[1]),e.calcNiceExtent({splitNumber:a,fixMin:u,fixMax:d});var p=i.getExtent.call(e);u&&(c[0]=p[0]),d&&(c[1]=p[1]);var g=i.getInterval.call(e),f=c[0],v=c[1];if(u&&d)g=(v-f)/a;else if(u)for(v=c[0]+g*a;v<c[1]&&isFinite(v)&&isFinite(c[1]);)g=Sw(g),v=c[0]+g*a;else if(d)for(f=c[1]-g*a;f>c[0]&&isFinite(f)&&isFinite(c[0]);)g=Sw(g),f=c[1]-g*a;else{var m=e.getTicks().length-1;m>a&&(g=Sw(g));var y=g*a;v=Math.ceil(c[1]/g)*g,f=gt(v-y),f<0&&c[0]>=0?(f=0,v=gt(y)):v>0&&c[1]<=0&&(v=0,f=-gt(y))}var w=(n[0].value-o[0].value)/s,C=(n[a].value-o[a].value)/s;if(i.setExtent.call(e,f+g*w,v+g*C),i.setInterval.call(e,g),(w||C)&&i.setNiceExtent.call(e,f+g,v-g),0)var S}var oce=function(){function e(t,r,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=sC,this._initCartesian(t,r,i),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var i=this._axesMap;this._updateScale(t,this.model);function n(a){var s,l=me(a),c=l.length;if(c){for(var u=[],d=c-1;d>=0;d--){var h=+l[d],p=a[h],g=p.model,f=p.scale;Xg(f)&&g.get("alignTicks")&&g.get("interval")==null?u.push(p):(Xo(f,g),Xg(f)&&(s=p))}u.length&&(s||(s=u.pop(),Xo(s.scale,s.model)),D(u,function(v){lC(v.scale,v.model,s.scale)}))}}n(i.x),n(i.y);var o={};D(i.x,function(a){jB(i,"y",a,o)}),D(i.y,function(a){jB(i,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,i){var n=t.getBoxLayoutParams(),o=!i&&t.get("containLabel"),a=Je(n,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(D(s,function(c){if(!c.model.get(["axisLabel","inside"])){var u=r5(c);if(u){var d=c.isHorizontal()?"height":"width",h=c.model.get(["axisLabel","margin"]);a[d]-=u[d]+h,c.position==="top"?a.y+=u.height+h:c.position==="left"&&(a.x+=u.width+h)}}}),l()),D(this._coordsList,function(c){c.calcAffineTransform()});function l(){D(s,function(c){var u=c.isHorizontal(),d=u?[0,a.width]:[0,a.height],h=c.inverse?1:0;c.setExtent(d[h],d[1-h]),ace(c,u?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var i=this._axesMap[t];if(i!=null)return i[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var i="x"+t+"y"+r;return this._coordsMap[i]}J(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,o=this._coordsList;n<o.length;n++)if(o[n].getAxis("x").index===t||o[n].getAxis("y").index===r)return o[n]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},e.prototype.convertFromPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,i=t.xAxisModel||r&&r.getReferringComponents("xAxis",dt).models[0],n=t.yAxisModel||r&&r.getReferringComponents("yAxis",dt).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,pe(a,s)<0&&(s=null);else if(i&&n)s=this.getCartesian(i.componentIndex,n.componentIndex);else if(i)l=this.getAxis("x",i.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(o){var c=o.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,i){var n=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",c("x"),this),r.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,D(s.x,function(u,d){D(s.y,function(h,p){var g="x"+d+"y"+p,f=new HB(g);f.master=n,f.model=t,n._coordsMap[g]=f,n._coordsList.push(f),f.addAxis(u),f.addAxis(h)})});function c(u){return function(d,h){if(JT(d,t)){var p=d.get("position");u==="x"?p!=="top"&&p!=="bottom"&&(p=a.bottom?"top":"bottom"):p!=="left"&&p!=="right"&&(p=a.left?"right":"left"),a[p]=!0;var g=new UB(u,el(d),[0,0],d.get("type"),p),f=g.type==="category";g.onBand=f&&d.get("boundaryGap"),g.inverse=d.get("inverse"),d.axis=g,g.model=d,g.grid=o,g.index=h,o._axesList.push(g),s[u][h]=g,l[u]++}}}},e.prototype._updateScale=function(t,r){D(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var o=n.model.get("categorySortInfo");n.scale.setSortInfo(o)}}),t.eachSeries(function(n){if(ZT(n)){var o=XT(n),a=o.xAxisModel,s=o.yAxisModel;if(!JT(a,r)||!JT(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),c=n.getData(),u=l.getAxis("x"),d=l.getAxis("y");i(c,u),i(c,d)}},this);function i(n,o){D(Zd(n,o.dim),function(a){o.scale.unionExtentFromData(n,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],i=[];return D(this.getCartesians(),function(n){var o=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),a=n.getOtherAxis(o);pe(r,o)<0&&r.push(o),pe(i,a)<0&&i.push(a)}),{baseAxes:r,otherAxes:i}},e.create=function(t,r){var i=[];return t.eachComponent("grid",function(n,o){var a=new e(n,t,r);a.name="grid_"+o,a.resize(n,r,!0),n.coordinateSystem=a,i.push(a)}),t.eachSeries(function(n){if(ZT(n)){var o=XT(n),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),c=l.coordinateSystem;n.coordinateSystem=c.getCartesian(a.componentIndex,s.componentIndex)}}),i},e.dimensions=sC,e}();function JT(e,t){return e.getCoordSysModel()===t}function jB(e,t,r,i){r.getAxesOnZeroOf=function(){return o?[o]:[]};var n=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)$B(n[l])&&(o=n[l]);else for(var c in n)if(n.hasOwnProperty(c)&&$B(n[c])&&!i[u(n[c])]){o=n[c];break}o&&(i[u(o)]=!0);function u(d){return d.dim+"_"+d.index}}function $B(e){return e&&e.type!=="category"&&e.type!=="time"&&t5(e)}function ace(e,t){var r=e.getExtent(),i=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(n){return n+t}:function(n){return i-n+t},e.toLocalCoord=e.dim==="x"?function(n){return n-t}:function(n){return i-n+t}}var YB=oce;var ol=Math.PI,Xc=function(){function e(t,r){this.group=new ee,this.opt=r,this.axisModel=t,Q(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new ee({x:r.position[0],y:r.position[1],rotation:r.rotation});i.updateTransform(),this._transformGroup=i}return e.prototype.hasBuilder=function(t){return!!qB[t]},e.prototype.add=function(t){qB[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,i){var n=ID(r-t),o,a;return gc(n)?(a=i>0?"top":"bottom",o="center"):gc(n-ol)?(a=i>0?"bottom":"top",o="center"):(a="middle",n>0&&n<ol?o=i>0?"right":"left":o=i>0?"left":"right"),{rotation:n,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),qB={axisLine:function(e,t,r,i){var n=t.get(["axisLine","show"]);if(n==="auto"&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),!!n){var o=t.axis.getExtent(),a=i.transform,s=[o[0],0],l=[o[1],0],c=s[0]>l[0];a&&(Bt(s,s,a),Bt(l,l,a));var u=F({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new _t({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});Oa(d.shape,d.style.lineWidth),d.anid="line",r.add(d);var h=t.get(["axisLine","symbol"]);if(h!=null){var p=t.get(["axisLine","symbolSize"]);H(h)&&(h=[h,h]),(H(p)||be(p))&&(p=[p,p]);var g=Qi(t.get(["axisLine","symbolOffset"])||0,p),f=p[0],v=p[1];D([{rotate:e.rotation+Math.PI/2,offset:g[0],r:0},{rotate:e.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(h[y]!=="none"&&h[y]!=null){var w=et(h[y],-f/2,-v/2,f,v,u.stroke,!0),C=m.r+m.offset,S=c?l:s;w.attr({rotation:m.rotate,x:S[0]+C*Math.cos(e.rotation),y:S[1]-C*Math.sin(e.rotation),silent:!0,z2:11}),r.add(w)}})}}},axisTickLabel:function(e,t,r,i){var n=cce(r,i,t,e),o=dce(r,i,t,e);if(lce(t,o,n),uce(r,i,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=zw(N(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Bw(a)}},axisName:function(e,t,r,i){var n=bt(e.axisName,t.get("name"));if(n){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,c=t.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[o==="start"?c[0]-u*l:o==="end"?c[1]+u*l:(c[0]+c[1])/2,ZB(o)?e.labelOffset+a*l:0],h,p=t.get("nameRotate");p!=null&&(p=p*ol/180);var g;ZB(o)?h=Xc.innerTextLayout(e.rotation,p??e.rotation,a):(h=sce(e.rotation,o,p||0,c),g=e.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(h.rotation)),!isFinite(g)&&(g=null)));var f=s.getFont(),v=t.get("nameTruncate",!0)||{},m=v.ellipsis,y=bt(e.nameTruncateMaxWidth,v.maxWidth,g),w=new De({x:d[0],y:d[1],rotation:h.rotation,silent:Xc.isLabelSilent(t),style:Ke(s,{text:n,font:f,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(oo({el:w,componentModel:t,itemName:n}),w.__fullText=n,w.anid="name",t.get("triggerEvent")){var C=Xc.makeAxisEventDataBase(t);C.targetType="axisName",C.name=n,ae(w).eventData=C}i.add(w),w.updateTransform(),r.add(w),w.decomposeTransform()}}};function sce(e,t,r,i){var n=ID(r-e),o,a,s=i[0]>i[1],l=t==="start"&&!s||t!=="start"&&s;return gc(n-ol/2)?(a=l?"bottom":"top",o="center"):gc(n-ol*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",n<ol*1.5&&n>ol/2?o=l?"left":"right":o=l?"right":"left"),{rotation:n,textAlign:o,textVerticalAlign:a}}function lce(e,t,r){if(!kw(e.axis)){var i=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],c=r[0],u=r[1],d=r[r.length-1],h=r[r.length-2];i===!1?(Pn(o),Pn(c)):KB(o,a)&&(i?(Pn(a),Pn(u)):(Pn(o),Pn(c))),n===!1?(Pn(s),Pn(d)):KB(l,s)&&(n?(Pn(l),Pn(h)):(Pn(s),Pn(d)))}}function Pn(e){e&&(e.ignore=!0)}function KB(e,t){var r=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(!(!r||!i)){var n=Es([]);return Si(n,n,-e.rotation),r.applyTransform(bi([],n,e.getLocalTransform())),i.applyTransform(bi([],n,t.getLocalTransform())),r.intersect(i)}}function ZB(e){return e==="middle"||e==="center"}function XB(e,t,r,i,n){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var c=e[l].coord;a[0]=c,a[1]=0,s[0]=c,s[1]=r,t&&(Bt(a,a,t),Bt(s,s,t));var u=new _t({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});Oa(u.shape,u.style.lineWidth),u.anid=n+"_"+e[l].tickValue,o.push(u)}return o}function cce(e,t,r,i){var n=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),!(!a||n.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=i.tickDirection*o.get("length"),c=n.getTicksCoords(),u=XB(c,t.transform,l,Q(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)e.add(u[d]);return u}}function uce(e,t,r,i){var n=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||n.scale.isBlank())){var a=n.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=i*o.get("length"),c=Q(s.getLineStyle(),Q(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var d=XB(a[u],t.transform,l,c,"minorticks_"+u),h=0;h<d.length;h++)e.add(d[h])}}function dce(e,t,r,i){var n=r.axis,o=bt(i.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||n.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=n.getViewLabels(),c=(bt(i.labelRotate,a.get("rotate"))||0)*ol/180,u=Xc.innerTextLayout(i.rotation,c,i.labelDirection),d=r.getCategories&&r.getCategories(!0),h=[],p=Xc.isLabelSilent(r),g=r.get("triggerEvent");return D(l,function(f,v){var m=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(f.tickValue):f.tickValue,y=f.formattedLabel,w=f.rawLabel,C=a;if(d&&d[m]){var S=d[m];J(S)&&S.textStyle&&(C=new Ve(S.textStyle,a,r.ecModel))}var b=C.getTextColor()||r.get(["axisLine","lineStyle","color"]),x=n.dataToCoord(m),E=C.getShallow("align",!0)||u.textAlign,M=de(C.getShallow("alignMinLabel",!0),E),T=de(C.getShallow("alignMaxLabel",!0),E),_=C.getShallow("verticalAlign",!0)||C.getShallow("baseline",!0)||u.textVerticalAlign,R=de(C.getShallow("verticalAlignMinLabel",!0),_),A=de(C.getShallow("verticalAlignMaxLabel",!0),_),P=new De({x,y:i.labelOffset+i.labelDirection*s,rotation:u.rotation,silent:p,z2:10+(f.level||0),style:Ke(C,{text:y,align:v===0?M:v===l.length-1?T:E,verticalAlign:v===0?R:v===l.length-1?A:_,fill:Z(b)?b(n.type==="category"?w:n.type==="value"?m+"":m,v):b})});if(P.anid="label_"+m,g){var k=Xc.makeAxisEventDataBase(r);k.targetType="axisLabel",k.value=w,k.tickIndex=v,n.type==="category"&&(k.dataIndex=m),ae(P).eventData=k}t.add(P),P.updateTransform(),h.push(P),e.add(P),P.decomposeTransform()}),h}}var kr=Xc;function QB(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return hce(r,e,t),r.seriesInvolved&&gce(r,e),r}function hce(e,t,r){var i=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),o=n.get("link",!0)||[],a=[];D(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=rh(s.model),c=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var u=s.model,d=u.getModel("tooltip",i);if(D(s.getAxes(),se(f,!1,null)),s.getTooltipAxes&&i&&d.get("show")){var h=d.get("trigger")==="axis",p=d.get(["axisPointer","type"])==="cross",g=s.getTooltipAxes(d.get(["axisPointer","axis"]));(h||p)&&D(g.baseAxes,se(f,p?"cross":!0,h)),p&&D(g.otherAxes,se(f,"cross",!1))}function f(v,m,y){var w=y.model.getModel("axisPointer",n),C=w.get("show");if(!(!C||C==="auto"&&!v&&!t_(w))){m==null&&(m=w.get("triggerTooltip")),w=v?pce(y,d,n,t,v,m):w;var S=w.get("snap"),b=w.get("triggerEmphasis"),x=rh(y.model),E=m||S||y.type==="category",M=e.axesInfo[x]={key:x,axis:y,coordSys:s,axisPointerModel:w,triggerTooltip:m,triggerEmphasis:b,involveSeries:E,snap:S,useHandle:t_(w),seriesModels:[],linkGroup:null};c[x]=M,e.seriesInvolved=e.seriesInvolved||E;var T=fce(o,y);if(T!=null){var _=a[T]||(a[T]={axesInfo:{}});_.axesInfo[x]=M,_.mapper=o[T].mapper,M.linkGroup=_}}}})}function pce(e,t,r,i,n,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};D(s,function(h){l[h]=re(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),n==="cross"){var u=a.get(["label","show"]);if(c.show=u??!0,!o){var d=l.lineStyle=a.get("crossStyle");d&&Q(c,d.textStyle)}}return e.model.getModel("axisPointer",new Ve(l,r,i))}function gce(e,t){t.eachSeries(function(r){var i=r.coordinateSystem,n=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!i||n==="none"||n===!1||n==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||D(e.coordSysAxesInfo[rh(i.model)],function(a){var s=a.axis;i.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function fce(e,t){for(var r=t.model,i=t.dim,n=0;n<e.length;n++){var o=e[n]||{};if(e_(o[i+"AxisId"],r.id)||e_(o[i+"AxisIndex"],r.componentIndex)||e_(o[i+"AxisName"],r.name))return n}}function e_(e,t){return e==="all"||O(e)&&pe(e,t)>=0||e===t}function JB(e){var t=cC(e);if(t){var r=t.axisPointerModel,i=t.axis.scale,n=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=i.parse(a));var s=t_(r);o==null&&(n.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),n.value=a,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function cC(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[rh(e)]}function eG(e){var t=cC(e);return t&&t.axisPointerModel}function t_(e){return!!e.get(["handle","show"])}function rh(e){return e.type+"||"+e.id}var tG={},vce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,o){this.axisPointerClass&&JB(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,n,!0)},t.prototype.updateAxisPointer=function(r,i,n,o){this._doUpdateAxisPointerClass(r,n,!1)},t.prototype.remove=function(r,i){var n=this._axisPointer;n&&n.remove(i)},t.prototype.dispose=function(r,i){this._disposeAxisPointer(i),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,i,n){var o=t.getAxisPointerClass(this.axisPointerClass);if(o){var a=eG(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,i,n):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,i){tG[r]=i},t.getAxisPointerClass=function(r){return r&&tG[r]},t.type="axis",t}(He),Ni=vce;var i_=he();function uC(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),c=n.getTicksCoords({tickModel:o,clamp:!0});if(c.length){var u=s.length,d=i_(e).splitAreaColors,h=Y(),p=0;if(d)for(var g=0;g<c.length;g++){var f=d.get(c[g].tickValue);if(f!=null){p=(f+(u-1)*g)%u;break}}var v=n.toGlobalCoord(c[0].coord),m=a.getAreaStyle();s=O(s)?s:[s];for(var g=1;g<c.length;g++){var y=n.toGlobalCoord(c[g].coord),w=void 0,C=void 0,S=void 0,b=void 0;n.isHorizontal()?(w=v,C=l.y,S=y-w,b=l.height,v=w+S):(w=l.x,C=v,S=l.width,b=y-C,v=C+b);var x=c[g-1].tickValue;x!=null&&h.set(x,p),t.add(new Ce({anid:x!=null?"area_"+x:null,shape:{x:w,y:C,width:S,height:b},style:Q({fill:s[p]},m),autoBatch:!0,silent:!0})),p=(p+1)%u}i_(e).splitAreaColors=h}}}function dC(e){i_(e).splitAreaColors=null}var mce=["axisLine","axisTickLabel","axisName"],yce=["splitArea","splitLine","minorSplitLine"],rG=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,i,n,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new ee,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=hf(s,r),c=new kr(r,F({handleAutoShown:function(d){for(var h=s.coordinateSystem.getCartesians(),p=0;p<h.length;p++)if(Xg(h[p].getOtherAxis(r.axis).scale))return!0;return!1}},l));D(mce,c.add,c),this._axisGroup.add(c.getGroup()),D(yce,function(d){r.get([d,"show"])&&wce[d](this,this._axisGroup,r,s)},this);var u=o&&o.type==="changeAxisOrder"&&o.isInitSort;u||Na(a,this._axisGroup,r),e.prototype.render.call(this,r,i,n,o)}},t.prototype.remove=function(){dC(this)},t.type="cartesianAxis",t}(Ni),wce={splitLine:function(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=O(s)?s:[s];for(var l=i.coordinateSystem.getRect(),c=n.isHorizontal(),u=0,d=n.getTicksCoords({tickModel:o}),h=[],p=[],g=a.getLineStyle(),f=0;f<d.length;f++){var v=n.toGlobalCoord(d[f].coord);c?(h[0]=v,h[1]=l.y,p[0]=v,p[1]=l.y+l.height):(h[0]=l.x,h[1]=v,p[0]=l.x+l.width,p[1]=v);var m=u++%s.length,y=d[f].tickValue,w=new _t({anid:y!=null?"line_"+d[f].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:Q({stroke:s[m]},g),silent:!0});Oa(w.shape,g.lineWidth),t.add(w)}}},minorSplitLine:function(e,t,r,i){var n=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=i.coordinateSystem.getRect(),l=n.isHorizontal(),c=n.getMinorTicksCoords();if(c.length)for(var u=[],d=[],h=a.getLineStyle(),p=0;p<c.length;p++)for(var g=0;g<c[p].length;g++){var f=n.toGlobalCoord(c[p][g].coord);l?(u[0]=f,u[1]=s.y,d[0]=f,d[1]=s.y+s.height):(u[0]=s.x,u[1]=f,d[0]=s.x+s.width,d[1]=f);var v=new _t({anid:"minor_line_"+c[p][g].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:h,silent:!0});Oa(v.shape,h.lineWidth),t.add(v)}},splitArea:function(e,t,r,i){uC(e,t,r,i)}},n_=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(rG);var iG=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=n_.type,r}return t.type="yAxis",t}(rG);var Cce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,i){this.group.removeAll(),r.get("show")&&this.group.add(new Ce({shape:r.coordinateSystem.getRect(),style:Q({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(He),nG={offset:0};function hC(e){e.registerComponentView(Cce),e.registerComponentModel(OB),e.registerCoordinateSystem("cartesian2d",YB),bo(e,"x",oC,nG),bo(e,"y",oC,nG),e.registerComponentView(n_),e.registerComponentView(iG),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function o_(e){Te(hC),e.registerSeriesModel(PB),e.registerChartView(FB),e.registerLayout(wo("scatter"))}function a_(e){e.eachSeriesByType("radar",function(t){var r=t.getData(),i=[],n=t.coordinateSystem;if(n){var o=n.getIndicatorAxes();D(o,function(a,s){r.each(r.mapDimension(o[s].dim),function(l,c){i[c]=i[c]||[];var u=n.dataToPoint(l,s);i[c][s]=oG(u)?u:aG(n)})}),r.each(function(a){var s=RF(i[a],function(l){return oG(l)})||aG(n);i[a].push(s.slice()),r.setItemLayout(a,i[a])})}})}function oG(e){return!isNaN(e[0])&&!isNaN(e[1])}function aG(e){return[e.cx,e.cy]}function s_(e){var t=e.polar;if(t){O(t)||(t=[t]);var r=[];D(t,function(i,n){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),e.radar=e.radar||[],O(e.radar)||(e.radar=[e.radar]),e.radar.push(i)):r.push(i)}),e.polar=r}D(e.series,function(i){i&&i.type==="radar"&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var bce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=r.coordinateSystem,a=this.group,s=r.getData(),l=this._data;function c(h,p){var g=h.getItemVisual(p,"symbol")||"circle";if(g!=="none"){var f=ho(h.getItemVisual(p,"symbolSize")),v=et(g,-1,-1,2,2),m=h.getItemVisual(p,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:f[0]/2,scaleY:f[1]/2,rotation:m*Math.PI/180||0}),v}}function u(h,p,g,f,v,m){g.removeAll();for(var y=0;y<p.length-1;y++){var w=c(f,v);w&&(w.__dimIdx=y,h[y]?(w.setPosition(h[y]),Se[m?"initProps":"updateProps"](w,{x:p[y][0],y:p[y][1]},r,v)):w.setPosition(p[y]),g.add(w))}}function d(h){return N(h,function(p){return[o.cx,o.cy]})}s.diff(l).add(function(h){var p=s.getItemLayout(h);if(p){var g=new It,f=new Rt,v={shape:{points:p}};g.shape.points=d(p),f.shape.points=d(p),je(g,v,r,h),je(f,v,r,h);var m=new ee,y=new ee;m.add(f),m.add(g),m.add(y),u(f.shape.points,p,y,s,h,!0),s.setItemGraphicEl(h,m)}}).update(function(h,p){var g=l.getItemGraphicEl(p),f=g.childAt(0),v=g.childAt(1),m=g.childAt(2),y={shape:{points:s.getItemLayout(h)}};y.shape.points&&(u(f.shape.points,y.shape.points,m,s,h,!1),nr(v),nr(f),Me(f,y,r),Me(v,y,r),s.setItemGraphicEl(h,g))}).remove(function(h){a.remove(l.getItemGraphicEl(h))}).execute(),s.eachItemGraphicEl(function(h,p){var g=s.getItemModel(p),f=h.childAt(0),v=h.childAt(1),m=h.childAt(2),y=s.getItemVisual(p,"style"),w=y.fill;a.add(h),f.useStyle(Q(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:w})),Dt(f,g,"lineStyle"),Dt(v,g,"areaStyle");var C=g.getModel("areaStyle"),S=C.isEmpty()&&C.parentModel.isEmpty();v.ignore=S,D(["emphasis","select","blur"],function(E){var M=g.getModel([E,"areaStyle"]),T=M.isEmpty()&&M.parentModel.isEmpty();v.ensureState(E).ignore=T&&S}),v.useStyle(Q(C.getAreaStyle(),{fill:w,opacity:.7,decal:y.decal}));var b=g.getModel("emphasis"),x=b.getModel("itemStyle").getItemStyle();m.eachChild(function(E){if(E instanceof vt){var M=E.style;E.useStyle(F({image:M.image,x:M.x,y:M.y,width:M.width,height:M.height},y))}else E.useStyle(y),E.setColor(w),E.style.strokeNoScale=!0;var T=E.ensureState("emphasis");T.style=re(x);var _=s.getStore().get(s.getDimensionIndex(E.__dimIdx),p);(_==null||isNaN(_))&&(_=""),ft(E,at(g),{labelFetcher:s.hostModel,labelDataIndex:p,labelDimIndex:E.__dimIdx,defaultText:_,inheritColor:w,defaultOpacity:y.opacity})}),We(h,b.get("focus"),b.get("blurScope"),b.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(Le),sG=bce;var Sce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new oa($(this.getData,this),$(this.getRawData,this))},t.prototype.getInitialData=function(r,i){return en(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(r,i,n){var o=this.getData(),a=this.coordinateSystem,s=a.getIndicatorAxes(),l=this.getData().getName(r),c=l===""?this.name:l,u=q0(this,r);return wt("section",{header:c,sortBlocks:!0,blocks:N(s,function(d){var h=o.get(o.mapDimension(d.dim),r);return wt("nameValue",{markerType:"subItem",markerColor:u,name:d.name,value:h,sortParam:h})})})},t.prototype.getTooltipPosition=function(r){if(r!=null){for(var i=this.getData(),n=this.coordinateSystem,o=i.getValues(N(n.dimensions,function(c){return i.mapDimension(c)}),r),a=0,s=o.length;a<s;a++)if(!isNaN(o[a])){var l=n.getIndicatorAxes();return n.coordToPoint(l[a].dataToCoord(o[a]),a)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(Be),lG=Sce;var pf=aC.value;function pC(e,t){return Q({show:t},e)}var xce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),i=this.get("splitNumber"),n=this.get("scale"),o=this.get("axisLine"),a=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),d=this.get("axisNameGap"),h=this.get("triggerEvent"),p=N(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var f=l;g.color!=null&&(f=Q({color:g.color},l));var v=fe(re(g),{boundaryGap:r,splitNumber:i,scale:n,axisLine:o,axisTick:a,axisLabel:s,name:g.text,showName:c,nameLocation:"end",nameGap:d,nameTextStyle:f,triggerEvent:h},!1);if(H(u)){var m=v.name;v.name=u.replace("{value}",m??"")}else Z(u)&&(v.name=u(v.name,v));var y=new Ve(v,null,this.ecModel);return ot(y,Qo.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=p},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:fe({lineStyle:{color:"#bbb"}},pf.axisLine),axisLabel:pC(pf.axisLabel,!1),axisTick:pC(pf.axisTick,!1),splitLine:pC(pf.splitLine,!0),splitArea:pC(pf.splitArea,!0),indicator:[]},t}(Ee),cG=xce;var Dce=["axisLine","axisTickLabel","axisName"],Ece=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=this.group;o.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},t.prototype._buildAxes=function(r){var i=r.coordinateSystem,n=i.getIndicatorAxes(),o=N(n,function(a){var s=a.model.get("showName")?a.name:"",l=new kr(a.model,{axisName:s,position:[i.cx,i.cy],rotation:a.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});D(o,function(a){D(Dce,a.add,a),this.group.add(a.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(r){var i=r.coordinateSystem,n=i.getIndicatorAxes();if(!n.length)return;var o=r.get("shape"),a=r.getModel("splitLine"),s=r.getModel("splitArea"),l=a.getModel("lineStyle"),c=s.getModel("areaStyle"),u=a.get("show"),d=s.get("show"),h=l.get("color"),p=c.get("color"),g=O(h)?h:[h],f=O(p)?p:[p],v=[],m=[];function y(k,L,V){var z=V%L.length;return k[z]=k[z]||[],z}if(o==="circle")for(var w=n[0].getTicksCoords(),C=i.cx,S=i.cy,b=0;b<w.length;b++){if(u){var x=y(v,g,b);v[x].push(new ti({shape:{cx:C,cy:S,r:w[b].coord}}))}if(d&&b<w.length-1){var x=y(m,f,b);m[x].push(new Tc({shape:{cx:C,cy:S,r0:w[b].coord,r:w[b+1].coord}}))}}else for(var E,M=N(n,function(k,L){var V=k.getTicksCoords();return E=E==null?V.length-1:Math.min(V.length-1,E),N(V,function(z){return i.coordToPoint(z.coord,L)})}),T=[],b=0;b<=E;b++){for(var _=[],R=0;R<n.length;R++)_.push(M[R][b]);if(_[0]&&_.push(_[0].slice()),u){var x=y(v,g,b);v[x].push(new Rt({shape:{points:_}}))}if(d&&T){var x=y(m,f,b-1);m[x].push(new It({shape:{points:_.concat(T)}}))}T=_.slice().reverse()}var A=l.getLineStyle(),P=c.getAreaStyle();D(m,function(k,L){this.group.add(Ur(k,{style:Q({stroke:"none",fill:f[L%f.length]},P),silent:!0}))},this),D(v,function(k,L){this.group.add(Ur(k,{style:Q({fill:"none",stroke:g[L%g.length]},A),silent:!0}))},this)},t.type="radar",t}(He),uG=Ece;var Mce=function(e){I(t,e);function t(r,i,n){var o=e.call(this,r,i,n)||this;return o.type="value",o.angle=0,o.name="",o}return t}(xr),dG=Mce;var Tce=function(){function e(t,r,i){this.dimensions=[],this._model=t,this._indicatorAxes=N(t.getIndicatorModels(),function(n,o){var a="indicator_"+o,s=new dG(a,new Oi);return s.name=n.get("name"),s.model=n,n.axis=s,this.dimensions.push(a),s},this),this.resize(t,i)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(t,r){var i=this._indicatorAxes[r];return this.coordToPoint(i.dataToCoord(t),r)},e.prototype.coordToPoint=function(t,r){var i=this._indicatorAxes[r],n=i.angle,o=this.cx+t*Math.cos(n),a=this.cy-t*Math.sin(n);return[o,a]},e.prototype.pointToData=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,n=Math.sqrt(r*r+i*i);r/=n,i/=n;for(var o=Math.atan2(-i,r),a=1/0,s,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],d=Math.abs(o-u.angle);d<a&&(s=u,l=c,a=d)}return[l,+(s&&s.coordToData(n))]},e.prototype.resize=function(t,r){var i=t.get("center"),n=r.getWidth(),o=r.getHeight(),a=Math.min(n,o)/2;this.cx=j(i[0],n),this.cy=j(i[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(H(s)||be(s))&&(s=[0,s]),this.r0=j(s[0],a),this.r=j(s[1],a),D(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},e.prototype.update=function(t,r){var i=this._indicatorAxes,n=this._model;D(i,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==n)){var c=s.getData();D(i,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var o=n.get("splitNumber"),a=new Oi;a.setExtent(0,o),a.setInterval(1),D(i,function(s,l){lC(s.scale,s.model,a)})},e.prototype.convertToPixel=function(t,r,i){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(t,r,i){return console.warn("Not implemented."),null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.create=function(t,r){var i=[];return t.eachComponent("radar",function(n){var o=new e(n,t,r);i.push(o),n.coordinateSystem=o}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=i[n.get("radarIndex")||0])}),i},e.dimensions=[],e}(),hG=Tce;function pG(e){e.registerCoordinateSystem("radar",hG),e.registerComponentModel(cG),e.registerComponentView(uG),e.registerVisual({seriesType:"radar",reset:function(t){var r=t.getData();r.each(function(i){r.setItemVisual(i,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function l_(e){Te(pG),e.registerChartView(sG),e.registerSeriesModel(lG),e.registerLayout(a_),e.registerProcessor(Co("radar")),e.registerPreprocessor(s_)}var gG="\0_ec_interaction_mutex";function fG(e,t,r){var i=u_(e);i[t]=r}function vG(e,t,r){var i=u_(e),n=i[t];n===r&&(i[t]=null)}function c_(e,t){return!!u_(e)[t]}function u_(e){return e[gG]||(e[gG]={})}ni({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},pt);var _ce=function(e){I(t,e);function t(r){var i=e.call(this)||this;i._zr=r;var n=$(i._mousedownHandler,i),o=$(i._mousemoveHandler,i),a=$(i._mouseupHandler,i),s=$(i._mousewheelHandler,i),l=$(i._pinchHandler,i);return i.enable=function(c,u){this.disable(),this._opt=Q(re(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(r.on("mousedown",n),r.on("mousemove",o),r.on("mouseup",a)),(c===!0||c==="scale"||c==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},i.disable=function(){r.off("mousedown",n),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},i}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!X1(r)){for(var i=r.target;i;){if(i.draggable)return;i=i.__hostTarget||i.parent}var n=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!gC("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||c_(this._zr,"globalPan"))){var i=r.offsetX,n=r.offsetY,o=this._x,a=this._y,s=i-o,l=n-a;this._x=i,this._y=n,this._opt.preventDefaultMouseMove&&Ci(r.event),yG(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:i,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){X1(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var i=gC("zoomOnMouseWheel",r,this._opt),n=gC("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!i&&!n)){if(i){var c=a>3?1.4:a>1?1.2:1.1,u=o>0?c:1/c;d_(this,"zoom","zoomOnMouseWheel",r,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(n){var d=Math.abs(o),h=(o>0?1:-1)*(d>3?.4:d>1?.15:.05);d_(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!c_(this._zr,"globalPan")){var i=r.pinchScale>1?1.1:1/1.1;d_(this,"zoom",null,r,{scale:i,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(ir);function d_(e,t,r,i,n){e.pointerChecker&&e.pointerChecker(i,n.originX,n.originY)&&(Ci(i.event),yG(e,t,r,i,n))}function yG(e,t,r,i,n){n.isAvailableBehavior=$(gC,null,r,i),e.trigger(t,n)}function gC(e,t,r){var i=r[e];return!e||i&&(!H(i)||t.event[i+"Key"])}var aa=_ce;function ih(e,t,r){var i=e.target;i.x+=t,i.y+=r,i.dirty()}function nh(e,t,r,i){var n=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var c=a/e.zoom;e.zoom=a,n.x-=(r-n.x)*(c-1),n.y-=(i-n.y)*(c-1),n.scaleX*=c,n.scaleY*=c,n.dirty()}var Rce={axisPointer:1,tooltip:1,brush:1};function al(e,t,r){var i=t.getComponentByElement(e.topTarget),n=i&&i.coordinateSystem;return i&&i!==r&&!Rce.hasOwnProperty(i.mainType)&&n&&n.model!==r}function fC(e){if(H(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}var r=e;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var p_,vC={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},wG=me(vC),mC={"alignment-baseline":"textBaseline","stop-color":"stopColor"},CG=me(mC),Ace=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(t,r){r=r||{};var i=fC(t);this._defsUsePending=[];var n=new ee;this._root=n;var o=[],a=i.getAttribute("viewBox")||"",s=parseFloat(i.getAttribute("width")||r.width),l=parseFloat(i.getAttribute("height")||r.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),tn(i,n,null,!0,!1);for(var c=i.firstChild;c;)this._parseNode(c,n,o,null,!1,!1),c=c.nextSibling;kce(this._defs,this._defsUsePending),this._defsUsePending=[];var u,d;if(a){var h=yC(a);h.length>=4&&(u={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(u&&s!=null&&l!=null&&(d=f_(u,{x:0,y:0,width:s,height:l}),!r.ignoreViewBox)){var p=n;n=new ee,n.add(p),p.scaleX=p.scaleY=d.scale,p.x=d.x,p.y=d.y}return!r.ignoreRootClip&&s!=null&&l!=null&&n.setClipPath(new Ce({shape:{x:0,y:0,width:s,height:l}})),{root:n,width:s,height:l,viewBoxRect:u,viewBoxTransform:d,named:o}},e.prototype._parseNode=function(t,r,i,n,o,a){var s=t.nodeName.toLowerCase(),l,c=n;if(s==="defs"&&(o=!0),s==="text"&&(a=!0),s==="defs"||s==="switch")l=r;else{if(!o){var u=p_[s];if(u&&ne(p_,s)){l=u.call(this,t,r);var d=t.getAttribute("name");if(d){var h={name:d,namedFrom:null,svgNodeTagLower:s,el:l};i.push(h),s==="g"&&(c=h)}else n&&i.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:l});r.add(l)}}var p=bG[s];if(p&&ne(bG,s)){var g=p.call(this,t),f=t.getAttribute("id");f&&(this._defs[f]=g)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,i,c,o,a):v.nodeType===3&&a&&this._parseText(v,l),v=v.nextSibling},e.prototype._parseText=function(t,r){var i=new Aa({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});kn(r,i),tn(t,i,this._defsUsePending,!1,!1),Ice(i,r);var n=i.style,o=n.fontSize;o&&o<9&&(n.fontSize=9,i.scaleX*=o/9,i.scaleY*=o/9);var a=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=a;var s=i.getBoundingRect();return this._textX+=s.width,r.add(i),i},e.internalField=function(){p_={g:function(t,r){var i=new ee;return kn(r,i),tn(t,i,this._defsUsePending,!1,!1),i},rect:function(t,r){var i=new Ce;return kn(r,i),tn(t,i,this._defsUsePending,!1,!1),i.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),i.silent=!0,i},circle:function(t,r){var i=new ti;return kn(r,i),tn(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),i.silent=!0,i},line:function(t,r){var i=new _t;return kn(r,i),tn(t,i,this._defsUsePending,!1,!1),i.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),i.silent=!0,i},ellipse:function(t,r){var i=new ug;return kn(r,i),tn(t,i,this._defsUsePending,!1,!1),i.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),i.silent=!0,i},polygon:function(t,r){var i=t.getAttribute("points"),n;i&&(n=DG(i));var o=new It({shape:{points:n||[]},silent:!0});return kn(r,o),tn(t,o,this._defsUsePending,!1,!1),o},polyline:function(t,r){var i=t.getAttribute("points"),n;i&&(n=DG(i));var o=new Rt({shape:{points:n||[]},silent:!0});return kn(r,o),tn(t,o,this._defsUsePending,!1,!1),o},image:function(t,r){var i=new vt;return kn(r,i),tn(t,i,this._defsUsePending,!1,!1),i.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),i.silent=!0,i},text:function(t,r){var i=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",o=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0";this._textX=parseFloat(i)+parseFloat(o),this._textY=parseFloat(n)+parseFloat(a);var s=new ee;return kn(r,s),tn(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,r){var i=t.getAttribute("x"),n=t.getAttribute("y");i!=null&&(this._textX=parseFloat(i)),n!=null&&(this._textY=parseFloat(n));var o=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0",s=new ee;return kn(r,s),tn(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(a),s},path:function(t,r){var i=t.getAttribute("d")||"",n=c0(i);return kn(r,n),tn(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),e}(),bG={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),r=parseInt(e.getAttribute("y1")||"0",10),i=parseInt(e.getAttribute("x2")||"10",10),n=parseInt(e.getAttribute("y2")||"0",10),o=new qo(t,r,i,n);return SG(e,o),xG(e,o),o},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),r=parseInt(e.getAttribute("cy")||"0",10),i=parseInt(e.getAttribute("r")||"0",10),n=new p0(t,r,i);return SG(e,n),xG(e,n),n}};function SG(e,t){var r=e.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(t.global=!0)}function xG(e,t){for(var r=e.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var i=r.getAttribute("offset"),n=void 0;i&&i.indexOf("%")>0?n=parseInt(i,10)/100:i?n=parseFloat(i):n=0;var o={};TG(r,o,o);var a=o.stopColor||r.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:a})}r=r.nextSibling}}function kn(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Q(t.__inheritedStyle,e.__inheritedStyle))}function DG(e){for(var t=yC(e),r=[],i=0;i<t.length;i+=2){var n=parseFloat(t[i]),o=parseFloat(t[i+1]);r.push([n,o])}return r}function tn(e,t,r,i,n){var o=t,a=o.__inheritedStyle=o.__inheritedStyle||{},s={};e.nodeType===1&&(Oce(e,t),TG(e,a,s),i||Nce(e,a,s)),o.style=o.style||{},a.fill!=null&&(o.style.fill=EG(o,"fill",a.fill,r)),a.stroke!=null&&(o.style.stroke=EG(o,"stroke",a.stroke,r)),D(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){a[l]!=null&&(o.style[l]=parseFloat(a[l]))}),D(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){a[l]!=null&&(o.style[l]=a[l])}),n&&(o.__selfStyle=s),a.lineDash&&(o.style.lineDash=N(yC(a.lineDash),function(l){return parseFloat(l)})),(a.visibility==="hidden"||a.visibility==="collapse")&&(o.invisible=!0),a.display==="none"&&(o.ignore=!0)}function Ice(e,t){var r=t.__selfStyle;if(r){var i=r.textBaseline,n=i;!i||i==="auto"||i==="baseline"?n="alphabetic":i==="before-edge"||i==="text-before-edge"?n="top":i==="after-edge"||i==="text-after-edge"?n="bottom":(i==="central"||i==="mathematical")&&(n="middle"),e.style.textBaseline=n}var o=t.__inheritedStyle;if(o){var a=o.textAlign,s=a;a&&(a==="middle"&&(s="center"),e.style.textAlign=s)}}var Pce=/^url\(\s*#(.*?)\)/;function EG(e,t,r,i){var n=r&&r.match(Pce);if(n){var o=dr(n[1]);i.push([e,t,o]);return}return r==="none"&&(r=null),r}function kce(e,t){for(var r=0;r<t.length;r++){var i=t[r];i[0].style[i[1]]=e[i[2]]}}var Lce=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function yC(e){return e.match(Lce)||[]}var Fce=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,g_=Math.PI/180;function Oce(e,t){var r=e.getAttribute("transform");if(r){r=r.replace(/,/g," ");var i=[],n=null;r.replace(Fce,function(d,h,p){return i.push(h,p),""});for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1],l=yC(a);switch(n=n||Xt(),s){case"translate":Mr(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":dd(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Si(n,n,-parseFloat(l[0])*g_,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*g_);bi(n,[1,0,c,1,0,0],n);break;case"skewY":var u=Math.tan(parseFloat(l[0])*g_);bi(n,[1,u,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}t.setLocalTransform(n)}}var MG=/([^\s:;]+)\s*:\s*([^:;]+)/g;function TG(e,t,r){var i=e.getAttribute("style");if(i){MG.lastIndex=0;for(var n;(n=MG.exec(i))!=null;){var o=n[1],a=ne(vC,o)?vC[o]:null;a&&(t[a]=n[2]);var s=ne(mC,o)?mC[o]:null;s&&(r[s]=n[2])}}}function Nce(e,t,r){for(var i=0;i<wG.length;i++){var n=wG[i],o=e.getAttribute(n);o!=null&&(t[vC[n]]=o)}for(var i=0;i<CG.length;i++){var n=CG[i],o=e.getAttribute(n);o!=null&&(r[mC[n]]=o)}}function f_(e,t){var r=t.width/e.width,i=t.height/e.height,n=Math.min(r,i);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}function _G(e,t){var r=new Ace;return r.parse(e,t)}var zce=Y(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),RG=function(){function e(t,r){this.type="geoSVG",this._usedGraphicMap=Y(),this._freedGraphics=[],this._mapName=t,this._parsedXML=fC(r)}return e.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=Bce(t.named),i=r.regions,n=r.regionsMap;this._regions=i,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(t){var r,i;try{r=t&&_G(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},i=r.root,St(i!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var n=new ee;n.add(i),n.isGeoSVGGraphicRoot=!0;var o=r.width,a=r.height,s=r.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,d=void 0,h=void 0;if(o!=null?(c=0,d=o):s&&(c=s.x,d=s.width),a!=null?(u=0,h=a):s&&(u=s.y,h=s.height),c==null||u==null){var p=i.getBoundingRect();c==null&&(c=p.x,d=p.width),u==null&&(u=p.y,h=p.height)}l=this._boundingRect=new le(c,u,d,h)}if(s){var g=f_(s,l);i.scaleX=i.scaleY=g.scale,i.x=g.x,i.y=g.y}n.setClipPath(new Ce({shape:l.plain()}));var f=[];return D(r.named,function(v){zce.get(v.svgNodeTagLower)!=null&&(f.push(v),Vce(v.el))}),{root:n,boundingRect:l,named:f}},e.prototype.useGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);return i||(i=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(t,i),i)},e.prototype.freeGraphic=function(t){var r=this._usedGraphicMap,i=r.get(t);i&&(r.removeKey(t),this._freedGraphics.push(i))},e}();function Vce(e){e.silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1})}function Bce(e){var t=[],r=Y();return D(e,function(i){if(i.namedFrom==null){var n=new l5(i.name,i.el);t.push(n),r.set(i.name,n)}}),{regions:t,regionsMap:r}}var v_=[126,25],AG="\u5357\u6D77\u8BF8\u5C9B",Jc=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(sl=0;sl<Jc.length;sl++)for(Qc=0;Qc<Jc[sl].length;Qc++)Jc[sl][Qc][0]/=10.5,Jc[sl][Qc][1]/=-10.5/.75,Jc[sl][Qc][0]+=v_[0],Jc[sl][Qc][1]+=v_[1];var Qc,sl;function m_(e,t){if(e==="china"){for(var r=0;r<t.length;r++)if(t[r].name===AG)return;t.push(new Fw(AG,N(Jc,function(i){return{type:"polygon",exterior:i}}),v_))}}var Gce={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function y_(e,t){if(e==="china"){var r=Gce[t.name];if(r){var i=t.getCenter();i[0]+=r[0]/10.5,i[1]+=-r[1]/(10.5/.75),t.setCenter(i)}}}var Hce=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function w_(e,t){e==="china"&&t.name==="\u53F0\u6E7E"&&t.geometries.push({type:"polygon",exterior:Hce[0]})}var Uce="name",IG=function(){function e(t,r,i){this.type="geoJSON",this._parsedMap=Y(),this._mapName=t,this._specialAreas=i,this._geoJSON=jce(r)}return e.prototype.load=function(t,r){r=r||Uce;var i=this._parsedMap.get(r);if(!i){var n=this._parseToRegions(r);i=this._parsedMap.set(r,{regions:n,boundingRect:Wce(n)})}var o=Y(),a=[];return D(i.regions,function(s){var l=s.name;t&&ne(t,l)&&(s=s.cloneShallow(l=t[l])),a.push(s),o.set(l,s)}),{regions:a,boundingRect:i.boundingRect||new le(0,0,0,0),regionsMap:o}},e.prototype._parseToRegions=function(t){var r=this._mapName,i=this._geoJSON,n;try{n=i?iT(i,t):[]}catch(o){throw new Error(`Invalid geoJson format
`+o.message)}return m_(r,n),D(n,function(o){var a=o.name;y_(r,o),w_(r,o);var s=this._specialAreas&&this._specialAreas[a];s&&o.transformTo(s.left,s.top,s.width,s.height)},this),n},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function Wce(e){for(var t,r=0;r<e.length;r++){var i=e[r].getBoundingRect();t=t||i.clone(),t.union(i)}return t}function jce(e){return H(e)?typeof JSON<"u"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e}var gf=Y(),li={registerMap:function(e,t,r){if(t.svg){var i=new RG(e,t.svg);gf.set(e,i)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?r=t.specialAreas:n=t;var i=new IG(e,n,r);gf.set(e,i)}},getGeoResource:function(e){return gf.get(e)},getMapForUser:function(e){var t=gf.get(e);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(e,t,r){var i=gf.get(e);if(i)return i.load(t,r)}};var C_=["rect","circle","line","ellipse","polygon","polyline","path"],$ce=Y(C_),Yce=Y(C_.concat(["g"])),qce=Y(C_.concat(["g"])),VG=he();function wC(e){var t=e.getItemStyle(),r=e.get("areaColor");return r!=null&&(t.fill=r),t}function PG(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var Kce=function(){function e(t){var r=new ee;this.uid=Dn("ec_map_draw"),this._controller=new aa(t.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new ee),r.add(this._svgGroup=new ee)}return e.prototype.draw=function(t,r,i,n,o){var a=t.mainType==="geo",s=t.getData&&t.getData();a&&r.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===t&&(s=m.getData())});var l=t.coordinateSystem,c=this._regionsGroup,u=this.group,d=l.getTransformInfo(),h=d.raw,p=d.roam,g=!c.childAt(0)||o;g?(u.x=p.x,u.y=p.y,u.scaleX=p.scaleX,u.scaleY=p.scaleY,u.dirty()):Me(u,p,t);var f=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,v={api:i,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:f,isGeo:a,transformInfoRaw:h};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,r,i),this._updateMapSelectHandler(t,c,i,n)},e.prototype._buildGeoJSON=function(t){var r=this._regionsGroupByName=Y(),i=Y(),n=this._regionsGroup,o=t.transformInfoRaw,a=t.mapOrGeoModel,s=t.data,l=t.geo.projection,c=l&&l.stream;function u(p,g){return g&&(p=g(p)),p&&[p[0]*o.scaleX+o.x,p[1]*o.scaleY+o.y]}function d(p){for(var g=[],f=!c&&l&&l.project,v=0;v<p.length;++v){var m=u(p[v],f);m&&g.push(m)}return g}function h(p){return{shape:{points:d(p)}}}n.removeAll(),D(t.geo.regions,function(p){var g=p.name,f=r.get(g),v=i.get(g)||{},m=v.dataIdx,y=v.regionModel;f||(f=r.set(g,new ee),n.add(f),m=s?s.indexOfName(g):null,y=t.isGeo?a.getRegionModel(g):s?s.getItemModel(m):null,i.set(g,{dataIdx:m,regionModel:y}));var w=[],C=[];D(p.geometries,function(x){if(x.type==="polygon"){var E=[x.exterior].concat(x.interiors||[]);c&&(E=zG(E,c)),D(E,function(T){w.push(new It(h(T)))})}else{var M=x.points;c&&(M=zG(M,c,!0)),D(M,function(T){C.push(new Rt(h(T)))})}});var S=u(p.getCenter(),l&&l.project);function b(x,E){if(x.length){var M=new Pd({culling:!0,segmentIgnoreThreshold:1,shape:{paths:x}});f.add(M),kG(t,M,m,y),LG(t,M,g,y,a,m,S),E&&(PG(M),D(M.states,PG))}}b(w),b(C,!0)}),r.each(function(p,g){var f=i.get(g),v=f.dataIdx,m=f.regionModel;FG(t,p,g,m,a,v),OG(t,p,g,m,a),NG(t,p,g,m,a)},this)},e.prototype._buildSVG=function(t){var r=t.geo.map,i=t.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var n=this._svgDispatcherMap=Y(),o=!1;D(this._svgGraphicRecord.named,function(a){var s=a.name,l=t.mapOrGeoModel,c=t.data,u=a.svgNodeTagLower,d=a.el,h=c?c.indexOfName(s):null,p=l.getRegionModel(s);if($ce.get(u)!=null&&d instanceof Yt&&kG(t,d,h,p),d instanceof Yt&&(d.culling=!0),d.z2EmphasisLift=0,!a.namedFrom&&(qce.get(u)!=null&&LG(t,d,s,p,l,h,null),FG(t,d,s,p,l,h),OG(t,d,s,p,l),Yce.get(u)!=null)){var g=NG(t,d,s,p,l);g==="self"&&(o=!0);var f=n.get(s)||n.set(s,[]);f.push(d)}},this),this._enableBlurEntireSVG(o,t)},e.prototype._enableBlurEntireSVG=function(t,r){if(t&&r.isGeo){var i=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=i.opacity;this._svgGraphicRecord.root.traverse(function(o){if(!o.isGroup){to(o);var a=o.ensureState("blur").style||{};a.opacity==null&&n!=null&&(a.opacity=n),o.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(t,r){if(t==null)return[];var i=r.coordinateSystem;if(i.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var o=n.get(t);return o?[o]:[]}}else if(i.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},e.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},e.prototype._useSVG=function(t){var r=li.getGeoResource(t);if(r&&r.type==="geoSVG"){var i=r.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=t}},e.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var r=li.getGeoResource(t);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(t,r,i){var n=t.coordinateSystem,o=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=n.getZoom(),o.enable(t.get("roam")||!1);var s=t.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=t.id,c}o.off("pan").on("pan",function(c){this._mouseDownFlag=!1,ih(a,c.dx,c.dy),i.dispatchAction(F(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),o.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,nh(a,c.scale,c.originX,c.originY),i.dispatchAction(F(l(),{totalZoom:a.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),o.setPointerChecker(function(c,u,d){return n.containPoint([u,d])&&!al(c,i,t)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var r=t.getTextContent();r&&(r.ignore=VG(r).ignore)})},e.prototype._updateMapSelectHandler=function(t,r,i,n){var o=this;r.off("mousedown"),r.off("click"),t.get("selectedMode")&&(r.on("mousedown",function(){o._mouseDownFlag=!0}),r.on("click",function(a){o._mouseDownFlag&&(o._mouseDownFlag=!1)}))},e}();function kG(e,t,r,i){var n=i.getModel("itemStyle"),o=i.getModel(["emphasis","itemStyle"]),a=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=wC(n),c=wC(o),u=wC(s),d=wC(a),h=e.data;if(h){var p=h.getItemVisual(r,"style"),g=h.getItemVisual(r,"decal");e.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),g&&(l.decal=po(g,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=c,t.ensureState("select").style=u,t.ensureState("blur").style=d,to(t)}function LG(e,t,r,i,n,o,a){var s=e.data,l=e.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),o)),u=s&&s.getItemLayout(o);if(l||c||u&&u.showLabel){var d=l?r:o,h=void 0;(!s||o>=0)&&(h=n);var p=a?{normal:{align:"center",verticalAlign:"middle"}}:null;ft(t,at(i),{labelFetcher:h,labelDataIndex:d,defaultText:r},p);var g=t.getTextContent();if(g&&(VG(g).ignore=g.ignore,t.textConfig&&a)){var f=t.getBoundingRect().clone();t.textConfig.layoutRect=f,t.textConfig.position=[(a[0]-f.x)/f.width*100+"%",(a[1]-f.y)/f.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function FG(e,t,r,i,n,o){e.data?e.data.setItemGraphicEl(o,t):ae(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:r,region:i&&i.option||{}}}function OG(e,t,r,i,n){e.data||oo({el:t,componentModel:n,itemName:r,itemTooltipOption:i.get("tooltip")})}function NG(e,t,r,i,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var o=i.getModel("emphasis"),a=o.get("focus");return We(t,a,o.get("blurScope"),o.get("disabled")),e.isGeo&&uz(t,n,r),a}function zG(e,t,r){var i=[],n;function o(){n=[]}function a(){n.length&&(i.push(n),n=[])}var s=t({polygonStart:o,polygonEnd:a,lineStart:o,lineEnd:a,point:function(l,c){isFinite(l)&&isFinite(c)&&n.push([l,c])},sphere:function(){}});return!r&&s.polygonStart(),D(e,function(l){s.lineStart();for(var c=0;c<l.length;c++)s.point(l[c][0],l[c][1]);s.lineEnd()}),!r&&s.polygonEnd(),i}var CC=Kce;var Zce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,o){if(!(o&&o.type==="mapToggleSelect"&&o.from===this.uid)){var a=this.group;if(a.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&o&&o.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),o&&o.type==="geoRoam"&&o.componentType==="series"&&o.seriesId===r.id){var s=this._mapDraw;s&&a.add(s.group)}else if(r.needsDrawMap){var s=this._mapDraw||new CC(n);a.add(s.group),s.draw(r,i,n,this,o),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(r,i,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(r,i,n){var o=r.originalData,a=this.group;o.each(o.mapDimension("value"),function(s,l){if(!isNaN(s)){var c=o.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,d=c.offset,h=new ti({style:{fill:r.getData().getVisual("style").fill},shape:{cx:u[0]+d*9,cy:u[1],r:3},silent:!0,z2:8+(d?0:Ia+1)});if(!d){var p=r.mainSeries.getData(),g=o.getName(l),f=p.indexOfName(g),v=o.getItemModel(l),m=v.getModel("label"),y=p.getItemGraphicEl(f);ft(h,at(v),{labelFetcher:{getFormattedLabel:function(w,C){return r.getFormattedLabel(f,C)}},defaultText:g}),h.disableLabelAnimation=!0,m.get("position")||h.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(w){Ec(h,w)}}a.add(h)}}})},t.type="map",t}(Le),BG=Zce;var Xce=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(i){if(i!=null){var n=this.getData().getName(i),o=this.coordinateSystem,a=o.getRegion(n);return a&&o.dataToPoint(a.getCenter())}},r}return t.prototype.getInitialData=function(r){for(var i=en(this,{coordDimensions:["value"],encodeDefaulter:se(Hd,this)}),n=Y(),o=[],a=0,s=i.count();a<s;a++){var l=i.getName(a);n.set(l,!0)}var c=li.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return D(c.regions,function(u){var d=u.name;n.get(d)||o.push(d)}),i.appendValues([],o),i},t.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(r){var i=this.getData();return i.get(i.mapDimension("value"),r)},t.prototype.getRegionModel=function(r){var i=this.getData();return i.getItemModel(i.indexOfName(r))},t.prototype.formatTooltip=function(r,i,n){for(var o=this.getData(),a=this.getRawValue(r),s=o.getName(r),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var d=l[u].originalData.indexOfName(s),h=o.mapDimension("value");isNaN(l[u].originalData.get(h,d))||c.push(l[u].name)}return wt("section",{header:c.join(", "),noHeader:!c.length,blocks:[wt("nameValue",{name:s,value:a})]})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.getLegendIcon=function(r){var i=r.icon||"roundRect",n=et(i,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return n.setStyle(r.itemStyle),n.style.stroke="none",i.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Be),GG=Xce;function Qce(e,t){var r={};return D(e,function(i){i.each(i.mapDimension("value"),function(n,o){var a="ec-"+i.getName(o);r[a]=r[a]||[],isNaN(n)||r[a].push(n)})}),e[0].map(e[0].mapDimension("value"),function(i,n){for(var o="ec-"+e[0].getName(n),a=0,s=1/0,l=-1/0,c=r[o].length,u=0;u<c;u++)s=Math.min(s,r[o][u]),l=Math.max(l,r[o][u]),a+=r[o][u];var d;return t==="min"?d=s:t==="max"?d=l:t==="average"?d=a/c:d=a,c===0?NaN:d})}function b_(e){var t={};e.eachSeriesByType("map",function(r){var i=r.getHostGeoModel(),n=i?"o"+i.id:"i"+r.getMapType();(t[n]=t[n]||[]).push(r)}),D(t,function(r,i){for(var n=Qce(N(r,function(a){return a.getData()}),r[0].get("mapValueCalculation")),o=0;o<r.length;o++)r[o].originalData=r[o].getData();for(var o=0;o<r.length;o++)r[o].seriesGroup=r,r[o].needsDrawMap=o===0&&!r[o].getHostGeoModel(),r[o].setData(n.cloneShallow()),r[o].mainSeries=r[0]})}function S_(e){var t={};e.eachSeriesByType("map",function(r){var i=r.getMapType();if(!(r.getHostGeoModel()||t[i])){var n={};D(r.seriesGroup,function(a){var s=a.coordinateSystem,l=a.originalData;a.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var d=l.getName(u),h=s.getRegion(d);if(!(!h||isNaN(c))){var p=n[d]||0,g=s.dataToPoint(h.getCenter());n[d]=p+1,l.setItemLayout(u,{point:g,offset:p})}})});var o=r.getData();o.each(function(a){var s=o.getName(a),l=o.getItemLayout(a)||{};l.showLabel=!n[s],o.setItemLayout(a,l)}),t[i]=!0}})}var HG=Bt,Jce=function(e){I(t,e);function t(r){var i=e.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new xi,i._rawTransformable=new xi,i.name=r,i}return t.prototype.setBoundingRect=function(r,i,n,o){return this._rect=new le(r,i,n,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,i,n,o){this._transformTo(r,i,n,o),this._viewRect=new le(r,i,n,o)},t.prototype._transformTo=function(r,i,n,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new le(r,i,n,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,i){r&&(this._center=[j(r[0],i.getWidth()),j(r[1],i.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var i=this.zoomLimit;i&&(i.max!=null&&(r=Math.min(i.max,r)),i.min!=null&&(r=Math.max(i.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),i=r.x+r.width/2,n=r.y+r.height/2;return[i,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=Bt([],o,r),n=Bt([],n,r),i.originX=o[0],i.originY=o[1],i.x=n[0]-o[0],i.y=n[1]-o[1],i.scaleX=i.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,i=this._rawTransformable;i.parent=r,r.updateTransform(),i.updateTransform(),Pp(this.transform||(this.transform=[]),i.transform||Xt()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],gn(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,i=this._roamTransformable,n=new xi;return n.transform=i.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,i,n){var o=i?this._rawTransform:this.transform;return n=n||[],o?HG(n,r,o):hr(n,r)},t.prototype.pointToData=function(r){var i=this.invTransform;return i?HG([],r,i):[r[0],r[1]]},t.prototype.convertToPixel=function(r,i,n){var o=UG(i);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(r,i,n){var o=UG(i);return o===this?o.pointToData(n):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(xi);function UG(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var qa=Jce;var eue={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},x_=["lng","lat"],jG=function(e){I(t,e);function t(r,i,n){var o=e.call(this,r)||this;o.dimensions=x_,o.type="geo",o._nameCoordMap=Y(),o.map=i;var a=n.projection,s=li.load(i,n.nameMap,n.nameProperty),l=li.getGeoResource(i),c=o.resourceType=l?l.type:null,u=o.regions=s.regions,d=eue[l.type];o._regionsMap=s.regionsMap,o.regions=s.regions,o.projection=a;var h;if(a)for(var p=0;p<u.length;p++){var g=u[p].getBoundingRect(a);h=h||g.clone(),h.union(g)}else h=s.boundingRect;return o.setBoundingRect(h.x,h.y,h.width,h.height),o.aspectScale=a?1:de(n.aspectScale,d.aspectScale),o._invertLongitute=a?!1:d.invertLongitute,o}return t.prototype._transformTo=function(r,i,n,o){var a=this.getBoundingRect(),s=this._invertLongitute;a=a.clone(),s&&(a.y=-a.y-a.height);var l=this._rawTransformable;l.transform=a.calculateTransform(new le(r,i,n,o));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(r){return this._regionsMap.get(r)},t.prototype.getRegionByCoord=function(r){for(var i=this.regions,n=0;n<i.length;n++){var o=i[n];if(o.type==="geoJSON"&&o.contain(r))return i[n]}},t.prototype.addGeoCoord=function(r,i){this._nameCoordMap.set(r,i)},t.prototype.getGeoCoord=function(r){var i=this._regionsMap.get(r);return this._nameCoordMap.get(r)||i&&i.getCenter()},t.prototype.dataToPoint=function(r,i,n){if(H(r)&&(r=this.getGeoCoord(r)),r){var o=this.projection;return o&&(r=o.project(r)),r&&this.projectedToPoint(r,i,n)}},t.prototype.pointToData=function(r){var i=this.projection;return i&&(r=i.unproject(r)),r&&this.pointToProjected(r)},t.prototype.pointToProjected=function(r){return e.prototype.pointToData.call(this,r)},t.prototype.projectedToPoint=function(r,i,n){return e.prototype.dataToPoint.call(this,r,i,n)},t.prototype.convertToPixel=function(r,i,n){var o=WG(i);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(r,i,n){var o=WG(i);return o===this?o.pointToData(n):null},t}(qa);ot(jG,qa);function WG(e){var t=e.geoModel,r=e.seriesModel;return t?t.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",dt).models[0]||{}).coordinateSystem:null}var D_=jG;function $G(e,t){var r=e.get("boundingCoords");if(r!=null){var i=r[0],n=r[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(n[0])&&isFinite(n[1])){var o=this.projection;if(o){var a=i[0],s=i[1],l=n[0],c=n[1];i=[1/0,1/0],n=[-1/0,-1/0];var u=function(b,x,E,M){for(var T=E-b,_=M-x,R=0;R<=100;R++){var A=R/100,P=o.project([b+T*A,x+_*A]);Ui(i,i,P),Wi(n,n,P)}};u(a,s,l,s),u(l,s,l,c),u(l,c,a,c),u(a,c,l,s)}this.setBoundingRect(i[0],i[1],n[0]-i[0],n[1]-i[1])}}var d=this.getBoundingRect(),h=e.get("layoutCenter"),p=e.get("layoutSize"),g=t.getWidth(),f=t.getHeight(),v=d.width/d.height*this.aspectScale,m=!1,y,w;h&&p&&(y=[j(h[0],g),j(h[1],f)],w=j(p,Math.min(g,f)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(w)&&(m=!0));var C;if(m)C={},v>1?(C.width=w,C.height=w/v):(C.height=w,C.width=w*v),C.y=y[1]-C.height/2,C.x=y[0]-C.width/2;else{var S=e.getBoxLayoutParams();S.aspect=v,C=Je(S,{width:g,height:f})}this.setViewRect(C.x,C.y,C.width,C.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}function tue(e,t){D(t.get("geoCoord"),function(r,i){e.addGeoCoord(i,r)})}var rue=function(){function e(){this.dimensions=x_}return e.prototype.create=function(t,r){var i=[];function n(a){return{nameProperty:a.get("nameProperty"),aspectScale:a.get("aspectScale"),projection:a.get("projection")}}t.eachComponent("geo",function(a,s){var l=a.get("map"),c=new D_(l+s,l,F({nameMap:a.get("nameMap")},n(a)));c.zoomLimit=a.get("scaleLimit"),i.push(c),a.coordinateSystem=c,c.model=a,c.resize=$G,c.resize(a,r)}),t.eachSeries(function(a){var s=a.get("coordinateSystem");if(s==="geo"){var l=a.get("geoIndex")||0;a.coordinateSystem=i[l]}});var o={};return t.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var s=a.getMapType();o[s]=o[s]||[],o[s].push(a)}}),D(o,function(a,s){var l=N(a,function(u){return u.get("nameMap")}),c=new D_(s,s,F({nameMap:nd(l)},n(a[0])));c.zoomLimit=bt.apply(null,N(a,function(u){return u.get("scaleLimit")})),i.push(c),c.resize=$G,c.resize(a[0],r),D(a,function(u){u.coordinateSystem=c,tue(c,u)})}),i},e.prototype.getFilledRegions=function(t,r,i,n){for(var o=(t||[]).slice(),a=Y(),s=0;s<o.length;s++)a.set(o[s].name,o[s]);var l=li.load(r,i,n);return D(l.regions,function(c){var u=c.name;!a.get(u)&&o.push({name:u})}),o},e}(),iue=new rue,bC=iue;var nue=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i,n){var o=li.getGeoResource(r.map);if(o&&o.type==="geoJSON"){var a=r.itemStyle=r.itemStyle||{};"color"in a||(a.color="#eee")}this.mergeDefaultAndTheme(r,n),Yi(r,"label",["show"])},t.prototype.optionUpdated=function(){var r=this,i=this.option;i.regions=bC.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var n={};this._optionModelMap=Er(i.regions||[],function(o,a){var s=a.name;return s&&(o.set(s,new Ve(a,r,r.ecModel)),a.selected&&(n[s]=!0)),o},Y()),i.selectedMap||(i.selectedMap=n)},t.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Ve(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(r,i){var n=this.getRegionModel(r),o=i==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),a={name:r};if(Z(o))return a.status=i,o(a);if(H(o))return o.replace("{a}",r??"")},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.select=function(r){var i=this.option,n=i.selectedMode;if(n){n!=="multiple"&&(i.selectedMap=null);var o=i.selectedMap||(i.selectedMap={});o[r]=!0}},t.prototype.unSelect=function(r){var i=this.option.selectedMap;i&&(i[r]=!1)},t.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},t.prototype.isSelected=function(r){var i=this.option.selectedMap;return!!(i&&i[r])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Ee),YG=nue;function qG(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function oh(e,t,r,i){var n=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(qG(e,s),i)),a!=null){if(r){var l=r.min||0,c=r.max||1/0;a=Math.max(Math.min(n*a,c),l)/n}e.scaleX*=a,e.scaleY*=a;var u=(t.originX-e.x)*(a-1),d=(t.originY-e.y)*(a-1);e.x-=u,e.y-=d,e.updateTransform(),e.setCenter(qG(e,s),i),e.setZoom(a*n)}return{center:e.getCenter(),zoom:e.getZoom()}}var oue=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.focusBlurEnabled=!0,r}return t.prototype.init=function(r,i){this._api=i},t.prototype.render=function(r,i,n,o){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new CC(n));var a=this._mapDraw;a.draw(r,i,n,this,o),a.group.on("click",this._handleRegionClick,this),a.group.silent=r.get("silent"),this.group.add(a.group),this.updateSelectStatus(r,i,n)},t.prototype._handleRegionClick=function(r){var i;uo(r.target,function(n){return(i=ae(n).eventData)!=null},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},t.prototype.updateSelectStatus=function(r,i,n){var o=this;this._mapDraw.group.traverse(function(a){var s=ae(a).eventData;if(s)return o._model.isSelected(s.name)?n.enterSelect(a):n.leaveSelect(a),!0})},t.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(He),KG=oue;function aue(e,t,r){li.registerMap(e,t,r)}function ff(e){e.registerCoordinateSystem("geo",bC),e.registerComponentModel(YG),e.registerComponentView(KG),e.registerImpl("registerMap",aue),e.registerImpl("getMap",function(r){return li.getMapForUser(r)});function t(r,i){i.update="geo:updateSelectStatus",e.registerAction(i,function(n,o){var a={},s=[];return o.eachComponent({mainType:"geo",query:n},function(l){l[r](n.name);var c=l.coordinateSystem;D(c.regions,function(d){a[d.name]=l.isSelected(d.name)||!1});var u=[];D(a,function(d,h){a[h]&&u.push(h)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:a,allSelected:s,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,i,n){var o=r.componentType||"series";i.eachComponent({mainType:o,query:r},function(a){var s=a.coordinateSystem;if(s.type==="geo"){var l=oh(s,r,a.get("scaleLimit"),n);a.setCenter&&a.setCenter(l.center),a.setZoom&&a.setZoom(l.zoom),o==="series"&&D(a.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function E_(e){Te(ff),e.registerChartView(BG),e.registerSeriesModel(GG),e.registerLayout(S_),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,b_),ow("map",e.registerAction)}function ZG(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],i,n;i=r.pop();)if(n=i.children,i.isExpand&&n.length)for(var o=n.length,a=o-1;a>=0;a--){var s=n[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function XG(e,t){var r=e.isExpand?e.children:[],i=e.parentNode.children,n=e.hierNode.i?i[e.hierNode.i-1]:null;if(r.length){sue(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=lue(e,n,e.parentNode.hierNode.defaultAncestor||i[0],t)}function QG(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function __(e){return arguments.length?e:due}function eu(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function JG(e,t){return Je(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function sue(e){for(var t=e.children,r=t.length,i=0,n=0;--r>=0;){var o=t[r];o.hierNode.prelim+=i,o.hierNode.modifier+=i,n+=o.hierNode.change,i+=o.hierNode.shift+n}}function lue(e,t,r,i){if(t){for(var n=e,o=e,a=o.parentNode.children[0],s=t,l=n.hierNode.modifier,c=o.hierNode.modifier,u=a.hierNode.modifier,d=s.hierNode.modifier;s=M_(s),o=T_(o),s&&o;){n=M_(n),a=T_(a),n.hierNode.ancestor=e;var h=s.hierNode.prelim+d-o.hierNode.prelim-c+i(s,o);h>0&&(uue(cue(s,e,r),e,h),c+=h,l+=h),d+=s.hierNode.modifier,c+=o.hierNode.modifier,l+=n.hierNode.modifier,u+=a.hierNode.modifier}s&&!M_(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=d-l),o&&!T_(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=c-u,r=e)}return r}function M_(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function T_(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function cue(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function uue(e,t,r){var i=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=i,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=i}function due(e,t){return e.parentNode===t.parentNode?1:2}var hue=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),pue=function(e){I(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new hue},t.prototype.buildPath=function(r,i){var n=i.childPoints,o=n.length,a=i.parentPoint,s=n[0],l=n[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var c=i.orient,u=c==="TB"||c==="BT"?0:1,d=1-u,h=j(i.forkPosition,1),p=[];p[u]=a[u],p[d]=a[d]+(l[d]-a[d])*h,r.moveTo(a[0],a[1]),r.lineTo(p[0],p[1]),r.moveTo(s[0],s[1]),p[u]=s[u],r.lineTo(p[0],p[1]),p[u]=l[u],r.lineTo(p[0],p[1]),r.lineTo(l[0],l[1]);for(var g=1;g<o-1;g++){var f=n[g];r.moveTo(f[0],f[1]),p[u]=f[u],r.lineTo(p[0],p[1])}},t}(ce),gue=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new ee,r}return t.prototype.init=function(r,i){this._controller=new aa(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,i,n){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,n),this._updateController(r,i,n);var c=this._data;o.diff(c).add(function(u){eH(o,u)&&tH(o,u,null,s,r)}).update(function(u,d){var h=c.getItemGraphicEl(d);if(!eH(o,u)){h&&iH(c,d,h,s,r);return}tH(o,u,h,s,r)}).remove(function(u){var d=c.getItemGraphicEl(u);d&&iH(c,u,d,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(u,d){u.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:d})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,i){var n=r.getData(),o=[];n.each(function(d){var h=n.getItemLayout(d);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];yc(o,a,s);var l=this._min,c=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=c?c[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=c?c[1]:s[1]+1);var u=r.coordinateSystem=new qa;u.zoomLimit=r.get("scaleLimit"),u.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),u.setCenter(r.get("center"),i),u.setZoom(r.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,i,n){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!al(c,n,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(c){ih(s,c.dx,c.dy),n.dispatchAction({seriesId:r.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){nh(s,c.scale,c.originX,c.originY),n.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),o._updateNodeAndLinkScale(r),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var i=r.getData(),n=this._getNodeGlobalScale(r);i.eachItemGraphicEl(function(o,a){o.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(r){var i=r.coordinateSystem;if(i.type!=="view")return 1;var n=this._nodeScaleRatio,o=i.scaleX||1,a=i.getZoom(),s=(a-1)*n+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Le);function eH(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function tH(e,t,r,i,n){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,c=a.isExpand===!1&&a.children.length!==0?l:"#fff",u=e.tree.root,d=a.parentNode===u?a:a.parentNode||a,h=e.getItemGraphicEl(d.dataIndex),p=d.getLayout(),g=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:p,f=a.getLayout();o?(r=new Ya(e,t,null,{symbolInnerColor:c,useNameLabel:!0}),r.x=g.x,r.y=g.y):r.updateData(e,t,null,{symbolInnerColor:c,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=f.rawX,r.__radialRawY=f.rawY,i.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,Me(r,{x:f.x,y:f.y},n);var v=r.getSymbolPath();if(n.get("layout")==="radial"){var m=u.children[0],y=m.getLayout(),w=m.children.length,C=void 0,S=void 0;if(f.x===y.x&&a.isExpand===!0&&m.children.length){var b={x:(m.children[0].getLayout().x+m.children[w-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[w-1].getLayout().y)/2};C=Math.atan2(b.y-y.y,b.x-y.x),C<0&&(C=Math.PI*2+C),S=b.x<y.x,S&&(C=C-Math.PI)}else C=Math.atan2(f.y-y.y,f.x-y.x),C<0&&(C=Math.PI*2+C),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(S=f.x<y.x,S&&(C=C-Math.PI)):(S=f.x>y.x,S||(C=C-Math.PI));var x=S?"left":"right",E=s.getModel("label"),M=E.get("rotate"),T=M*(Math.PI/180),_=v.getTextContent();_&&(v.setTextConfig({position:E.get("position")||x,rotation:M==null?-C:T,origin:"center"}),_.setStyle("verticalAlign","middle"))}var R=s.get(["emphasis","focus"]),A=R==="relative"?Zl(a.getAncestorsIndices(),a.getDescendantIndices()):R==="ancestor"?a.getAncestorsIndices():R==="descendant"?a.getDescendantIndices():null;A&&(ae(r).focus=A),fue(n,a,u,r,g,p,f,i),r.__edge&&(r.onHoverStateChange=function(P){if(P!=="blur"){var k=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);k&&k.hoverState===Dc||Ec(r.__edge,P)}})}function fue(e,t,r,i,n,o,a,s){var l=t.getModel(),c=e.get("edgeShape"),u=e.get("layout"),d=e.getOrient(),h=e.get(["lineStyle","curveness"]),p=e.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),f=i.__edge;if(c==="curve")t.parentNode&&t.parentNode!==r&&(f||(f=i.__edge=new _c({shape:R_(u,d,h,n,n)})),Me(f,{shape:R_(u,d,h,o,a)},e));else if(c==="polyline"&&u==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var v=t.children,m=[],y=0;y<v.length;y++){var w=v[y].getLayout();m.push([w.x,w.y])}f||(f=i.__edge=new pue({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:d,forkPosition:p}})),Me(f,{shape:{parentPoint:[a.x,a.y],childPoints:m}},e)}f&&!(c==="polyline"&&!t.isExpand)&&(f.useStyle(Q({strokeNoScale:!0,fill:null},g)),Dt(f,l,"lineStyle"),to(f),s.add(f))}function rH(e,t,r,i,n){var o=t.tree.root,a=nH(o,e),s=a.source,l=a.sourceLayout,c=t.getItemGraphicEl(e.dataIndex);if(c){var u=t.getItemGraphicEl(s.dataIndex),d=u.__edge,h=c.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),p=i.get("edgeShape"),g=i.get("layout"),f=i.get("orient"),v=i.get(["lineStyle","curveness"]);h&&(p==="curve"?xn(h,{shape:R_(g,f,v,l,l),style:{opacity:0}},i,{cb:function(){r.remove(h)},removeOpt:n}):p==="polyline"&&i.get("layout")==="orthogonal"&&xn(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},i,{cb:function(){r.remove(h)},removeOpt:n}))}}function nH(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,i;i=r.getLayout(),i==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:i}}function iH(e,t,r,i,n){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=nH(a,o).sourceLayout,l={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};xn(r,{x:s.x+1,y:s.y+1},n,{cb:function(){i.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(c){rH(c,e,i,n,l)}),rH(o,e,i,n,l)}function R_(e,t,r,i,n){var o,a,s,l,c,u,d,h;if(e==="radial"){c=i.rawX,d=i.rawY,u=n.rawX,h=n.rawY;var p=eu(c,d),g=eu(c,d+(h-d)*r),f=eu(u,h+(d-h)*r),v=eu(u,h);return{x1:p.x||0,y1:p.y||0,x2:v.x||0,y2:v.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:f.x||0,cpy2:f.y||0}}else c=i.x,d=i.y,u=n.x,h=n.y,(t==="LR"||t==="RL")&&(o=c+(u-c)*r,a=d,s=u+(c-u)*r,l=h),(t==="TB"||t==="BT")&&(o=c,a=d+(h-d)*r,s=u,l=h+(d-h)*r);return{x1:c,y1:d,x2:u,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}var oH=gue;var Ln=he();function vue(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,aH(t,r,e),D(r,function(i){D(t.TRANSFERABLE_METHODS,function(n){i.wrapMethod(n,se(mue,e))})}),t.wrapMethod("cloneShallow",se(wue,e)),D(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,se(yue,e))}),St(r[t.dataType]===t)}function mue(e,t){if(Sue(this)){var r=F({},Ln(this).datas);r[this.dataType]=t,aH(t,r,e)}else A_(t,this.dataType,Ln(this).mainData,e);return t}function yue(e,t){return e.struct&&e.struct.update(),t}function wue(e,t){return D(Ln(t).datas,function(r,i){r!==t&&A_(r.cloneShallow(),i,t,e)}),t}function Cue(e){var t=Ln(this).mainData;return e==null||t==null?t:Ln(t).datas[e]}function bue(){var e=Ln(this).mainData;return e==null?[{data:e}]:N(me(Ln(e).datas),function(t){return{type:t,data:Ln(e).datas[t]}})}function Sue(e){return Ln(e).mainData===e}function aH(e,t,r){Ln(e).datas={},D(t,function(i,n){A_(i,n,e,r)})}function A_(e,t,r,i){Ln(r).datas[t]=e,Ln(e).mainData=r,e.dataType=t,i.struct&&(e[i.structAttr]=i.struct,i.struct[i.datasAttr[t]]=e),e.getLinkedData=Cue,e.getLinkedDataAll=bue}var SC=vue;var xue=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,i){Z(t)&&(i=r,r=t,t=null),t=t||{},H(t)&&(t={order:t});var n=t.order||"preorder",o=this[t.attr||"children"],a;n==="preorder"&&(a=r.call(i,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,i);n==="postorder"&&r.call(i,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(t+1),n.height>r&&(r=n.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,i=this.children,n=i.length;r<n;r++){var o=i[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,i=this.children,n=i.length;r<n;r++){var o=i[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],i=t?this:this.parentNode;i;)r.push(i),i=i.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,i=r.data.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}();var Due=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,i){this.root.eachNode(t,r,i)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,i=0,n=r.length;i<n;i++)r[i].dataIndex=-1;for(var i=0,n=t.count();i<n;i++)r[t.getRawIndex(i)].dataIndex=i},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,i){var n=new e(r),o=[],a=1;s(t);function s(u,d){var h=u.value;a=Math.max(a,O(h)?h.length:1),o.push(u);var p=new xue(Mt(u.name,""),n);d?Eue(p,d):n.root=p,n._nodes.push(p);var g=u.children;if(g)for(var f=0;f<g.length;f++)s(g[f],p)}n.root.updateDepthAndHeight(0);var l=go(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,c=new Pt(l,r);return c.initData(o),i&&i(c),SC({mainData:c,struct:n,structAttr:"tree"}),n.update(),n},e}();function Eue(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}var ah=Due;function Ka(e,t,r){if(e&&pe(t,e.type)>=0){var i=r.getData().tree.root,n=e.targetNode;if(H(n)&&(n=i.getNodeById(n)),n&&i.contains(n))return{node:n};var o=e.targetNodeId;if(o!=null&&(n=i.getNodeById(o)))return{node:n}}}function I_(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t.reverse()}function sh(e,t){var r=I_(e);return pe(r,t)>=0}function ll(e,t){for(var r=[];e;){var i=e.dataIndex;r.push({name:e.name,dataIndex:i,value:t.getRawValue(i)}),e=e.parentNode}return r.reverse(),r}var Mue=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var i={name:r.name,children:r.data},n=r.leaves||{},o=new Ve(n,this,this.ecModel),a=ah.createTree(i,this,s);function s(d){d.wrapMethod("getItemModel",function(h,p){var g=a.getNodeByDataIndex(p);return g&&g.children.length&&g.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var c=r.expandAndCollapse,u=c&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(d){var h=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=h&&h.collapsed!=null?!h.collapsed:d.depth<=u}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,i,n){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),c=s.name;s&&s!==a;)c=s.parentNode.name+"."+c,s=s.parentNode;return wt("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=ll(n,this),i.collapsed=!n.isExpand,i},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Be),sH=Mue;function lH(e,t,r){for(var i=[e],n=[],o;o=i.pop();)if(n.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)i.push(a[s])}for(;o=n.pop();)t(o,r)}function lh(e,t){for(var r=[e],i;i=r.pop();)if(t(i),i.isExpand){var n=i.children;if(n.length)for(var o=n.length-1;o>=0;o--)r.push(n[o])}}function k_(e,t){e.eachSeriesByType("tree",function(r){Tue(r,t)})}function Tue(e,t){var r=JG(e,t);e.layoutInfo=r;var i=e.get("layout"),n=0,o=0,a=null;i==="radial"?(n=2*Math.PI,o=Math.min(r.height,r.width)/2,a=__(function(w,C){return(w.parentNode===C.parentNode?1:2)/w.depth})):(n=r.width,o=r.height,a=__());var s=e.getData().tree.root,l=s.children[0];if(l){ZG(s),lH(l,XG,a),s.hierNode.modifier=-l.hierNode.prelim,lh(l,QG);var c=l,u=l,d=l;lh(l,function(w){var C=w.getLayout().x;C<c.getLayout().x&&(c=w),C>u.getLayout().x&&(u=w),w.depth>d.depth&&(d=w)});var h=c===u?1:a(c,u)/2,p=h-c.getLayout().x,g=0,f=0,v=0,m=0;if(i==="radial")g=n/(u.getLayout().x+h+p),f=o/(d.depth-1||1),lh(l,function(w){v=(w.getLayout().x+p)*g,m=(w.depth-1)*f;var C=eu(v,m);w.setLayout({x:C.x,y:C.y,rawX:v,rawY:m},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(f=o/(u.getLayout().x+h+p),g=n/(d.depth-1||1),lh(l,function(w){m=(w.getLayout().x+p)*f,v=y==="LR"?(w.depth-1)*g:n-(w.depth-1)*g,w.setLayout({x:v,y:m},!0)})):(y==="TB"||y==="BT")&&(g=n/(u.getLayout().x+h+p),f=o/(d.depth-1||1),lh(l,function(w){v=(w.getLayout().x+p)*g,m=y==="TB"?(w.depth-1)*f:o-(w.depth-1)*f,w.setLayout({x:v,y:m},!0)}))}}}function L_(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),i=r.tree;i.eachNode(function(n){var o=n.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(n.dataIndex,"style");F(s,a)})})}function cH(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var n=t.dataIndex,o=i.getData().tree,a=o.getNodeByDataIndex(n);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,i){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var o=n.coordinateSystem,a=oh(o,t,void 0,i);n.setCenter&&n.setCenter(a.center),n.setZoom&&n.setZoom(a.zoom)})})}function F_(e){e.registerChartView(oH),e.registerSeriesModel(sH),e.registerLayout(k_),e.registerVisual(L_),cH(e)}var uH=["treemapZoomToNode","treemapRender","treemapMove"];function dH(e){for(var t=0;t<uH.length;t++)e.registerAction({type:uH[t],update:"updateView"},pt);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,i){i.eachComponent({mainType:"series",subType:"treemap",query:r},n);function n(o,a){var s=["treemapZoomToNode","treemapRootToNode"],l=Ka(r,s,o);if(l){var c=o.getViewRoot();c&&(r.direction=sh(c,l.node)?"rollUp":"drillDown"),o.resetViewRoot(l.node)}}})}function vf(e){var t=e.getData(),r=t.tree,i={};r.eachNode(function(n){for(var o=n;o&&o.depth>1;)o=o.parentNode;var a=Eg(e.ecModel,o.name||o.dataIndex+"",i);n.setVisual("decal",a)})}var _ue=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.preventUsingHoverLayer=!0,r}return t.prototype.getInitialData=function(r,i){var n={name:r.name,children:r.data};hH(n);var o=r.levels||[],a=this.designatedVisualItemStyle={},s=new Ve({itemStyle:a},this,i);o=r.levels=Rue(o,i);var l=N(o||[],function(d){return new Ve(d,s,i)},this),c=ah.createTree(n,this,u);function u(d){d.wrapMethod("getItemModel",function(h,p){var g=c.getNodeByDataIndex(p),f=g?l[g.depth]:null;return h.parentModel=f||s,h})}return c.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(r,i,n){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return wt("nameValue",{name:s,value:a})},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treeAncestors=ll(n,this),i.treePathInfo=i.treeAncestors,i},t.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},F(this.layoutInfo,r)},t.prototype.mapIdToIndex=function(r){var i=this._idIndexMap;i||(i=this._idIndexMap=Y(),this._idIndexMapCount=0);var n=i.get(r);return n==null&&i.set(r,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var i=this.getRawData().tree.root;(!r||r!==i&&!i.contains(r))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){vf(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(Be);function hH(e){var t=0;D(e.children,function(i){hH(i);var n=i.value;O(n)&&(n=n[0]),t+=n});var r=e.value;O(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),O(e.value)?e.value[0]=r:e.value=r}function Rue(e,t){var r=Ge(t.get("color")),i=Ge(t.get(["aria","decal","decals"]));if(r){e=e||[];var n,o;D(e,function(s){var l=new Ve(s),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(n=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(o=!0)});var a=e[0]||(e[0]={});return n||(a.color=r.slice()),!o&&i&&(a.decal=i.slice()),e}}var pH=_ue;var Aue=8,gH=8,O_=5,Iue=function(){function e(t){this.group=new ee,t.add(this.group)}return e.prototype.render=function(t,r,i,n){var o=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),!(!o.get("show")||!i)){var s=o.getModel("itemStyle"),l=o.getModel("emphasis"),c=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),d={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,d,c),this._renderContent(t,d,s,l,c,u,n),Hs(a,d.pos,d.box)}},e.prototype._prepare=function(t,r,i){for(var n=t;n;n=n.parentNode){var o=Mt(n.getModel().get("name"),""),a=i.getTextRect(o),s=Math.max(a.width+Aue*2,r.emptyItemWidth);r.totalWidth+=s+gH,r.renderList.push({node:n,text:o,width:s})}},e.prototype._renderContent=function(t,r,i,n,o,a,s){for(var l=0,c=r.emptyItemWidth,u=t.get(["breadcrumb","height"]),d=g6(r.pos,r.box),h=r.totalWidth,p=r.renderList,g=n.getModel("itemStyle").getItemStyle(),f=p.length-1;f>=0;f--){var v=p[f],m=v.node,y=v.width,w=v.text;h>d.width&&(h-=y-c,y=c,w=null);var C=new It({shape:{points:Pue(l,0,y,u,f===p.length-1,f===0)},style:Q(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new De({style:Ke(o,{text:w})}),textConfig:{position:"inside"},z2:Ia*1e4,onclick:se(s,m)});C.disableLabelAnimation=!0,C.getTextContent().ensureState("emphasis").style=Ke(a,{text:w}),C.ensureState("emphasis").style=g,We(C,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(C),kue(C,t,m),l+=y+gH}},e.prototype.remove=function(){this.group.removeAll()},e}();function Pue(e,t,r,i,n,o){var a=[[n?e:e-O_,t],[e+r,t],[e+r,t+i],[n?e:e-O_,t+i]];return!o&&a.splice(2,0,[e+r+O_,t+i/2]),!n&&a.push([e,t+i/2]),a}function kue(e,t,r){ae(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&ll(r,t)}}var fH=Iue;var Lue=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(t,r,i,n,o){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:r,duration:i,delay:n,easing:o}),!0)},e.prototype.finished=function(t){return this._finishedCallback=t,this},e.prototype.start=function(){for(var t=this,r=this._storage.length,i=function(){r--,r<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,o=this._storage.length;n<o;n++){var a=this._storage[n];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:i,aborted:i})}return this},e}();function vH(){return new Lue}var N_=ee,mH=Ce,yH=3,wH="label",CH="upperLabel",Oue=Ia*10,Nue=Ia*2,zue=Ia*3,tu=Ti([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),bH=function(e){var t=tu(e);return t.stroke=t.fill=t.lineWidth=null,t},xC=he(),Vue=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._state="ready",r._storage=mf(),r}return t.prototype.render=function(r,i,n,o){var a=i.findComponents({mainType:"series",subType:"treemap",query:o});if(!(pe(a,r)<0)){this.seriesModel=r,this.api=n,this.ecModel=i;var s=["treemapZoomToNode","treemapRootToNode"],l=Ka(o,s,r),c=o&&o.type,u=r.layoutInfo,d=!this._oldTree,h=this._storage,p=c==="treemapRootToNode"&&l&&h?{rootNodeGroup:h.nodeGroup[l.node.getRawIndex()],direction:o.direction}:null,g=this._giveContainerGroup(u),f=r.get("animation"),v=this._doRender(g,r,p);f&&!d&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(g,v,r,p):v.renderFinally(),this._resetController(n),this._renderBreadcrumb(r,n,l)}},t.prototype._giveContainerGroup=function(r){var i=this._containerGroup;return i||(i=this._containerGroup=new N_,this._initEvents(i),this.group.add(i)),i.x=r.x,i.y=r.y,i},t.prototype._doRender=function(r,i,n){var o=i.getData().tree,a=this._oldTree,s=mf(),l=mf(),c=this._storage,u=[];function d(y,w,C,S){return Bue(i,l,c,n,s,u,y,w,C,S)}f(o.root?[o.root]:[],a&&a.root?[a.root]:[],r,o===a||!a,0);var h=v(c);if(this._oldTree=o,this._storage=l,this._controllerHost){var p=this.seriesModel.layoutInfo,g=o.root.getLayout();g.width===p.width&&g.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:h,renderFinally:m};function f(y,w,C,S,b){S?(w=y,D(y,function(M,T){!M.isRemoved()&&E(T,T)})):new Pr(w,y,x,x).add(E).update(E).remove(se(E,null)).execute();function x(M){return M.getId()}function E(M,T){var _=M!=null?y[M]:null,R=T!=null?w[T]:null,A=d(_,R,C,b);A&&f(_&&_.viewChildren||[],R&&R.viewChildren||[],A,S,b+1)}}function v(y){var w=mf();return y&&D(y,function(C,S){var b=w[S];D(C,function(x){x&&(b.push(x),xC(x).willDelete=!0)})}),w}function m(){D(h,function(y){D(y,function(w){w.parent&&w.parent.remove(w)})}),D(u,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(r,i,n,o){var a=n.get("animationDurationUpdate"),s=n.get("animationEasing"),l=(Z(a)?0:a)||0,c=(Z(s)?null:s)||"cubicOut",u=vH();D(i.willDeleteEls,function(d,h){D(d,function(p,g){if(!p.invisible){var f=p.parent,v,m=xC(f);if(o&&o.direction==="drillDown")v=f===o.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,w=0;m.willDelete||(y=m.nodeWidth/2,w=m.nodeHeight/2),v=h==="nodeGroup"?{x:y,y:w,style:{opacity:0}}:{shape:{x:y,y:w,width:0,height:0},style:{opacity:0}}}v&&u.add(p,v,l,0,c)}})}),D(this._storage,function(d,h){D(d,function(p,g){var f=i.lastsForAnimation[h][g],v={};f&&(p instanceof ee?f.oldX!=null&&(v.x=p.x,v.y=p.y,p.x=f.oldX,p.y=f.oldY):(f.oldShape&&(v.shape=F({},p.shape),p.setShape(f.oldShape)),f.fadein?(p.setStyle("opacity",0),v.style={opacity:1}):p.style.opacity!==1&&(v.style={opacity:1})),u.add(p,v,l,0,c))})},this),this._state="animating",u.finished($(function(){this._state="ready",i.renderFinally()},this)).start()},t.prototype._resetController=function(r){var i=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),i||(i=this._controller=new aa(r.getZr()),i.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),i.on("pan",$(this._onPan,this)),i.on("zoom",$(this._onZoom,this)));var o=new le(0,0,r.getWidth(),r.getHeight());i.setPointerChecker(function(a,s,l){return o.contain(s,l)})},t.prototype._clearController=function(){var r=this._controller;this._controllerHost=null,r&&(r.dispose(),r=null)},t.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>yH||Math.abs(r.dy)>yH)){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+r.dx,y:n.y+r.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(r){var i=r.originX,n=r.originY,o=r.scale;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var s=a.getLayout();if(!s)return;var l=new le(s.x,s.y,s.width,s.height),c=null,u=this._controllerHost;c=u.zoomLimit;var d=u.zoom=u.zoom||1;if(d*=o,c){var h=c.min||0,p=c.max||1/0;d=Math.max(Math.min(p,d),h)}var g=d/u.zoom;u.zoom=d;var f=this.seriesModel.layoutInfo;i-=f.x,n-=f.y;var v=Xt();Mr(v,v,[-i,-n]),dd(v,v,[g,g]),Mr(v,v,[i,n]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(r){var i=this;r.on("click",function(n){if(i._state==="ready"){var o=i.seriesModel.get("nodeClick",!0);if(o){var a=i.findTarget(n.offsetX,n.offsetY);if(a){var s=a.node;if(s.getLayout().isLeafRoot)i._rootToNode(a);else if(o==="zoomToNode")i._zoomToNode(a);else if(o==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&Oc(c,u)}}}}},this)},t.prototype._renderBreadcrumb=function(r,i,n){var o=this;n||(n=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2),n||(n={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new fH(this.group))).render(r,i,n.node,function(a){o._state!=="animating"&&(sh(r.getViewRoot(),a)?o._rootToNode({node:a}):o._zoomToNode({node:a}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=mf(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},t.prototype.findTarget=function(r,i){var n,o=this.seriesModel.getViewRoot();return o.eachNode({attr:"viewChildren",order:"preorder"},function(a){var s=this._storage.background[a.getRawIndex()];if(s){var l=s.transformCoordToLocal(r,i),c=s.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)n={node:a,offsetX:l[0],offsetY:l[1]};else return!1}},this),n},t.type="treemap",t}(Le);function mf(){return{nodeGroup:[],background:[],content:[]}}function Bue(e,t,r,i,n,o,a,s,l,c){if(!a)return;var u=a.getLayout(),d=e.getData(),h=a.getModel();if(d.setItemGraphicEl(a.dataIndex,null),!u||!u.isInView)return;var p=u.width,g=u.height,f=u.borderWidth,v=u.invisible,m=a.getRawIndex(),y=s&&s.getRawIndex(),w=a.viewChildren,C=u.upperHeight,S=w&&w.length,b=h.getModel("itemStyle"),x=h.getModel(["emphasis","itemStyle"]),E=h.getModel(["blur","itemStyle"]),M=h.getModel(["select","itemStyle"]),T=b.get("borderRadius")||0,_=we("nodeGroup",N_);if(!_)return;if(l.add(_),_.x=u.x||0,_.y=u.y||0,_.markRedraw(),xC(_).nodeWidth=p,xC(_).nodeHeight=g,u.isAboveViewRoot)return _;var R=we("background",mH,c,Nue);R&&B(_,R,S&&u.upperLabelHeight);var A=h.getModel("emphasis"),P=A.get("focus"),k=A.get("blurScope"),L=A.get("disabled"),V=P==="ancestor"?a.getAncestorsIndices():P==="descendant"?a.getDescendantIndices():P;if(S)Gs(_)&&ka(_,!1),R&&(ka(R,!L),d.setItemGraphicEl(a.dataIndex,R),n0(R,V,k));else{var z=we("content",mH,c,zue);z&&K(_,z),R.disableMorphing=!0,R&&Gs(R)&&ka(R,!1),ka(_,!L),d.setItemGraphicEl(a.dataIndex,_),n0(_,V,k)}return _;function B(Ne,xe,ze){var Ae=ae(xe);if(Ae.dataIndex=a.dataIndex,Ae.seriesIndex=e.seriesIndex,xe.setShape({x:0,y:0,width:p,height:g,r:T}),v)X(xe);else{xe.invisible=!1;var ve=a.getVisual("style"),Ie=ve.stroke,At=bH(b);At.fill=Ie;var Ze=tu(x);Ze.fill=x.get("borderColor");var Wt=tu(E);Wt.fill=E.get("borderColor");var Ot=tu(M);if(Ot.fill=M.get("borderColor"),ze){var Fr=p-2*f;oe(xe,Ie,ve.opacity,{x:f,y:0,width:Fr,height:C})}else xe.removeTextContent();xe.setStyle(At),xe.ensureState("emphasis").style=Ze,xe.ensureState("blur").style=Wt,xe.ensureState("select").style=Ot,to(xe)}Ne.add(xe)}function K(Ne,xe){var ze=ae(xe);ze.dataIndex=a.dataIndex,ze.seriesIndex=e.seriesIndex;var Ae=Math.max(p-2*f,0),ve=Math.max(g-2*f,0);if(xe.culling=!0,xe.setShape({x:f,y:f,width:Ae,height:ve,r:T}),v)X(xe);else{xe.invisible=!1;var Ie=a.getVisual("style"),At=Ie.fill,Ze=bH(b);Ze.fill=At,Ze.decal=Ie.decal;var Wt=tu(x),Ot=tu(E),Fr=tu(M);oe(xe,At,Ie.opacity,null),xe.setStyle(Ze),xe.ensureState("emphasis").style=Wt,xe.ensureState("blur").style=Ot,xe.ensureState("select").style=Fr,to(xe)}Ne.add(xe)}function X(Ne){!Ne.invisible&&o.push(Ne)}function oe(Ne,xe,ze,Ae){var ve=h.getModel(Ae?CH:wH),Ie=Mt(h.get("name"),null),At=ve.getShallow("show");ft(Ne,at(h,Ae?CH:wH),{defaultText:At?Ie:null,inheritColor:xe,defaultOpacity:ze,labelFetcher:e,labelDataIndex:a.dataIndex});var Ze=Ne.getTextContent();if(Ze){var Wt=Ze.style,Ot=od(Wt.padding||0);Ae&&(Ne.setTextConfig({layoutRect:Ae}),Ze.disableLabelLayout=!0),Ze.beforeUpdate=function(){var va=Math.max((Ae?Ae.width:Ne.shape.width)-Ot[1]-Ot[3],0),vi=Math.max((Ae?Ae.height:Ne.shape.height)-Ot[0]-Ot[2],0);(Wt.width!==va||Wt.height!==vi)&&Ze.setStyle({width:va,height:vi})},Wt.truncateMinChar=2,Wt.lineOverflow="truncate",ye(Wt,Ae,u);var Fr=Ze.getState("emphasis");ye(Fr?Fr.style:null,Ae,u)}}function ye(Ne,xe,ze){var Ae=Ne?Ne.text:null;if(!xe&&ze.isLeafRoot&&Ae!=null){var ve=e.get("drillDownIcon",!0);Ne.text=ve?ve+" "+Ae:Ae}}function we(Ne,xe,ze,Ae){var ve=y!=null&&r[Ne][y],Ie=n[Ne];return ve?(r[Ne][y]=null,Oe(Ie,ve)):v||(ve=new xe,ve instanceof Yt&&(ve.z2=Gue(ze,Ae)),$e(Ie,ve)),t[Ne][m]=ve}function Oe(Ne,xe){var ze=Ne[m]={};xe instanceof N_?(ze.oldX=xe.x,ze.oldY=xe.y):ze.oldShape=F({},xe.shape)}function $e(Ne,xe){var ze=Ne[m]={},Ae=a.parentNode,ve=xe instanceof ee;if(Ae&&(!i||i.direction==="drillDown")){var Ie=0,At=0,Ze=n.background[Ae.getRawIndex()];!i&&Ze&&Ze.oldShape&&(Ie=Ze.oldShape.width,At=Ze.oldShape.height),ve?(ze.oldX=0,ze.oldY=At):ze.oldShape={x:Ie,y:At,width:0,height:0}}ze.fadein=!ve}}function Gue(e,t){return e*Oue+t}var SH=Vue;var Cf=D,Hue=J,MC=-1,G_=function(){function e(t){var r=t.mappingMethod,i=t.type,n=this.option=re(t);this.type=i,this.mappingMethod=r,this._normalizeData=jue[r];var o=e.visualHandlers[i];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(z_(n),Uue(n)):r==="category"?n.categories?Wue(n):z_(n,!0):(St(r!=="linear"||n.dataExtent),z_(n))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return $(this._normalizeData,this)},e.listVisualTypes=function(){return me(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,i){J(t)?D(t,r,i):r.call(i,t)},e.mapVisual=function(t,r,i){var n,o=O(t)?[]:J(t)?{}:(n=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(i,a,s);n?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},i;return t&&Cf(e.visualHandlers,function(n,o){t.hasOwnProperty(o)&&(r[o]=t[o],i=!0)}),i?r:null},e.prepareVisualTypes=function(t){if(O(t))t=t.slice();else if(Hue(t)){var r=[];Cf(t,function(i,n){r.push(n)}),t=r}else return[];return t.sort(function(i,n){return n==="color"&&i!=="color"&&i.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,i){for(var n,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||H(l)&&l===t+"")return a;i&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var c=r[a],u=c.interval,d=c.close;if(u){if(u[0]===-1/0){if(EC(d[1],t,u[1]))return a}else if(u[1]===1/0){if(EC(d[0],u[0],t))return a}else if(EC(d[0],u[0],t)&&EC(d[1],t,u[1]))return a;i&&h(u[0],a),i&&h(u[1],a)}}if(i)return t===1/0?r.length-1:t===-1/0?0:n;function h(p,g){var f=Math.abs(p-t);f<o&&(o=f,n=g)}},e.visualHandlers={color:{applyVisual:yf("color"),getColorMapper:function(){var t=this.option;return $(t.mappingMethod==="category"?function(r,i){return!i&&(r=this._normalizeData(r)),wf.call(this,r)}:function(r,i,n){var o=!!n;return!i&&(r=this._normalizeData(r)),n=Sy(r,t.parsedVisual,n),o?n:yn(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return yn(Sy(t,this.option.parsedVisual),"rgba")},category:wf,piecewise:function(t,r){var i=B_.call(this,r);return i==null&&(i=yn(Sy(t,this.option.parsedVisual),"rgba")),i},fixed:ru}},colorHue:DC(function(t,r){return oc(t,r)}),colorSaturation:DC(function(t,r){return oc(t,null,r)}),colorLightness:DC(function(t,r){return oc(t,null,null,r)}),colorAlpha:DC(function(t,r){return ac(t,r)}),decal:{applyVisual:yf("decal"),_normalizedToVisual:{linear:null,category:wf,piecewise:null,fixed:null}},opacity:{applyVisual:yf("opacity"),_normalizedToVisual:V_([0,1])},liftZ:{applyVisual:yf("liftZ"),_normalizedToVisual:{linear:ru,category:ru,piecewise:ru,fixed:ru}},symbol:{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("symbol",n)},_normalizedToVisual:{linear:xH,category:wf,piecewise:function(t,r){var i=B_.call(this,r);return i==null&&(i=xH.call(this,t)),i},fixed:ru}},symbolSize:{applyVisual:yf("symbolSize"),_normalizedToVisual:V_([0,1])}},e}();function Uue(e){var t=e.pieceList;e.hasSpecialVisual=!1,D(t,function(r,i){r.originIndex=i,r.visual!=null&&(e.hasSpecialVisual=!0)})}function Wue(e){var t=e.categories,r=e.categoryMap={},i=e.visual;if(Cf(t,function(a,s){r[a]=s}),!O(i)){var n=[];J(i)?Cf(i,function(a,s){var l=r[s];n[l??MC]=a}):n[MC]=i,i=DH(e,n)}for(var o=t.length-1;o>=0;o--)i[o]==null&&(delete r[t[o]],t.pop())}function z_(e,t){var r=e.visual,i=[];J(r)?Cf(r,function(o){i.push(o)}):r!=null&&i.push(r);var n={color:1,symbol:1};!t&&i.length===1&&!n.hasOwnProperty(e.type)&&(i[1]=i[0]),DH(e,i)}function DC(e){return{applyVisual:function(t,r,i){var n=this.mapValueToVisual(t);i("color",e(r("color"),n))},_normalizedToVisual:V_([0,1])}}function xH(e){var t=this.option.visual;return t[Math.round(Ye(e,[0,1],[0,t.length-1],!0))]||{}}function yf(e){return function(t,r,i){i(e,this.mapValueToVisual(t))}}function wf(e){var t=this.option.visual;return t[this.option.loop&&e!==MC?e%t.length:e]}function ru(){return this.option.visual[0]}function V_(e){return{linear:function(t){return Ye(t,e,this.option.visual,!0)},category:wf,piecewise:function(t,r){var i=B_.call(this,r);return i==null&&(i=Ye(t,e,this.option.visual,!0)),i},fixed:ru}}function B_(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var i=G_.findPieceIndex(e,r),n=r[i];if(n&&n.visual)return n.visual[this.type]}}function DH(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=N(t,function(r){var i=Cr(r);return i||[0,0,0,1]})),t}var jue={linear:function(e){return Ye(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=G_.findPieceIndex(e,t,!0);if(r!=null)return Ye(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??MC},fixed:pt};function EC(e,t,r){return e?t<=r:t<r}var Ht=G_;var $ue="itemStyle",MH=he(),TH={seriesType:"treemap",reset:function(e){var t=e.getData().tree,r=t.root;r.isRemoved()||_H(r,{},e.getViewRoot().getAncestors(),e)}};function _H(e,t,r,i){var n=e.getModel(),o=e.getLayout(),a=e.hostTree.data;if(!(!o||o.invisible||!o.isInView)){var s=n.getModel($ue),l=Yue(s,t,i),c=a.ensureUniqueItemVisual(e.dataIndex,"style"),u=s.get("borderColor"),d=s.get("borderColorSaturation"),h;d!=null&&(h=EH(l),u=que(d,h)),c.stroke=u;var p=e.viewChildren;if(!p||!p.length)h=EH(l),c.fill=h;else{var g=Kue(e,n,o,s,l,p);D(p,function(f,v){if(f.depth>=r.length||f===r[f.depth]){var m=Zue(n,l,f,v,g,i);_H(f,m,r,i)}})}}}function Yue(e,t,r){var i=F({},t),n=r.designatedVisualItemStyle;return D(["color","colorAlpha","colorSaturation"],function(o){n[o]=t[o];var a=e.get(o);n[o]=null,a!=null&&(i[o]=a)}),i}function EH(e){var t=H_(e,"color");if(t){var r=H_(e,"colorAlpha"),i=H_(e,"colorSaturation");return i&&(t=oc(t,null,null,i)),r&&(t=ac(t,r)),t}}function que(e,t){return t!=null?oc(t,null,null,e):null}function H_(e,t){var r=e[t];if(r!=null&&r!=="none")return r}function Kue(e,t,r,i,n,o){if(!(!o||!o.length)){var a=U_(t,"color")||n.color!=null&&n.color!=="none"&&(U_(t,"colorAlpha")||U_(t,"colorSaturation"));if(a){var s=t.get("visualMin"),l=t.get("visualMax"),c=r.dataExtent.slice();s!=null&&s<c[0]&&(c[0]=s),l!=null&&l>c[1]&&(c[1]=l);var u=t.get("colorMappingBy"),d={type:a.name,dataExtent:c,visual:a.range};d.type==="color"&&(u==="index"||u==="id")?(d.mappingMethod="category",d.loop=!0):d.mappingMethod="linear";var h=new Ht(d);return MH(h).drColorMappingBy=u,h}}}function U_(e,t){var r=e.get(t);return O(r)&&r.length?{name:t,range:r}:null}function Zue(e,t,r,i,n,o){var a=F({},t);if(n){var s=n.type,l=s==="color"&&MH(n).drColorMappingBy,c=l==="index"?i:l==="id"?o.mapIdToIndex(r.getId()):r.getValue(e.get("visualDimension"));a[s]=n.mapValueToVisual(c)}return a}var bf=Math.max,TC=Math.min,RH=bt,W_=D,IH=["itemStyle","borderWidth"],Xue=["itemStyle","gapWidth"],Que=["upperLabel","show"],Jue=["upperLabel","height"],PH={seriesType:"treemap",reset:function(e,t,r,i){var n=r.getWidth(),o=r.getHeight(),a=e.option,s=Je(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),l=a.size||[],c=j(RH(s.width,l[0]),n),u=j(RH(s.height,l[1]),o),d=i&&i.type,h=["treemapZoomToNode","treemapRootToNode"],p=Ka(i,h,e),g=d==="treemapRender"||d==="treemapMove"?i.rootRect:null,f=e.getViewRoot(),v=I_(f);if(d!=="treemapMove"){var m=d==="treemapZoomToNode"?ode(e,p,f,c,u):g?[g.width,g.height]:[c,u],y=a.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var w={squareRatio:a.squareRatio,sort:y,leafDepth:a.leafDepth};f.hostTree.clearLayouts();var C={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(C),kH(f,w,!1,0),C=f.getLayout(),W_(v,function(b,x){var E=(v[x+1]||f).getValue();b.setLayout(F({dataExtent:[E,E],borderWidth:0,upperHeight:0},C))})}var S=e.getData().tree.root;S.setLayout(ade(s,g,p),!0),e.setLayoutInfo(s),LH(S,new le(-s.x,-s.y,n,o),v,f,0)}};function kH(e,t,r,i){var n,o;if(!e.isRemoved()){var a=e.getLayout();n=a.width,o=a.height;var s=e.getModel(),l=s.get(IH),c=s.get(Xue)/2,u=FH(s),d=Math.max(l,u),h=l-c,p=d-c;e.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0),n=bf(n-2*h,0),o=bf(o-h-p,0);var g=n*o,f=ede(e,s,g,t,r,i);if(f.length){var v={x:h,y:p,width:n,height:o},m=TC(n,o),y=1/0,w=[];w.area=0;for(var C=0,S=f.length;C<S;){var b=f[C];w.push(b),w.area+=b.getLayout().area;var x=nde(w,m,t.squareRatio);x<=y?(C++,y=x):(w.area-=w.pop().getLayout().area,AH(w,m,v,c,!1),m=TC(v.width,v.height),w.length=w.area=0,y=1/0)}if(w.length&&AH(w,m,v,c,!0),!r){var E=s.get("childrenVisibleMin");E!=null&&g<E&&(r=!0)}for(var C=0,S=f.length;C<S;C++)kH(f[C],t,r,i+1)}}}function ede(e,t,r,i,n,o){var a=e.children||[],s=i.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=i.leafDepth!=null&&i.leafDepth<=o;if(n&&!l)return e.viewChildren=[];a=Pe(a,function(p){return!p.isRemoved()}),rde(a,s);var c=ide(t,a,s);if(c.sum===0)return e.viewChildren=[];if(c.sum=tde(t,r,c.sum,s,a),c.sum===0)return e.viewChildren=[];for(var u=0,d=a.length;u<d;u++){var h=a[u].getValue()/c.sum*r;a[u].setLayout({area:h})}return l&&(a.length&&e.setLayout({isLeafRoot:!0},!0),a.length=0),e.viewChildren=a,e.setLayout({dataExtent:c.dataExtent},!0),a}function tde(e,t,r,i,n){if(!i)return r;for(var o=e.get("visibleMin"),a=n.length,s=a,l=a-1;l>=0;l--){var c=n[i==="asc"?a-l-1:l].getValue();c/r*t<o&&(s=l,r-=c)}return i==="asc"?n.splice(0,a-s):n.splice(s,a-s),r}function rde(e,t){return t&&e.sort(function(r,i){var n=t==="asc"?r.getValue()-i.getValue():i.getValue()-r.getValue();return n===0?t==="asc"?r.dataIndex-i.dataIndex:i.dataIndex-r.dataIndex:n}),e}function ide(e,t,r){for(var i=0,n=0,o=t.length;n<o;n++)i+=t[n].getValue();var a=e.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:a==="value"&&r?(s=[t[t.length-1].getValue(),t[0].getValue()],r==="asc"&&s.reverse()):(s=[1/0,-1/0],W_(t,function(l){var c=l.getValue(a);c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c)})),{sum:i,dataExtent:s}}function nde(e,t,r){for(var i=0,n=1/0,o=0,a=void 0,s=e.length;o<s;o++)a=e[o].getLayout().area,a&&(a<n&&(n=a),a>i&&(i=a));var l=e.area*e.area,c=t*t*r;return l?bf(c*i/l,l/(c*n)):1/0}function AH(e,t,r,i,n){var o=t===r.width?0:1,a=1-o,s=["x","y"],l=["width","height"],c=r[s[o]],u=t?e.area/t:0;(n||u>r[l[a]])&&(u=r[l[a]]);for(var d=0,h=e.length;d<h;d++){var p=e[d],g={},f=u?p.getLayout().area/u:0,v=g[l[a]]=bf(u-2*i,0),m=r[s[o]]+r[l[o]]-c,y=d===h-1||m<f?m:f,w=g[l[o]]=bf(y-2*i,0);g[s[a]]=r[s[a]]+TC(i,v/2),g[s[o]]=c+TC(i,w/2),c+=y,p.setLayout(g,!0)}r[s[a]]+=u,r[l[a]]-=u}function ode(e,t,r,i,n){var o=(t||{}).node,a=[i,n];if(!o||o===r)return a;for(var s,l=i*n,c=l*e.option.zoomToNodeRatio;s=o.parentNode;){for(var u=0,d=s.children,h=0,p=d.length;h<p;h++)u+=d[h].getValue();var g=o.getValue();if(g===0)return a;c*=u/g;var f=s.getModel(),v=f.get(IH),m=Math.max(v,FH(f));c+=4*v*v+(3*v+m)*Math.pow(c,.5),c>AD&&(c=AD),o=s}c<l&&(c=l);var y=Math.pow(c/l,.5);return[i*y,n*y]}function ade(e,t,r){if(t)return{x:t.x,y:t.y};var i={x:0,y:0};if(!r)return i;var n=r.node,o=n.getLayout();if(!o)return i;for(var a=[o.width/2,o.height/2],s=n;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}function LH(e,t,r,i,n){var o=e.getLayout(),a=r[n],s=a&&a===e;if(!(a&&!s||n===r.length&&e!==i)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(o),isAboveViewRoot:s},!0);var l=new le(t.x-o.x,t.y-o.y,t.width,t.height);W_(e.viewChildren||[],function(c){LH(c,l,r,i,n+1)})}}function FH(e){return e.get(Que)?e.get(Jue):0}function j_(e){e.registerSeriesModel(pH),e.registerChartView(SH),e.registerVisual(TH),e.registerLayout(PH),dH(e)}function $_(e){var t=e.findComponents({mainType:"legend"});!t||!t.length||e.eachSeriesByType("graph",function(r){var i=r.getCategoriesData(),n=r.getGraph(),o=n.data,a=i.mapArray(i.getName);o.filterSelf(function(s){var l=o.getItemModel(s),c=l.getShallow("category");if(c!=null){be(c)&&(c=a[c]);for(var u=0;u<t.length;u++)if(!t[u].isSelected(c))return!1}return!0})})}function Y_(e){var t={};e.eachSeriesByType("graph",function(r){var i=r.getCategoriesData(),n=r.getData(),o={};i.each(function(a){var s=i.getName(a);o["ec-"+s]=a;var l=i.getItemModel(a),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=r.getColorFromPalette(s,t)),i.setItemVisual(a,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],d=0;d<u.length;d++){var h=l.getShallow(u[d],!0);h!=null&&i.setItemVisual(a,u[d],h)}}),i.count()&&n.each(function(a){var s=n.getItemModel(a),l=s.getShallow("category");if(l!=null){H(l)&&(l=o["ec-"+l]);var c=i.getItemVisual(l,"style"),u=n.ensureUniqueItemVisual(a,"style");F(u,c);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++)n.setItemVisual(a,d[h],i.getItemVisual(l,d[h]))}})})}function _C(e){return e instanceof Array||(e=[e,e]),e}function q_(e){e.eachSeriesByType("graph",function(t){var r=t.getGraph(),i=t.getEdgeData(),n=_C(t.get("edgeSymbol")),o=_C(t.get("edgeSymbolSize"));i.setVisual("fromSymbol",n&&n[0]),i.setVisual("toSymbol",n&&n[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("style",t.getModel("lineStyle").getLineStyle()),i.each(function(a){var s=i.getItemModel(a),l=r.getEdgeByIndex(a),c=_C(s.getShallow("symbol",!0)),u=_C(s.getShallow("symbolSize",!0)),d=s.getModel("lineStyle").getLineStyle(),h=i.ensureUniqueItemVisual(a,"style");switch(F(h,d),h.stroke){case"source":{var p=l.node1.getVisual("style");h.stroke=p&&p.fill;break}case"target":{var p=l.node2.getVisual("style");h.stroke=p&&p.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var K_="-->",RC=function(e){return e.get("autoCurveness")||null},OH=function(e,t){var r=RC(e),i=20,n=[];if(be(r))i=r;else if(O(r)){e.__curvenessList=r;return}t>i&&(i=t);var o=i%2?i+2:i+3;n=[];for(var a=0;a<o;a++)n.push((a%2?a+1:a)/10*(a%2?-1:1));e.__curvenessList=n},Sf=function(e,t,r){var i=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[r.uid,i,n].join(K_)},NH=function(e){var t=e.split(K_);return[t[0],t[2],t[1]].join(K_)},sde=function(e,t){var r=Sf(e.node1,e.node2,t);return t.__edgeMap[r]},lde=function(e,t){var r=Z_(Sf(e.node1,e.node2,t),t),i=Z_(Sf(e.node2,e.node1,t),t);return r+i},Z_=function(e,t){var r=t.__edgeMap;return r[e]?r[e].length:0};function zH(e){RC(e)&&(e.__curvenessList=[],e.__edgeMap={},OH(e))}function VH(e,t,r,i){if(RC(r)){var n=Sf(e,t,r),o=r.__edgeMap,a=o[NH(n)];o[n]&&!a?o[n].isForward=!0:a&&o[n]&&(a.isForward=!0,o[n].isForward=!1),o[n]=o[n]||[],o[n].push(i)}}function ch(e,t,r,i){var n=RC(t),o=O(n);if(!n)return null;var a=sde(e,t);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===r){s=l;break}var c=lde(e,t);OH(t,c),e.lineStyle=e.lineStyle||{};var u=Sf(e.node1,e.node2,t),d=t.__curvenessList,h=o||c%2?0:1;if(a.isForward)return d[h+s];var p=NH(u),g=Z_(p,t),f=d[s+g+h];return i?o?n&&n[0]===0?(g+h)%2?f:-f:((g%2?0:1)+h)%2?f:-f:(g+h)%2?f:-f:d[s+g+h]}function AC(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view")){var r=e.getGraph();r.eachNode(function(i){var n=i.getModel();i.setLayout([+n.get("x"),+n.get("y")])}),xf(r,e)}}function xf(e,t){e.eachEdge(function(r,i){var n=ur(r.getModel().get(["lineStyle","curveness"]),-ch(r,t,i,!0),0),o=yi(r.node1.getLayout()),a=yi(r.node2.getLayout()),s=[o,a];+n&&s.push([(o[0]+a[0])/2-(o[1]-a[1])*n,(o[1]+a[1])/2-(a[0]-o[0])*n]),r.setLayout(s)})}function X_(e,t){e.eachSeriesByType("graph",function(r){var i=r.get("layout"),n=r.coordinateSystem;if(n&&n.type!=="view"){var o=r.getData(),a=[];D(n.dimensions,function(h){a=a.concat(o.mapDimensionsAll(h))});for(var s=0;s<o.count();s++){for(var l=[],c=!1,u=0;u<a.length;u++){var d=o.get(a[u],s);isNaN(d)||(c=!0),l.push(d)}c?o.setItemLayout(s,n.dataToPoint(l)):o.setItemLayout(s,[NaN,NaN])}xf(o.graph,r)}else(!i||i==="none")&&AC(r)})}function iu(e){var t=e.coordinateSystem;if(t.type!=="view")return 1;var r=e.option.nodeScaleRatio,i=t.scaleX,n=t.getZoom(),o=(n-1)*r+1;return o/i}function nu(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var BH=Math.PI,Q_=[];function uh(e,t,r,i){var n=e.coordinateSystem;if(!(n&&n.type!=="view")){var o=n.getBoundingRect(),a=e.getData(),s=a.graph,l=o.width/2+o.x,c=o.height/2+o.y,u=Math.min(o.width,o.height)/2,d=a.count();if(a.setLayout({cx:l,cy:c}),!!d){if(r){var h=n.pointToData(i),p=h[0],g=h[1],f=[p-l,g-c];hn(f,f),sd(f,f,u),r.setLayout([l+f[0],c+f[1]],!0);var v=e.get(["circular","rotateLabel"]);J_(r,v,l,c)}cde[t](e,s,a,u,l,c,d),s.eachEdge(function(m,y){var w=ur(m.getModel().get(["lineStyle","curveness"]),ch(m,e,y),0),C=yi(m.node1.getLayout()),S=yi(m.node2.getLayout()),b,x=(C[0]+S[0])/2,E=(C[1]+S[1])/2;+w&&(w*=3,b=[l*w+x*(1-w),c*w+E*(1-w)]),m.setLayout([C,S,b])})}}}var cde={value:function(e,t,r,i,n,o,a){var s=0,l=r.getSum("value"),c=Math.PI*2/(l||a);t.eachNode(function(u){var d=u.getValue("value"),h=c*(l?d:1)/2;s+=h,u.setLayout([i*Math.cos(s)+n,i*Math.sin(s)+o]),s+=h})},symbolSize:function(e,t,r,i,n,o,a){var s=0;Q_.length=a;var l=iu(e);t.eachNode(function(d){var h=nu(d);isNaN(h)&&(h=2),h<0&&(h=0),h*=l;var p=Math.asin(h/2/i);isNaN(p)&&(p=BH/2),Q_[d.dataIndex]=p,s+=p*2});var c=(2*BH-s)/a/2,u=0;t.eachNode(function(d){var h=c+Q_[d.dataIndex];u+=h,(!d.getLayout()||!d.getLayout().fixed)&&d.setLayout([i*Math.cos(u)+n,i*Math.sin(u)+o]),u+=h})}};function J_(e,t,r,i){var n=e.getGraphicEl();if(n){var o=e.getModel(),a=o.get(["label","rotate"])||0,s=n.getSymbolPath();if(t){var l=e.getLayout(),c=Math.atan2(l[1]-i,l[0]-r);c<0&&(c=Math.PI*2+c);var u=l[0]<r;u&&(c=c-Math.PI);var d=u?"left":"right";s.setTextConfig({rotation:-c,position:d,origin:"center"});var h=s.ensureState("emphasis");F(h.textConfig||(h.textConfig={}),{position:d})}else s.setTextConfig({rotation:a*=Math.PI/180})}}function eR(e){e.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&uh(t,"symbolSize")})}var dh=Ap;function GH(e,t,r){for(var i=e,n=t,o=r.rect,a=o.width,s=o.height,l=[o.x+a/2,o.y+s/2],c=r.gravity==null?.1:r.gravity,u=0;u<i.length;u++){var d=i[u];d.p||(d.p=No(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=yi(d.p),d.edges=null}var h=r.friction==null?.6:r.friction,p=h,g,f;return{warmUp:function(){p=h*.8},setFixed:function(v){i[v].fixed=!0},setUnfixed:function(v){i[v].fixed=!1},beforeStep:function(v){g=v},afterStep:function(v){f=v},step:function(v){g&&g(i,n);for(var m=[],y=i.length,w=0;w<n.length;w++){var C=n[w];if(!C.ignoreForceLayout){var S=C.n1,b=C.n2;Xn(m,b.p,S.p);var x=ny(m)-C.d,E=b.w/(S.w+b.w);isNaN(E)&&(E=0),hn(m,m),!S.fixed&&dh(S.p,S.p,m,E*x*p),!b.fixed&&dh(b.p,b.p,m,-(1-E)*x*p)}}for(var w=0;w<y;w++){var M=i[w];M.fixed||(Xn(m,l,M.p),dh(M.p,M.p,m,c*p))}for(var w=0;w<y;w++)for(var S=i[w],T=w+1;T<y;T++){var b=i[T];Xn(m,b.p,S.p);var x=ny(m);x===0&&(LF(m,Math.random()-.5,Math.random()-.5),x=1);var _=(S.rep+b.rep)/x/x;!S.fixed&&dh(S.pp,S.pp,m,_),!b.fixed&&dh(b.pp,b.pp,m,-_)}for(var R=[],w=0;w<y;w++){var M=i[w];M.fixed||(Xn(R,M.p,M.pp),dh(M.p,M.p,R,p),hr(M.pp,M.p))}p=p*.992;var A=p<.01;f&&f(i,n,A),v&&v(A)}}}function tR(e){e.eachSeriesByType("graph",function(t){var r=t.coordinateSystem;if(!(r&&r.type!=="view"))if(t.get("layout")==="force"){var i=t.preservedPoints||{},n=t.getGraph(),o=n.data,a=n.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?o.each(function(w){var C=o.getId(w);o.setItemLayout(w,i[C]||[NaN,NaN])}):!l||l==="none"?AC(t):l==="circular"&&uh(t,"value");var c=o.getDataExtent("value"),u=a.getDataExtent("value"),d=s.get("repulsion"),h=s.get("edgeLength"),p=O(d)?d:[d,d],g=O(h)?h:[h,h];g=[g[1],g[0]];var f=o.mapArray("value",function(w,C){var S=o.getItemLayout(C),b=Ye(w,c,p);return isNaN(b)&&(b=(p[0]+p[1])/2),{w:b,rep:b,fixed:o.getItemModel(C).get("fixed"),p:!S||isNaN(S[0])||isNaN(S[1])?null:S}}),v=a.mapArray("value",function(w,C){var S=n.getEdgeByIndex(C),b=Ye(w,u,g);isNaN(b)&&(b=(g[0]+g[1])/2);var x=S.getModel(),E=ur(S.getModel().get(["lineStyle","curveness"]),-ch(S,t,C,!0),0);return{n1:f[S.node1.dataIndex],n2:f[S.node2.dataIndex],d:b,curveness:E,ignoreForceLayout:x.get("ignoreForceLayout")}}),m=r.getBoundingRect(),y=GH(f,v,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(w,C){for(var S=0,b=w.length;S<b;S++)w[S].fixed&&hr(w[S].p,n.getNodeByIndex(S).getLayout())}),y.afterStep(function(w,C,S){for(var b=0,x=w.length;b<x;b++)w[b].fixed||n.getNodeByIndex(b).setLayout(w[b].p),i[o.getId(b)]=w[b].p;for(var b=0,x=C.length;b<x;b++){var E=C[b],M=n.getEdgeByIndex(b),T=E.n1.p,_=E.n2.p,R=M.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],hr(R[0],T),hr(R[1],_),+E.curveness&&(R[2]=[(T[0]+_[0])/2-(T[1]-_[1])*E.curveness,(T[1]+_[1])/2-(_[0]-T[0])*E.curveness]),M.setLayout(R)}}),t.forceLayout=y,t.preservedPoints=i,y.step()}else t.forceLayout=null})}function ude(e,t,r){var i=F(e.getBoxLayoutParams(),{aspect:r});return Je(i,{width:t.getWidth(),height:t.getHeight()})}function rR(e,t){var r=[];return e.eachSeriesByType("graph",function(i){var n=i.get("coordinateSystem");if(!n||n==="view"){var o=i.getData(),a=o.mapArray(function(v){var m=o.getItemModel(v);return[+m.get("x"),+m.get("y")]}),s=[],l=[];yc(a,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),u=ude(i,t,c);isNaN(c)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var d=l[0]-s[0],h=l[1]-s[1],p=u.width,g=u.height,f=i.coordinateSystem=new qa;f.zoomLimit=i.get("scaleLimit"),f.setBoundingRect(s[0],s[1],d,h),f.setViewRect(u.x,u.y,p,g),f.setCenter(i.get("center"),t),f.setZoom(i.get("zoom")),r.push(f)}}),r}var HH=_t.prototype,iR=_c.prototype,UH=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),Xqe=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(UH);function nR(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var dde=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-line",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new UH},t.prototype.buildPath=function(r,i){nR(i)?HH.buildPath.call(this,r,i):iR.buildPath.call(this,r,i)},t.prototype.pointAt=function(r){return nR(this.shape)?HH.pointAt.call(this,r):iR.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var i=this.shape,n=nR(i)?[i.x2-i.x1,i.y2-i.y1]:iR.tangentAt.call(this,r);return hn(n,n)},t}(ce),WH=dde;var oR=["fromSymbol","toSymbol"];function jH(e){return"_"+e+"Type"}function $H(e,t,r){var i=t.getItemVisual(r,e);if(!i||i==="none")return i;var n=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=ho(n),c=Qi(a||0,l);return i+l+c+(o||"")+(s||"")}function YH(e,t,r){var i=t.getItemVisual(r,e);if(!(!i||i==="none")){var n=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=ho(n),c=Qi(a||0,l),u=et(i,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,u.name=e,u}}function hde(e){var t=new WH({name:"line",subPixelOptimize:!0});return aR(t.shape,e),t}function aR(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var pde=function(e){I(t,e);function t(r,i,n){var o=e.call(this)||this;return o._createLine(r,i,n),o}return t.prototype._createLine=function(r,i,n){var o=r.hostModel,a=r.getItemLayout(i),s=hde(a);s.shape.percent=0,je(s,{shape:{percent:1}},o,i),this.add(s),D(oR,function(l){var c=YH(l,r,i);this.add(c),this[jH(l)]=$H(l,r,i)},this),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(i),l={shape:{}};aR(l.shape,s),Me(a,l,o,i),D(oR,function(c){var u=$H(c,r,i),d=jH(c);if(this[d]!==u){this.remove(this.childOfName(c));var h=YH(c,r,i);this.add(h)}this[d]=u},this),this._updateCommonStl(r,i,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,i,n){var o=r.hostModel,a=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,c=n&&n.selectLineStyle,u=n&&n.labelStatesModels,d=n&&n.emphasisDisabled,h=n&&n.focus,p=n&&n.blurScope;if(!n||r.hasItemOption){var g=r.getItemModel(i),f=g.getModel("emphasis");s=f.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),c=g.getModel(["select","lineStyle"]).getLineStyle(),d=f.get("disabled"),h=f.get("focus"),p=f.get("blurScope"),u=at(g)}var v=r.getItemVisual(i,"style"),m=v.stroke;a.useStyle(v),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=c,D(oR,function(b){var x=this.childOfName(b);if(x){x.setColor(m),x.style.opacity=v.opacity;for(var E=0;E<cr.length;E++){var M=cr[E],T=a.getState(M);if(T){var _=T.style||{},R=x.ensureState(M),A=R.style||(R.style={});_.stroke!=null&&(A[x.__isEmptyBrush?"stroke":"fill"]=_.stroke),_.opacity!=null&&(A.opacity=_.opacity)}}x.markRedraw()}},this);var y=o.getRawValue(i);ft(this,u,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(b,x){return o.getFormattedLabel(b,x,r.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?r.getName(i):isFinite(y)?gt(y):y)+""});var w=this.getTextContent();if(w){var C=u.normal;w.__align=w.style.align,w.__verticalAlign=w.style.verticalAlign,w.__position=C.get("position")||"middle";var S=C.get("distance");O(S)||(S=[S,S]),w.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),We(this,h,p,d)},t.prototype.highlight=function(){Br(this)},t.prototype.downplay=function(){Gr(this)},t.prototype.updateLayout=function(r,i){this.setLinePoints(r.getItemLayout(i))},t.prototype.setLinePoints=function(r){var i=this.childOfName("line");aR(i.shape,r),i.dirty()},t.prototype.beforeUpdate=function(){var r=this,i=r.childOfName("fromSymbol"),n=r.childOfName("toSymbol"),o=r.getTextContent();if(!i&&!n&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),h=Xn([],d,u);hn(h,h);function p(T,_){var R=T.__specifiedRotation;if(R==null){var A=l.tangentAt(_);T.attr("rotation",(_===1?-1:1)*Math.PI/2-Math.atan2(A[1],A[0]))}else T.attr("rotation",R)}if(i&&(i.setPosition(u),p(i,0),i.scaleX=i.scaleY=a*c,i.markRedraw()),n&&(n.setPosition(d),p(n,1),n.scaleX=n.scaleY=a*c,n.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var g=void 0,f=void 0,v=o.__labelDistance,m=v[0]*a,y=v[1]*a,w=c/2,C=l.tangentAt(w),S=[C[1],-C[0]],b=l.pointAt(w);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var x=C[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var E=-Math.atan2(C[1],C[0]);d[0]<u[0]&&(E=Math.PI+E),o.rotation=E}var M=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":M=-y,f="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":M=y,f="top";break;default:M=0,f="middle"}switch(o.__position){case"end":o.x=h[0]*m+d[0],o.y=h[1]*y+d[1],g=h[0]>.8?"left":h[0]<-.8?"right":"center",f=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*m+u[0],o.y=-h[1]*y+u[1],g=h[0]>.8?"right":h[0]<-.8?"left":"center",f=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*x+u[0],o.y=u[1]+M,g=C[0]<0?"right":"left",o.originX=-m*x,o.originY=-M;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=b[0],o.y=b[1]+M,g="center",o.originY=-M;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*x+d[0],o.y=d[1]+M,g=C[0]>=0?"right":"left",o.originX=m*x,o.originY=-M;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||f,align:o.__align||g})}},t}(ee),hh=pde;var gde=function(){function e(t){this.group=new ee,this._LineCtor=t||hh}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var i=this,n=i.group,o=i._lineData;i._lineData=t,o||n.removeAll();var a=qH(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){n.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,i){r.updateLayout(t,i)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=qH(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function i(s){!s.isGroup&&!fde(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var o=r.getItemLayout(n);if(sR(o)){var a=new this._LineCtor(r,n,this._seriesScope);a.traverse(i),this.group.add(a),r.setItemGraphicEl(n,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){ri(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,i){var n=t.getItemLayout(r);if(sR(n)){var o=new this._LineCtor(t,r,i);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,i,n,o){var a=t.getItemGraphicEl(i);if(!sR(r.getItemLayout(n))){this.group.remove(a);return}a?a.updateData(r,n,o):a=new this._LineCtor(r,n,o),r.setItemGraphicEl(n,a),this.group.add(a)},e}();function fde(e){return e.animators&&e.animators.length>0}function qH(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:at(t)}}function KH(e){return isNaN(e[0])||isNaN(e[1])}function sR(e){return e&&!KH(e[0])&&!KH(e[1])}var ph=gde;var lR=[],cR=[],uR=[],gh=$t,dR=Ma,ZH=Math.abs;function XH(e,t,r){for(var i=e[0],n=e[1],o=e[2],a=1/0,s,l=r*r,c=.1,u=.1;u<=.9;u+=.1){lR[0]=gh(i[0],n[0],o[0],u),lR[1]=gh(i[1],n[1],o[1],u);var d=ZH(dR(lR,t)-l);d<a&&(a=d,s=u)}for(var h=0;h<32;h++){var p=s+c;cR[0]=gh(i[0],n[0],o[0],s),cR[1]=gh(i[1],n[1],o[1],s),uR[0]=gh(i[0],n[0],o[0],p),uR[1]=gh(i[1],n[1],o[1],p);var d=dR(cR,t)-l;if(ZH(d)<.01)break;var g=dR(uR,t)-l;c/=2,d<0?g>=0?s=s+c:s=s-c:g>=0?s=s-c:s=s+c}return s}function Df(e,t){var r=[],i=Rs,n=[[],[],[]],o=[[],[]],a=[];t/=2,e.eachEdge(function(s,l){var c=s.getLayout(),u=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");c.__original||(c.__original=[yi(c[0]),yi(c[1])],c[2]&&c.__original.push(yi(c[2])));var h=c.__original;if(c[2]!=null){if(hr(n[0],h[0]),hr(n[1],h[2]),hr(n[2],h[1]),u&&u!=="none"){var p=nu(s.node1),g=XH(n,h[0],p*t);i(n[0][0],n[1][0],n[2][0],g,r),n[0][0]=r[3],n[1][0]=r[4],i(n[0][1],n[1][1],n[2][1],g,r),n[0][1]=r[3],n[1][1]=r[4]}if(d&&d!=="none"){var p=nu(s.node2),g=XH(n,h[1],p*t);i(n[0][0],n[1][0],n[2][0],g,r),n[1][0]=r[1],n[2][0]=r[2],i(n[0][1],n[1][1],n[2][1],g,r),n[1][1]=r[1],n[2][1]=r[2]}hr(c[0],n[0]),hr(c[1],n[2]),hr(c[2],n[1])}else{if(hr(o[0],h[0]),hr(o[1],h[1]),Xn(a,o[1],o[0]),hn(a,a),u&&u!=="none"){var p=nu(s.node1);Ap(o[0],o[0],a,p*t)}if(d&&d!=="none"){var p=nu(s.node2);Ap(o[1],o[1],a,-p*t)}hr(c[0],o[0]),hr(c[1],o[1])}})}function QH(e){return e.type==="view"}var vde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){var n=new ra,o=new ph,a=this.group;this._controller=new aa(i.getZr()),this._controllerHost={target:a},a.add(n.group),a.add(o.group),this._symbolDraw=n,this._lineDraw=o,this._firstRender=!0},t.prototype.render=function(r,i,n){var o=this,a=r.coordinateSystem;this._model=r;var s=this._symbolDraw,l=this._lineDraw,c=this.group;if(QH(a)){var u={x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY};this._firstRender?c.attr(u):Me(c,u,r)}Df(r.getGraph(),iu(r));var d=r.getData();s.updateData(d);var h=r.getEdgeData();l.updateData(h),this._updateNodeAndLinkScale(),this._updateController(r,i,n),clearTimeout(this._layoutTimeout);var p=r.forceLayout,g=r.get(["force","layoutAnimation"]);p&&this._startForceLayoutIteration(p,g);var f=r.get("layout");d.graph.eachNode(function(w){var C=w.dataIndex,S=w.getGraphicEl(),b=w.getModel();if(S){S.off("drag").off("dragend");var x=b.get("draggable");x&&S.on("drag",function(M){switch(f){case"force":p.warmUp(),!o._layouting&&o._startForceLayoutIteration(p,g),p.setFixed(C),d.setItemLayout(C,[S.x,S.y]);break;case"circular":d.setItemLayout(C,[S.x,S.y]),w.setLayout({fixed:!0},!0),uh(r,"symbolSize",w,[M.offsetX,M.offsetY]),o.updateLayout(r);break;case"none":default:d.setItemLayout(C,[S.x,S.y]),xf(r.getGraph(),r),o.updateLayout(r);break}}).on("dragend",function(){p&&p.setUnfixed(C)}),S.setDraggable(x,!!b.get("cursor"));var E=b.get(["emphasis","focus"]);E==="adjacency"&&(ae(S).focus=w.getAdjacentDataIndices())}}),d.graph.eachEdge(function(w){var C=w.getGraphicEl(),S=w.getModel().get(["emphasis","focus"]);C&&S==="adjacency"&&(ae(C).focus={edge:[w.dataIndex],node:[w.node1.dataIndex,w.node2.dataIndex]})});var v=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),m=d.getLayout("cx"),y=d.getLayout("cy");d.graph.eachNode(function(w){J_(w,v,m,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(r,i){var n=this;(function o(){r.step(function(a){n.updateLayout(n._model),(n._layouting=!a)&&(i?n._layoutTimeout=setTimeout(o,16):o())})})()},t.prototype._updateController=function(r,i,n){var o=this,a=this._controller,s=this._controllerHost,l=this.group;if(a.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!al(c,n,r)}),!QH(r.coordinateSystem)){a.disable();return}a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(c){ih(s,c.dx,c.dy),n.dispatchAction({seriesId:r.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){nh(s,c.scale,c.originX,c.originY),n.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),o._updateNodeAndLinkScale(),Df(r.getGraph(),iu(r)),o._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var r=this._model,i=r.getData(),n=iu(r);i.eachItemGraphicEl(function(o,a){o&&o.setSymbolScale(n)})},t.prototype.updateLayout=function(r){Df(r.getGraph(),iu(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(Le),JH=vde;function fh(e){return"_EC_"+e}var mde=function(){function e(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(t,r){t=t==null?""+r:""+t;var i=this._nodesMap;if(!i[fh(t)]){var n=new ou(t,r);return n.hostGraph=this,this.nodes.push(n),i[fh(t)]=n,n}},e.prototype.getNodeByIndex=function(t){var r=this.data.getRawIndex(t);return this.nodes[r]},e.prototype.getNodeById=function(t){return this._nodesMap[fh(t)]},e.prototype.addEdge=function(t,r,i){var n=this._nodesMap,o=this._edgesMap;if(be(t)&&(t=this.nodes[t]),be(r)&&(r=this.nodes[r]),t instanceof ou||(t=n[fh(t)]),r instanceof ou||(r=n[fh(r)]),!(!t||!r)){var a=t.id+"-"+r.id,s=new e8(t,r,i);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),r.inEdges.push(s)),t.edges.push(s),t!==r&&r.edges.push(s),this.edges.push(s),o[a]=s,s}},e.prototype.getEdgeByIndex=function(t){var r=this.edgeData.getRawIndex(t);return this.edges[r]},e.prototype.getEdge=function(t,r){t instanceof ou&&(t=t.id),r instanceof ou&&(r=r.id);var i=this._edgesMap;return this._directed?i[t+"-"+r]:i[t+"-"+r]||i[r+"-"+t]},e.prototype.eachNode=function(t,r){for(var i=this.nodes,n=i.length,o=0;o<n;o++)i[o].dataIndex>=0&&t.call(r,i[o],o)},e.prototype.eachEdge=function(t,r){for(var i=this.edges,n=i.length,o=0;o<n;o++)i[o].dataIndex>=0&&i[o].node1.dataIndex>=0&&i[o].node2.dataIndex>=0&&t.call(r,i[o],o)},e.prototype.breadthFirstTraverse=function(t,r,i,n){if(r instanceof ou||(r=this._nodesMap[fh(r)]),!!r){for(var o=i==="out"?"outEdges":i==="in"?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(n,r,null))for(var s=[r];s.length;)for(var l=s.shift(),c=l[o],a=0;a<c.length;a++){var u=c[a],d=u.node1===l?u.node2:u.node1;if(!d.__visited){if(t.call(n,d,l))return;s.push(d),d.__visited=!0}}}},e.prototype.update=function(){for(var t=this.data,r=this.edgeData,i=this.nodes,n=this.edges,o=0,a=i.length;o<a;o++)i[o].dataIndex=-1;for(var o=0,a=t.count();o<a;o++)i[t.getRawIndex(o)].dataIndex=o;r.filterSelf(function(s){var l=n[r.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var o=0,a=n.length;o<a;o++)n[o].dataIndex=-1;for(var o=0,a=r.count();o<a;o++)n[r.getRawIndex(o)].dataIndex=o},e.prototype.clone=function(){for(var t=new e(this._directed),r=this.nodes,i=this.edges,n=0;n<r.length;n++)t.addNode(r[n].id,r[n].dataIndex);for(var n=0;n<i.length;n++){var o=i[n];t.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return t},e}(),ou=function(){function e(t,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=r??-1}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,i=r.data.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},r=0;r<this.edges.length;r++){var i=this.edges[r];i.dataIndex<0||(t.edge.push(i.dataIndex),t.node.push(i.node1.dataIndex,i.node2.dataIndex))}return t},e.prototype.getTrajectoryDataIndices=function(){for(var t=Y(),r=Y(),i=0;i<this.edges.length;i++){var n=this.edges[i];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var o=[n.node1],a=[n.node2],s=0;s<o.length;){var l=o[s];s++,r.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)t.set(l.inEdges[c].dataIndex,!0),o.push(l.inEdges[c].node1)}for(s=0;s<a.length;){var u=a[s];s++,r.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)t.set(u.outEdges[c].dataIndex,!0),a.push(u.outEdges[c].node2)}}}return{edge:t.keys(),node:r.keys()}},e}(),e8=function(){function e(t,r,i){this.dataIndex=-1,this.node1=t,this.node2=r,this.dataIndex=i??-1}return e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostGraph,i=r.edgeData.getItemModel(this.dataIndex);return i.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var t=Y(),r=Y();t.set(this.dataIndex,!0);for(var i=[this.node1],n=[this.node2],o=0;o<i.length;){var a=i[o];o++,r.set(a.dataIndex,!0);for(var s=0;s<a.inEdges.length;s++)t.set(a.inEdges[s].dataIndex,!0),i.push(a.inEdges[s].node1)}for(o=0;o<n.length;){var l=n[o];o++,r.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),n.push(l.outEdges[s].node2)}return{edge:t.keys(),node:r.keys()}},e}();function t8(e,t){return{getValue:function(r){var i=this[e][t];return i.getStore().get(i.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,i){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,r,i)},getVisual:function(r){return this[e][t].getItemVisual(this.dataIndex,r)},setLayout:function(r,i){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,r,i)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}ot(ou,t8("hostGraph","data"));ot(e8,t8("hostGraph","edgeData"));var r8=mde;function Ef(e,t,r,i,n){for(var o=new r8(i),a=0;a<e.length;a++)o.addNode(bt(e[a].id,e[a].name,a),a);for(var s=[],l=[],c=0,a=0;a<t.length;a++){var u=t[a],d=u.source,h=u.target;o.addEdge(d,h,c)&&(l.push(u),s.push(bt(Mt(u.id,null),d+" > "+h)),c++)}var p=r.get("coordinateSystem"),g;if(p==="cartesian2d"||p==="polar")g=Sr(e,r);else{var f=Ha.get(p),v=f?f.dimensions||[]:[];pe(v,"value")<0&&v.concat(["value"]);var m=go(e,{coordDimensions:v,encodeDefine:r.getEncode()}).dimensions;g=new Pt(m,r),g.initData(e)}var y=new Pt(["value"],r);return y.initData(l,s),n&&n(g,y),SC({mainData:g,struct:o,structAttr:"graph",datas:{node:g,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var yde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments);var i=this;function n(){return i._categoriesData}this.legendVisualProvider=new oa(n,n),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(r){e.prototype.mergeDefaultAndTheme.apply(this,arguments),Yi(r,"edgeLabel",["show"])},t.prototype.getInitialData=function(r,i){var n=r.edges||r.links||[],o=r.data||r.nodes||[],a=this;if(o&&n){zH(this);var s=Ef(o,n,this,!0,l);return D(s.edges,function(c){VH(c.node1,c.node2,this,c.dataIndex)},this),s.data}function l(c,u){c.wrapMethod("getItemModel",function(g){var f=a._categoriesModels,v=g.getShallow("category"),m=f[v];return m&&(m.parentModel=g.parentModel,g.parentModel=m),g});var d=Ve.prototype.getModel;function h(g,f){var v=d.call(this,g,f);return v.resolveParentPath=p,v}u.wrapMethod("getItemModel",function(g){return g.resolveParentPath=p,g.getModel=h,g});function p(g){if(g&&(g[0]==="label"||g[1]==="label")){var f=g.slice();return g[0]==="label"?f[0]="edgeLabel":g[1]==="label"&&(f[1]="edgeLabel"),f}return g}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(r,i,n){if(n==="edge"){var o=this.getData(),a=this.getDataParams(r,n),s=o.graph.getEdgeByIndex(r),l=o.getName(s.node1.dataIndex),c=o.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),wt("nameValue",{name:u.join(" > "),value:a.value,noValue:a.value==null})}var d=X0({series:this,dataIndex:r,multipleSeries:i});return d},t.prototype._updateCategoriesData=function(){var r=N(this.option.categories||[],function(n){return n.value!=null?n:F({value:0},n)}),i=new Pt(["value"],this);i.initData(r),this._categoriesData=i,this._categoriesModels=i.mapArray(function(n){return i.getItemModel(n)})},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Be),i8=yde;var wde={type:"graphRoam",event:"graphRoam",update:"none"};function hR(e){e.registerChartView(JH),e.registerSeriesModel(i8),e.registerProcessor($_),e.registerVisual(Y_),e.registerVisual(q_),e.registerLayout(X_),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,eR),e.registerLayout(tR),e.registerCoordinateSystem("graphView",{dimensions:qa.dimensions,create:rR}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},pt),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},pt),e.registerAction(wde,function(t,r,i){r.eachComponent({mainType:"series",query:t},function(n){var o=n.coordinateSystem,a=oh(o,t,void 0,i);n.setCenter&&n.setCenter(a.center),n.setZoom&&n.setZoom(a.zoom)})})}var Cde=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),bde=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="pointer",i}return t.prototype.getDefaultShape=function(){return new Cde},t.prototype.buildPath=function(r,i){var n=Math.cos,o=Math.sin,a=i.r,s=i.width,l=i.angle,c=i.x-n(l)*s*(s>=a/3?1:2),u=i.y-o(l)*s*(s>=a/3?1:2);l=i.angle-Math.PI/2,r.moveTo(c,u),r.lineTo(i.x+n(l)*s,i.y+o(l)*s),r.lineTo(i.x+n(i.angle)*a,i.y+o(i.angle)*a),r.lineTo(i.x-n(l)*s,i.y-o(l)*s),r.lineTo(c,u)},t}(ce),n8=bde;function Sde(e,t){var r=e.get("center"),i=t.getWidth(),n=t.getHeight(),o=Math.min(i,n),a=j(r[0],t.getWidth()),s=j(r[1],t.getHeight()),l=j(e.get("radius"),o/2);return{cx:a,cy:s,r:l}}function IC(e,t){var r=e==null?"":e+"";return t&&(H(t)?r=t.replace("{value}",r):Z(t)&&(r=t(e))),r}var xde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this.group.removeAll();var o=r.get(["axisLine","lineStyle","color"]),a=Sde(r,n);this._renderMain(r,i,n,o,a),this._data=r.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(r,i,n,o,a){var s=this.group,l=r.get("clockwise"),c=-r.get("startAngle")/180*Math.PI,u=-r.get("endAngle")/180*Math.PI,d=r.getModel("axisLine"),h=d.get("roundCap"),p=h?th:qt,g=d.get("show"),f=d.getModel("lineStyle"),v=f.get("width"),m=[c,u];rg(m,!l),c=m[0],u=m[1];for(var y=u-c,w=c,C=[],S=0;g&&S<o.length;S++){var b=Math.min(Math.max(o[S][0],0),1);u=c+y*b;var x=new p({shape:{startAngle:w,endAngle:u,cx:a.cx,cy:a.cy,clockwise:l,r0:a.r-v,r:a.r},silent:!0});x.setStyle({fill:o[S][1]}),x.setStyle(f.getLineStyle(["color","width"])),C.push(x),w=u}C.reverse(),D(C,function(M){return s.add(M)});var E=function(M){if(M<=0)return o[0][1];var T;for(T=0;T<o.length;T++)if(o[T][0]>=M&&(T===0?0:o[T-1][0])<M)return o[T][1];return o[T-1][1]};this._renderTicks(r,i,n,E,a,c,u,l,v),this._renderTitleAndDetail(r,i,n,E,a),this._renderAnchor(r,a),this._renderPointer(r,i,n,E,a,c,u,l,v)},t.prototype._renderTicks=function(r,i,n,o,a,s,l,c,u){for(var d=this.group,h=a.cx,p=a.cy,g=a.r,f=+r.get("min"),v=+r.get("max"),m=r.getModel("splitLine"),y=r.getModel("axisTick"),w=r.getModel("axisLabel"),C=r.get("splitNumber"),S=y.get("splitNumber"),b=j(m.get("length"),g),x=j(y.get("length"),g),E=s,M=(l-s)/C,T=M/S,_=m.getModel("lineStyle").getLineStyle(),R=y.getModel("lineStyle").getLineStyle(),A=m.get("distance"),P,k,L=0;L<=C;L++){if(P=Math.cos(E),k=Math.sin(E),m.get("show")){var V=A?A+u:u,z=new _t({shape:{x1:P*(g-V)+h,y1:k*(g-V)+p,x2:P*(g-b-V)+h,y2:k*(g-b-V)+p},style:_,silent:!0});_.stroke==="auto"&&z.setStyle({stroke:o(L/C)}),d.add(z)}if(w.get("show")){var V=w.get("distance")+A,B=IC(gt(L/C*(v-f)+f),w.get("formatter")),K=o(L/C),X=P*(g-b-V)+h,oe=k*(g-b-V)+p,ye=w.get("rotate"),we=0;ye==="radial"?(we=-E+2*Math.PI,we>Math.PI/2&&(we+=Math.PI)):ye==="tangential"?we=-E-Math.PI/2:be(ye)&&(we=ye*Math.PI/180),we===0?d.add(new De({style:Ke(w,{text:B,x:X,y:oe,verticalAlign:k<-.8?"top":k>.8?"bottom":"middle",align:P<-.4?"left":P>.4?"right":"center"},{inheritColor:K}),silent:!0})):d.add(new De({style:Ke(w,{text:B,x:X,y:oe,verticalAlign:"middle",align:"center"},{inheritColor:K}),silent:!0,originX:X,originY:oe,rotation:we}))}if(y.get("show")&&L!==C){var V=y.get("distance");V=V?V+u:u;for(var Oe=0;Oe<=S;Oe++){P=Math.cos(E),k=Math.sin(E);var $e=new _t({shape:{x1:P*(g-V)+h,y1:k*(g-V)+p,x2:P*(g-x-V)+h,y2:k*(g-x-V)+p},silent:!0,style:R});R.stroke==="auto"&&$e.setStyle({stroke:o((L+Oe/S)/C)}),d.add($e),E+=T}E-=T}else E+=M}},t.prototype._renderPointer=function(r,i,n,o,a,s,l,c,u){var d=this.group,h=this._data,p=this._progressEls,g=[],f=r.get(["pointer","show"]),v=r.getModel("progress"),m=v.get("show"),y=r.getData(),w=y.mapDimension("value"),C=+r.get("min"),S=+r.get("max"),b=[C,S],x=[s,l];function E(T,_){var R=y.getItemModel(T),A=R.getModel("pointer"),P=j(A.get("width"),a.r),k=j(A.get("length"),a.r),L=r.get(["pointer","icon"]),V=A.get("offsetCenter"),z=j(V[0],a.r),B=j(V[1],a.r),K=A.get("keepAspect"),X;return L?X=et(L,z-P/2,B-k,P,k,null,K):X=new n8({shape:{angle:-Math.PI/2,width:P,r:k,x:z,y:B}}),X.rotation=-(_+Math.PI/2),X.x=a.cx,X.y=a.cy,X}function M(T,_){var R=v.get("roundCap"),A=R?th:qt,P=v.get("overlap"),k=P?v.get("width"):u/y.count(),L=P?a.r-k:a.r-(T+1)*k,V=P?a.r:a.r-T*k,z=new A({shape:{startAngle:s,endAngle:_,cx:a.cx,cy:a.cy,clockwise:c,r0:L,r:V}});return P&&(z.z2=S-y.get(w,T)%S),z}(m||f)&&(y.diff(h).add(function(T){var _=y.get(w,T);if(f){var R=E(T,s);je(R,{rotation:-((isNaN(+_)?x[0]:Ye(_,b,x,!0))+Math.PI/2)},r),d.add(R),y.setItemGraphicEl(T,R)}if(m){var A=M(T,s),P=v.get("clip");je(A,{shape:{endAngle:Ye(_,b,x,P)}},r),d.add(A),ng(r.seriesIndex,y.dataType,T,A),g[T]=A}}).update(function(T,_){var R=y.get(w,T);if(f){var A=h.getItemGraphicEl(_),P=A?A.rotation:s,k=E(T,P);k.rotation=P,Me(k,{rotation:-((isNaN(+R)?x[0]:Ye(R,b,x,!0))+Math.PI/2)},r),d.add(k),y.setItemGraphicEl(T,k)}if(m){var L=p[_],V=L?L.shape.endAngle:s,z=M(T,V),B=v.get("clip");Me(z,{shape:{endAngle:Ye(R,b,x,B)}},r),d.add(z),ng(r.seriesIndex,y.dataType,T,z),g[T]=z}}).execute(),y.each(function(T){var _=y.getItemModel(T),R=_.getModel("emphasis"),A=R.get("focus"),P=R.get("blurScope"),k=R.get("disabled");if(f){var L=y.getItemGraphicEl(T),V=y.getItemVisual(T,"style"),z=V.fill;if(L instanceof vt){var B=L.style;L.useStyle(F({image:B.image,x:B.x,y:B.y,width:B.width,height:B.height},V))}else L.useStyle(V),L.type!=="pointer"&&L.setColor(z);L.setStyle(_.getModel(["pointer","itemStyle"]).getItemStyle()),L.style.fill==="auto"&&L.setStyle("fill",o(Ye(y.get(w,T),b,[0,1],!0))),L.z2EmphasisLift=0,Dt(L,_),We(L,A,P,k)}if(m){var K=g[T];K.useStyle(y.getItemVisual(T,"style")),K.setStyle(_.getModel(["progress","itemStyle"]).getItemStyle()),K.z2EmphasisLift=0,Dt(K,_),We(K,A,P,k)}}),this._progressEls=g)},t.prototype._renderAnchor=function(r,i){var n=r.getModel("anchor"),o=n.get("show");if(o){var a=n.get("size"),s=n.get("icon"),l=n.get("offsetCenter"),c=n.get("keepAspect"),u=et(s,i.cx-a/2+j(l[0],i.r),i.cy-a/2+j(l[1],i.r),a,a,null,c);u.z2=n.get("showAbove")?1:0,u.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(u)}},t.prototype._renderTitleAndDetail=function(r,i,n,o,a){var s=this,l=r.getData(),c=l.mapDimension("value"),u=+r.get("min"),d=+r.get("max"),h=new ee,p=[],g=[],f=r.isAnimationEnabled(),v=r.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){p[m]=new De({silent:!0}),g[m]=new De({silent:!0})}).update(function(m,y){p[m]=s._titleEls[y],g[m]=s._detailEls[y]}).execute(),l.each(function(m){var y=l.getItemModel(m),w=l.get(c,m),C=new ee,S=o(Ye(w,[u,d],[0,1],!0)),b=y.getModel("title");if(b.get("show")){var x=b.get("offsetCenter"),E=a.cx+j(x[0],a.r),M=a.cy+j(x[1],a.r),T=p[m];T.attr({z2:v?0:2,style:Ke(b,{x:E,y:M,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:S})}),C.add(T)}var _=y.getModel("detail");if(_.get("show")){var R=_.get("offsetCenter"),A=a.cx+j(R[0],a.r),P=a.cy+j(R[1],a.r),k=j(_.get("width"),a.r),L=j(_.get("height"),a.r),V=r.get(["progress","show"])?l.getItemVisual(m,"style").fill:S,T=g[m],z=_.get("formatter");T.attr({z2:v?0:2,style:Ke(_,{x:A,y:P,text:IC(w,z),width:isNaN(k)?null:k,height:isNaN(L)?null:L,align:"center",verticalAlign:"middle"},{inheritColor:V})}),w0(T,{normal:_},w,function(K){return IC(K,z)}),f&&C0(T,m,l,r,{getFormattedLabel:function(K,X,oe,ye,we,Oe){return IC(Oe?Oe.interpolatedValue:w,z)}}),C.add(T)}h.add(C)}),this.group.add(h),this._titleEls=p,this._detailEls=g},t.type="gauge",t}(Le),o8=xde;var Dde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="itemStyle",r}return t.prototype.getInitialData=function(r,i){return en(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(Be),a8=Dde;function pR(e){e.registerChartView(o8),e.registerSeriesModel(a8)}var Ede=["itemStyle","opacity"],Mde=function(e){I(t,e);function t(r,i){var n=e.call(this)||this,o=n,a=new Rt,s=new De;return o.setTextContent(s),n.setTextGuideLine(a),n.updateData(r,i,!0),n}return t.prototype.updateData=function(r,i,n){var o=this,a=r.hostModel,s=r.getItemModel(i),l=r.getItemLayout(i),c=s.getModel("emphasis"),u=s.get(Ede);u=u??1,n||nr(o),o.useStyle(r.getItemVisual(i,"style")),o.style.lineJoin="round",n?(o.setShape({points:l.points}),o.style.opacity=0,je(o,{style:{opacity:u}},a,i)):Me(o,{style:{opacity:u},shape:{points:l.points}},a,i),Dt(o,s),this._updateLabel(r,i),We(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(r,i){var n=this,o=this.getTextGuideLine(),a=n.getTextContent(),s=r.hostModel,l=r.getItemModel(i),c=r.getItemLayout(i),u=c.label,d=r.getItemVisual(i,"style"),h=d.fill;ft(a,at(l),{labelFetcher:r.hostModel,labelDataIndex:i,defaultOpacity:d.opacity,defaultText:r.getName(i)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),n.setTextConfig({local:!0,inside:!!u.inside,insideStroke:h,outsideFill:h});var p=u.linePoints;o.setShape({points:p}),n.textGuideLineConfig={anchor:p?new _e(p[0][0],p[0][1]):null},Me(a,{style:{x:u.x,y:u.y}},s,i),a.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),Xd(n,Qd(l),{stroke:h})},t}(It),Tde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreLabelLineUpdate=!0,r}return t.prototype.render=function(r,i,n){var o=r.getData(),a=this._data,s=this.group;o.diff(a).add(function(l){var c=new Mde(o,l);o.setItemGraphicEl(l,c),s.add(c)}).update(function(l,c){var u=a.getItemGraphicEl(c);u.updateData(o,l),s.add(u),o.setItemGraphicEl(l,u)}).remove(function(l){var c=a.getItemGraphicEl(l);Fa(c,r,l)}).execute(),this._data=o},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(Le),s8=Tde;var _de=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new oa($(this.getData,this),$(this.getRawData,this)),this._defaultLabelLine(r)},t.prototype.getInitialData=function(r,i){return en(this,{coordDimensions:["value"],encodeDefaulter:se(Hd,this)})},t.prototype._defaultLabelLine=function(r){Yi(r,"labelLine",["show"]);var i=r.labelLine,n=r.emphasis.labelLine;i.show=i.show&&r.label.show,n.show=n.show&&r.emphasis.label.show},t.prototype.getDataParams=function(r){var i=this.getData(),n=e.prototype.getDataParams.call(this,r),o=i.mapDimension("value"),a=i.getSum(o);return n.percent=a?+(i.get(o,r)/a*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Be),l8=_de;function Rde(e,t){return Je(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Ade(e,t){for(var r=e.mapDimension("value"),i=e.mapArray(r,function(l){return l}),n=[],o=t==="ascending",a=0,s=e.count();a<s;a++)n[a]=a;return Z(t)?n.sort(t):t!=="none"&&n.sort(function(l,c){return o?i[l]-i[c]:i[c]-i[l]}),n}function Ide(e){var t=e.hostModel,r=t.get("orient");e.each(function(i){var n=e.getItemModel(i),o=n.getModel("label"),a=o.get("position"),s=n.getModel("labelLine"),l=e.getItemLayout(i),c=l.points,u=a==="inner"||a==="inside"||a==="center"||a==="insideLeft"||a==="insideRight",d,h,p,g;if(u)a==="insideLeft"?(h=(c[0][0]+c[3][0])/2+5,p=(c[0][1]+c[3][1])/2,d="left"):a==="insideRight"?(h=(c[1][0]+c[2][0])/2-5,p=(c[1][1]+c[2][1])/2,d="right"):(h=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,p=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,d="center"),g=[[h,p],[h,p]];else{var f=void 0,v=void 0,m=void 0,y=void 0,w=s.get("length");a==="left"?(f=(c[3][0]+c[0][0])/2,v=(c[3][1]+c[0][1])/2,m=f-w,h=m-5,d="right"):a==="right"?(f=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,m=f+w,h=m+5,d="left"):a==="top"?(f=(c[3][0]+c[0][0])/2,v=(c[3][1]+c[0][1])/2,y=v-w,p=y-5,d="center"):a==="bottom"?(f=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,y=v+w,p=y+5,d="center"):a==="rightTop"?(f=r==="horizontal"?c[3][0]:c[1][0],v=r==="horizontal"?c[3][1]:c[1][1],r==="horizontal"?(y=v-w,p=y-5,d="center"):(m=f+w,h=m+5,d="top")):a==="rightBottom"?(f=c[2][0],v=c[2][1],r==="horizontal"?(y=v+w,p=y+5,d="center"):(m=f+w,h=m+5,d="bottom")):a==="leftTop"?(f=c[0][0],v=r==="horizontal"?c[0][1]:c[1][1],r==="horizontal"?(y=v-w,p=y-5,d="center"):(m=f-w,h=m-5,d="right")):a==="leftBottom"?(f=r==="horizontal"?c[1][0]:c[3][0],v=r==="horizontal"?c[1][1]:c[2][1],r==="horizontal"?(y=v+w,p=y+5,d="center"):(m=f-w,h=m-5,d="right")):(f=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,r==="horizontal"?(y=v+w,p=y+5,d="center"):(m=f+w,h=m+5,d="left")),r==="horizontal"?(m=f,h=m):(y=v,p=y),g=[[f,v],[m,y]]}l.label={linePoints:g,x:h,y:p,verticalAlign:"middle",textAlign:d,inside:u}})}function gR(e,t){e.eachSeriesByType("funnel",function(r){var i=r.getData(),n=i.mapDimension("value"),o=r.get("sort"),a=Rde(r,t),s=r.get("orient"),l=a.width,c=a.height,u=Ade(i,o),d=a.x,h=a.y,p=s==="horizontal"?[j(r.get("minSize"),c),j(r.get("maxSize"),c)]:[j(r.get("minSize"),l),j(r.get("maxSize"),l)],g=i.getDataExtent(n),f=r.get("min"),v=r.get("max");f==null&&(f=Math.min(g[0],0)),v==null&&(v=g[1]);var m=r.get("funnelAlign"),y=r.get("gap"),w=s==="horizontal"?l:c,C=(w-y*(i.count()-1))/i.count(),S=function(P,k){if(s==="horizontal"){var L=i.get(n,P)||0,V=Ye(L,[f,v],p,!0),z=void 0;switch(m){case"top":z=h;break;case"center":z=h+(c-V)/2;break;case"bottom":z=h+(c-V);break}return[[k,z],[k,z+V]]}var B=i.get(n,P)||0,K=Ye(B,[f,v],p,!0),X;switch(m){case"left":X=d;break;case"center":X=d+(l-K)/2;break;case"right":X=d+l-K;break}return[[X,k],[X+K,k]]};o==="ascending"&&(C=-C,y=-y,s==="horizontal"?d+=l:h+=c,u=u.reverse());for(var b=0;b<u.length;b++){var x=u[b],E=u[b+1],M=i.getItemModel(x);if(s==="horizontal"){var T=M.get(["itemStyle","width"]);T==null?T=C:(T=j(T,l),o==="ascending"&&(T=-T));var _=S(x,d),R=S(E,d+T);d+=T+y,i.setItemLayout(x,{points:_.concat(R.slice().reverse())})}else{var A=M.get(["itemStyle","height"]);A==null?A=C:(A=j(A,c),o==="ascending"&&(A=-A));var _=S(x,h),R=S(E,h+A);h+=A+y,i.setItemLayout(x,{points:_.concat(R.slice().reverse())})}}Ide(i)})}function fR(e){e.registerChartView(s8),e.registerSeriesModel(l8),e.registerLayout(gR),e.registerProcessor(Co("funnel"))}var Pde=.3,kde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._dataGroup=new ee,r._initialized=!1,r}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(r,i,n,o){this._progressiveEls=null;var a=this._dataGroup,s=r.getData(),l=this._data,c=r.coordinateSystem,u=c.dimensions,d=u8(r);s.diff(l).add(h).update(p).remove(g).execute();function h(v){var m=c8(s,a,v,u,c);vR(m,s,v,d)}function p(v,m){var y=l.getItemGraphicEl(m),w=d8(s,v,u,c);s.setItemGraphicEl(v,y),Me(y,{shape:{points:w}},r,v),nr(y),vR(y,s,v,d)}function g(v){var m=l.getItemGraphicEl(v);a.remove(m)}if(!this._initialized){this._initialized=!0;var f=Lde(c,r,function(){setTimeout(function(){a.removeClipPath()})});a.setClipPath(f)}this._data=s},t.prototype.incrementalPrepareRender=function(r,i,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(r,i,n){for(var o=i.getData(),a=i.coordinateSystem,s=a.dimensions,l=u8(i),c=this._progressiveEls=[],u=r.start;u<r.end;u++){var d=c8(o,this._dataGroup,u,s,a);d.incremental=!0,vR(d,o,u,l),c.push(d)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(Le);function Lde(e,t,r){var i=e.model,n=e.getRect(),o=new Ce({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),a=i.get("layout")==="horizontal"?"width":"height";return o.setShape(a,0),je(o,{shape:{width:n.width,height:n.height}},t,r),o}function d8(e,t,r,i){for(var n=[],o=0;o<r.length;o++){var a=r[o],s=e.get(e.mapDimension(a),t);Fde(s,i.getAxis(a).type)||n.push(i.dataToPoint(s,a))}return n}function c8(e,t,r,i,n){var o=d8(e,r,i,n),a=new Rt({shape:{points:o},z2:10});return t.add(a),e.setItemGraphicEl(r,a),a}function u8(e){var t=e.get("smooth",!0);return t===!0&&(t=Pde),t=wn(t),xs(t)&&(t=0),{smooth:t}}function vR(e,t,r,i){e.useStyle(t.getItemVisual(r,"style")),e.style.fill=null,e.setShape("smooth",i.smooth);var n=t.getItemModel(r),o=n.getModel("emphasis");Dt(e,n,"lineStyle"),We(e,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function Fde(e,t){return t==="category"?e==null:e==null||isNaN(e)}var h8=kde;var Ode=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.getInitialData=function(r,i){return Sr(null,this,{useEncodeDefaulter:$(Nde,null,this)})},t.prototype.getRawIndicesByActiveState=function(r){var i=this.coordinateSystem,n=this.getData(),o=[];return i.eachActiveState(n,function(a,s){r===a&&o.push(n.getRawIndex(s))}),o},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(Be);function Nde(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var r={};return D(t.dimensions,function(i){var n=zde(i);r[i]=n}),r}}function zde(e){return+e.replace("dim","")}var p8=Ode;var Vde=["lineStyle","opacity"],Bde={seriesType:"parallel",reset:function(e,t){var r=e.coordinateSystem,i={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(n,o){r.eachActiveState(o,function(a,s){var l=i[a];if(a==="normal"&&o.hasItemOption){var c=o.getItemModel(s).get(Vde,!0);c!=null&&(l=c)}var u=o.ensureUniqueItemVisual(s,"style");u.opacity=l},n.start,n.end)}}}},g8=Bde;function mR(e){Gde(e),Hde(e)}function Gde(e){if(!e.parallel){var t=!1;D(e.series,function(r){r&&r.type==="parallel"&&(t=!0)}),t&&(e.parallel=[{}])}}function Hde(e){var t=Ge(e.parallelAxis);D(t,function(r){if(J(r)){var i=r.parallelIndex||0,n=Ge(e.parallel)[i];n&&n.parallelAxisDefault&&fe(r,n.parallelAxisDefault,!1)}})}var Ude=5,Wde=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this._model=r,this._api=n,this._handlers||(this._handlers={},D(jde,function(o,a){n.getZr().on(a,this._handlers[a]=$(o,this))},this)),_n(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(r,i){ja(this,"_throttledDispatchExpand"),D(this._handlers,function(n,o){i.getZr().off(o,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},t.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(F({type:"parallelAxisExpand"},r))},t.type="parallel",t}(He),jde={mousedown:function(e){yR(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(yR(this,"click")&&t){var r=[e.offsetX,e.offsetY],i=Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2);if(i>Ude)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!(this._mouseDownPoint||!yR(this,"mousemove"))){var t=this._model,r=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),i=r.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:i==="jump"?null:{duration:0}})}}};function yR(e,t){var r=e._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===t}var f8=Wde;var $de=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(r){var i=this.option;r&&fe(i,r,!0),this._initDimensions()},t.prototype.contains=function(r,i){var n=r.get("parallelIndex");return n!=null&&i.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(r){D(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){r.hasOwnProperty(i)&&(this.option[i]=r[i])},this)},t.prototype._initDimensions=function(){var r=this.dimensions=[],i=this.parallelAxisIndex=[],n=Pe(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this);D(n,function(o){r.push("dim"+o.get("dim")),i.push(o.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(Ee),v8=$de;var Yde=function(e){I(t,e);function t(r,i,n,o,a){var s=e.call(this,r,i,n)||this;return s.type=o||"value",s.axisIndex=a,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(xr),m8=Yde;function zi(e,t,r,i,n,o){e=e||0;var a=r[1]-r[0];if(n!=null&&(n=vh(n,[0,a])),o!=null&&(o=Math.max(o,n??0)),i==="all"){var s=Math.abs(t[1]-t[0]);s=vh(s,[0,a]),n=o=vh(s,[n,o]),i=0}t[0]=vh(t[0],r),t[1]=vh(t[1],r);var l=wR(t,i);t[i]+=e;var c=n||0,u=r.slice();l.sign<0?u[0]+=c:u[1]-=c,t[i]=vh(t[i],u);var d;return d=wR(t,i),n!=null&&(d.sign!==l.sign||d.span<n)&&(t[1-i]=t[i]+l.sign*n),d=wR(t,i),o!=null&&d.span>o&&(t[1-i]=t[i]+d.sign*o),t}function wR(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function vh(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var CR=D,C8=Math.min,b8=Math.max,y8=Math.floor,qde=Math.ceil,w8=gt,Kde=Math.PI,Zde=function(){function e(t,r,i){this.type="parallel",this._axesMap=Y(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,r,i)}return e.prototype._init=function(t,r,i){var n=t.dimensions,o=t.parallelAxisIndex;CR(n,function(a,s){var l=o[s],c=r.getComponent("parallelAxis",l),u=this._axesMap.set(a,new m8(a,el(c),[0,0],c.get("type"),l)),d=u.type==="category";u.onBand=d&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},e.prototype.update=function(t,r){this._updateAxesFromSeries(this._model,t)},e.prototype.containPoint=function(t){var r=this._makeLayoutInfo(),i=r.axisBase,n=r.layoutBase,o=r.pixelDimIndex,a=t[1-o],s=t[o];return a>=i&&a<=i+r.axisLength&&s>=n&&s<=n+r.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(t,r){r.eachSeries(function(i){if(t.contains(i,r)){var n=i.getData();CR(this.dimensions,function(o){var a=this._axesMap.get(o);a.scale.unionExtentFromData(n,n.mapDimension(o)),Xo(a.scale,a.model)},this)}},this)},e.prototype.resize=function(t,r){this._rect=Je(t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var t=this._model,r=this._rect,i=["x","y"],n=["width","height"],o=t.get("layout"),a=o==="horizontal"?0:1,s=r[n[a]],l=[0,s],c=this.dimensions.length,u=PC(t.get("axisExpandWidth"),l),d=PC(t.get("axisExpandCount")||0,[0,c]),h=t.get("axisExpandable")&&c>3&&c>d&&d>1&&u>0&&s>0,p=t.get("axisExpandWindow"),g;if(p)g=PC(p[1]-p[0],l),p[1]=p[0]+g;else{g=PC(u*(d-1),l);var f=t.get("axisExpandCenter")||y8(c/2);p=[u*f-g/2],p[1]=p[0]+g}var v=(s-g)/(c-d);v<3&&(v=0);var m=[y8(w8(p[0]/u,1))+1,qde(w8(p[1]/u,1))-1],y=v/u*p[0];return{layout:o,pixelDimIndex:a,layoutBase:r[i[a]],layoutLength:s,axisBase:r[i[1-a]],axisLength:r[n[1-a]],axisExpandable:h,axisExpandWidth:u,axisCollapseWidth:v,axisExpandWindow:p,axisCount:c,winInnerIndices:m,axisExpandWindow0Pos:y}},e.prototype._layoutAxes=function(){var t=this._rect,r=this._axesMap,i=this.dimensions,n=this._makeLayoutInfo(),o=n.layout;r.each(function(a){var s=[0,n.axisLength],l=a.inverse?1:0;a.setExtent(s[l],s[1-l])}),CR(i,function(a,s){var l=(n.axisExpandable?Qde:Xde)(s,n),c={horizontal:{x:l.position,y:n.axisLength},vertical:{x:0,y:l.position}},u={horizontal:Kde/2,vertical:0},d=[c[o].x+t.x,c[o].y+t.y],h=u[o],p=Xt();Si(p,p,h),Mr(p,p,d),this._axesLayout[a]={position:d,rotation:h,transform:p,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(t){return this._axesMap.get(t)},e.prototype.dataToPoint=function(t,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(t),r)},e.prototype.eachActiveState=function(t,r,i,n){i==null&&(i=0),n==null&&(n=t.count());var o=this._axesMap,a=this.dimensions,s=[],l=[];D(a,function(v){s.push(t.mapDimension(v)),l.push(o.get(v).model)});for(var c=this.hasAxisBrushed(),u=i;u<n;u++){var d=void 0;if(!c)d="normal";else{d="active";for(var h=t.getValues(s,u),p=0,g=a.length;p<g;p++){var f=l[p].getActiveState(h[p]);if(f==="inactive"){d="inactive";break}}}r(d,u)}},e.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,r=this._axesMap,i=!1,n=0,o=t.length;n<o;n++)r.get(t[n]).model.getActiveState()!=="normal"&&(i=!0);return i},e.prototype.axisCoordToPoint=function(t,r){var i=this._axesLayout[r];return Rr([t,0],i.transform)},e.prototype.getAxisLayout=function(t){return re(this._axesLayout[t])},e.prototype.getSlidedAxisExpandWindow=function(t){var r=this._makeLayoutInfo(),i=r.pixelDimIndex,n=r.axisExpandWindow.slice(),o=n[1]-n[0],a=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var s=t[i]-r.layoutBase-r.axisExpandWindow0Pos,l,c="slide",u=r.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),h=d[0]!=null;if(u)h&&u&&s<o*d[0]?(c="jump",l=s-o*d[2]):h&&u&&s>o*(1-d[0])?(c="jump",l=s-o*(1-d[2])):(l=s-o*d[1])>=0&&(l=s-o*(1-d[1]))<=0&&(l=0),l*=r.axisExpandWidth/u,l?zi(l,n,a,"all"):c="none";else{var p=n[1]-n[0],g=a[1]*s/p;n=[b8(0,g-p/2)],n[1]=C8(a[1],n[0]+p),n[0]=n[1]-p}return{axisExpandWindow:n,behavior:c}},e}();function PC(e,t){return C8(b8(e,t[0]),t[1])}function Xde(e,t){var r=t.layoutLength/(t.axisCount-1);return{position:r*e,axisNameAvailableWidth:r,axisLabelShow:!0}}function Qde(e,t){var r=t.layoutLength,i=t.axisExpandWidth,n=t.axisCount,o=t.axisCollapseWidth,a=t.winInnerIndices,s,l=o,c=!1,u;return e<a[0]?(s=e*o,u=o):e<=a[1]?(s=t.axisExpandWindow0Pos+e*i-t.axisExpandWindow[0],l=i,c=!0):(s=r-(n-1-e)*o,u=o),{position:s,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}var S8=Zde;function Jde(e,t){var r=[];return e.eachComponent("parallel",function(i,n){var o=new S8(i,e,t);o.name="parallel_"+n,o.resize(i,t),i.coordinateSystem=o,o.model=i,r.push(o)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="parallel"){var n=i.getReferringComponents("parallel",dt).models[0];i.coordinateSystem=n.coordinateSystem}}),r}var ehe={create:Jde},x8=ehe;var D8=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.activeIntervals=[],r}return t.prototype.getAreaSelectStyle=function(){return Ti([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(r){var i=this.activeIntervals=re(r);if(i)for(var n=i.length-1;n>=0;n--)lr(i[n])},t.prototype.getActiveState=function(r){var i=this.activeIntervals;if(!i.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(i.length===1){var n=i[0];if(n[0]<=r&&r<=n[1])return"active"}else for(var o=0,a=i.length;o<a;o++)if(i[o][0]<=r&&r<=i[o][1])return"active";return"inactive"},t}(Ee);ot(D8,Qo);var bR=D8;var au=!0,Mf=Math.min,mh=Math.max,the=Math.pow,rhe=1e4,ihe=6,nhe=6,E8="globalPan",ohe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},ahe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},M8={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},she=0,lhe=function(e){I(t,e);function t(r){var i=e.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=r,i.group=new ee,i._uid="brushController_"+she++,D(fhe,function(n,o){this._handlers[o]=$(n,this)},i),i}return t.prototype.enableBrush=function(r){return this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},t.prototype._doEnableBrush=function(r){var i=this._zr;this._enableGlobalPan||fG(i,E8,this._uid),D(this._handlers,function(n,o){i.on(o,n)}),this._brushType=r.brushType,this._brushOption=fe(re(M8),r,!0)},t.prototype._doDisableBrush=function(){var r=this._zr;vG(r,E8,this._uid),D(this._handlers,function(i,n){r.off(n,i)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(r){if(r&&r.length){var i=this._panels={};D(r,function(n){i[n.panelId]=re(n)})}else this._panels=null;return this},t.prototype.mount=function(r){r=r||{},this._enableGlobalPan=r.enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=i.getLocalTransform(),this},t.prototype.updateCovers=function(r){r=N(r,function(h){return fe(re(M8),h,!0)});var i="\0-brush-index-",n=this._covers,o=this._covers=[],a=this,s=this._creatingCover;return new Pr(n,r,c,l).add(u).update(u).remove(d).execute(),this;function l(h,p){return(h.id!=null?h.id:i+p)+"-"+h.brushType}function c(h,p){return l(h.__brushOption,p)}function u(h,p){var g=r[h];if(p!=null&&n[p]===s)o[h]=n[p];else{var f=o[h]=p!=null?(n[p].__brushOption=g,n[p]):P8(a,I8(a,g));TR(a,f)}}function d(h){n[h]!==s&&a.group.remove(n[h])}},t.prototype.unmount=function(){return this.enableBrush(!1),SR(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(ir);function I8(e,t){var r=kC[t.brushType].createCover(e,t);return r.__brushOption=t,L8(r,t),e.group.add(r),r}function P8(e,t){var r=_R(t);return r.endCreating&&(r.endCreating(e,t),L8(t,t.__brushOption)),t}function k8(e,t){var r=t.__brushOption;_R(t).updateCoverShape(e,t,r.range,r)}function L8(e,t){var r=t.z;r==null&&(r=rhe),e.traverse(function(i){i.z=r,i.z2=r})}function TR(e,t){_R(t).updateCommon(e,t),k8(e,t)}function _R(e){return kC[e.__brushOption.brushType]}function RR(e,t,r){var i=e._panels;if(!i)return au;var n,o=e._transform;return D(i,function(a){a.isTargetByCursor(t,r,o)&&(n=a)}),n}function F8(e,t){var r=e._panels;if(!r)return au;var i=t.__brushOption.panelId;return i!=null?r[i]:au}function SR(e){var t=e._covers,r=t.length;return D(t,function(i){e.group.remove(i)},e),t.length=0,!!r}function su(e,t){var r=N(e._covers,function(i){var n=i.__brushOption,o=re(n.range);return{brushType:n.brushType,panelId:n.panelId,range:o}});e.trigger("brush",{areas:r,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function che(e){var t=e._track;if(!t.length)return!1;var r=t[t.length-1],i=t[0],n=r[0]-i[0],o=r[1]-i[1],a=the(n*n+o*o,.5);return a>ihe}function O8(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function N8(e,t,r,i){var n=new ee;return n.add(new Ce({name:"main",style:AR(r),silent:!0,draggable:!0,cursor:"move",drift:se(T8,e,t,n,["n","s","w","e"]),ondragend:se(su,t,{isEnd:!0})})),D(i,function(o){n.add(new Ce({name:o.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:se(T8,e,t,n,o),ondragend:se(su,t,{isEnd:!0})}))}),n}function z8(e,t,r,i){var n=i.brushStyle.lineWidth||0,o=mh(n,nhe),a=r[0][0],s=r[1][0],l=a-n/2,c=s-n/2,u=r[0][1],d=r[1][1],h=u-o+n/2,p=d-o+n/2,g=u-a,f=d-s,v=g+n,m=f+n;Za(e,t,"main",a,s,g,f),i.transformable&&(Za(e,t,"w",l,c,o,m),Za(e,t,"e",h,c,o,m),Za(e,t,"n",l,c,v,o),Za(e,t,"s",l,p,v,o),Za(e,t,"nw",l,c,o,o),Za(e,t,"ne",h,c,o,o),Za(e,t,"sw",l,p,o,o),Za(e,t,"se",h,p,o,o))}function xR(e,t){var r=t.__brushOption,i=r.transformable,n=t.childAt(0);n.useStyle(AR(r)),n.attr({silent:!i,cursor:i?"move":"default"}),D([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(o){var a=t.childOfName(o.join("")),s=o.length===1?DR(e,o[0]):dhe(e,o);a&&a.attr({silent:!i,invisible:!i,cursor:i?ahe[s]+"-resize":null})})}function Za(e,t,r,i,n,o,a){var s=t.childOfName(r);s&&s.setShape(phe(IR(e,t,[[i,n],[i+o,n+a]])))}function AR(e){return Q({strokeNoScale:!0},e.brushStyle)}function V8(e,t,r,i){var n=[Mf(e,r),Mf(t,i)],o=[mh(e,r),mh(t,i)];return[[n[0],o[0]],[n[1],o[1]]]}function uhe(e){return no(e.group)}function DR(e,t){var r={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},n=Ic(r[t],uhe(e));return i[n]}function dhe(e,t){var r=[DR(e,t[0]),DR(e,t[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function T8(e,t,r,i,n,o){var a=r.__brushOption,s=e.toRectRange(a.range),l=B8(t,n,o);D(i,function(c){var u=ohe[c];s[u[0]][u[1]]+=l[u[0]]}),a.range=e.fromRectRange(V8(s[0][0],s[1][0],s[0][1],s[1][1])),TR(t,r),su(t,{isEnd:!1})}function hhe(e,t,r,i){var n=t.__brushOption.range,o=B8(e,r,i);D(n,function(a){a[0]+=o[0],a[1]+=o[1]}),TR(e,t),su(e,{isEnd:!1})}function B8(e,t,r){var i=e.group,n=i.transformCoordToLocal(t,r),o=i.transformCoordToLocal(0,0);return[n[0]-o[0],n[1]-o[1]]}function IR(e,t,r){var i=F8(e,t);return i&&i!==au?i.clipPath(r,e._transform):re(r)}function phe(e){var t=Mf(e[0][0],e[1][0]),r=Mf(e[0][1],e[1][1]),i=mh(e[0][0],e[1][0]),n=mh(e[0][1],e[1][1]);return{x:t,y:r,width:i-t,height:n-r}}function ghe(e,t,r){if(!(!e._brushType||vhe(e,t.offsetX,t.offsetY))){var i=e._zr,n=e._covers,o=RR(e,t,r);if(!e._dragging)for(var a=0;a<n.length;a++){var s=n[a].__brushOption;if(o&&(o===au||s.panelId===o.panelId)&&kC[s.brushType].contain(n[a],r[0],r[1]))return}o&&i.setCursorStyle("crosshair")}}function ER(e){var t=e.event;t.preventDefault&&t.preventDefault()}function MR(e,t,r){return e.childOfName("main").contain(t,r)}function G8(e,t,r,i){var n=e._creatingCover,o=e._creatingPanel,a=e._brushOption,s;if(e._track.push(r.slice()),che(e)||n){if(o&&!n){a.brushMode==="single"&&SR(e);var l=re(a);l.brushType=_8(l.brushType,o),l.panelId=o===au?null:o.panelId,n=e._creatingCover=I8(e,l),e._covers.push(n)}if(n){var c=kC[_8(e._brushType,o)],u=n.__brushOption;u.range=c.getCreatingRange(IR(e,n,e._track)),i&&(P8(e,n),c.updateCommon(e,n)),k8(e,n),s={isEnd:i}}}else i&&a.brushMode==="single"&&a.removeOnClick&&RR(e,t,r)&&SR(e)&&(s={isEnd:i,removeOnClick:!0});return s}function _8(e,t){return e==="auto"?t.defaultBrushType:e}var fhe={mousedown:function(e){if(this._dragging)R8(this,e);else if(!e.target||!e.target.draggable){ER(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var r=this._creatingPanel=RR(this,e,t);r&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,r=e.offsetY,i=this.group.transformCoordToLocal(t,r);if(ghe(this,e,i),this._dragging){ER(e);var n=G8(this,e,i,!1);n&&su(this,n)}},mouseup:function(e){R8(this,e)}};function R8(e,t){if(e._dragging){ER(t);var r=t.offsetX,i=t.offsetY,n=e.group.transformCoordToLocal(r,i),o=G8(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,o&&su(e,o)}}function vhe(e,t,r){var i=e._zr;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}var kC={lineX:A8(0),lineY:A8(1),rect:{createCover:function(e,t){function r(i){return i}return N8({toRectRange:r,fromRectRange:r},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=O8(e);return V8(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,r,i){z8(e,t,r,i)},updateCommon:xR,contain:MR},polygon:{createCover:function(e,t){var r=new ee;return r.add(new Rt({name:"main",style:AR(t),silent:!0})),r},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new It({name:"main",draggable:!0,drift:se(hhe,e,t),ondragend:se(su,e,{isEnd:!0})}))},updateCoverShape:function(e,t,r,i){t.childAt(0).setShape({points:IR(e,t,r)})},updateCommon:xR,contain:MR}};function A8(e){return{createCover:function(t,r){return N8({toRectRange:function(i){var n=[i,[0,100]];return e&&n.reverse(),n},fromRectRange:function(i){return i[e]}},t,r,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var r=O8(t),i=Mf(r[0][e],r[1][e]),n=mh(r[0][e],r[1][e]);return[i,n]},updateCoverShape:function(t,r,i,n){var o,a=F8(t,r);if(a!==au&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(e);else{var s=t._zr;o=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[i,o];e&&l.reverse(),z8(t,r,l,n)},updateCommon:xR,contain:MR}}var yh=lhe;function LC(e){return e=PR(e),function(t){return wE(t,e)}}function FC(e,t){return e=PR(e),function(r){var i=t??r,n=i?e.width:e.height,o=i?e.x:e.y;return[o,o+(n||0)]}}function OC(e,t,r){var i=PR(e);return function(n,o){return i.contain(o[0],o[1])&&!al(n,t,r)}}function PR(e){return le.create(e)}var mhe=["axisLine","axisTickLabel","axisName"],yhe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){e.prototype.init.apply(this,arguments),(this._brushController=new yh(i.getZr())).on("brush",$(this._onBrush,this))},t.prototype.render=function(r,i,n,o){if(!whe(r,i,o)){this.axisModel=r,this.api=n,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new ee,this.group.add(this._axisGroup),!!r.get("show")){var s=bhe(r,i),l=s.coordinateSystem,c=r.getAreaSelectStyle(),u=c.width,d=r.axis.dim,h=l.getAxisLayout(d),p=F({strokeContainThreshold:u},h),g=new kr(r,p);D(mhe,g.add,g),this._axisGroup.add(g.getGroup()),this._refreshBrushController(p,c,r,s,u,n),Na(a,this._axisGroup,r)}}},t.prototype._refreshBrushController=function(r,i,n,o,a,s){var l=n.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),d=le.create({x:l[0],y:-a/2,width:c,height:a});d.x-=u,d.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:LC(d),isTargetByCursor:OC(d,s,o),getLinearBrushOtherExtent:FC(d,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(Che(n))},t.prototype._onBrush=function(r){var i=r.areas,n=this.axisModel,o=n.axis,a=N(i,function(s){return[o.coordToData(s.range[0],!0),o.coordToData(s.range[1],!0)]});(!n.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:a})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(He);function whe(e,t,r){return r&&r.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:r})[0]===e}function Che(e){var t=e.axis;return N(e.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(r[0],!0),t.dataToCoord(r[1],!0)]}})}function bhe(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}var U8=yhe;var She={type:"axisAreaSelect",event:"axisAreaSelected"};function W8(e){e.registerAction(She,function(t,r){r.eachComponent({mainType:"parallelAxis",query:t},function(i){i.axis.model.setActiveIntervals(t.intervals)})}),e.registerAction("parallelAxisExpand",function(t,r){r.eachComponent({mainType:"parallel",query:t},function(i){i.setAxisExpand(t)})})}var xhe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Tf(e){e.registerComponentView(f8),e.registerComponentModel(v8),e.registerCoordinateSystem("parallel",x8),e.registerPreprocessor(mR),e.registerComponentModel(bR),e.registerComponentView(U8),bo(e,"parallel",bR,xhe),W8(e)}function kR(e){Te(Tf),e.registerChartView(h8),e.registerSeriesModel(p8),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,g8)}var Dhe=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),Ehe=function(e){I(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Dhe},t.prototype.buildPath=function(r,i){var n=i.extent;r.moveTo(i.x1,i.y1),r.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),i.orient==="vertical"?(r.lineTo(i.x2+n,i.y2),r.bezierCurveTo(i.cpx2+n,i.cpy2,i.cpx1+n,i.cpy1,i.x1+n,i.y1)):(r.lineTo(i.x2,i.y2+n),r.bezierCurveTo(i.cpx2,i.cpy2+n,i.cpx1,i.cpy1+n,i.x1,i.y1+n)),r.closePath()},t.prototype.highlight=function(){Br(this)},t.prototype.downplay=function(){Gr(this)},t}(ce),Mhe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._focusAdjacencyDisabled=!1,r}return t.prototype.render=function(r,i,n){var o=this,a=r.getGraph(),s=this.group,l=r.layoutInfo,c=l.width,u=l.height,d=r.getData(),h=r.getData("edge"),p=r.get("orient");this._model=r,s.removeAll(),s.x=l.x,s.y=l.y,a.eachEdge(function(g){var f=new Ehe,v=ae(f);v.dataIndex=g.dataIndex,v.seriesIndex=r.seriesIndex,v.dataType="edge";var m=g.getModel(),y=m.getModel("lineStyle"),w=y.get("curveness"),C=g.node1.getLayout(),S=g.node1.getModel(),b=S.get("localX"),x=S.get("localY"),E=g.node2.getLayout(),M=g.node2.getModel(),T=M.get("localX"),_=M.get("localY"),R=g.getLayout(),A,P,k,L,V,z,B,K;f.shape.extent=Math.max(1,R.dy),f.shape.orient=p,p==="vertical"?(A=(b!=null?b*c:C.x)+R.sy,P=(x!=null?x*u:C.y)+C.dy,k=(T!=null?T*c:E.x)+R.ty,L=_!=null?_*u:E.y,V=A,z=P*(1-w)+L*w,B=k,K=P*w+L*(1-w)):(A=(b!=null?b*c:C.x)+C.dx,P=(x!=null?x*u:C.y)+R.sy,k=T!=null?T*c:E.x,L=(_!=null?_*u:E.y)+R.ty,V=A*(1-w)+k*w,z=P,B=A*w+k*(1-w),K=L),f.setShape({x1:A,y1:P,x2:k,y2:L,cpx1:V,cpy1:z,cpx2:B,cpy2:K}),f.useStyle(y.getItemStyle()),j8(f.style,p,g);var X=""+m.get("value"),oe=at(m,"edgeLabel");ft(f,oe,{labelFetcher:{getFormattedLabel:function(Oe,$e,Ne,xe,ze,Ae){return r.getFormattedLabel(Oe,$e,"edge",xe,ur(ze,oe.normal&&oe.normal.get("formatter"),X),Ae)}},labelDataIndex:g.dataIndex,defaultText:X}),f.setTextConfig({position:"inside"});var ye=m.getModel("emphasis");Dt(f,m,"lineStyle",function(Oe){var $e=Oe.getItemStyle();return j8($e,p,g),$e}),s.add(f),h.setItemGraphicEl(g.dataIndex,f);var we=ye.get("focus");We(f,we==="adjacency"?g.getAdjacentDataIndices():we==="trajectory"?g.getTrajectoryDataIndices():we,ye.get("blurScope"),ye.get("disabled"))}),a.eachNode(function(g){var f=g.getLayout(),v=g.getModel(),m=v.get("localX"),y=v.get("localY"),w=v.getModel("emphasis"),C=v.get(["itemStyle","borderRadius"])||0,S=new Ce({shape:{x:m!=null?m*c:f.x,y:y!=null?y*u:f.y,width:f.dx,height:f.dy,r:C},style:v.getModel("itemStyle").getItemStyle(),z2:10});ft(S,at(v),{labelFetcher:{getFormattedLabel:function(x,E){return r.getFormattedLabel(x,E,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),S.disableLabelAnimation=!0,S.setStyle("fill",g.getVisual("color")),S.setStyle("decal",g.getVisual("style").decal),Dt(S,v),s.add(S),d.setItemGraphicEl(g.dataIndex,S),ae(S).dataType="node";var b=w.get("focus");We(S,b==="adjacency"?g.getAdjacentDataIndices():b==="trajectory"?g.getTrajectoryDataIndices():b,w.get("blurScope"),w.get("disabled"))}),d.eachItemGraphicEl(function(g,f){var v=d.getItemModel(f);v.get("draggable")&&(g.drift=function(m,y){o._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:d.getRawIndex(f),localX:this.shape.x/c,localY:this.shape.y/u})},g.ondragend=function(){o._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&r.isAnimationEnabled()&&s.setClipPath(The(s.getBoundingRect(),r,function(){s.removeClipPath()})),this._data=r.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(Le);function j8(e,t,r){switch(e.fill){case"source":e.fill=r.node1.getVisual("color"),e.decal=r.node1.getVisual("style").decal;break;case"target":e.fill=r.node2.getVisual("color"),e.decal=r.node2.getVisual("style").decal;break;case"gradient":var i=r.node1.getVisual("color"),n=r.node2.getVisual("color");H(i)&&H(n)&&(e.fill=new qo(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:i,offset:0},{color:n,offset:1}]))}}function The(e,t,r){var i=new Ce({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return je(i,{shape:{width:e.width+20}},t,r),i}var $8=Mhe;var _he=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){var n=r.edges||r.links,o=r.data||r.nodes,a=r.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<a.length;l++)a[l].depth!=null&&a[l].depth>=0&&(s[a[l].depth]=new Ve(a[l],this,i));if(o&&n){var c=Ef(o,n,this,!0,u);return c.data}function u(d,h){d.wrapMethod("getItemModel",function(p,g){var f=p.parentModel,v=f.getData().getItemLayout(g);if(v){var m=v.depth,y=f.levelModels[m];y&&(p.parentModel=y)}return p}),h.wrapMethod("getItemModel",function(p,g){var f=p.parentModel,v=f.getGraph().getEdgeByIndex(g),m=v.node1.getLayout();if(m){var y=m.depth,w=f.levelModels[y];w&&(p.parentModel=w)}return p})}},t.prototype.setNodePosition=function(r,i){var n=this.option.data||this.option.nodes,o=n[r];o.localX=i[0],o.localY=i[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(r,i,n){function o(p){return isNaN(p)||p==null}if(n==="edge"){var a=this.getDataParams(r,n),s=a.data,l=a.value,c=s.source+" -- "+s.target;return wt("nameValue",{name:c,value:l,noValue:o(l)})}else{var u=this.getGraph().getNodeByIndex(r),d=u.getLayout().value,h=this.getDataParams(r,n).data.name;return wt("nameValue",{name:h!=null?h+"":null,value:d,noValue:o(d)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(r,i){var n=e.prototype.getDataParams.call(this,r,i);if(n.value==null&&i==="node"){var o=this.getGraph().getNodeByIndex(r),a=o.getLayout().value;n.value=a}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(Be),Y8=_he;function FR(e,t){e.eachSeriesByType("sankey",function(r){var i=r.get("nodeWidth"),n=r.get("nodeGap"),o=Rhe(r,t);r.layoutInfo=o;var a=o.width,s=o.height,l=r.getGraph(),c=l.nodes,u=l.edges;Ihe(c);var d=Pe(c,function(f){return f.getLayout().value===0}),h=d.length!==0?0:r.get("layoutIterations"),p=r.get("orient"),g=r.get("nodeAlign");Ahe(c,u,i,n,a,s,h,p,g)})}function Rhe(e,t){return Je(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Ahe(e,t,r,i,n,o,a,s,l){Phe(e,t,r,n,o,s,l),Ohe(e,t,o,n,i,a,s),jhe(e,s)}function Ihe(e){D(e,function(t){var r=cl(t.outEdges,NC),i=cl(t.inEdges,NC),n=t.getValue()||0,o=Math.max(r,i,n);t.setLayout({value:o},!0)})}function Phe(e,t,r,i,n,o,a){for(var s=[],l=[],c=[],u=[],d=0,h=0;h<t.length;h++)s[h]=1;for(var h=0;h<e.length;h++)l[h]=e[h].inEdges.length,l[h]===0&&c.push(e[h]);for(var p=-1;c.length;){for(var g=0;g<c.length;g++){var f=c[g],v=f.hostGraph.data.getRawDataItem(f.dataIndex),m=v.depth!=null&&v.depth>=0;m&&v.depth>p&&(p=v.depth),f.setLayout({depth:m?v.depth:d},!0),o==="vertical"?f.setLayout({dy:r},!0):f.setLayout({dx:r},!0);for(var y=0;y<f.outEdges.length;y++){var w=f.outEdges[y],C=t.indexOf(w);s[C]=0;var S=w.node2,b=e.indexOf(S);--l[b]===0&&u.indexOf(S)<0&&u.push(S)}}++d,c=u,u=[]}for(var h=0;h<s.length;h++)if(s[h]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var x=p>d-1?p:d-1;a&&a!=="left"&&khe(e,a,o,x);var E=o==="vertical"?(n-r)/x:(i-r)/x;Fhe(e,E,o)}function q8(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return t.depth!=null&&t.depth>=0}function khe(e,t,r,i){if(t==="right"){for(var n=[],o=e,a=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];n.indexOf(u.node1)<0&&n.push(u.node1)}}o=n,n=[],++a}D(e,function(d){q8(d)||d.setLayout({depth:Math.max(0,i-d.getLayout().skNodeHeight)},!0)})}else t==="justify"&&Lhe(e,i)}function Lhe(e,t){D(e,function(r){!q8(r)&&!r.outEdges.length&&r.setLayout({depth:t},!0)})}function Fhe(e,t,r){D(e,function(i){var n=i.getLayout().depth*t;r==="vertical"?i.setLayout({y:n},!0):i.setLayout({x:n},!0)})}function Ohe(e,t,r,i,n,o,a){var s=Nhe(e,a);zhe(s,t,r,i,n,a),LR(s,n,r,i,a);for(var l=1;o>0;o--)l*=.99,Vhe(s,l,a),LR(s,n,r,i,a),Whe(s,l,a),LR(s,n,r,i,a)}function Nhe(e,t){var r=[],i=t==="vertical"?"y":"x",n=Jp(e,function(o){return o.getLayout()[i]});return n.keys.sort(function(o,a){return o-a}),D(n.keys,function(o){r.push(n.buckets.get(o))}),r}function zhe(e,t,r,i,n,o){var a=1/0;D(e,function(s){var l=s.length,c=0;D(s,function(d){c+=d.getLayout().value});var u=o==="vertical"?(i-(l-1)*n)/c:(r-(l-1)*n)/c;u<a&&(a=u)}),D(e,function(s){D(s,function(l,c){var u=l.getLayout().value*a;o==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),D(t,function(s){var l=+s.getValue()*a;s.setLayout({dy:l},!0)})}function LR(e,t,r,i,n){var o=n==="vertical"?"x":"y";D(e,function(a){a.sort(function(f,v){return f.getLayout()[o]-v.getLayout()[o]});for(var s,l,c,u=0,d=a.length,h=n==="vertical"?"dx":"dy",p=0;p<d;p++)l=a[p],c=u-l.getLayout()[o],c>0&&(s=l.getLayout()[o]+c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[o]+l.getLayout()[h]+t;var g=n==="vertical"?i:r;if(c=u-t-g,c>0){s=l.getLayout()[o]-c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var p=d-2;p>=0;--p)l=a[p],c=l.getLayout()[o]+l.getLayout()[h]+t-u,c>0&&(s=l.getLayout()[o]-c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[o]}})}function Vhe(e,t,r){D(e.slice().reverse(),function(i){D(i,function(n){if(n.outEdges.length){var o=cl(n.outEdges,Bhe,r)/cl(n.outEdges,NC);if(isNaN(o)){var a=n.outEdges.length;o=a?cl(n.outEdges,Ghe,r)/a:0}if(r==="vertical"){var s=n.getLayout().x+(o-ul(n,r))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(o-ul(n,r))*t;n.setLayout({y:l},!0)}}})})}function Bhe(e,t){return ul(e.node2,t)*e.getValue()}function Ghe(e,t){return ul(e.node2,t)}function Hhe(e,t){return ul(e.node1,t)*e.getValue()}function Uhe(e,t){return ul(e.node1,t)}function ul(e,t){return t==="vertical"?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function NC(e){return e.getValue()}function cl(e,t,r){for(var i=0,n=e.length,o=-1;++o<n;){var a=+t(e[o],r);isNaN(a)||(i+=a)}return i}function Whe(e,t,r){D(e,function(i){D(i,function(n){if(n.inEdges.length){var o=cl(n.inEdges,Hhe,r)/cl(n.inEdges,NC);if(isNaN(o)){var a=n.inEdges.length;o=a?cl(n.inEdges,Uhe,r)/a:0}if(r==="vertical"){var s=n.getLayout().x+(o-ul(n,r))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(o-ul(n,r))*t;n.setLayout({y:l},!0)}}})})}function jhe(e,t){var r=t==="vertical"?"x":"y";D(e,function(i){i.outEdges.sort(function(n,o){return n.node2.getLayout()[r]-o.node2.getLayout()[r]}),i.inEdges.sort(function(n,o){return n.node1.getLayout()[r]-o.node1.getLayout()[r]})}),D(e,function(i){var n=0,o=0;D(i.outEdges,function(a){a.setLayout({sy:n},!0),n+=a.getLayout().dy}),D(i.inEdges,function(a){a.setLayout({ty:o},!0),o+=a.getLayout().dy})})}function OR(e){e.eachSeriesByType("sankey",function(t){var r=t.getGraph(),i=r.nodes,n=r.edges;if(i.length){var o=1/0,a=-1/0;D(i,function(s){var l=s.getLayout().value;l<o&&(o=l),l>a&&(a=l)}),D(i,function(s){var l=new Ht({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:t.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}n.length&&D(n,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function NR(e){e.registerChartView($8),e.registerSeriesModel(Y8),e.registerLayout(FR),e.registerVisual(OR),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"sankey",query:t},function(i){i.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var zC=function(){function e(){}return e.prototype.getInitialData=function(t,r){var i,n=r.getComponent("xAxis",this.get("xAxisIndex")),o=r.getComponent("yAxis",this.get("yAxisIndex")),a=n.get("type"),s=o.get("type"),l;a==="category"?(t.layout="horizontal",i=n.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",i=o.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var c=["x","y"],u=t.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],h=c[1-u],p=[n,o],g=p[u].get("type"),f=p[1-u].get("type"),v=t.data;if(v&&l){var m=[];D(v,function(C,S){var b;O(C)?(b=C.slice(),C.unshift(S)):O(C.value)?(b=F({},C),b.value=b.value.slice(),C.value.unshift(S)):b=C,m.push(b)}),t.data=m}var y=this.defaultValueDimensions,w=[{name:d,type:Uc(g),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Uc(f),dimsDef:y.slice()}];return en(this,{coordDimensions:w,dimensionsCount:y.length+1,encodeDefaulter:se(k0,w,this)})},e.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},e}();var K8=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(Be);ot(K8,zC,!0);var Z8=K8;var $he=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=r.getData(),a=this.group,s=this._data;this._data||a.removeAll();var l=r.get("layout")==="horizontal"?1:0;o.diff(s).add(function(c){if(o.hasValue(c)){var u=o.getItemLayout(c),d=X8(u,o,c,l,!0);o.setItemGraphicEl(c,d),a.add(d)}}).update(function(c,u){var d=s.getItemGraphicEl(u);if(!o.hasValue(c)){a.remove(d);return}var h=o.getItemLayout(c);d?(nr(d),Q8(h,d,o,c)):d=X8(h,o,c,l),a.add(d),o.setItemGraphicEl(c,d)}).remove(function(c){var u=s.getItemGraphicEl(c);u&&a.remove(u)}).execute(),this._data=o},t.prototype.remove=function(r){var i=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(o){o&&i.remove(o)})},t.type="boxplot",t}(Le),Yhe=function(){function e(){}return e}(),qhe=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="boxplotBoxPath",i}return t.prototype.getDefaultShape=function(){return new Yhe},t.prototype.buildPath=function(r,i){var n=i.points,o=0;for(r.moveTo(n[o][0],n[o][1]),o++;o<4;o++)r.lineTo(n[o][0],n[o][1]);for(r.closePath();o<n.length;o++)r.moveTo(n[o][0],n[o][1]),o++,r.lineTo(n[o][0],n[o][1])},t}(ce);function X8(e,t,r,i,n){var o=e.ends,a=new qhe({shape:{points:n?Khe(o,i,e):o}});return Q8(e,a,t,r,n),a}function Q8(e,t,r,i,n){var o=r.hostModel,a=Se[n?"initProps":"updateProps"];a(t,{shape:{points:e.ends}},o,i),t.useStyle(r.getItemVisual(i,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=r.getItemModel(i),l=s.getModel("emphasis");Dt(t,s),We(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function Khe(e,t,r){return N(e,function(i){return i=i.slice(),i[t]=r.initBaseline,i})}var J8=$he;var _f=D;function zR(e){var t=Zhe(e);_f(t,function(r){var i=r.seriesModels;i.length&&(Xhe(r),_f(i,function(n,o){Qhe(n,r.boxOffsetList[o],r.boxWidthList[o])}))})}function Zhe(e){var t=[],r=[];return e.eachSeriesByType("boxplot",function(i){var n=i.getBaseAxis(),o=pe(r,n);o<0&&(o=r.length,r[o]=n,t[o]={axis:n,seriesModels:[]}),t[o].seriesModels.push(i)}),t}function Xhe(e){var t=e.axis,r=e.seriesModels,i=r.length,n=e.boxWidthList=[],o=e.boxOffsetList=[],a=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;_f(r,function(g){l=Math.max(l,g.getData().count())});var c=t.getExtent();s=Math.abs(c[1]-c[0])/l}_f(r,function(g){var f=g.get("boxWidth");O(f)||(f=[f,f]),a.push([j(f[0],s)||0,j(f[1],s)||0])});var u=s*.8-2,d=u/i*.3,h=(u-d*(i-1))/i,p=h/2-u/2;_f(r,function(g,f){o.push(p),p+=d+h,n.push(Math.min(Math.max(h,a[f][0]),a[f][1]))})}function Qhe(e,t,r){var i=e.coordinateSystem,n=e.getData(),o=r/2,a=e.get("layout")==="horizontal"?0:1,s=1-a,l=["x","y"],c=n.mapDimension(l[a]),u=n.mapDimensionsAll(l[s]);if(c==null||u.length<5)return;for(var d=0;d<n.count();d++){var h=n.get(c,d),p=w(h,u[2],d),g=w(h,u[0],d),f=w(h,u[1],d),v=w(h,u[3],d),m=w(h,u[4],d),y=[];C(y,f,!1),C(y,v,!0),y.push(g,f,m,v),S(y,g),S(y,m),S(y,p),n.setItemLayout(d,{initBaseline:p[s],ends:y})}function w(b,x,E){var M=n.get(x,E),T=[];T[a]=b,T[s]=M;var _;return isNaN(b)||isNaN(M)?_=[NaN,NaN]:(_=i.dataToPoint(T),_[a]+=t),_}function C(b,x,E){var M=x.slice(),T=x.slice();M[a]+=o,T[a]-=o,E?b.push(M,T):b.push(T,M)}function S(b,x){var E=x.slice(),M=x.slice();E[a]-=o,M[a]+=o,b.push(E,M)}}function VR(e,t){t=t||{};for(var r=[],i=[],n=t.boundIQR,o=n==="none"||n===0,a=0;a<e.length;a++){var s=lr(e[a].slice()),l=Uy(s,.25),c=Uy(s,.5),u=Uy(s,.75),d=s[0],h=s[s.length-1],p=(n??1.5)*(u-l),g=o?d:Math.max(d,l-p),f=o?h:Math.min(h,u+p),v=t.itemNameFormatter,m=Z(v)?v({value:a}):H(v)?v.replace("{value}",a+""):a+"";r.push([m,g,l,c,u,f]);for(var y=0;y<s.length;y++){var w=s[y];if(w<g||w>f){var C=[m,w];i.push(C)}}}return{boxData:r,outliers:i}}var e7={type:"echarts:boxplot",transform:function(t){var r=t.upstream;if(r.sourceFormat!==Qt){var i="";qe(i)}var n=VR(r.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function BR(e){e.registerSeriesModel(Z8),e.registerChartView(J8),e.registerLayout(zR),e.registerTransform(e7)}var Jhe=["color","borderColor"],epe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},t.prototype.incrementalPrepareRender=function(r,i,n){this._clear(),this._updateDrawMode(r)},t.prototype.incrementalRender=function(r,i,n,o){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,i):this._incrementalRenderNormal(r,i)},t.prototype.eachRendered=function(r){ri(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var i=r.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},t.prototype._renderNormal=function(r){var i=r.getData(),n=this._data,o=this.group,a=i.getLayout("isSimpleBox"),s=r.get("clip",!0),l=r.coordinateSystem,c=l.getArea&&l.getArea();this._data||o.removeAll(),i.diff(n).add(function(u){if(i.hasValue(u)){var d=i.getItemLayout(u);if(s&&t7(c,d))return;var h=GR(d,u,!0);je(h,{shape:{points:d.ends}},r,u),HR(h,i,u,a),o.add(h),i.setItemGraphicEl(u,h)}}).update(function(u,d){var h=n.getItemGraphicEl(d);if(!i.hasValue(u)){o.remove(h);return}var p=i.getItemLayout(u);if(s&&t7(c,p)){o.remove(h);return}h?(Me(h,{shape:{points:p.ends}},r,u),nr(h)):h=GR(p,u),HR(h,i,u,a),o.add(h),i.setItemGraphicEl(u,h)}).remove(function(u){var d=n.getItemGraphicEl(u);d&&o.remove(d)}).execute(),this._data=i},t.prototype._renderLarge=function(r){this._clear(),r7(r,this.group);var i=r.get("clip",!0)?ia(r.coordinateSystem,!1,r):null;i?this.group.setClipPath(i):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(r,i){for(var n=i.getData(),o=n.getLayout("isSimpleBox"),a;(a=r.next())!=null;){var s=n.getItemLayout(a),l=GR(s,a);HR(l,n,a,o),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(r,i){r7(i,this.group,this._progressiveEls,!0)},t.prototype.remove=function(r){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(Le),tpe=function(){function e(){}return e}(),rpe=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="normalCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new tpe},t.prototype.buildPath=function(r,i){var n=i.points;this.__simpleBox?(r.moveTo(n[4][0],n[4][1]),r.lineTo(n[6][0],n[6][1])):(r.moveTo(n[0][0],n[0][1]),r.lineTo(n[1][0],n[1][1]),r.lineTo(n[2][0],n[2][1]),r.lineTo(n[3][0],n[3][1]),r.closePath(),r.moveTo(n[4][0],n[4][1]),r.lineTo(n[5][0],n[5][1]),r.moveTo(n[6][0],n[6][1]),r.lineTo(n[7][0],n[7][1]))},t}(ce);function GR(e,t,r){var i=e.ends;return new rpe({shape:{points:r?ipe(i,e):i},z2:100})}function t7(e,t){for(var r=!0,i=0;i<t.ends.length;i++)if(e.contain(t.ends[i][0],t.ends[i][1])){r=!1;break}return r}function HR(e,t,r,i){var n=t.getItemModel(r);e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.__simpleBox=i,Dt(e,n)}function ipe(e,t){return N(e,function(r){return r=r.slice(),r[1]=t.initBaseline,r})}var npe=function(){function e(){}return e}(),UR=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i.type="largeCandlestickBox",i}return t.prototype.getDefaultShape=function(){return new npe},t.prototype.buildPath=function(r,i){for(var n=i.points,o=0;o<n.length;)if(this.__sign===n[o++]){var a=n[o++];r.moveTo(a,n[o++]),r.lineTo(a,n[o++])}else o+=3},t}(ce);function r7(e,t,r,i){var n=e.getData(),o=n.getLayout("largePoints"),a=new UR({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(a);var s=new UR({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new UR({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(l),WR(1,a,e,n),WR(-1,s,e,n),WR(0,l,e,n),i&&(a.incremental=!0,s.incremental=!0),r&&r.push(a,s)}function WR(e,t,r,i){var n=r.get(["itemStyle",e>0?"borderColor":"borderColor0"])||r.get(["itemStyle",e>0?"color":"color0"]);e===0&&(n=r.get(["itemStyle","borderColorDoji"]));var o=r.getModel("itemStyle").getItemStyle(Jhe);t.useStyle(o),t.style.fill=null,t.style.stroke=n}var i7=epe;var n7=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(r,i,n){var o=i.getItemLayout(r);return o&&n.rect(o.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(Be);ot(n7,zC,!0);var o7=n7;function jR(e){!e||!O(e.series)||D(e.series,function(t){J(t)&&t.type==="k"&&(t.type="candlestick")})}var ope=["itemStyle","borderColor"],ape=["itemStyle","borderColor0"],spe=["itemStyle","borderColorDoji"],lpe=["itemStyle","color"],cpe=["itemStyle","color0"],upe={seriesType:"candlestick",plan:Xi(),performRawSeries:!0,reset:function(e,t){function r(o,a){return a.get(o>0?lpe:cpe)}function i(o,a){return a.get(o===0?spe:o>0?ope:ape)}if(!t.isSeriesFiltered(e)){var n=e.pipelineContext.large;return!n&&{progress:function(o,a){for(var s;(s=o.next())!=null;){var l=a.getItemModel(s),c=a.getItemLayout(s).sign,u=l.getItemStyle();u.fill=r(c,l),u.stroke=i(c,l)||u.fill;var d=a.ensureUniqueItemVisual(s,"style");F(d,u)}}}}}},a7=upe;var dpe={seriesType:"candlestick",plan:Xi(),reset:function(e){var t=e.coordinateSystem,r=e.getData(),i=hpe(e,r),n=0,o=1,a=["x","y"],s=r.getDimensionIndex(r.mapDimension(a[n])),l=N(r.mapDimensionsAll(a[o]),r.getDimensionIndex,r),c=l[0],u=l[1],d=l[2],h=l[3];if(r.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?g:p};function p(f,v){for(var m,y=v.getStore();(m=f.next())!=null;){var w=y.get(s,m),C=y.get(c,m),S=y.get(u,m),b=y.get(d,m),x=y.get(h,m),E=Math.min(C,S),M=Math.max(C,S),T=V(E,w),_=V(M,w),R=V(b,w),A=V(x,w),P=[];z(P,_,0),z(P,T,1),P.push(K(A),K(_),K(R),K(T));var k=v.getItemModel(m),L=!!k.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:s7(y,m,C,S,u,L),initBaseline:C>S?_[o]:T[o],ends:P,brushRect:B(b,x,w)})}function V(X,oe){var ye=[];return ye[n]=oe,ye[o]=X,isNaN(oe)||isNaN(X)?[NaN,NaN]:t.dataToPoint(ye)}function z(X,oe,ye){var we=oe.slice(),Oe=oe.slice();we[n]=fg(we[n]+i/2,1,!1),Oe[n]=fg(Oe[n]-i/2,1,!0),ye?X.push(we,Oe):X.push(Oe,we)}function B(X,oe,ye){var we=V(X,ye),Oe=V(oe,ye);return we[n]-=i/2,Oe[n]-=i/2,{x:we[0],y:we[1],width:o?i:Oe[0]-we[0],height:o?Oe[1]-we[1]:i}}function K(X){return X[n]=fg(X[n],1),X}}function g(f,v){for(var m=oi(f.count*4),y=0,w,C=[],S=[],b,x=v.getStore(),E=!!e.get(["itemStyle","borderColorDoji"]);(b=f.next())!=null;){var M=x.get(s,b),T=x.get(c,b),_=x.get(u,b),R=x.get(d,b),A=x.get(h,b);if(isNaN(M)||isNaN(R)||isNaN(A)){m[y++]=NaN,y+=3;continue}m[y++]=s7(x,b,T,_,u,E),C[n]=M,C[o]=R,w=t.dataToPoint(C,null,S),m[y++]=w?w[0]:NaN,m[y++]=w?w[1]:NaN,C[o]=A,w=t.dataToPoint(C,null,S),m[y++]=w?w[1]:NaN}v.setLayout("largePoints",m)}}};function s7(e,t,r,i,n,o){var a;return r>i?a=-1:r<i?a=1:a=o?0:t>0?e.get(n,t-1)<=i?1:-1:1,a}function hpe(e,t){var r=e.getBaseAxis(),i,n=r.type==="category"?r.getBandWidth():(i=r.getExtent(),Math.abs(i[1]-i[0])/t.count()),o=j(de(e.get("barMaxWidth"),n),n),a=j(de(e.get("barMinWidth"),1),n),s=e.get("barWidth");return s!=null?j(s,n):Math.max(Math.min(n/2,o),a)}var l7=dpe;function $R(e){e.registerChartView(i7),e.registerSeriesModel(o7),e.registerPreprocessor(jR),e.registerVisual(a7),e.registerLayout(l7)}function c7(e,t){var r=t.rippleEffectColor||t.color;e.eachChild(function(i){i.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?r:null,fill:t.brushType==="fill"?r:null}})})}var ppe=function(e){I(t,e);function t(r,i){var n=e.call(this)||this,o=new Ya(r,i),a=new ee;return n.add(o),n.add(a),n.updateData(r,i),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(r){for(var i=r.symbolType,n=r.color,o=r.rippleNumber,a=this.childAt(1),s=0;s<o;s++){var l=et(i,-1,-1,2,2,n);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-s/o*r.period+r.effectOffset;l.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(r.period,{opacity:0}).delay(c).start(),a.add(l)}c7(a,r)},t.prototype.updateEffectAnimation=function(r){for(var i=this._effectCfg,n=this.childAt(1),o=["symbolType","period","rippleScale","rippleNumber"],a=0;a<o.length;a++){var s=o[a];if(i[s]!==r[s]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}c7(n,r)},t.prototype.highlight=function(){Br(this)},t.prototype.downplay=function(){Gr(this)},t.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},t.prototype.updateData=function(r,i){var n=this,o=r.hostModel;this.childAt(0).updateData(r,i);var a=this.childAt(1),s=r.getItemModel(i),l=r.getItemVisual(i,"symbol"),c=ho(r.getItemVisual(i,"symbolSize")),u=r.getItemVisual(i,"style"),d=u&&u.fill,h=s.getModel("emphasis");a.setScale(c),a.traverse(function(v){v.setStyle("fill",d)});var p=Qi(r.getItemVisual(i,"symbolOffset"),c);p&&(a.x=p[0],a.y=p[1]);var g=r.getItemVisual(i,"symbolRotate");a.rotation=(g||0)*Math.PI/180||0;var f={};f.showEffectOn=o.get("showEffectOn"),f.rippleScale=s.get(["rippleEffect","scale"]),f.brushType=s.get(["rippleEffect","brushType"]),f.period=s.get(["rippleEffect","period"])*1e3,f.effectOffset=i/r.count(),f.z=o.getShallow("z")||0,f.zlevel=o.getShallow("zlevel")||0,f.symbolType=l,f.color=d,f.rippleEffectColor=s.get(["rippleEffect","color"]),f.rippleNumber=s.get(["rippleEffect","number"]),f.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(f):this.startEffectAnimation(f),this._effectCfg=f):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?f.showEffectOn!=="render"&&n.startEffectAnimation(f):v==="normal"&&f.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=f,We(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},t.prototype.fadeOut=function(r){r&&r()},t}(ee),u7=ppe;var gpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._symbolDraw=new ra(u7)},t.prototype.render=function(r,i,n){var o=r.getData(),a=this._symbolDraw;a.updateData(o,{clipShape:this._getClipShape(r)}),this.group.add(a.group)},t.prototype._getClipShape=function(r){var i=r.coordinateSystem,n=i&&i.getArea&&i.getArea();return r.get("clip",!0)?n:null},t.prototype.updateTransform=function(r,i,n){var o=r.getData();this.group.dirty();var a=wo("").reset(r,i,n);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(r){var i=r.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=HF(i.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(Le),d7=gpe;var fpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return Sr(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(Be),h7=fpe;function YR(e){e.registerChartView(d7),e.registerSeriesModel(h7),e.registerLayout(wo("effectScatter"))}var vpe=function(e){I(t,e);function t(r,i,n){var o=e.call(this)||this;return o.add(o.createLine(r,i,n)),o._updateEffectSymbol(r,i),o}return t.prototype.createLine=function(r,i,n){return new hh(r,i,n)},t.prototype._updateEffectSymbol=function(r,i){var n=r.getItemModel(i),o=n.getModel("effect"),a=o.get("symbolSize"),s=o.get("symbol");O(a)||(a=[a,a]);var l=r.getItemVisual(i,"style"),c=o.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=et(s,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(o.getItemStyle(["color"])),u.scaleX=a[0],u.scaleY=a[1],u.setColor(c),this._symbolType=s,this._symbolScale=a,this._updateEffectAnimation(r,o,i))},t.prototype._updateEffectAnimation=function(r,i,n){var o=this.childAt(1);if(o){var a=r.getItemLayout(n),s=i.get("period")*1e3,l=i.get("loop"),c=i.get("roundTrip"),u=i.get("constantSpeed"),d=bt(i.get("delay"),function(p){return p/r.count()*s/3});if(o.ignore=!0,this._updateAnimationPoints(o,a),u>0&&(s=this._getLineLength(o)/u*1e3),s!==this._period||l!==this._loop||c!==this._roundTrip){o.stopAnimation();var h=void 0;Z(d)?h=d(n):h=d,o.__t>0&&(h=-s*o.__t),this._animateSymbol(o,s,h,l,c)}this._period=s,this._loop=l,this._roundTrip=c}},t.prototype._animateSymbol=function(r,i,n,o,a){if(i>0){r.__t=0;var s=this,l=r.animate("",o).when(a?i*2:i,{__t:a?2:1}).delay(n).during(function(){s._updateSymbolPosition(r)});o||l.done(function(){s.remove(r)}),l.start()}},t.prototype._getLineLength=function(r){return pn(r.__p1,r.__cp1)+pn(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,i){r.__p1=i[0],r.__p2=i[1],r.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},t.prototype.updateData=function(r,i,n){this.childAt(0).updateData(r,i,n),this._updateEffectSymbol(r,i)},t.prototype._updateSymbolPosition=function(r){var i=r.__p1,n=r.__p2,o=r.__cp1,a=r.__t<1?r.__t:2-r.__t,s=[r.x,r.y],l=s.slice(),c=$t,u=zp;s[0]=c(i[0],o[0],n[0],a),s[1]=c(i[1],o[1],n[1],a);var d=r.__t<1?u(i[0],o[0],n[0],a):u(n[0],o[0],i[0],1-a),h=r.__t<1?u(i[1],o[1],n[1],a):u(n[1],o[1],i[1],1-a);r.rotation=-Math.atan2(h,d)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=pn(l,s)*1.05,a===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):r.__lastT===1?r.scaleY=2*pn(i,s):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=s[0],r.y=s[1]},t.prototype.updateLayout=function(r,i){this.childAt(0).updateLayout(r,i);var n=r.getItemModel(i).getModel("effect");this._updateEffectAnimation(r,n,i)},t}(ee),VC=vpe;var mpe=function(e){I(t,e);function t(r,i,n){var o=e.call(this)||this;return o._createPolyline(r,i,n),o}return t.prototype._createPolyline=function(r,i,n){var o=r.getItemLayout(i),a=new Rt({shape:{points:o}});this.add(a),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var o=r.hostModel,a=this.childAt(0),s={shape:{points:r.getItemLayout(i)}};Me(a,s,o,i),this._updateCommonStl(r,i,n)},t.prototype._updateCommonStl=function(r,i,n){var o=this.childAt(0),a=r.getItemModel(i),s=n&&n.emphasisLineStyle,l=n&&n.focus,c=n&&n.blurScope,u=n&&n.emphasisDisabled;if(!n||r.hasItemOption){var d=a.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),u=d.get("disabled"),l=d.get("focus"),c=d.get("blurScope")}o.useStyle(r.getItemVisual(i,"style")),o.style.fill=null,o.style.strokeNoScale=!0;var h=o.ensureState("emphasis");h.style=s,We(this,l,c,u)},t.prototype.updateLayout=function(r,i){var n=this.childAt(0);n.setShape("points",r.getItemLayout(i))},t}(ee),BC=mpe;var ype=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,i,n){return new BC(r,i,n)},t.prototype._updateAnimationPoints=function(r,i){this._points=i;for(var n=[0],o=0,a=1;a<i.length;a++){var s=i[a-1],l=i[a];o+=pn(s,l),n.push(o)}if(o===0){this._length=0;return}for(var a=0;a<n.length;a++)n[a]/=o;this._offsets=n,this._length=o},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var i=r.__t<1?r.__t:2-r.__t,n=this._points,o=this._offsets,a=n.length;if(o){var s=this._lastFrame,l;if(i<this._lastFramePercent){var c=Math.min(s+1,a-1);for(l=c;l>=0&&!(o[l]<=i);l--);l=Math.min(l,a-2)}else{for(l=s;l<a&&!(o[l]>i);l++);l=Math.min(l-1,a-2)}var u=(i-o[l])/(o[l+1]-o[l]),d=n[l],h=n[l+1];r.x=d[0]*(1-u)+u*h[0],r.y=d[1]*(1-u)+u*h[1];var p=r.__t<1?h[0]-d[0]:d[0]-h[0],g=r.__t<1?h[1]-d[1]:d[1]-h[1];r.rotation=-Math.atan2(g,p)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=i,r.ignore=!1}},t}(VC),p7=ype;var wpe=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),Cpe=function(e){I(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new wpe},t.prototype.buildPath=function(r,i){var n=i.segs,o=i.curveness,a;if(i.polyline)for(a=this._off;a<n.length;){var s=n[a++];if(s>0){r.moveTo(n[a++],n[a++]);for(var l=1;l<s;l++)r.lineTo(n[a++],n[a++])}}else for(a=this._off;a<n.length;){var c=n[a++],u=n[a++],d=n[a++],h=n[a++];if(r.moveTo(c,u),o>0){var p=(c+d)/2-(u-h)*o,g=(u+h)/2-(d-c)*o;r.quadraticCurveTo(p,g,d,h)}else r.lineTo(d,h)}this.incremental&&(this._off=a,this.notClear=!0)},t.prototype.findDataIndex=function(r,i){var n=this.shape,o=n.segs,a=n.curveness,s=this.style.lineWidth;if(n.polyline)for(var l=0,c=0;c<o.length;){var u=o[c++];if(u>0)for(var d=o[c++],h=o[c++],p=1;p<u;p++){var g=o[c++],f=o[c++];if(jo(d,h,g,f,s,r,i))return l}l++}else for(var l=0,c=0;c<o.length;){var d=o[c++],h=o[c++],g=o[c++],f=o[c++];if(a>0){var v=(d+g)/2-(h-f)*a,m=(h+f)/2-(g-d)*a;if(Xy(d,h,v,m,g,f,s,r,i))return l}else if(jo(d,h,g,f,s,r,i))return l;l++}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),o=this.getBoundingRect();if(r=n[0],i=n[1],o.contain(r,i)){var a=this.hoverDataIdx=this.findDataIndex(r,i);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.segs,o=1/0,a=1/0,s=-1/0,l=-1/0,c=0;c<n.length;){var u=n[c++],d=n[c++];o=Math.min(u,o),s=Math.max(u,s),a=Math.min(d,a),l=Math.max(d,l)}r=this._rect=new le(o,a,s,l)}return r},t}(ce),bpe=function(){function e(){this.group=new ee}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var i=this._newAdded[0],n=r.getLayout("linesPoints"),o=i&&i.shape.segs;if(o&&o.length<2e4){var a=o.length,s=new Float32Array(a+n.length);s.set(o),s.set(n,a),i.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:n}),this._setCommon(l,r),l.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Cpe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=r.getVisual("style");o&&o.stroke&&t.setStyle("stroke",o.stroke),t.setStyle("fill",null);var a=ae(t);a.seriesIndex=n.seriesIndex,t.on("mousemove",function(s){a.dataIndex=null;var l=t.hoverDataIdx;l>0&&(a.dataIndex=l+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),g7=bpe;var Spe={seriesType:"lines",plan:Xi(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(n,o){var a=[];if(i){var s=void 0,l=n.end-n.start;if(r){for(var c=0,u=n.start;u<n.end;u++)c+=e.getLineCoordsCount(u);s=new Float32Array(l+c*2)}else s=new Float32Array(l*4);for(var d=0,h=[],u=n.start;u<n.end;u++){var p=e.getLineCoords(u,a);r&&(s[d++]=p);for(var g=0;g<p;g++)h=t.dataToPoint(a[g],!1,h),s[d++]=h[0],s[d++]=h[1]}o.setLayout("linesPoints",s)}else for(var u=n.start;u<n.end;u++){var f=o.getItemModel(u),p=e.getLineCoords(u,a),v=[];if(r)for(var m=0;m<p;m++)v.push(t.dataToPoint(a[m]));else{v[0]=t.dataToPoint(a[0]),v[1]=t.dataToPoint(a[1]);var y=f.get(["lineStyle","curveness"]);+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}o.setItemLayout(u,v)}}}}}},GC=Spe;var xpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=r.getData(),a=this._updateLineDraw(o,r),s=r.get("zlevel"),l=r.get(["effect","trailLength"]),c=n.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&l>0&&(u||c.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),a.updateData(o);var d=r.get("clip",!0)&&ia(r.coordinateSystem,!1,r);d?this.group.setClipPath(d):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var o=r.getData(),a=this._updateLineDraw(o,r);a.incrementalPrepareUpdate(o),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._lineDraw.incrementalUpdate(r,i.getData()),this._finished=r.end===i.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,i,n){var o=r.getData(),a=r.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var s=GC.reset(r,i,n);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(r,i){var n=this._lineDraw,o=this._showEffect(i),a=!!i.get("polyline"),s=i.pipelineContext,l=s.large;return(!n||o!==this._hasEffet||a!==this._isPolyline||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=l?new g7:new ph(a?o?p7:BC:o?VC:hh),this._hasEffet=o,this._isPolyline=a,this._isLargeDraw=l),this.group.add(n.group),n},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var i=r.getZr(),n=i.painter.getType()==="svg";!n&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.type="lines",t}(Le),f7=xpe;var Dpe=typeof Uint32Array>"u"?Array:Uint32Array,Epe=typeof Float64Array>"u"?Array:Float64Array;function v7(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=N(t,function(r){var i=[r[0].coord,r[1].coord],n={coords:i};return r[0].name&&(n.fromName=r[0].name),r[1].name&&(n.toName=r[1].name),nd([n,r[0],r[1]])}))}var Mpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],v7(r);var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(v7(r),r.data){var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var i=this._processFlatCoordsArray(r.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=Zl(this._flatCoords,i.flatCoords),this._flatCoordsOffset=Zl(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),r.data=new Float32Array(i.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var i=this.getData().getItemModel(r),n=i.option instanceof Array?i.option:i.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,i){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[r*2],o=this._flatCoordsOffset[r*2+1],a=0;a<o;a++)i[a]=i[a]||[],i[a][0]=this._flatCoords[n+a*2],i[a][1]=this._flatCoords[n+a*2+1];return o}else{for(var s=this._getCoordsFromItemModel(r),a=0;a<s.length;a++)i[a]=i[a]||[],i[a][0]=s[a][0],i[a][1]=s[a][1];return s.length}},t.prototype._processFlatCoordsArray=function(r){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),be(r[0])){for(var n=r.length,o=new Dpe(n),a=new Epe(n),s=0,l=0,c=0,u=0;u<n;){c++;var d=r[u++];o[l++]=s+i,o[l++]=d;for(var h=0;h<d;h++){var p=r[u++],g=r[u++];a[s++]=p,a[s++]=g,u>n}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,l),flatCoords:a,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,i){if(0)var n;var o=new Pt(["value"],this);return o.hasItemOption=!1,o.initData(r.data,[],function(a,s,l,c){if(a instanceof Array)return NaN;o.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[c]:u}),o},t.prototype.formatTooltip=function(r,i,n){var o=this.getData(),a=o.getItemModel(r),s=a.get("name");if(s)return s;var l=a.get("fromName"),c=a.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),wt("nameValue",{name:u.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),i=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&i>0?i+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Be),m7=Mpe;function HC(e){return e instanceof Array||(e=[e,e]),e}var Tpe={seriesType:"lines",reset:function(e){var t=HC(e.get("symbol")),r=HC(e.get("symbolSize")),i=e.getData();i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]);function n(o,a){var s=o.getItemModel(a),l=HC(s.getShallow("symbol",!0)),c=HC(s.getShallow("symbolSize",!0));l[0]&&o.setItemVisual(a,"fromSymbol",l[0]),l[1]&&o.setItemVisual(a,"toSymbol",l[1]),c[0]&&o.setItemVisual(a,"fromSymbolSize",c[0]),c[1]&&o.setItemVisual(a,"toSymbolSize",c[1])}return{dataEach:i.hasItemOption?n:null}}},y7=Tpe;function qR(e){e.registerChartView(f7),e.registerSeriesModel(m7),e.registerLayout(GC),e.registerVisual(y7)}var _pe=256,Rpe=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Vr.createCanvas();this.canvas=t}return e.prototype.update=function(t,r,i,n,o,a){var s=this._getBrush(),l=this._getGradient(o,"inRange"),c=this._getGradient(o,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,h=d.getContext("2d"),p=t.length;d.width=r,d.height=i;for(var g=0;g<p;++g){var f=t[g],v=f[0],m=f[1],y=f[2],w=n(y);h.globalAlpha=w,h.drawImage(s,v-u,m-u)}if(!d.width||!d.height)return d;for(var C=h.getImageData(0,0,d.width,d.height),S=C.data,b=0,x=S.length,E=this.minOpacity,M=this.maxOpacity,T=M-E;b<x;){var w=S[b+3]/256,_=Math.floor(w*(_pe-1))*4;if(w>0){var R=a(w)?l:c;w>0&&(w=w*T+E),S[b++]=R[_],S[b++]=R[_+1],S[b++]=R[_+2],S[b++]=R[_+3]*w*256}else b+=4}return h.putImageData(C,0,0),d},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Vr.createCanvas()),r=this.pointSize+this.blurSize,i=r*2;t.width=i,t.height=i;var n=t.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-r,r,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},e.prototype._getGradient=function(t,r){for(var i=this._gradientPixels,n=i[r]||(i[r]=new Uint8ClampedArray(256*4)),o=[0,0,0,0],a=0,s=0;s<256;s++)t[r](s/255,!0,o),n[a++]=o[0],n[a++]=o[1],n[a++]=o[2],n[a++]=o[3];return n},e}(),w7=Rpe;function Ape(e,t,r){var i=e[1]-e[0];t=N(t,function(a){return{interval:[(a.interval[0]-e[0])/i,(a.interval[1]-e[0])/i]}});var n=t.length,o=0;return function(a){var s;for(s=o;s<n;s++){var l=t[s].interval;if(l[0]<=a&&a<=l[1]){o=s;break}}if(s===n)for(s=o-1;s>=0;s--){var l=t[s].interval;if(l[0]<=a&&a<=l[1]){o=s;break}}return s>=0&&s<n&&r[s]}}function Ipe(e,t){var r=e[1]-e[0];return t=[(t[0]-e[0])/r,(t[1]-e[0])/r],function(i){return i>=t[0]&&i<=t[1]}}function C7(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var Ppe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o;i.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===r&&(o=s)})}),this._progressiveEls=null,this.group.removeAll();var a=r.coordinateSystem;a.type==="cartesian2d"||a.type==="calendar"?this._renderOnCartesianAndCalendar(r,n,0,r.getData().count()):C7(a)&&this._renderOnGeo(a,r,o,n)},t.prototype.incrementalPrepareRender=function(r,i,n){this.group.removeAll()},t.prototype.incrementalRender=function(r,i,n,o){var a=i.coordinateSystem;a&&(C7(a)?this.render(i,n,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(i,o,r.start,r.end,!0)))},t.prototype.eachRendered=function(r){ri(this._progressiveEls||this.group,r)},t.prototype._renderOnCartesianAndCalendar=function(r,i,n,o,a){var s=r.coordinateSystem,l=In(s,"cartesian2d"),c,u,d,h;if(l){var p=s.getAxis("x"),g=s.getAxis("y");c=p.getBandWidth()+.5,u=g.getBandWidth()+.5,d=p.scale.getExtent(),h=g.scale.getExtent()}for(var f=this.group,v=r.getData(),m=r.getModel(["emphasis","itemStyle"]).getItemStyle(),y=r.getModel(["blur","itemStyle"]).getItemStyle(),w=r.getModel(["select","itemStyle"]).getItemStyle(),C=r.get(["itemStyle","borderRadius"]),S=at(r),b=r.getModel("emphasis"),x=b.get("focus"),E=b.get("blurScope"),M=b.get("disabled"),T=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],_=n;_<o;_++){var R=void 0,A=v.getItemVisual(_,"style");if(l){var P=v.get(T[0],_),k=v.get(T[1],_);if(isNaN(v.get(T[2],_))||isNaN(P)||isNaN(k)||P<d[0]||P>d[1]||k<h[0]||k>h[1])continue;var L=s.dataToPoint([P,k]);R=new Ce({shape:{x:L[0]-c/2,y:L[1]-u/2,width:c,height:u},style:A})}else{if(isNaN(v.get(T[1],_)))continue;R=new Ce({z2:1,shape:s.dataToRect([v.get(T[0],_)]).contentShape,style:A})}if(v.hasItemOption){var V=v.getItemModel(_),z=V.getModel("emphasis");m=z.getModel("itemStyle").getItemStyle(),y=V.getModel(["blur","itemStyle"]).getItemStyle(),w=V.getModel(["select","itemStyle"]).getItemStyle(),C=V.get(["itemStyle","borderRadius"]),x=z.get("focus"),E=z.get("blurScope"),M=z.get("disabled"),S=at(V)}R.shape.r=C;var B=r.getRawValue(_),K="-";B&&B[2]!=null&&(K=B[2]+""),ft(R,S,{labelFetcher:r,labelDataIndex:_,defaultOpacity:A.opacity,defaultText:K}),R.ensureState("emphasis").style=m,R.ensureState("blur").style=y,R.ensureState("select").style=w,We(R,x,E,M),R.incremental=a,a&&(R.states.emphasis.hoverLayer=!0),f.add(R),v.setItemGraphicEl(_,R),this._progressiveEls&&this._progressiveEls.push(R)}},t.prototype._renderOnGeo=function(r,i,n,o){var a=n.targetVisuals.inRange,s=n.targetVisuals.outOfRange,l=i.getData(),c=this._hmLayer||this._hmLayer||new w7;c.blurSize=i.get("blurSize"),c.pointSize=i.get("pointSize"),c.minOpacity=i.get("minOpacity"),c.maxOpacity=i.get("maxOpacity");var u=r.getViewRect().clone(),d=r.getRoamTransform();u.applyTransform(d);var h=Math.max(u.x,0),p=Math.max(u.y,0),g=Math.min(u.width+u.x,o.getWidth()),f=Math.min(u.height+u.y,o.getHeight()),v=g-h,m=f-p,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],w=l.mapArray(y,function(x,E,M){var T=r.dataToPoint([x,E]);return T[0]-=h,T[1]-=p,T.push(M),T}),C=n.getExtent(),S=n.type==="visualMap.continuous"?Ipe(C,n.option.range):Ape(C,n.getPieceList(),n.option.selected);c.update(w,v,m,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:s.color.getColorMapper()},S);var b=new vt({style:{width:v,height:m,x:h,y:p,image:c.canvas},silent:!0});this.group.add(b)},t.type="heatmap",t}(Le),b7=Ppe;var kpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,i){return Sr(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var r=Ha.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(Be),S7=kpe;function KR(e){e.registerChartView(b7),e.registerSeriesModel(S7)}var Lpe=["itemStyle","borderWidth"],x7=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],ZR=new ti,Fpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=this.group,a=r.getData(),s=this._data,l=r.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),d=l.master.getRect(),h={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:r,coordSys:l,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:u,valueDim:x7[+u],categoryDim:x7[1-+u]};a.diff(s).add(function(g){if(a.hasValue(g)){var f=E7(a,g),v=D7(a,g,f,h),m=M7(a,h,v);a.setItemGraphicEl(g,m),o.add(m),_7(m,h,v)}}).update(function(g,f){var v=s.getItemGraphicEl(f);if(!a.hasValue(g)){o.remove(v);return}var m=E7(a,g),y=D7(a,g,m,h),w=F7(a,y);v&&w!==v.__pictorialShapeStr&&(o.remove(v),a.setItemGraphicEl(g,null),v=null),v?Hpe(v,h,y):v=M7(a,h,y,!0),a.setItemGraphicEl(g,v),v.__pictorialSymbolMeta=y,o.add(v),_7(v,h,y)}).remove(function(g){var f=s.getItemGraphicEl(g);f&&T7(s,g,f.__pictorialSymbolMeta.animationModel,f)}).execute();var p=r.get("clip",!0)?ia(r.coordinateSystem,!1,r):null;return p?o.setClipPath(p):o.removeClipPath(),this._data=a,this.group},t.prototype.remove=function(r,i){var n=this.group,o=this._data;r.get("animation")?o&&o.eachItemGraphicEl(function(a){T7(o,ae(a).dataIndex,r,a)}):n.removeAll()},t.type="pictorialBar",t}(Le);function D7(e,t,r,i){var n=e.getItemLayout(t),o=r.get("symbolRepeat"),a=r.get("symbolClip"),s=r.get("symbolPosition")||"start",l=r.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=r.get("symbolPatternSize")||2,d=r.isAnimationEnabled(),h={dataIndex:t,layout:n,itemModel:r,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:a,symbolRepeat:o,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:d?r:null,hoverScale:d&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};Ope(r,o,n,i,h),Npe(e,t,n,o,a,h.boundingLength,h.pxSign,u,i,h),zpe(r,h.symbolScale,c,i,h);var p=h.symbolSize,g=Qi(r.get("symbolOffset"),p);return Vpe(r,p,n,o,a,g,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,i,h),h}function Ope(e,t,r,i,n){var o=i.valueDim,a=e.get("symbolBoundingData"),s=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(r[o.wh]<=0),u;if(O(a)){var d=[XR(s,a[0])-l,XR(s,a[1])-l];d[1]<d[0]&&d.reverse(),u=d[c]}else a!=null?u=XR(s,a)-l:t?u=i.coordSysExtent[o.index][c]-l:u=r[o.wh];n.boundingLength=u,t&&(n.repeatCutLength=r[o.wh]),n.pxSign=u>0?1:-1}function XR(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Npe(e,t,r,i,n,o,a,s,l,c){var u=l.valueDim,d=l.categoryDim,h=Math.abs(r[d.wh]),p=e.getItemVisual(t,"symbolSize"),g;O(p)?g=p.slice():p==null?g=["100%","100%"]:g=[p,p],g[d.index]=j(g[d.index],h),g[u.index]=j(g[u.index],i?h:Math.abs(o)),c.symbolSize=g;var f=c.symbolScale=[g[0]/s,g[1]/s];f[u.index]*=(l.isHorizontal?-1:1)*a}function zpe(e,t,r,i,n){var o=e.get(Lpe)||0;o&&(ZR.attr({scaleX:t[0],scaleY:t[1],rotation:r}),ZR.updateTransform(),o/=ZR.getLineScale(),o*=t[i.valueDim.index]),n.valueLineWidth=o||0}function Vpe(e,t,r,i,n,o,a,s,l,c,u,d){var h=u.categoryDim,p=u.valueDim,g=d.pxSign,f=Math.max(t[p.index]+s,0),v=f;if(i){var m=Math.abs(l),y=bt(e.get("symbolMargin"),"15%")+"",w=!1;y.lastIndexOf("!")===y.length-1&&(w=!0,y=y.slice(0,y.length-1));var C=j(y,t[p.index]),S=Math.max(f+C*2,0),b=w?0:C*2,x=Zp(i),E=x?i:R7((m+b)/S),M=m-E*f;C=M/2/(w?E:Math.max(E-1,1)),S=f+C*2,b=w?0:C*2,!x&&i!=="fixed"&&(E=c?R7((Math.abs(c)+b)/S):0),v=E*S-b,d.repeatTimes=E,d.symbolMargin=C}var T=g*(v/2),_=d.pathPosition=[];_[h.index]=r[h.wh]/2,_[p.index]=a==="start"?T:a==="end"?l-T:l/2,o&&(_[0]+=o[0],_[1]+=o[1]);var R=d.bundlePosition=[];R[h.index]=r[h.xy],R[p.index]=r[p.xy];var A=d.barRectShape=F({},r);A[p.wh]=g*Math.max(Math.abs(r[p.wh]),Math.abs(_[p.index]+T)),A[h.wh]=r[h.wh];var P=d.clipShape={};P[h.xy]=-r[h.xy],P[h.wh]=u.ecSize[h.wh],P[p.xy]=0,P[p.wh]=r[p.wh]}function A7(e){var t=e.symbolPatternSize,r=et(e.symbolType,-t/2,-t/2,t,t);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function I7(e,t,r,i){var n=e.__pictorialBundle,o=r.symbolSize,a=r.valueLineWidth,s=r.pathPosition,l=t.valueDim,c=r.repeatTimes||0,u=0,d=o[t.valueDim.index]+a+r.symbolMargin*2;for(QR(e,function(f){f.__pictorialAnimationIndex=u,f.__pictorialRepeatTimes=c,u<c?wh(f,null,g(u),r,i):wh(f,null,{scaleX:0,scaleY:0},r,i,function(){n.remove(f)}),u++});u<c;u++){var h=A7(r);h.__pictorialAnimationIndex=u,h.__pictorialRepeatTimes=c,n.add(h);var p=g(u);wh(h,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},r,i)}function g(f){var v=s.slice(),m=r.pxSign,y=f;return(r.symbolRepeatDirection==="start"?m>0:m<0)&&(y=c-1-f),v[l.index]=d*(y-c/2+.5)+s[l.index],{x:v[0],y:v[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function P7(e,t,r,i){var n=e.__pictorialBundle,o=e.__pictorialMainPath;o?wh(o,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,i):(o=e.__pictorialMainPath=A7(r),n.add(o),wh(o,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,i))}function k7(e,t,r){var i=F({},t.barRectShape),n=e.__pictorialBarRect;n?wh(n,null,{shape:i},t,r):(n=e.__pictorialBarRect=new Ce({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,e.add(n))}function L7(e,t,r,i){if(r.symbolClip){var n=e.__pictorialClipPath,o=F({},r.clipShape),a=t.valueDim,s=r.animationModel,l=r.dataIndex;if(n)Me(n,{shape:o},s,l);else{o[a.wh]=0,n=new Ce({shape:o}),e.__pictorialBundle.setClipPath(n),e.__pictorialClipPath=n;var c={};c[a.wh]=r.clipShape[a.wh],Se[i?"updateProps":"initProps"](n,{shape:c},s,l)}}}function E7(e,t){var r=e.getItemModel(t);return r.getAnimationDelayParams=Bpe,r.isAnimationEnabled=Gpe,r}function Bpe(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function Gpe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function M7(e,t,r,i){var n=new ee,o=new ee;return n.add(o),n.__pictorialBundle=o,o.x=r.bundlePosition[0],o.y=r.bundlePosition[1],r.symbolRepeat?I7(n,t,r):P7(n,t,r),k7(n,r,i),L7(n,t,r,i),n.__pictorialShapeStr=F7(e,r),n.__pictorialSymbolMeta=r,n}function Hpe(e,t,r){var i=r.animationModel,n=r.dataIndex,o=e.__pictorialBundle;Me(o,{x:r.bundlePosition[0],y:r.bundlePosition[1]},i,n),r.symbolRepeat?I7(e,t,r,!0):P7(e,t,r,!0),k7(e,r,!0),L7(e,t,r,!0)}function T7(e,t,r,i){var n=i.__pictorialBarRect;n&&n.removeTextContent();var o=[];QR(i,function(a){o.push(a)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(r=null),D(o,function(a){xn(a,{scaleX:0,scaleY:0},r,t,function(){i.parent&&i.parent.remove(i)})}),e.setItemGraphicEl(t,null)}function F7(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function QR(e,t,r){D(e.__pictorialBundle.children(),function(i){i!==e.__pictorialBarRect&&t.call(r,i)})}function wh(e,t,r,i,n,o){t&&e.attr(t),i.symbolClip&&!n?r&&e.attr(r):r&&Se[n?"updateProps":"initProps"](e,r,i.animationModel,i.dataIndex,o)}function _7(e,t,r){var i=r.dataIndex,n=r.itemModel,o=n.getModel("emphasis"),a=o.getModel("itemStyle").getItemStyle(),s=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),c=n.getShallow("cursor"),u=o.get("focus"),d=o.get("blurScope"),h=o.get("scale");QR(e,function(f){if(f instanceof vt){var v=f.style;f.useStyle(F({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},r.style))}else f.useStyle(r.style);var m=f.ensureState("emphasis");m.style=a,h&&(m.scaleX=f.scaleX*1.1,m.scaleY=f.scaleY*1.1),f.ensureState("blur").style=s,f.ensureState("select").style=l,c&&(f.cursor=c),f.z2=r.z2});var p=t.valueDim.posDesc[+(r.boundingLength>0)],g=e.__pictorialBarRect;g.ignoreClip=!0,ft(g,at(n),{labelFetcher:t.seriesModel,labelDataIndex:i,defaultText:yo(t.seriesModel.getData(),i),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:p}),We(e,u,d,o.get("disabled"))}function R7(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var O7=Fpe;var Upe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return t.prototype.getInitialData=function(r){return r.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Wr(eh.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(eh),N7=Upe;function JR(e){e.registerChartView(O7),e.registerSeriesModel(N7),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,se(Dw,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ew("pictorialBar"))}var Wpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._layers=[],r}return t.prototype.render=function(r,i,n){var o=r.getData(),a=this,s=this.group,l=r.getLayerSeries(),c=o.getLayout("layoutInfo"),u=c.rect,d=c.boundaryGap;s.x=0,s.y=u.y+d[0];function h(v){return v.name}var p=new Pr(this._layersSeries||[],l,h,h),g=[];p.add($(f,this,"add")).update($(f,this,"update")).remove($(f,this,"remove")).execute();function f(v,m,y){var w=a._layers;if(v==="remove"){s.remove(w[m]);return}for(var C=[],S=[],b,x=l[m].indices,E=0;E<x.length;E++){var M=o.getItemLayout(x[E]),T=M.x,_=M.y0,R=M.y;C.push(T,_),S.push(T,_+R),b=o.getItemVisual(x[E],"style")}var A,P=o.getItemLayout(x[0]),k=r.getModel("label"),L=k.get("margin"),V=r.getModel("emphasis");if(v==="add"){var z=g[m]=new ee;A=new eC({shape:{points:C,stackedOnPoints:S,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),z.add(A),s.add(z),r.isAnimationEnabled()&&A.setClipPath(jpe(A.getBoundingRect(),r,function(){A.removeClipPath()}))}else{var z=w[y];A=z.childAt(0),s.add(z),g[m]=z,Me(A,{shape:{points:C,stackedOnPoints:S}},r),nr(A)}ft(A,at(r),{labelDataIndex:x[E-1],defaultText:o.getName(x[E-1]),inheritColor:b.fill},{normal:{verticalAlign:"middle"}}),A.setTextConfig({position:null,local:!0});var B=A.getTextContent();B&&(B.x=P.x-L,B.y=P.y0+P.y/2),A.useStyle(b),o.setItemGraphicEl(m,A),Dt(A,r),We(A,V.get("focus"),V.get("blurScope"),V.get("disabled"))}this._layersSeries=l,this._layers=g},t.type="themeRiver",t}(Le);function jpe(e,t,r){var i=new Ce({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return je(i,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,r),i}var z7=Wpe;var eA=2,$pe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new oa($(this.getData,this),$(this.getRawData,this))},t.prototype.fixData=function(r){var i=r.length,n={},o=Jp(r,function(h){return n.hasOwnProperty(h[0]+"")||(n[h[0]+""]=-1),h[2]}),a=[];o.buckets.each(function(h,p){a.push({name:p,dataList:h})});for(var s=a.length,l=0;l<s;++l){for(var c=a[l].name,u=0;u<a[l].dataList.length;++u){var d=a[l].dataList[u][0]+"";n[d]=l}for(var d in n)n.hasOwnProperty(d)&&n[d]!==l&&(n[d]=l,r[i]=[d,0,c],i++)}return r},t.prototype.getInitialData=function(r,i){for(var n=this.getReferringComponents("singleAxis",dt).models[0],o=n.get("type"),a=Pe(r.data,function(g){return g[2]!==void 0}),s=this.fixData(a||[]),l=[],c=this.nameMap=Y(),u=0,d=0;d<s.length;++d)l.push(s[d][eA]),c.get(s[d][eA])||(c.set(s[d][eA],u),u++);var h=go(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Uc(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,p=new Pt(h,this);return p.initData(s),p},t.prototype.getLayerSeries=function(){for(var r=this.getData(),i=r.count(),n=[],o=0;o<i;++o)n[o]=o;var a=r.mapDimension("single"),s=Jp(n,function(c){return r.get("name",c)}),l=[];return s.buckets.each(function(c,u){c.sort(function(d,h){return r.get(a,d)-r.get(a,h)}),l.push({name:u,indices:c})}),l},t.prototype.getAxisTooltipData=function(r,i,n){O(r)||(r=r?[r]:[]);for(var o=this.getData(),a=this.getLayerSeries(),s=[],l=a.length,c,u=0;u<l;++u){for(var d=Number.MAX_VALUE,h=-1,p=a[u].indices.length,g=0;g<p;++g){var f=o.get(r[0],a[u].indices[g]),v=Math.abs(f-i);v<=d&&(c=f,d=v,h=a[u].indices[g])}s.push(h)}return{dataIndices:s,nestestValue:c}},t.prototype.formatTooltip=function(r,i,n){var o=this.getData(),a=o.getName(r),s=o.get(o.mapDimension("value"),r);return wt("nameValue",{name:a,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(Be),V7=$pe;function tA(e,t){e.eachSeriesByType("themeRiver",function(r){var i=r.getData(),n=r.coordinateSystem,o={},a=n.getRect();o.rect=a;var s=r.get("boundaryGap"),l=n.getAxis();if(o.boundaryGap=s,l.orient==="horizontal"){s[0]=j(s[0],a.height),s[1]=j(s[1],a.height);var c=a.height-s[0]-s[1];B7(i,r,c)}else{s[0]=j(s[0],a.width),s[1]=j(s[1],a.width);var u=a.width-s[0]-s[1];B7(i,r,u)}i.setLayout("layoutInfo",o)})}function B7(e,t,r){if(e.count())for(var i=t.coordinateSystem,n=t.getLayerSeries(),o=e.mapDimension("single"),a=e.mapDimension("value"),s=N(n,function(v){return N(v.indices,function(m){var y=i.dataToPoint(e.get(o,m));return y[1]=e.get(a,m),y})}),l=Ype(s),c=l.y0,u=r/l.max,d=n.length,h=n[0].indices.length,p,g=0;g<h;++g){p=c[g]*u,e.setItemLayout(n[0].indices[g],{layerIndex:0,x:s[0][g][0],y0:p,y:s[0][g][1]*u});for(var f=1;f<d;++f)p+=s[f-1][g][1]*u,e.setItemLayout(n[f].indices[g],{layerIndex:f,x:s[f][g][0],y0:p,y:s[f][g][1]*u})}}function Ype(e){for(var t=e.length,r=e[0].length,i=[],n=[],o=0,a=0;a<r;++a){for(var s=0,l=0;l<t;++l)s+=e[l][a][1];s>o&&(o=s),i.push(s)}for(var c=0;c<r;++c)n[c]=(o-i[c])/2;o=0;for(var u=0;u<r;++u){var d=i[u]+n[u];d>o&&(o=d)}return{y0:n,max:o}}function rA(e){e.registerChartView(z7),e.registerSeriesModel(V7),e.registerLayout(tA),e.registerProcessor(Co("themeRiver"))}var qpe=2,Kpe=4,Zpe=function(e){I(t,e);function t(r,i,n,o){var a=e.call(this)||this;a.z2=qpe,a.textConfig={inside:!0},ae(a).seriesIndex=i.seriesIndex;var s=new De({z2:Kpe,silent:r.getModel().get(["label","silent"])});return a.setTextContent(s),a.updateData(!0,r,i,n,o),a}return t.prototype.updateData=function(r,i,n,o,a){this.node=i,i.piece=this,n=n||this._seriesModel,o=o||this._ecModel;var s=this;ae(s).dataIndex=i.dataIndex;var l=i.getModel(),c=l.getModel("emphasis"),u=i.getLayout(),d=F({},u);d.label=null;var h=i.getVisual("style");h.lineJoin="bevel";var p=i.getVisual("decal");p&&(h.decal=po(p,a));var g=na(l.getModel("itemStyle"),d,!0);F(d,g),D(cr,function(y){var w=s.ensureState(y),C=l.getModel([y,"itemStyle"]);w.style=C.getItemStyle();var S=na(C,d);S&&(w.shape=S)}),r?(s.setShape(d),s.shape.r=u.r0,je(s,{shape:{r:u.r}},n,i.dataIndex)):(Me(s,{shape:d},n),nr(s)),s.useStyle(h),this._updateLabel(n);var f=l.getShallow("cursor");f&&s.attr("cursor",f),this._seriesModel=n||this._seriesModel,this._ecModel=o||this._ecModel;var v=c.get("focus"),m=v==="ancestor"?i.getAncestorsIndices():v==="descendant"?i.getDescendantIndices():v;We(this,m,c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(r){var i=this,n=this.node.getModel(),o=n.getModel("label"),a=this.node.getLayout(),s=a.endAngle-a.startAngle,l=(a.startAngle+a.endAngle)/2,c=Math.cos(l),u=Math.sin(l),d=this,h=d.getTextContent(),p=this.node.dataIndex,g=o.get("minAngle")/180*Math.PI,f=o.get("show")&&!(g!=null&&Math.abs(s)<g);h.ignore=!f,D(Vs,function(m){var y=m==="normal"?n.getModel("label"):n.getModel([m,"label"]),w=m==="normal",C=w?h:h.ensureState(m),S=r.getFormattedLabel(p,m);w&&(S=S||i.node.name),C.style=Ke(y,{},null,m!=="normal",!0),S&&(C.style.text=S);var b=y.get("show");b!=null&&!w&&(C.ignore=!b);var x=v(y,"position"),E=w?d:d.states[m],M=E.style.fill;E.textConfig={outsideFill:y.get("color")==="inherit"?M:null,inside:x!=="outside"};var T,_=v(y,"distance")||0,R=v(y,"align"),A=v(y,"rotate"),P=Math.PI*.5,k=Math.PI*1.5,L=_r(A==="tangential"?Math.PI/2-l:l),V=L>P&&!gc(L-P)&&L<k;x==="outside"?(T=a.r+_,R=V?"right":"left"):!R||R==="center"?(s===2*Math.PI&&a.r0===0?T=0:T=(a.r+a.r0)/2,R="center"):R==="left"?(T=a.r0+_,R=V?"right":"left"):R==="right"&&(T=a.r-_,R=V?"left":"right"),C.style.align=R,C.style.verticalAlign=v(y,"verticalAlign")||"middle",C.x=T*c+a.cx,C.y=T*u+a.cy;var z=0;A==="radial"?z=_r(-l)+(V?Math.PI:0):A==="tangential"?z=_r(Math.PI/2-l)+(V?Math.PI:0):be(A)&&(z=A*Math.PI/180),C.rotation=_r(z)});function v(m,y){var w=m.get(y);return w??o.get(y)}h.dirtyStyle()},t}(qt),iA=Zpe;var UC="sunburstRootToNode",G7="sunburstHighlight",Xpe="sunburstUnhighlight";function H7(e){e.registerAction({type:UC,update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"sunburst",query:t},i);function i(n,o){var a=Ka(t,[UC],n);if(a){var s=n.getViewRoot();s&&(t.direction=sh(s,a.node)?"rollUp":"drillDown"),n.resetViewRoot(a.node)}}}),e.registerAction({type:G7,update:"none"},function(t,r,i){t=F({},t),r.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(o){var a=Ka(t,[G7],o);a&&(t.dataIndex=a.node.dataIndex)}i.dispatchAction(F(t,{type:"highlight"}))}),e.registerAction({type:Xpe,update:"updateView"},function(t,r,i){t=F({},t),i.dispatchAction(F(t,{type:"downplay"}))})}var Qpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,o){var a=this;this.seriesModel=r,this.api=n,this.ecModel=i;var s=r.getData(),l=s.tree.root,c=r.getViewRoot(),u=this.group,d=r.get("renderLabelForZeroData"),h=[];c.eachNode(function(y){h.push(y)});var p=this._oldChildren||[];g(h,p),m(l,c),this._initEvents(),this._oldChildren=h;function g(y,w){if(y.length===0&&w.length===0)return;new Pr(w,y,C,C).add(S).update(S).remove(se(S,null)).execute();function C(b){return b.getId()}function S(b,x){var E=b==null?null:y[b],M=x==null?null:w[x];f(E,M)}}function f(y,w){if(!d&&y&&!y.getValue()&&(y=null),y!==l&&w!==l){if(w&&w.piece)y?(w.piece.updateData(!1,y,r,i,n),s.setItemGraphicEl(y.dataIndex,w.piece)):v(w);else if(y){var C=new iA(y,r,i,n);u.add(C),s.setItemGraphicEl(y.dataIndex,C)}}}function v(y){y&&y.piece&&(u.remove(y.piece),y.piece=null)}function m(y,w){w.depth>0?(a.virtualPiece?a.virtualPiece.updateData(!1,y,r,i,n):(a.virtualPiece=new iA(y,r,i,n),u.add(a.virtualPiece)),w.piece.off("click"),a.virtualPiece.on("click",function(C){a._rootToNode(w.parentNode)})):a.virtualPiece&&(u.remove(a.virtualPiece),a.virtualPiece=null)}},t.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(i){var n=!1,o=r.seriesModel.getViewRoot();o.eachNode(function(a){if(!n&&a.piece&&a.piece===i.target){var s=a.getModel().get("nodeClick");if(s==="rootToNode")r._rootToNode(a);else if(s==="link"){var l=a.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";Oc(c,u)}}n=!0}})})},t.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:UC,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},t.prototype.containPoint=function(r,i){var n=i.getData(),o=n.getItemLayout(0);if(o){var a=r[0]-o.cx,s=r[1]-o.cy,l=Math.sqrt(a*a+s*s);return l<=o.r&&l>=o.r0}},t.type="sunburst",t}(Le),U7=Qpe;var Jpe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r,i){var n={name:r.name,children:r.data};W7(n);var o=this._levelModels=N(r.levels||[],function(l){return new Ve(l,this,i)},this),a=ah.createTree(n,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var d=a.getNodeByDataIndex(u),h=o[d.depth];return h&&(c.parentModel=h),c})}return a.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(r){var i=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(r);return i.treePathInfo=ll(n,this),i},t.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var i=this.getRawData().tree.root;(!r||r!==i&&!i.contains(r))&&(this._viewRoot=i)},t.prototype.enableAriaDecal=function(){vf(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(Be);function W7(e){var t=0;D(e.children,function(i){W7(i);var n=i.value;O(n)&&(n=n[0]),t+=n});var r=e.value;O(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=t),r<0&&(r=0),O(e.value)?e.value[0]=r:e.value=r}var j7=Jpe;var $7=Math.PI/180;function nA(e,t,r){t.eachSeriesByType(e,function(i){var n=i.get("center"),o=i.get("radius");O(o)||(o=[0,o]),O(n)||(n=[n,n]);var a=r.getWidth(),s=r.getHeight(),l=Math.min(a,s),c=j(n[0],a),u=j(n[1],s),d=j(o[0],l/2),h=j(o[1],l/2),p=-i.get("startAngle")*$7,g=i.get("minAngle")*$7,f=i.getData().tree.root,v=i.getViewRoot(),m=v.depth,y=i.get("sort");y!=null&&Y7(v,y);var w=0;D(v.children,function(L){!isNaN(L.getValue())&&w++});var C=v.getValue(),S=Math.PI/(C||w)*2,b=v.depth>0,x=v.height-(b?-1:1),E=(h-d)/(x||1),M=i.get("clockwise"),T=i.get("stillShowZeroSum"),_=M?1:-1,R=function(L,V){if(L){var z=V;if(L!==f){var B=L.getValue(),K=C===0&&T?S:B*S;K<g&&(K=g),z=V+_*K;var X=L.depth-m-(b?-1:1),oe=d+E*X,ye=d+E*(X+1),we=i.getLevelModel(L);if(we){var Oe=we.get("r0",!0),$e=we.get("r",!0),Ne=we.get("radius",!0);Ne!=null&&(Oe=Ne[0],$e=Ne[1]),Oe!=null&&(oe=j(Oe,l/2)),$e!=null&&(ye=j($e,l/2))}L.setLayout({angle:K,startAngle:V,endAngle:z,clockwise:M,cx:c,cy:u,r0:oe,r:ye})}if(L.children&&L.children.length){var xe=0;D(L.children,function(ze){xe+=R(ze,V+xe)})}return z-V}};if(b){var A=d,P=d+E,k=Math.PI*2;f.setLayout({angle:k,startAngle:p,endAngle:p+k,clockwise:M,cx:c,cy:u,r0:A,r:P})}R(v,p)})}function Y7(e,t){var r=e.children||[];e.children=ege(r,t),r.length&&D(e.children,function(i){Y7(i,t)})}function ege(e,t){if(Z(t)){var r=N(e,function(n,o){var a=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return a}},index:o}});return r.sort(function(n,o){return t(n.params,o.params)}),N(r,function(n){return e[n.index]})}else{var i=t==="asc";return e.sort(function(n,o){var a=(n.getValue()-o.getValue())*(i?1:-1);return a===0?(n.dataIndex-o.dataIndex)*(i?-1:1):a})}}function oA(e){var t={};function r(i,n,o){for(var a=i;a&&a.depth>1;)a=a.parentNode;var s=n.getColorFromPalette(a.name||a.dataIndex+"",t);return i.depth>1&&H(s)&&(s=by(s,(i.depth-1)/(o-1)*.5)),s}e.eachSeriesByType("sunburst",function(i){var n=i.getData(),o=n.tree;o.eachNode(function(a){var s=a.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=r(a,i,o.root.height));var c=n.ensureUniqueItemVisual(a.dataIndex,"style");F(c,l)})})}function aA(e){e.registerChartView(U7),e.registerSeriesModel(j7),e.registerLayout(se(nA,"sunburst")),e.registerProcessor(se(Co,"sunburst")),e.registerVisual(oA),H7(e)}var sA={color:"fill",borderColor:"stroke"},q7={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},sa=he(),tge=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,i){return Sr(null,this)},t.prototype.getDataParams=function(r,i,n){var o=e.prototype.getDataParams.call(this,r,i);return n&&(o.info=sa(n).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Be),K7=tge;function rge(e,t){return t=t||[0,0],N(["x","y"],function(r,i){var n=this.getAxis(r),o=t[i],a=e[i]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(o-a)-n.dataToCoord(o+a))},this)}function lA(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:$(rge,e)}}}function ige(e,t){return t=t||[0,0],N([0,1],function(r){var i=t[r],n=e[r]/2,o=[],a=[];return o[r]=i-n,a[r]=i+n,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function cA(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:$(ige,e)}}}function nge(e,t){var r=this.getAxis(),i=t instanceof Array?t[0]:t,n=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(i-n)-r.dataToCoord(i+n))}function uA(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:$(nge,e)}}}function oge(e,t){return t=t||[0,0],N(["Radius","Angle"],function(r,i){var n="get"+r+"Axis",o=this[n](),a=t[i],s=e[i]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function dA(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),i=t.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:i[1],r0:i[0]},api:{coord:function(n){var o=t.dataToRadius(n[0]),a=r.dataToAngle(n[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:$(oge,e)}}}function hA(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(i,n){return e.dataToPoint(i,n)}}}}function WC(e,t,r,i){return e&&(e.legacy||e.legacy!==!1&&!r&&!i&&t!=="tspan"&&(t==="text"||ne(e,"text")))}function jC(e,t,r){var i=e,n,o,a;if(t==="text")a=i;else{a={},ne(i,"text")&&(a.text=i.text),ne(i,"rich")&&(a.rich=i.rich),ne(i,"textFill")&&(a.fill=i.textFill),ne(i,"textStroke")&&(a.stroke=i.textStroke),ne(i,"fontFamily")&&(a.fontFamily=i.fontFamily),ne(i,"fontSize")&&(a.fontSize=i.fontSize),ne(i,"fontStyle")&&(a.fontStyle=i.fontStyle),ne(i,"fontWeight")&&(a.fontWeight=i.fontWeight),o={type:"text",style:a,silent:!0},n={};var s=ne(i,"textPosition");r?n.position=s?i.textPosition:"inside":s&&(n.position=i.textPosition),ne(i,"textPosition")&&(n.position=i.textPosition),ne(i,"textOffset")&&(n.offset=i.textOffset),ne(i,"textRotation")&&(n.rotation=i.textRotation),ne(i,"textDistance")&&(n.distance=i.textDistance)}return Z7(a,e),D(a.rich,function(l){Z7(l,l)}),{textConfig:n,textContent:o}}function Z7(e,t){t&&(t.font=t.textFont||t.font,ne(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),ne(t,"textAlign")&&(e.align=t.textAlign),ne(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),ne(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),ne(t,"textWidth")&&(e.width=t.textWidth),ne(t,"textHeight")&&(e.height=t.textHeight),ne(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),ne(t,"textPadding")&&(e.padding=t.textPadding),ne(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),ne(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),ne(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),ne(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),ne(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),ne(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),ne(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function pA(e,t,r){var i=e;i.textPosition=i.textPosition||r.position||"inside",r.offset!=null&&(i.textOffset=r.offset),r.rotation!=null&&(i.textRotation=r.rotation),r.distance!=null&&(i.textDistance=r.distance);var n=i.textPosition.indexOf("inside")>=0,o=e.fill||"#000";X7(i,t);var a=i.textFill==null;return n?a&&(i.textFill=r.insideFill||"#fff",!i.textStroke&&r.insideStroke&&(i.textStroke=r.insideStroke),!i.textStroke&&(i.textStroke=o),i.textStrokeWidth==null&&(i.textStrokeWidth=2)):(a&&(i.textFill=e.fill||r.outsideFill||"#000"),!i.textStroke&&r.outsideStroke&&(i.textStroke=r.outsideStroke)),i.text=t.text,i.rich=t.rich,D(t.rich,function(s){X7(s,s)}),i}function X7(e,t){t&&(ne(t,"fill")&&(e.textFill=t.fill),ne(t,"stroke")&&(e.textStroke=t.fill),ne(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),ne(t,"font")&&(e.font=t.font),ne(t,"fontStyle")&&(e.fontStyle=t.fontStyle),ne(t,"fontWeight")&&(e.fontWeight=t.fontWeight),ne(t,"fontSize")&&(e.fontSize=t.fontSize),ne(t,"fontFamily")&&(e.fontFamily=t.fontFamily),ne(t,"align")&&(e.textAlign=t.align),ne(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),ne(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),ne(t,"width")&&(e.textWidth=t.width),ne(t,"height")&&(e.textHeight=t.height),ne(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),ne(t,"padding")&&(e.textPadding=t.padding),ne(t,"borderColor")&&(e.textBorderColor=t.borderColor),ne(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),ne(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),ne(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),ne(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),ne(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),ne(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),ne(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),ne(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),ne(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),ne(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var tU={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Q7=me(tU),Jrt=Er($i,function(e,t){return e[t]=1,e},{}),eit=$i.join(", "),Rf=["","style","shape","extra"],Ch=he();function gA(e,t,r,i,n){var o=e+"Animation",a=Ko(e,i,n)||{},s=Ch(t).userDuring;return a.duration>0&&(a.during=s?$(uge,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),F(a,r[o]),a}function bh(e,t,r,i){i=i||{};var n=i.dataIndex,o=i.isInit,a=i.clearStyle,s=r.isAnimationEnabled(),l=Ch(e),c=t.style;l.userDuring=t.during;var u={},d={};if(hge(e,t,d),eU("shape",t,d),eU("extra",t,d),!o&&s&&(dge(e,t,u),J7("shape",e,t,u),J7("extra",e,t,u),pge(e,t,c,u)),d.style=c,age(e,d,a),lge(e,t),s)if(o){var h={};D(Rf,function(g){var f=g?t[g]:t;f&&f.enterFrom&&(g&&(h[g]=h[g]||{}),F(g?h[g]:h,f.enterFrom))});var p=gA("enter",e,t,r,n);p.duration>0&&e.animateFrom(h,p)}else sge(e,t,n||0,r,u);fA(e,t),c?e.dirty():e.markRedraw()}function fA(e,t){for(var r=Ch(e).leaveToProps,i=0;i<Rf.length;i++){var n=Rf[i],o=n?t[n]:t;o&&o.leaveTo&&(r||(r=Ch(e).leaveToProps={}),n&&(r[n]=r[n]||{}),F(n?r[n]:r,o.leaveTo))}}function Sh(e,t,r,i){if(e){var n=e.parent,o=Ch(e).leaveToProps;if(o){var a=gA("update",e,t,r,0);a.done=function(){n.remove(e),i&&i()},e.animateTo(o,a)}else n.remove(e),i&&i()}}function dl(e){return e==="all"}function age(e,t,r){var i=t.style;if(!e.isGroup&&i){if(r){e.useStyle({});for(var n=e.animators,o=0;o<n.length;o++){var a=n[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(i)}t&&(t.style=null,t&&e.attr(t),t.style=i)}function sge(e,t,r,i,n){if(n){var o=gA("update",e,t,i,r);o.duration>0&&e.animateFrom(n,o)}}function lge(e,t){ne(t,"silent")&&(e.silent=t.silent),ne(t,"ignore")&&(e.ignore=t.ignore),e instanceof Yt&&ne(t,"invisible")&&(e.invisible=t.invisible),e instanceof ce&&ne(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var la={},cge={setTransform:function(e,t){return la.el[e]=t,this},getTransform:function(e){return la.el[e]},setShape:function(e,t){var r=la.el,i=r.shape||(r.shape={});return i[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=la.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=la.el,i=r.style;return i&&(i[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=la.el.style;if(t)return t[e]},setExtra:function(e,t){var r=la.el.extra||(la.el.extra={});return r[e]=t,this},getExtra:function(e){var t=la.el.extra;if(t)return t[e]}};function uge(){var e=this,t=e.el;if(t){var r=Ch(t).userDuring,i=e.userDuring;if(r!==i){e.el=e.userDuring=null;return}la.el=t,i(cge)}}function J7(e,t,r,i){var n=r[e];if(n){var o=t[e],a;if(o){var s=r.transition,l=n.transition;if(l)if(!a&&(a=i[e]={}),dl(l))F(a,o);else for(var c=Ge(l),u=0;u<c.length;u++){var d=c[u],h=o[d];a[d]=h}else if(dl(s)||pe(s,e)>=0){!a&&(a=i[e]={});for(var p=me(o),u=0;u<p.length;u++){var d=p[u],h=o[d];gge(n[d],h)&&(a[d]=h)}}}}}function eU(e,t,r){var i=t[e];if(i)for(var n=r[e]={},o=me(i),a=0;a<o.length;a++){var s=o[a];n[s]=sc(i[s])}}function dge(e,t,r){for(var i=t.transition,n=dl(i)?$i:Ge(i||[]),o=0;o<n.length;o++){var a=n[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function hge(e,t,r){for(var i=0;i<Q7.length;i++){var n=Q7[i],o=tU[n],a=t[n];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var i=0;i<$i.length;i++){var s=$i[i];t[s]!=null&&(r[s]=t[s])}}function pge(e,t,r,i){if(r){var n=e.style,o;if(n){var a=r.transition,s=t.transition;if(a&&!dl(a)){var l=Ge(a);!o&&(o=i.style={});for(var c=0;c<l.length;c++){var u=l[c],d=n[u];o[u]=d}}else if(e.getAnimationStyleProps&&(dl(s)||dl(a)||pe(s,"style")>=0)){var h=e.getAnimationStyleProps(),p=h?h.style:null;if(p){!o&&(o=i.style={});for(var g=me(r),c=0;c<g.length;c++){var u=g[c];if(p[u]){var d=n[u];o[u]=d}}}}}}}function gge(e,t){return Vt(e)?e!==t:e!=null&&isFinite(e)}var rU=he(),fge=["percent","easing","shape","style","extra"];function $C(e){e.stopAnimation("keyframe"),e.attr(rU(e))}function xh(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(O(t)){D(t,function(s){xh(e,s,r)});return}var i=t.keyframes,n=t.duration;if(r&&n==null){var o=Ko("enter",r,0);n=o&&o.duration}if(!(!i||!n)){var a=rU(e);D(Rf,function(s){if(!(s&&!e[s])){var l,c=!1;i.sort(function(u,d){return u.percent-d.percent}),D(i,function(u){var d=e.animators,h=s?u[s]:u;if(h){var p=me(h);if(s||(p=Pe(p,function(v){return pe(fge,v)<0})),!!p.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var g=0;g<d.length;g++)d[g]!==l&&d[g].targetName===l.targetName&&d[g].stopTracks(p);s&&(a[s]=a[s]||{});var f=s?a[s]:a;D(p,function(v){f[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(n*u.percent,h,p,u.easing)}}}),l&&l.delay(t.delay||0).duration(n).start(t.easing)}})}}}var Xa="emphasis",hl="normal",bA="blur",SA="select",pl=[hl,Xa,bA,SA],vA={normal:["itemStyle"],emphasis:[Xa,"itemStyle"],blur:[bA,"itemStyle"],select:[SA,"itemStyle"]},mA={normal:["label"],emphasis:[Xa,"label"],blur:[bA,"label"],select:[SA,"label"]},vge=["x","y"],mge="e\0\0",Fn={normal:{},emphasis:{},blur:{},select:{}},yge={cartesian2d:lA,geo:cA,single:uA,polar:dA,calendar:hA};function wA(e){return e instanceof ce}function CA(e){return e instanceof Yt}function wge(e,t){t.copyTransform(e),CA(t)&&CA(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,wA(t)&&wA(e)&&t.setShape(e.shape))}var Cge=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,c=iU(r,s,i,n);a||l.removeAll(),s.diff(a).add(function(d){yA(n,null,d,c(d,o),r,l,s)}).remove(function(d){var h=a.getItemGraphicEl(d);h&&Sh(h,sa(h).option,r)}).update(function(d,h){var p=a.getItemGraphicEl(h);yA(n,p,d,c(d,o),r,l,s)}).execute();var u=r.get("clip",!0)?ia(r.coordinateSystem,!1,r):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,i,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,i,n,o,a){var s=i.getData(),l=iU(i,s,n,o),c=this._progressiveEls=[];function u(p){p.isGroup||(p.incremental=!0,p.ensureState("emphasis").hoverLayer=!0)}for(var d=r.start;d<r.end;d++){var h=yA(null,null,d,l(d,a),i,this.group,s);h&&(h.traverse(u),c.push(h))}},t.prototype.eachRendered=function(r){ri(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,i,n,o){var a=i.element;if(a==null||n.name===a)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===a)return!0;return!1},t.type="custom",t}(Le),sU=Cge;function xA(e){var t=e.type,r;if(t==="path"){var i=e.shape,n=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=uU(i);r=Ld(o,null,n,i.layout||"center"),sa(r).customPathData=o}else if(t==="image")r=new vt({}),sa(r).customImagePath=e.style.image;else if(t==="text")r=new De({});else if(t==="group")r=new ee;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=gg(t);if(!a){var s="";qe(s)}r=new a}return sa(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function DA(e,t,r,i,n,o,a){$C(t);var s=n&&n.normal.cfg;s&&t.setTextConfig(s),i&&i.transition==null&&(i.transition=vge);var l=i&&i.style;if(l){if(t.type==="text"){var c=l;ne(c,"textFill")&&(c.fill=c.textFill),ne(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,d=wA(t)?l.decal:null;e&&d&&(d.dirty=!0,u=po(d,e)),l.__decalPattern=u}if(CA(t)&&l){var u=l.__decalPattern;u&&(l.decal=u)}bh(t,i,o,{dataIndex:r,isInit:a,clearStyle:!0}),xh(t,i.keyframeAnimation,o)}function lU(e,t,r,i,n){var o=t.isGroup?null:t,a=n&&n[e].cfg;if(o){var s=o.ensureState(e);if(i===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=i||null;a&&(s.textConfig=a),to(o)}}function bge(e,t,r){if(!e.isGroup){var i=e,n=r.currentZ,o=r.currentZLevel;i.z=n,i.zlevel=o;var a=t.z2;a!=null&&(i.z2=a||0);for(var s=0;s<pl.length;s++)Sge(i,t,pl[s])}}function Sge(e,t,r){var i=r===hl,n=i?t:YC(t,r),o=n?n.z2:null,a;o!=null&&(a=i?e:e.ensureState(r),a.z2=o||0)}function iU(e,t,r,i){var n=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):yge[o.type](o));for(var s=Q({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:C,style:b,ordinalRawValue:S,styleEmphasis:x,visual:T,barLayout:_,currentSeriesIndices:R,font:A},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:xge(e.getData())},c,u,d={},h={},p={},g={},f=0;f<pl.length;f++){var v=pl[f];p[v]=e.getModel(vA[v]),g[v]=e.getModel(mA[v])}function m(P){return P===c?u||(u=t.getItemModel(P)):t.getItemModel(P)}function y(P,k){return t.hasItemOption?P===c?d[k]||(d[k]=m(P).getModel(vA[k])):m(P).getModel(vA[k]):p[k]}function w(P,k){return t.hasItemOption?P===c?h[k]||(h[k]=m(P).getModel(mA[k])):m(P).getModel(mA[k]):g[k]}return function(P,k){return c=P,u=null,d={},h={},n&&n(Q({dataIndexInside:P,dataIndex:t.getRawIndex(P),actionType:k?k.type:null},l),s)};function C(P,k){return k==null&&(k=c),t.getStore().get(t.getDimensionIndex(P||0),k)}function S(P,k){k==null&&(k=c),P=P||0;var L=t.getDimensionInfo(P);if(!L){var V=t.getDimensionIndex(P);return V>=0?t.getStore().get(V,k):void 0}var z=t.get(L.name,k),B=L&&L.ordinalMeta;return B?B.categories[z]:z}function b(P,k){k==null&&(k=c);var L=t.getItemVisual(k,"style"),V=L&&L.fill,z=L&&L.opacity,B=y(k,hl).getItemStyle();V!=null&&(B.fill=V),z!=null&&(B.opacity=z);var K={inheritColor:H(V)?V:"#000"},X=w(k,hl),oe=Ke(X,null,K,!1,!0);oe.text=X.getShallow("show")?de(e.getFormattedLabel(k,hl),yo(t,k)):null;var ye=vg(X,K,!1);return M(P,B),B=pA(B,oe,ye),P&&E(B,P),B.legacy=!0,B}function x(P,k){k==null&&(k=c);var L=y(k,Xa).getItemStyle(),V=w(k,Xa),z=Ke(V,null,null,!0,!0);z.text=V.getShallow("show")?ur(e.getFormattedLabel(k,Xa),e.getFormattedLabel(k,hl),yo(t,k)):null;var B=vg(V,null,!0);return M(P,L),L=pA(L,z,B),P&&E(L,P),L.legacy=!0,L}function E(P,k){for(var L in k)ne(k,L)&&(P[L]=k[L])}function M(P,k){P&&(P.textFill&&(k.textFill=P.textFill),P.textPosition&&(k.textPosition=P.textPosition))}function T(P,k){if(k==null&&(k=c),ne(sA,P)){var L=t.getItemVisual(k,"style");return L?L[sA[P]]:null}if(ne(q7,P))return t.getItemVisual(k,P)}function _(P){if(o.type==="cartesian2d"){var k=o.getBaseAxis();return jV(Q({axis:k},P))}}function R(){return r.getCurrentSeriesIndices()}function A(P){return Od(P,r)}}function xge(e){var t={};return D(e.dimensions,function(r){var i=e.getDimensionInfo(r);if(!i.isExtraCoord){var n=i.coordDim,o=t[n]=t[n]||[];o[i.coordDimIndex]=e.getDimensionIndex(r)}}),t}function yA(e,t,r,i,n,o,a){if(!i){o.remove(t);return}var s=EA(e,t,r,i,n,o);return s&&a.setItemGraphicEl(r,s),s&&We(s,i.focus,i.blurScope,i.emphasisDisabled),s}function EA(e,t,r,i,n,o){var a=-1,s=t;t&&cU(t,i,n)&&(a=pe(o.childrenRef(),t),t=null);var l=!t,c=t;c?c.clearStates():(c=xA(i),s&&wge(s,c)),i.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),Fn.normal.cfg=Fn.normal.conOpt=Fn.emphasis.cfg=Fn.emphasis.conOpt=Fn.blur.cfg=Fn.blur.conOpt=Fn.select.cfg=Fn.select.conOpt=null,Fn.isLegacy=!1,Ege(c,r,i,n,l,Fn),Dge(c,r,i,n,l),DA(e,c,r,i,Fn,n,l),ne(i,"info")&&(sa(c).info=i.info);for(var u=0;u<pl.length;u++){var d=pl[u];if(d!==hl){var h=YC(i,d),p=MA(i,h,d);lU(d,c,h,p,Fn)}}return bge(c,i,n),i.type==="group"&&Mge(e,c,r,i,n),a>=0?o.replaceAt(c,a):o.add(c),c}function cU(e,t,r){var i=sa(e),n=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||n!=null&&n!==i.customGraphicType||n==="path"&&Age(o)&&uU(o)!==i.customPathData||n==="image"&&ne(a,"image")&&a.image!==i.customImagePath}function Dge(e,t,r,i,n){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&cU(a,o,i)&&(a=null),a||(a=xA(o),e.setClipPath(a)),DA(null,a,t,o,null,i,n)}}function Ege(e,t,r,i,n,o){if(!e.isGroup){nU(r,null,o),nU(r,Xa,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,c=o.select.conOpt;if(a!=null||s!=null||c!=null||l!=null){var u=e.getTextContent();if(a===!1)u&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},u?u.clearStates():(u=xA(a),e.setTextContent(u)),DA(null,u,t,a,null,i,n);for(var d=a&&a.style,h=0;h<pl.length;h++){var p=pl[h];if(p!==hl){var g=o[p].conOpt;lU(p,u,g,MA(a,g,p),null)}}d?u.dirty():u.markRedraw()}}}}function nU(e,t,r){var i=t?YC(e,t):e,n=t?MA(e,i,Xa):e.style,o=e.type,a=i?i.textConfig:null,s=e.textContent,l=s?t?YC(s,t):s:null;if(n&&(r.isLegacy||WC(n,o,!!a,!!l))){r.isLegacy=!0;var c=jC(n,o,!t);!a&&c.textConfig&&(a=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!t&&l){var u=l;!u.type&&(u.type="text")}var d=t?r[t]:r.normal;d.cfg=a,d.conOpt=l}function YC(e,t){return t?e?e[t]:null:e}function MA(e,t,r){var i=t&&t.style;return i==null&&r===Xa&&e&&(i=e.styleEmphasis),i}function Mge(e,t,r,i,n){var o=i.children,a=o?o.length:0,s=i.$mergeChildren,l=s==="byName"||i.diffChildrenByName,c=s===!1;if(!(!a&&!l&&!c)){if(l){_ge({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:n,group:t});return}c&&t.removeAll();for(var u=0;u<a;u++){var d=o[u],h=t.childAt(u);d?(d.ignore==null&&(d.ignore=!1),EA(e,h,r,d,n,t)):h.ignore=!0}for(var p=t.childCount()-1;p>=u;p--){var g=t.childAt(p);Tge(t,g,n)}}}function Tge(e,t,r){t&&Sh(t,sa(e).option,r)}function _ge(e){new Pr(e.oldChildren,e.newChildren,oU,oU,e).add(aU).update(aU).remove(Rge).execute()}function oU(e,t){var r=e&&e.name;return r??mge+t}function aU(e,t){var r=this.context,i=e!=null?r.newChildren[e]:null,n=t!=null?r.oldChildren[t]:null;EA(r.api,n,r.dataIndex,i,r.seriesModel,r.group)}function Rge(e){var t=this.context,r=t.oldChildren[e];r&&Sh(r,sa(r).option,t.seriesModel)}function uU(e){return e&&(e.pathData||e.d)}function Age(e){return e&&(ne(e,"pathData")||ne(e,"d"))}function TA(e){e.registerChartView(sU),e.registerSeriesModel(K7)}var lu=he(),dU=re,_A=$,Ige=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,i,n){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=i,!(!n&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,o,t,r,i);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new ee,this.createPointerEl(s,c,t,r),this.createLabelEl(s,c,t,r),i.getZr().add(s);else{var h=se(hU,r,d);this.updatePointerEl(s,c,h),this.updateLabelEl(s,c,h,r)}gU(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var i=r.get("animation"),n=t.axis,o=n.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(i==="auto"||i==null){var s=this.animationThreshold;if(o&&n.getBandWidth()>s)return!0;if(a){var l=cC(t).seriesDataCount,c=n.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return i===!0},e.prototype.makeElOption=function(t,r,i,n,o){},e.prototype.createPointerEl=function(t,r,i,n){var o=r.pointer;if(o){var a=lu(t).pointerEl=new Se[o.type](dU(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,i,n){if(r.label){var o=lu(t).labelEl=new De(dU(r.label));t.add(o),pU(o,n)}},e.prototype.updatePointerEl=function(t,r,i){var n=lu(t).pointerEl;n&&r.pointer&&(n.setStyle(r.pointer.style),i(n,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,i,n){var o=lu(t).labelEl;o&&(o.setStyle(r.label.style),i(o,{x:r.label.x,y:r.label.y}),pU(o,n))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,i=this._api.getZr(),n=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){n&&i.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=za(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Ci(c.event)},onmousedown:_A(this._onHandleDragMove,this,0,0),drift:_A(this._onHandleDragMove,this),ondragend:_A(this._onHandleDragEnd,this)}),i.add(n)),gU(n,r,!1),n.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");O(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,_n(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){hU(this._axisPointerModel,!r&&this._moveAnimation,this._handle,RA(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(RA(i),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(RA(n)),lu(i).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),i=this._group,n=this._handle;r&&i&&(this._lastGraphicKey=null,i&&r.remove(i),n&&r.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),ja(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,i){return i=i||0,{x:t[i],y:t[1-i],width:r[i],height:r[1-i]}},e}();function hU(e,t,r,i){fU(lu(r).lastProp,i)||(lu(r).lastProp=i,t?Me(r,i,e):(r.stopAnimation(),r.attr(i)))}function fU(e,t){if(J(e)&&J(t)){var r=!0;return D(t,function(i,n){r=r&&fU(e[n],i)}),!!r}else return e===t}function pU(e,t){e[t.get(["label","show"])?"show":"hide"]()}function RA(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function gU(e,t,r){var i=t.get("z"),n=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(i!=null&&(o.z=i),n!=null&&(o.zlevel=n),o.silent=r)})}var Dh=Ige;function Eh(e){var t=e.get("type"),r=e.getModel(t+"Style"),i;return t==="line"?(i=r.getLineStyle(),i.fill=null):t==="shadow"&&(i=r.getAreaStyle(),i.stroke=null),i}function AA(e,t,r,i,n){var o=r.get("value"),a=IA(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=ao(s.get("padding")||0),c=s.getFont(),u=Bo(a,c),d=n.position,h=u.width+l[1]+l[3],p=u.height+l[0]+l[2],g=n.align;g==="right"&&(d[0]-=h),g==="center"&&(d[0]-=h/2);var f=n.verticalAlign;f==="bottom"&&(d[1]-=p),f==="middle"&&(d[1]-=p/2),Pge(d,h,p,i);var v=s.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),e.label={x:d[0],y:d[1],style:Ke(s,{text:a,font:c,fill:s.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function Pge(e,t,r,i){var n=i.getWidth(),o=i.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function IA(e,t,r,i,n){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:n.precision}),a=n.formatter;if(a){var s={value:ef(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};D(i,function(l){var c=r.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&s.seriesData.push(d)}),H(a)?o=a.replace("{value}",o):Z(a)&&(o=a(s))}return o}function Af(e,t,r){var i=Xt();return Si(i,i,r.rotation),Mr(i,i,r.position),Rr([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function qC(e,t,r,i,n,o){var a=kr.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=n.get(["label","margin"]),AA(t,i,n,o,{position:Af(i.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function Mh(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function KC(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}function PA(e,t,r,i,n,o){return{cx:e,cy:t,r0:r,r:i,startAngle:n,endAngle:o,clockwise:!0}}var kge=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,o,a){var s=n.axis,l=s.grid,c=o.get("type"),u=vU(l,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(i,!0));if(c&&c!=="none"){var h=Eh(o),p=Lge[c](s,d,u);p.style=h,r.graphicKey=p.type,r.pointer=p}var g=hf(l.model,n);qC(i,r,g,n,o,a)},t.prototype.getHandleTransform=function(r,i,n){var o=hf(i.axis.grid.model,i,{labelInside:!1});o.labelMargin=n.get(["handle","margin"]);var a=Af(i.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,o){var a=n.axis,s=a.grid,l=a.getGlobalExtent(!0),c=vU(s,a).getOtherAxis(a).getGlobalExtent(),u=a.dim==="x"?0:1,d=[r.x,r.y];d[u]+=i[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var h=(c[1]+c[0])/2,p=[h,h];p[u]=d[u];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:r.rotation,cursorPoint:p,tooltipOption:g[u]}},t}(Dh);function vU(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Lge={line:function(e,t,r){var i=Mh([t,r[0]],[t,r[1]],mU(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=Math.max(1,e.getBandWidth()),n=r[1]-r[0];return{type:"Rect",shape:KC([t-i/2,r[0]],[i,n],mU(e))}}};function mU(e){return e.dim==="x"?0:1}var yU=kge;var Fge=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Ee),wU=Fge;var Qa=he(),Oge=D;function XC(e,t,r){if(!Re.node){var i=t.getZr();Qa(i).records||(Qa(i).records={}),Nge(i,t);var n=Qa(i).records[e]||(Qa(i).records[e]={});n.handler=r}}function Nge(e,t){if(Qa(e).initialized)return;Qa(e).initialized=!0,r("click",se(CU,"click")),r("mousemove",se(CU,"mousemove")),r("globalout",Vge);function r(i,n){e.on(i,function(o){var a=Bge(t);Oge(Qa(e).records,function(s){s&&n(s,o,a.dispatchAction)}),zge(a.pendings,t)})}}function zge(e,t){var r=e.showTip.length,i=e.hideTip.length,n;r?n=e.showTip[r-1]:i&&(n=e.hideTip[i-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function Vge(e,t,r){e.handler("leave",null,r)}function CU(e,t,r,i){t.handler(e,r,i)}function Bge(e){var t={showTip:[],hideTip:[]},r=function(i){var n=t[i.type];n?n.push(i):(i.dispatchAction=r,e.dispatchAction(i))};return{dispatchAction:r,pendings:t}}function If(e,t){if(!Re.node){var r=t.getZr(),i=(Qa(r).records||{})[e];i&&(Qa(r).records[e]=null)}}var Gge=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=i.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";XC("axisPointer",n,function(s,l,c){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,i){If("axisPointer",i)},t.prototype.dispose=function(r,i){If("axisPointer",i)},t.type="axisPointer",t}(He),SU=Gge;function Pf(e,t){var r=[],i=e.seriesIndex,n;if(i==null||!(n=t.getSeriesByIndex(i)))return{point:[]};var o=n.getData(),a=Cn(o,e);if(a==null||a<0||O(a))return{point:[]};var s=o.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,h=c.dim,p=d==="x"||d==="radius"?1:0,g=o.mapDimension(h),f=[];f[p]=o.get(g,a),f[1-p]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(f)||[]}else r=l.dataToPoint(o.getValues(N(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var v=s.getBoundingRect().clone();v.applyTransform(s.transform),r=[v.x+v.width/2,v.y+v.height/2]}return{point:r,el:s}}var xU=he();function kA(e,t,r){var i=e.currTrigger,n=[e.x,e.y],o=e,a=e.dispatchAction||$(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){QC(n)&&(n=Pf({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=QC(n),c=o.axesInfo,u=s.axesInfo,d=i==="leave"||QC(n),h={},p={},g={list:[],map:{}},f={showPointer:se(Uge,p),showTooltip:se(Wge,g)};D(s.coordSysMap,function(m,y){var w=l||m.containPoint(n);D(s.coordSysAxesInfo[y],function(C,S){var b=C.axis,x=qge(c,C);if(!d&&w&&(!c||x)){var E=x&&x.value;E==null&&!l&&(E=b.pointToData(n)),E!=null&&DU(C,E,f,!1,h)}})});var v={};return D(u,function(m,y){var w=m.linkGroup;w&&!p[y]&&D(w.axesInfo,function(C,S){var b=p[S];if(C!==m&&b){var x=b.value;w.mapper&&(x=m.axis.scale.parse(w.mapper(x,EU(C),EU(m)))),v[m.key]=x}})}),D(v,function(m,y){DU(u[y],m,f,!0,h)}),jge(p,u,h),$ge(g,n,e,a),Yge(u,a,r),h}}function DU(e,t,r,i,n){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=Hge(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&n.seriesIndex==null&&F(n,s[0]),!i&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function Hge(e,t){var r=t.axis,i=r.dim,n=e,o=[],a=Number.MAX_VALUE,s=-1;return D(t.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(i),d,h;if(l.getAxisTooltipData){var p=l.getAxisTooltipData(u,e,r);h=p.dataIndices,d=p.nestestValue}else{if(h=l.getData().indicesOfNearest(u[0],e,r.type==="category"?.5:null),!h.length)return;d=l.getData().get(u[0],h[0])}if(!(d==null||!isFinite(d))){var g=e-d,f=Math.abs(g);f<=a&&((f<a||g>=0&&s<0)&&(a=f,s=g,n=d,o.length=0),D(h,function(v){o.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:o,snapToValue:n}}function Uge(e,t,r,i){e[t.key]={value:r,payloadBatch:i}}function Wge(e,t,r,i){var n=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,c=rh(l),u=e.map[c];u||(u=e.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(u)),u.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function jge(e,t,r){var i=r.axesInfo=[];D(t,function(n,o){var a=n.axisPointerModel.option,s=e[o];s?(!n.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(a.status="hide"),a.status==="show"&&i.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:a.value})})}function $ge(e,t,r,i){if(QC(t)||!e.list.length){i({type:"hideTip"});return}var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}function Yge(e,t,r){var i=r.getZr(),n="axisPointerLastHighlights",o=xU(i)[n]||{},a=xU(i)[n]={};D(e,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&D(d.seriesDataIndices,function(h){var p=h.seriesIndex+" | "+h.dataIndex;a[p]=h})});var s=[],l=[];D(o,function(c,u){!a[u]&&l.push(c)}),D(a,function(c,u){!o[u]&&s.push(c)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function qge(e,t){for(var r=0;r<(e||[]).length;r++){var i=e[r];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function EU(e){var t=e.axis.model,r={},i=r.axisDim=e.axis.dim;return r.axisIndex=r[i+"AxisIndex"]=t.componentIndex,r.axisName=r[i+"AxisName"]=t.name,r.axisId=r[i+"AxisId"]=t.id,r}function QC(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function So(e){Ni.registerAxisPointerClass("CartesianAxisPointer",yU),e.registerComponentModel(wU),e.registerComponentView(SU),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!O(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=QB(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},kA)}function LA(e){Te(hC),Te(So)}var Kge=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,o,a){var s=n.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,c=l.getOtherAxis(s),u=c.getExtent(),d=s.dataToCoord(i),h=o.get("type");if(h&&h!=="none"){var p=Eh(o),g=Xge[h](s,l,d,u);g.style=p,r.graphicKey=g.type,r.pointer=g}var f=o.get(["label","margin"]),v=Zge(i,n,o,l,f);AA(r,n,o,a,v)},t}(Dh);function Zge(e,t,r,i,n){var o=t.axis,a=o.dataToCoord(e),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=i.getRadiusAxis().getExtent(),c,u,d;if(o.dim==="radius"){var h=Xt();Si(h,h,s),Mr(h,h,[i.cx,i.cy]),c=Rr([a,-n],h);var p=t.getModel("axisLabel").get("rotate")||0,g=kr.innerTextLayout(s,p*Math.PI/180,-1);u=g.textAlign,d=g.textVerticalAlign}else{var f=l[1];c=i.coordToPoint([f+n,a]);var v=i.cx,m=i.cy;u=Math.abs(c[0]-v)/f<.3?"center":c[0]>v?"left":"right",d=Math.abs(c[1]-m)/f<.3?"middle":c[1]>m?"top":"bottom"}return{position:c,align:u,verticalAlign:d}}var Xge={line:function(e,t,r,i){return e.dim==="angle"?{type:"Line",shape:Mh(t.coordToPoint([i[0],r]),t.coordToPoint([i[1],r]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r}}},shadow:function(e,t,r,i){var n=Math.max(1,e.getBandWidth()),o=Math.PI/180;return e.dim==="angle"?{type:"Sector",shape:PA(t.cx,t.cy,i[0],i[1],(-r-n/2)*o,(-r+n/2)*o)}:{type:"Sector",shape:PA(t.cx,t.cy,r-n/2,r+n/2,0,Math.PI*2)}}},MU=Kge;var Qge=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.findAxisModel=function(r){var i,n=this.ecModel;return n.eachComponent(r,function(o){o.getCoordSysModel()===this&&(i=o)},this),i},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(Ee),TU=Qge;var FA=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",dt).models[0]},t.type="polarAxis",t}(Ee);ot(FA,Qo);var _U=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="angleAxis",t}(FA);var RU=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="radiusAxis",t}(FA);var OA=function(e){I(t,e);function t(r,i){return e.call(this,"radius",r,i)||this}return t.prototype.pointToData=function(r,i){return this.polar.pointToData(r,i)[this.dim==="radius"?0:1]},t}(xr);OA.prototype.dataToRadius=xr.prototype.dataToCoord;OA.prototype.radiusToData=xr.prototype.coordToData;var AU=OA;var Jge=he(),NA=function(e){I(t,e);function t(r,i){return e.call(this,"angle",r,i||[0,360])||this}return t.prototype.pointToData=function(r,i){return this.polar.pointToData(r,i)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var r=this,i=r.getLabelModel(),n=r.scale,o=n.getExtent(),a=n.count();if(o[1]-o[0]<1)return 0;var s=o[0],l=r.dataToCoord(s+1)-r.dataToCoord(s),c=Math.abs(l),u=Bo(s==null?"":s+"",i.getFont(),"center","top"),d=Math.max(u.height,7),h=d/c;isNaN(h)&&(h=1/0);var p=Math.max(0,Math.floor(h)),g=Jge(r.model),f=g.lastAutoInterval,v=g.lastTickCount;return f!=null&&v!=null&&Math.abs(f-p)<=1&&Math.abs(v-a)<=1&&f>p?p=f:(g.lastTickCount=a,g.lastAutoInterval=p),p},t}(xr);NA.prototype.dataToAngle=xr.prototype.dataToCoord;NA.prototype.angleToData=xr.prototype.coordToData;var IU=NA;var zA=["radius","angle"],efe=function(){function e(t){this.dimensions=zA,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new AU,this._angleAxis=new IU,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(t){var r=this.pointToCoord(t);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},e.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},e.prototype.getAxis=function(t){var r="_"+t+"Axis";return this[r]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(t){var r=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===t&&r.push(i),n.scale.type===t&&r.push(n),r},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(t){var r=this._angleAxis;return t===r?this._radiusAxis:r},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(t){var r=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},e.prototype.dataToPoint=function(t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],r),this._angleAxis.dataToAngle(t[1],r)])},e.prototype.pointToData=function(t,r){var i=this.pointToCoord(t);return[this._radiusAxis.radiusToData(i[0],r),this._angleAxis.angleToData(i[1],r)]},e.prototype.pointToCoord=function(t){var r=t[0]-this.cx,i=t[1]-this.cy,n=this.getAngleAxis(),o=n.getExtent(),a=Math.min(o[0],o[1]),s=Math.max(o[0],o[1]);n.inverse?a=s-360:s=a+360;var l=Math.sqrt(r*r+i*i);r/=l,i/=l;for(var c=Math.atan2(-i,r)/Math.PI*180,u=c<a?1:-1;c<a||c>s;)c+=u*360;return[l,c]},e.prototype.coordToPoint=function(t){var r=t[0],i=t[1]/180*Math.PI,n=Math.cos(i)*r+this.cx,o=-Math.sin(i)*r+this.cy;return[n,o]},e.prototype.getArea=function(){var t=this.getAngleAxis(),r=this.getRadiusAxis(),i=r.getExtent().slice();i[0]>i[1]&&i.reverse();var n=t.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-n[0]*o,endAngle:-n[1]*o,clockwise:t.inverse,contain:function(a,s){var l=a-this.cx,c=s-this.cy,u=l*l+c*c-1e-4,d=this.r,h=this.r0;return u<=d*d&&u>=h*h}}},e.prototype.convertToPixel=function(t,r,i){var n=PU(r);return n===this?this.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=PU(r);return n===this?this.pointToData(i):null},e}();function PU(e){var t=e.seriesModel,r=e.polarModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}var kU=efe;function tfe(e,t,r){var i=t.get("center"),n=r.getWidth(),o=r.getHeight();e.cx=j(i[0],n),e.cy=j(i[1],o);var a=e.getRadiusAxis(),s=Math.min(n,o)/2,l=t.get("radius");l==null?l=[0,"100%"]:O(l)||(l=[0,l]);var c=[j(l[0],s),j(l[1],s)];a.inverse?a.setExtent(c[1],c[0]):a.setExtent(c[0],c[1])}function rfe(e,t){var r=this,i=r.getAngleAxis(),n=r.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===r){var l=s.getData();D(Zd(l,"radius"),function(c){n.scale.unionExtentFromData(l,c)}),D(Zd(l,"angle"),function(c){i.scale.unionExtentFromData(l,c)})}}),Xo(i.scale,i.model),Xo(n.scale,n.model),i.type==="category"&&!i.onBand){var o=i.getExtent(),a=360/i.scale.count();i.inverse?o[1]+=a:o[1]-=a,i.setExtent(o[0],o[1])}}function ife(e){return e.mainType==="angleAxis"}function LU(e,t){var r;if(e.type=t.get("type"),e.scale=el(t),e.onBand=t.get("boundaryGap")&&e.type==="category",e.inverse=t.get("inverse"),ife(t)){e.inverse=e.inverse!==t.get("clockwise");var i=t.get("startAngle"),n=(r=t.get("endAngle"))!==null&&r!==void 0?r:i+(e.inverse?-360:360);e.setExtent(i,n)}t.axis=e,e.model=t}var nfe={dimensions:zA,create:function(e,t){var r=[];return e.eachComponent("polar",function(i,n){var o=new kU(n+"");o.update=rfe;var a=o.getRadiusAxis(),s=o.getAngleAxis(),l=i.findAxisModel("radiusAxis"),c=i.findAxisModel("angleAxis");LU(a,l),LU(s,c),tfe(o,i,t),r.push(o),i.coordinateSystem=o,o.model=i}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var n=i.getReferringComponents("polar",dt).models[0];i.coordinateSystem=n.coordinateSystem}}),r}},FU=nfe;var ofe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function JC(e,t,r){t[1]>t[0]&&(t=t.slice().reverse());var i=e.coordToPoint([t[0],r]),n=e.coordToPoint([t[1],r]);return{x1:i[0],y1:i[1],x2:n[0],y2:n[1]}}function eb(e){var t=e.getRadiusAxis();return t.inverse?0:1}function OU(e){var t=e[0],r=e[e.length-1];t&&r&&Math.abs(Math.abs(t.coord-r.coord)-360)<1e-4&&e.pop()}var afe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,i){if(this.group.removeAll(),!!r.get("show")){var n=r.axis,o=n.polar,a=o.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),c=N(n.getViewLabels(),function(u){u=re(u);var d=n.scale,h=d.type==="ordinal"?d.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=n.dataToCoord(h),u});OU(c),OU(s),D(ofe,function(u){r.get([u,"show"])&&(!n.scale.isBlank()||u==="axisLine")&&sfe[u](this.group,r,o,s,l,a,c)},this)}},t.type="angleAxis",t}(Ni),sfe={axisLine:function(e,t,r,i,n,o){var a=t.getModel(["axisLine","lineStyle"]),s=r.getAngleAxis(),l=Math.PI/180,c=s.getExtent(),u=eb(r),d=u?0:1,h,p=Math.abs(c[1]-c[0])===360?"Circle":"Arc";o[d]===0?h=new Se[p]({shape:{cx:r.cx,cy:r.cy,r:o[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:s.inverse},style:a.getLineStyle(),z2:1,silent:!0}):h=new Tc({shape:{cx:r.cx,cy:r.cy,r:o[u],r0:o[d]},style:a.getLineStyle(),z2:1,silent:!0}),h.style.fill=null,e.add(h)},axisTick:function(e,t,r,i,n,o){var a=t.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),l=o[eb(r)],c=N(i,function(u){return new _t({shape:JC(r,[l,l+s],u.coord)})});e.add(Ur(c,{style:Q(a.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,r,i,n,o){if(n.length){for(var a=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),c=o[eb(r)],u=[],d=0;d<n.length;d++)for(var h=0;h<n[d].length;h++)u.push(new _t({shape:JC(r,[c,c+l],n[d][h].coord)}));e.add(Ur(u,{style:Q(s.getModel("lineStyle").getLineStyle(),Q(a.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,r,i,n,o,a){var s=t.getCategories(!0),l=t.getModel("axisLabel"),c=l.get("margin"),u=t.get("triggerEvent");D(a,function(d,h){var p=l,g=d.tickValue,f=o[eb(r)],v=r.coordToPoint([f+c,d.coord]),m=r.cx,y=r.cy,w=Math.abs(v[0]-m)/f<.3?"center":v[0]>m?"left":"right",C=Math.abs(v[1]-y)/f<.3?"middle":v[1]>y?"top":"bottom";if(s&&s[g]){var S=s[g];J(S)&&S.textStyle&&(p=new Ve(S.textStyle,l,l.ecModel))}var b=new De({silent:kr.isLabelSilent(t),style:Ke(p,{x:v[0],y:v[1],fill:p.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:d.formattedLabel,align:w,verticalAlign:C})});if(e.add(b),u){var x=kr.makeAxisEventDataBase(t);x.targetType="axisLabel",x.value=d.rawLabel,ae(b).eventData=x}},this)},splitLine:function(e,t,r,i,n,o){var a=t.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=0;d<i.length;d++){var h=c++%l.length;u[h]=u[h]||[],u[h].push(new _t({shape:JC(r,o,i[d].coord)}))}for(var d=0;d<u.length;d++)e.add(Ur(u[d],{style:Q({stroke:l[d%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,r,i,n,o){if(n.length){for(var a=t.getModel("minorSplitLine"),s=a.getModel("lineStyle"),l=[],c=0;c<n.length;c++)for(var u=0;u<n[c].length;u++)l.push(new _t({shape:JC(r,o,n[c][u].coord)}));e.add(Ur(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,r,i,n,o){if(i.length){var a=t.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=Math.PI/180,h=-i[0].coord*d,p=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),f=t.get("clockwise"),v=1,m=i.length;v<=m;v++){var y=v===m?i[0].coord:i[v].coord,w=c++%l.length;u[w]=u[w]||[],u[w].push(new qt({shape:{cx:r.cx,cy:r.cy,r0:p,r:g,startAngle:h,endAngle:-y*d,clockwise:f},silent:!0})),h=-y*d}for(var v=0;v<u.length;v++)e.add(Ur(u[v],{style:Q({fill:l[v%l.length]},s.getAreaStyle()),silent:!0}))}}},NU=afe;var lfe=["axisLine","axisTickLabel","axisName"],cfe=["splitLine","splitArea","minorSplitLine"],ufe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="PolarAxisPointer",r}return t.prototype.render=function(r,i){if(this.group.removeAll(),!!r.get("show")){var n=this._axisGroup,o=this._axisGroup=new ee;this.group.add(o);var a=r.axis,s=a.polar,l=s.getAngleAxis(),c=a.getTicksCoords(),u=a.getMinorTicksCoords(),d=l.getExtent()[0],h=a.getExtent(),p=hfe(s,r,d),g=new kr(r,p);D(lfe,g.add,g),o.add(g.getGroup()),Na(n,o,r),D(cfe,function(f){r.get([f,"show"])&&!a.scale.isBlank()&&dfe[f](this.group,r,s,d,h,c,u)},this)}},t.type="radiusAxis",t}(Ni),dfe={splitLine:function(e,t,r,i,n,o){var a=t.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),c=0,u=r.getAngleAxis(),d=Math.PI/180,h=u.getExtent(),p=Math.abs(h[1]-h[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var g=[],f=0;f<o.length;f++){var v=c++%l.length;g[v]=g[v]||[],g[v].push(new Se[p]({shape:{cx:r.cx,cy:r.cy,r:Math.max(o[f].coord,0),startAngle:-h[0]*d,endAngle:-h[1]*d,clockwise:u.inverse}}))}for(var f=0;f<g.length;f++)e.add(Ur(g[f],{style:Q({stroke:l[f%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,r,i,n,o,a){if(a.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),c=[],u=0;u<a.length;u++)for(var d=0;d<a[u].length;d++)c.push(new ti({shape:{cx:r.cx,cy:r.cy,r:a[u][d].coord}}));e.add(Ur(c,{style:Q({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(e,t,r,i,n,o){if(o.length){var a=t.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=o[0].coord,h=1;h<o.length;h++){var p=c++%l.length;u[p]=u[p]||[],u[p].push(new qt({shape:{cx:r.cx,cy:r.cy,r0:d,r:o[h].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),d=o[h].coord}for(var h=0;h<u.length;h++)e.add(Ur(u[h],{style:Q({fill:l[h%l.length]},s.getAreaStyle()),silent:!0}))}}};function hfe(e,t,r){return{position:[e.cx,e.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}var zU=ufe;function VU(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function BU(e,t){return t.dim+e.model.componentIndex}function pfe(e,t,r){var i={},n=gfe(Pe(t.getSeriesByType(e),function(o){return!t.isSeriesFiltered(o)&&o.coordinateSystem&&o.coordinateSystem.type==="polar"}));t.eachSeriesByType(e,function(o){if(o.coordinateSystem.type==="polar"){var a=o.getData(),s=o.coordinateSystem,l=s.getBaseAxis(),c=BU(s,l),u=VU(o),d=n[c][u],h=d.offset,p=d.width,g=s.getOtherAxis(l),f=o.coordinateSystem.cx,v=o.coordinateSystem.cy,m=o.get("barMinHeight")||0,y=o.get("barMinAngle")||0;i[u]=i[u]||[];for(var w=a.mapDimension(g.dim),C=a.mapDimension(l.dim),S=Ji(a,w),b=l.dim!=="radius"||!o.get("roundCap",!0),x=g.model,E=x.get("startValue"),M=g.dataToCoord(E||0),T=0,_=a.count();T<_;T++){var R=a.get(w,T),A=a.get(C,T),P=R>=0?"p":"n",k=M;S&&(i[u][A]||(i[u][A]={p:M,n:M}),k=i[u][A][P]);var L=void 0,V=void 0,z=void 0,B=void 0;if(g.dim==="radius"){var K=g.dataToCoord(R)-M,X=l.dataToCoord(A);Math.abs(K)<m&&(K=(K<0?-1:1)*m),L=k,V=k+K,z=X-h,B=z-p,S&&(i[u][A][P]=V)}else{var oe=g.dataToCoord(R,b)-M,ye=l.dataToCoord(A);Math.abs(oe)<y&&(oe=(oe<0?-1:1)*y),L=ye+h,V=L+p,z=k,B=k+oe,S&&(i[u][A][P]=B)}a.setItemLayout(T,{cx:f,cy:v,r0:L,r:V,startAngle:-z*Math.PI/180,endAngle:-B*Math.PI/180,clockwise:z>=B})}}})}function gfe(e){var t={};D(e,function(i,n){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=BU(a,s),c=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(c[1]-c[0])/o.count(),d=t[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=d.stacks;t[l]=d;var p=VU(i);h[p]||d.autoWidthCount++,h[p]=h[p]||{width:0,maxWidth:0};var g=j(i.get("barWidth"),u),f=j(i.get("barMaxWidth"),u),v=i.get("barGap"),m=i.get("barCategoryGap");g&&!h[p].width&&(g=Math.min(d.remainedWidth,g),h[p].width=g,d.remainedWidth-=g),f&&(h[p].maxWidth=f),v!=null&&(d.gap=v),m!=null&&(d.categoryGap=m)});var r={};return D(t,function(i,n){r[n]={};var o=i.stacks,a=i.bandWidth,s=j(i.categoryGap,a),l=j(i.gap,1),c=i.remainedWidth,u=i.autoWidthCount,d=(c-s)/(u+(u-1)*l);d=Math.max(d,0),D(o,function(f,v){var m=f.maxWidth;m&&m<d&&(m=Math.min(m,c),f.width&&(m=Math.min(m,f.width)),c-=m,f.width=m,u--)}),d=(c-s)/(u+(u-1)*l),d=Math.max(d,0);var h=0,p;D(o,function(f,v){f.width||(f.width=d),p=f,h+=f.width*(1+l)}),p&&(h-=p.width*l);var g=-h/2;D(o,function(f,v){r[n][v]=r[n][v]||{offset:g,width:f.width},g+=f.width*(1+l)})}),r}var GU=pfe;var ffe={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},vfe={splitNumber:5},mfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="polar",t}(He);function VA(e){Te(So),Ni.registerAxisPointerClass("PolarAxisPointer",MU),e.registerCoordinateSystem("polar",FU),e.registerComponentModel(TU),e.registerComponentView(mfe),bo(e,"angle",_U,ffe),bo(e,"radius",RU,vfe),e.registerComponentView(NU),e.registerComponentView(zU),e.registerLayout(se(GU,"bar"))}function kf(e,t){t=t||{};var r=e.coordinateSystem,i=e.axis,n={},o=i.position,a=i.orient,s=r.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[a==="vertical"?c.vertical[o]:l[0],a==="horizontal"?c.horizontal[o]:l[3]];var u={horizontal:0,vertical:1};n.rotation=Math.PI/2*u[a];var d={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=d[o],e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),bt(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var h=t.rotate;return h==null&&(h=e.get(["axisLabel","rotate"])),n.labelRotation=o==="top"?-h:h,n.z2=1,n}var yfe=["axisLine","axisTickLabel","axisName"],wfe=["splitArea","splitLine"],Cfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="SingleAxisPointer",r}return t.prototype.render=function(r,i,n,o){var a=this.group;a.removeAll();var s=this._axisGroup;this._axisGroup=new ee;var l=kf(r),c=new kr(r,l);D(yfe,c.add,c),a.add(this._axisGroup),a.add(c.getGroup()),D(wfe,function(u){r.get([u,"show"])&&bfe[u](this,this.group,this._axisGroup,r)},this),Na(s,this._axisGroup,r),e.prototype.render.call(this,r,i,n,o)},t.prototype.remove=function(){dC(this)},t.type="singleAxis",t}(Ni),bfe={splitLine:function(e,t,r,i){var n=i.axis;if(!n.scale.isBlank()){var o=i.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),c=i.coordinateSystem.getRect(),u=n.isHorizontal(),d=[],h=0,p=n.getTicksCoords({tickModel:o}),g=[],f=[],v=0;v<p.length;++v){var m=n.toGlobalCoord(p[v].coord);u?(g[0]=m,g[1]=c.y,f[0]=m,f[1]=c.y+c.height):(g[0]=c.x,g[1]=m,f[0]=c.x+c.width,f[1]=m);var y=new _t({shape:{x1:g[0],y1:g[1],x2:f[0],y2:f[1]},silent:!0});Oa(y.shape,l);var w=h++%s.length;d[w]=d[w]||[],d[w].push(y)}for(var C=a.getLineStyle(["color"]),v=0;v<d.length;++v)t.add(Ur(d[v],{style:Q({stroke:s[v%s.length]},C),silent:!0}))}},splitArea:function(e,t,r,i){uC(e,r,i,i)}},UU=Cfe;var WU=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(Ee);ot(WU,Qo.prototype);var tb=WU;var Sfe=function(e){I(t,e);function t(r,i,n,o,a){var s=e.call(this,r,i,n)||this;return s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.pointToData=function(r,i){return this.coordinateSystem.pointToData(r)[0]},t}(xr),jU=Sfe;var BA=["single"],xfe=function(){function e(t,r,i){this.type="single",this.dimension="single",this.dimensions=BA,this.axisPointerEnabled=!0,this.model=t,this._init(t,r,i)}return e.prototype._init=function(t,r,i){var n=this.dimension,o=new jU(n,el(t),[0,0],t.get("type"),t.get("position")),a=o.type==="category";o.onBand=a&&t.get("boundaryGap"),o.inverse=t.get("inverse"),o.orient=t.get("orient"),t.axis=o,o.model=t,o.coordinateSystem=this,this._axis=o},e.prototype.update=function(t,r){t.eachSeries(function(i){if(i.coordinateSystem===this){var n=i.getData();D(n.mapDimensionsAll(this.dimension),function(o){this._axis.scale.unionExtentFromData(n,o)},this),Xo(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(t,r){this._rect=Je({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var t=this._rect,r=this._axis,i=r.isHorizontal(),n=i?[0,t.width]:[0,t.height],o=r.inverse?1:0;r.setExtent(n[o],n[1-o]),this._updateAxisTransform(r,i?t.x:t.y)},e.prototype._updateAxisTransform=function(t,r){var i=t.getExtent(),n=i[0]+i[1],o=t.isHorizontal();t.toGlobalCoord=o?function(a){return a+r}:function(a){return n-a+r},t.toLocalCoord=o?function(a){return a-r}:function(a){return n-a+r}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(t){var r=this.getRect(),i=this.getAxis(),n=i.orient;return n==="horizontal"?i.contain(i.toLocalCoord(t[0]))&&t[1]>=r.y&&t[1]<=r.y+r.height:i.contain(i.toLocalCoord(t[1]))&&t[0]>=r.y&&t[0]<=r.y+r.height},e.prototype.pointToData=function(t){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(t[r.orient==="horizontal"?0:1]))]},e.prototype.dataToPoint=function(t){var r=this.getAxis(),i=this.getRect(),n=[],o=r.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[o]=r.toGlobalCoord(r.dataToCoord(+t)),n[1-o]=o===0?i.y+i.height/2:i.x+i.width/2,n},e.prototype.convertToPixel=function(t,r,i){var n=$U(r);return n===this?this.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=$U(r);return n===this?this.pointToData(i):null},e}();function $U(e){var t=e.seriesModel,r=e.singleAxisModel;return r&&r.coordinateSystem||t&&t.coordinateSystem}var YU=xfe;function Dfe(e,t){var r=[];return e.eachComponent("singleAxis",function(i,n){var o=new YU(i,e,t);o.name="single_"+n,o.resize(i,t),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="singleAxis"){var n=i.getReferringComponents("singleAxis",dt).models[0];i.coordinateSystem=n&&n.coordinateSystem}}),r}var Efe={create:Dfe,dimensions:BA},qU=Efe;var KU=["x","y"],Mfe=["width","height"],Tfe=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,o,a){var s=n.axis,l=s.coordinateSystem,c=GA(l,1-rb(s)),u=l.dataToPoint(i)[0],d=o.get("type");if(d&&d!=="none"){var h=Eh(o),p=_fe[d](s,u,c);p.style=h,r.graphicKey=p.type,r.pointer=p}var g=kf(n);qC(i,r,g,n,o,a)},t.prototype.getHandleTransform=function(r,i,n){var o=kf(i,{labelInside:!1});o.labelMargin=n.get(["handle","margin"]);var a=Af(i.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,o){var a=n.axis,s=a.coordinateSystem,l=rb(a),c=GA(s,l),u=[r.x,r.y];u[l]+=i[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var d=GA(s,1-l),h=(d[1]+d[0])/2,p=[h,h];return p[l]=u[l],{x:u[0],y:u[1],rotation:r.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}},t}(Dh),_fe={line:function(e,t,r){var i=Mh([t,r[0]],[t,r[1]],rb(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=e.getBandWidth(),n=r[1]-r[0];return{type:"Rect",shape:KC([t-i/2,r[0]],[i,n],rb(e))}}};function rb(e){return e.isHorizontal()?0:1}function GA(e,t){var r=e.getRect();return[r[KU[t]],r[KU[t]]+r[Mfe[t]]]}var ZU=Tfe;var Rfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="single",t}(He);function HA(e){Te(So),Ni.registerAxisPointerClass("SingleAxisPointer",ZU),e.registerComponentView(Rfe),e.registerComponentView(UU),e.registerComponentModel(tb),bo(e,"single",tb,tb.defaultOption),e.registerCoordinateSystem("single",qU)}var Afe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i,n){var o=En(r);e.prototype.init.apply(this,arguments),XU(r,o)},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),XU(this.option,r)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(Ee);function XU(e,t){var r=e.cellSize,i;O(r)?i=r:i=e.cellSize=[r,r],i.length===1&&(i[1]=i[0]);var n=N([0,1],function(o){return f6(t,o)&&(i[o]="auto"),i[o]!=null&&i[o]!=="auto"});Ii(e,t,{type:"box",ignoreSize:n})}var QU=Afe;var Ife=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var o=this.group;o.removeAll();var a=r.coordinateSystem,s=a.getRangeInfo(),l=a.getOrient(),c=i.getLocaleModel();this._renderDayRect(r,s,o),this._renderLines(r,s,l,o),this._renderYearText(r,s,l,o),this._renderMonthText(r,c,l,o),this._renderWeekText(r,c,s,l,o)},t.prototype._renderDayRect=function(r,i,n){for(var o=r.coordinateSystem,a=r.getModel("itemStyle").getItemStyle(),s=o.getCellWidth(),l=o.getCellHeight(),c=i.start.time;c<=i.end.time;c=o.getNextNDay(c,1).time){var u=o.dataToRect([c],!1).tl,d=new Ce({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:a});n.add(d)}},t.prototype._renderLines=function(r,i,n,o){var a=this,s=r.coordinateSystem,l=r.getModel(["splitLine","lineStyle"]).getLineStyle(),c=r.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=i.start,h=0;d.time<=i.end.time;h++){g(d.formatedDate),h===0&&(d=s.getDateInfo(i.start.y+"-"+i.start.m));var p=d.date;p.setMonth(p.getMonth()+1),d=s.getDateInfo(p)}g(s.getNextNDay(i.end.time,1).formatedDate);function g(f){a._firstDayOfMonth.push(s.getDateInfo(f)),a._firstDayPoints.push(s.dataToRect([f],!1).tl);var v=a._getLinePointsOfOneWeek(r,f,n);a._tlpoints.push(v[0]),a._blpoints.push(v[v.length-1]),c&&a._drawSplitline(v,l,o)}c&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,u,n),l,o),c&&this._drawSplitline(a._getEdgesPoints(a._blpoints,u,n),l,o)},t.prototype._getEdgesPoints=function(r,i,n){var o=[r[0].slice(),r[r.length-1].slice()],a=n==="horizontal"?0:1;return o[0][a]=o[0][a]-i/2,o[1][a]=o[1][a]+i/2,o},t.prototype._drawSplitline=function(r,i,n){var o=new Rt({z2:20,shape:{points:r},style:i});n.add(o)},t.prototype._getLinePointsOfOneWeek=function(r,i,n){for(var o=r.coordinateSystem,a=o.getDateInfo(i),s=[],l=0;l<7;l++){var c=o.getNextNDay(a.time,l),u=o.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[n==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(r,i){return H(r)&&r?h6(r,i):Z(r)?r(i):i.nameMap},t.prototype._yearTextPositionControl=function(r,i,n,o,a){var s=i[0],l=i[1],c=["center","bottom"];o==="bottom"?(l+=a,c=["center","top"]):o==="left"?s-=a:o==="right"?(s+=a,c=["center","top"]):l-=a;var u=0;return(o==="left"||o==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},t.prototype._renderYearText=function(r,i,n,o){var a=r.getModel("yearLabel");if(a.get("show")){var s=a.get("margin"),l=a.get("position");l||(l=n!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,d=(c[0][1]+c[1][1])/2,h=n==="horizontal"?0:1,p={top:[u,c[h][1]],bottom:[u,c[1-h][1]],left:[c[1-h][0],d],right:[c[h][0],d]},g=i.start.y;+i.end.y>+i.start.y&&(g=g+"-"+i.end.y);var f=a.get("formatter"),v={start:i.start.y,end:i.end.y,nameMap:g},m=this._formatterLabel(f,v),y=new De({z2:30,style:Ke(a,{text:m})});y.attr(this._yearTextPositionControl(y,p[l],n,l,s)),o.add(y)}},t.prototype._monthTextPositionControl=function(r,i,n,o,a){var s="left",l="top",c=r[0],u=r[1];return n==="horizontal"?(u=u+a,i&&(s="center"),o==="start"&&(l="bottom")):(c=c+a,i&&(l="middle"),o==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(r,i,n,o){var a=r.getModel("monthLabel");if(a.get("show")){var s=a.get("nameMap"),l=a.get("margin"),c=a.get("position"),u=a.get("align"),d=[this._tlpoints,this._blpoints];(!s||H(s))&&(s&&(i=mg(s)||i),s=i.get(["time","monthAbbr"])||[]);var h=c==="start"?0:1,p=n==="horizontal"?0:1;l=c==="start"?-l:l;for(var g=u==="center",f=0;f<d[h].length-1;f++){var v=d[h][f].slice(),m=this._firstDayOfMonth[f];if(g){var y=this._firstDayPoints[f];v[p]=(y[p]+d[0][f+1][p])/2}var w=a.get("formatter"),C=s[+m.m-1],S={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:C},b=this._formatterLabel(w,S),x=new De({z2:30,style:F(Ke(a,{text:b}),this._monthTextPositionControl(v,g,n,c,l))});o.add(x)}}},t.prototype._weekTextPositionControl=function(r,i,n,o,a){var s="center",l="middle",c=r[0],u=r[1],d=n==="start";return i==="horizontal"?(c=c+o+(d?1:-1)*a[0]/2,s=d?"right":"left"):(u=u+o+(d?1:-1)*a[1]/2,l=d?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(r,i,n,o,a){var s=r.getModel("dayLabel");if(s.get("show")){var l=r.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),d=s.get("margin"),h=l.getFirstDayOfWeek();if(!u||H(u)){u&&(i=mg(u)||i);var p=i.get(["time","dayOfWeekShort"]);u=p||N(i.get(["time","dayOfWeekAbbr"]),function(S){return S[0]})}var g=l.getNextNDay(n.end.time,7-n.lweek).time,f=[l.getCellWidth(),l.getCellHeight()];d=j(d,Math.min(f[1],f[0])),c==="start"&&(g=l.getNextNDay(n.start.time,-(7+n.fweek)).time,d=-d);for(var v=0;v<7;v++){var m=l.getNextNDay(g,v),y=l.dataToRect([m.time],!1).center,w=v;w=Math.abs((v+h)%7);var C=new De({z2:30,style:F(Ke(s,{text:u[w]}),this._weekTextPositionControl(y,o,c,d,f))});a.add(C)}}},t.type="calendar",t}(He),JU=Ife;var UA=864e5,Pfe=function(){function e(t,r,i){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=Jr(t);var r=t.getFullYear(),i=t.getMonth()+1,n=i<10?"0"+i:""+i,o=t.getDate(),a=o<10?"0"+o:""+o,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:r+"",m:n,d:a,day:s,time:t.getTime(),formatedDate:r+"-"+n+"-"+a,date:t}},e.prototype.getNextNDay=function(t,r){return r=r||0,r===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+r),this.getDateInfo(t))},e.prototype.update=function(t,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,n=["width","height"],o=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[i,7]:[7,i];D([0,1],function(d){u(o,d)&&(a[n[d]]=o[d]*s[d])});var l={width:r.getWidth(),height:r.getHeight()},c=this._rect=Je(a,l);D([0,1],function(d){u(o,d)||(o[d]=c[n[d]]/s[d])});function u(d,h){return d[h]!=null&&d[h]!=="auto"}this._sw=o[0],this._sh=o[1]},e.prototype.dataToPoint=function(t,r){O(t)&&(t=t[0]),r==null&&(r=!0);var i=this.getDateInfo(t),n=this._rangeInfo,o=i.formatedDate;if(r&&!(i.time>=n.start.time&&i.time<n.end.time+UA))return[NaN,NaN];var a=i.day,s=this._getRangeInfo([n.start.time,o]).nthWeek;return this._orient==="vertical"?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var r=this.pointToDate(t);return r&&r.time},e.prototype.dataToRect=function(t,r){var i=this.dataToPoint(t,r);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var r=Math.floor((t[0]-this._rect.x)/this._sw)+1,i=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,r-1,n):this._getDateByWeeksAndDay(r,i-1,n)},e.prototype.convertToPixel=function(t,r,i){var n=eW(r);return n===this?n.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var n=eW(r);return n===this?n.pointToData(i):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),r;if(O(t)&&t.length===1&&(t=t[0]),O(t))r=t;else{var i=t.toString();if(/^\d{4}$/.test(i)&&(r=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var n=this.getDateInfo(i),o=n.date;o.setMonth(o.getMonth()+1);var a=this.getNextNDay(o,-1);r=[n.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(r=[i,i])}if(!r)return t;var s=this._getRangeInfo(r);return s.start.time>s.end.time&&r.reverse(),r},e.prototype._getRangeInfo=function(t){var r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],i;r[0].time>r[1].time&&(i=!0,r.reverse());var n=Math.floor(r[1].time/UA)-Math.floor(r[0].time/UA)+1,o=new Date(r[0].time),a=o.getDate(),s=r[1].date.getDate();o.setDate(a+n-1);var l=o.getDate();if(l!==s)for(var c=o.getTime()-r[1].time>0?1:-1;(l=o.getDate())!==s&&(o.getTime()-r[1].time)*c>0;)n-=c,o.setDate(l-c);var u=Math.floor((n+r[0].day+6)/7),d=i?-u+1:u-1;return i&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:n,weeks:u,nthWeek:d,fweek:r[0].day,lweek:r[1].day}},e.prototype._getDateByWeeksAndDay=function(t,r,i){var n=this._getRangeInfo(i);if(t>n.weeks||t===0&&r<n.fweek||t===n.weeks&&r>n.lweek)return null;var o=(t-1)*7-n.fweek+r,a=new Date(n.start.time);return a.setDate(+n.start.d+o),this.getDateInfo(a)},e.create=function(t,r){var i=[];return t.eachComponent("calendar",function(n){var o=new e(n,t,r);i.push(o),n.coordinateSystem=o}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=i[n.get("calendarIndex")||0])}),i},e.dimensions=["time","value"],e}();function eW(e){var t=e.calendarModel,r=e.seriesModel,i=t?t.coordinateSystem:r?r.coordinateSystem:null;return i}var tW=Pfe;function WA(e){e.registerComponentModel(QU),e.registerComponentView(JU),e.registerCoordinateSystem("calendar",tW)}function kfe(e,t){var r=e.existing;if(t.id=e.keyInfo.id,!t.type&&r&&(t.type=r.type),t.parentId==null){var i=t.parentOption;i?t.parentId=i.id:r&&(t.parentId=r.parentId)}t.parentOption=null}function rW(e,t){var r;return D(t,function(i){e[i]!=null&&e[i]!=="auto"&&(r=!0)}),r}function Lfe(e,t,r){var i=F({},r),n=e[t],o=r.$action||"merge";if(o==="merge")if(n){if(0)var a;fe(n,i,!0),Ii(n,i,{ignoreSize:!0}),UE(r,n),ib(r,n),ib(r,n,"shape"),ib(r,n,"style"),ib(r,n,"extra"),r.clipPath=n.clipPath}else e[t]=i;else o==="replace"?e[t]=i:o==="remove"&&n&&(e[t]=null)}var iW=["transition","enterFrom","leaveTo"],Ffe=iW.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function ib(e,t,r){if(r&&(!e[r]&&t[r]&&(e[r]={}),e=e[r],t=t[r]),!(!e||!t))for(var i=r?iW:Ffe,n=0;n<i.length;n++){var o=i[n];e[o]==null&&t[o]!=null&&(e[o]=t[o])}}function Ofe(e,t){if(e&&(e.hv=t.hv=[rW(t,["left","right"]),rW(t,["top","bottom"])],e.type==="group")){var r=e,i=t;r.width==null&&(r.width=i.width=0),r.height==null&&(r.height=i.height=0)}}var nW=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.preventAutoZ=!0,r}return t.prototype.mergeOption=function(r,i){var n=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,r,i),this.option.elements=n},t.prototype.optionUpdated=function(r,i){var n=this.option,o=(i?n:r).elements,a=n.elements=i?[]:n.elements,s=[];this._flatten(o,s,null);var l=jy(a,s,"normalMerge"),c=this._elOptionsToUpdate=[];D(l,function(u,d){var h=u.newOption;h&&(c.push(h),kfe(u,h),Lfe(a,d,h),Ofe(a[d],h))},this),n.elements=Pe(a,function(u){return u&&delete u.$action,u!=null})},t.prototype._flatten=function(r,i,n){D(r,function(o){if(o){n&&(o.parentOption=n),i.push(o);var a=o.children;a&&a.length&&this._flatten(a,i,o),delete o.children}},this)},t.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},t.type="graphic",t.defaultOption={elements:[]},t}(Ee);var oW={path:null,compoundPath:null,group:ee,image:vt,text:De},On=he(),lW=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this._elMap=Y()},t.prototype.render=function(r,i,n){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,n)},t.prototype._updateElements=function(r){var i=r.useElOptionsToUpdate();if(i){var n=this._elMap,o=this.group,a=r.get("z"),s=r.get("zlevel");D(i,function(l){var c=Mt(l.id,null),u=c!=null?n.get(c):null,d=Mt(l.parentId,null),h=d!=null?n.get(d):o,p=l.type,g=l.style;p==="text"&&g&&l.hv&&l.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var f=l.textContent,v=l.textConfig;if(g&&WC(g,p,!!v,!!f)){var m=jC(g,p,!0);!v&&m.textConfig&&(v=l.textConfig=m.textConfig),!f&&m.textContent&&(f=m.textContent)}var y=Nfe(l),w=l.$action||"merge",C=w==="merge",S=w==="replace";if(C){var b=!u,x=u;b?x=aW(c,h,l.type,n):(x&&(On(x).isNew=!1),$C(x)),x&&(bh(x,y,r,{isInit:b}),sW(x,l,a,s))}else if(S){nb(u,l,n,r);var E=aW(c,h,l.type,n);E&&(bh(E,y,r,{isInit:!0}),sW(E,l,a,s))}else w==="remove"&&(fA(u,l),nb(u,l,n,r));var M=n.get(c);if(M&&f)if(C){var T=M.getTextContent();T?T.attr(f):M.setTextContent(new De(f))}else S&&M.setTextContent(new De(f));if(M){var _=l.clipPath;if(_){var R=_.type,A=void 0,b=!1;if(C){var P=M.getClipPath();b=!P||On(P).type!==R,A=b?jA(R):P}else S&&(b=!0,A=jA(R));M.setClipPath(A),bh(A,_,r,{isInit:b}),xh(A,_.keyframeAnimation,r)}var k=On(M);M.setTextConfig(v),k.option=l,zfe(M,r,l),oo({el:M,componentModel:r,itemName:M.name,itemTooltipOption:l.tooltip}),xh(M,l.keyframeAnimation,r)}})}},t.prototype._relocate=function(r,i){for(var n=r.option.elements,o=this.group,a=this._elMap,s=i.getWidth(),l=i.getHeight(),c=["x","y"],u=0;u<n.length;u++){var d=n[u],h=Mt(d.id,null),p=h!=null?a.get(h):null;if(!(!p||!p.isGroup)){var g=p.parent,f=g===o,v=On(p),m=On(g);v.width=j(v.option.width,f?s:m.width)||0,v.height=j(v.option.height,f?l:m.height)||0}}for(var u=n.length-1;u>=0;u--){var d=n[u],h=Mt(d.id,null),p=h!=null?a.get(h):null;if(p){var g=p.parent,m=On(g),y=g===o?{width:s,height:l}:{width:m.width,height:m.height},w={},C=Hs(p,d,y,null,{hv:d.hv,boundingMode:d.bounding},w);if(!On(p).isNew&&C){for(var S=d.transition,b={},x=0;x<c.length;x++){var E=c[x],M=w[E];S&&(dl(S)||pe(S,E)>=0)?b[E]=M:p[E]=M}Me(p,b,r,0)}else p.attr(w)}}},t.prototype._clear=function(){var r=this,i=this._elMap;i.each(function(n){nb(n,On(n).option,i,r._lastGraphicModel)}),this._elMap=Y()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(He);function jA(e){var t=ne(oW,e)?oW[e]:gg(e),r=new t({});return On(r).type=e,r}function aW(e,t,r,i){var n=jA(r);return t.add(n),i.set(e,n),On(n).id=e,On(n).isNew=!0,n}function nb(e,t,r,i){var n=e&&e.parent;n&&(e.type==="group"&&e.traverse(function(o){nb(o,t,r,i)}),Sh(e,t,i),r.removeKey(On(e).id))}function sW(e,t,r,i){e.isGroup||D([["cursor",Yt.prototype.cursor],["zlevel",i||0],["z",r||0],["z2",0]],function(n){var o=n[0];ne(t,o)?e[o]=de(t[o],n[1]):e[o]==null&&(e[o]=n[1])}),D(me(t),function(n){if(n.indexOf("on")===0){var o=t[n];e[n]=Z(o)?o:null}}),ne(t,"draggable")&&(e.draggable=t.draggable),t.name!=null&&(e.name=t.name),t.id!=null&&(e.id=t.id)}function Nfe(e){return e=F({},e),D(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(GE),function(t){delete e[t]}),e}function zfe(e,t,r){var i=ae(e).eventData;!e.silent&&!e.ignore&&!i&&(i=ae(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),i&&(i.info=r.info)}function $A(e){e.registerComponentModel(nW),e.registerComponentView(lW),e.registerPreprocessor(function(t){var r=t.graphic;O(r)?!r[0]||!r[0].elements?t.graphic=[{elements:r}]:t.graphic=[t.graphic[0]]:r&&!r.elements&&(t.graphic=[{elements:[r]}])})}var YA=["x","y","radius","angle","single"],Vfe=["cartesian2d","polar","singleAxis"];function cW(e){var t=e.get("coordinateSystem");return pe(Vfe,t)>=0}function Nn(e){return e+"Axis"}function uW(e,t){var r=Y(),i=[],n=Y();e.eachComponent({mainType:"dataZoom",query:t},function(u){n.get(u.uid)||s(u)});var o;do o=!1,e.eachComponent("dataZoom",a);while(o);function a(u){!n.get(u.uid)&&l(u)&&(s(u),o=!0)}function s(u){n.set(u.uid,!0),i.push(u),c(u)}function l(u){var d=!1;return u.eachTargetAxis(function(h,p){var g=r.get(h);g&&g[p]&&(d=!0)}),d}function c(u){u.eachTargetAxis(function(d,h){(r.get(d)||r.set(d,[]))[h]=!0})}return i}function ob(e){var t=e.ecModel,r={infoList:[],infoMap:Y()};return e.eachTargetAxis(function(i,n){var o=t.getComponent(Nn(i),n);if(o){var a=o.getCoordSysModel();if(a){var s=a.uid,l=r.infoMap.get(s);l||(l={model:a,axisModels:[]},r.infoList.push(l),r.infoMap.set(s,l)),l.axisModels.push(o)}}}),r}var qA=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),Bfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return t.prototype.init=function(r,i,n){var o=dW(r);this.settledOption=o,this.mergeDefaultAndTheme(r,n),this._doInit(o)},t.prototype.mergeOption=function(r){var i=dW(r);fe(this.option,r,!0),fe(this.settledOption,i,!0),this._doInit(i)},t.prototype._doInit=function(r){var i=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var n=this.settledOption;D([["start","startValue"],["end","endValue"]],function(o,a){this._rangePropMode[a]==="value"&&(i[o[0]]=n[o[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var r=this.get("orient",!0),i=this._targetAxisInfoMap=Y(),n=this._fillSpecifiedTargetAxis(i);n?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(r){var i=!1;return D(YA,function(n){var o=this.getReferringComponents(Nn(n),nN);if(o.specified){i=!0;var a=new qA;D(o.models,function(s){a.add(s.componentIndex)}),r.set(n,a)}},this),i},t.prototype._fillAutoTargetAxisByOrient=function(r,i){var n=this.ecModel,o=!0;if(o){var a=i==="vertical"?"y":"x",s=n.findComponents({mainType:a+"Axis"});l(s,a)}if(o){var s=n.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===i}});l(s,"single")}function l(c,u){var d=c[0];if(d){var h=new qA;if(h.add(d.componentIndex),r.set(u,h),o=!1,u==="x"||u==="y"){var p=d.getReferringComponents("grid",dt).models[0];p&&D(c,function(g){d.componentIndex!==g.componentIndex&&p===g.getReferringComponents("grid",dt).models[0]&&h.add(g.componentIndex)})}}}o&&D(YA,function(c){if(o){var u=n.findComponents({mainType:Nn(c),filter:function(h){return h.get("type",!0)==="category"}});if(u[0]){var d=new qA;d.add(u[0].componentIndex),r.set(c,d),o=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(i){!r&&(r=i)},this),r==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(r){var i=this._rangePropMode,n=this.get("rangeMode");D([["start","startValue"],["end","endValue"]],function(o,a){var s=r[o[0]]!=null,l=r[o[1]]!=null;s&&!l?i[a]="percent":!s&&l?i[a]="value":n?i[a]=n[a]:s&&(i[a]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(i,n){r==null&&(r=this.ecModel.getComponent(Nn(i),n))},this),r},t.prototype.eachTargetAxis=function(r,i){this._targetAxisInfoMap.each(function(n,o){D(n.indexList,function(a){r.call(i,o,a)})})},t.prototype.getAxisProxy=function(r,i){var n=this.getAxisModel(r,i);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(r,i){var n=this._targetAxisInfoMap.get(r);if(n&&n.indexMap[i])return this.ecModel.getComponent(Nn(r),i)},t.prototype.setRawRange=function(r){var i=this.option,n=this.settledOption;D([["start","startValue"],["end","endValue"]],function(o){(r[o[0]]!=null||r[o[1]]!=null)&&(i[o[0]]=n[o[0]]=r[o[0]],i[o[1]]=n[o[1]]=r[o[1]])},this),this._updateRangeUse(r)},t.prototype.setCalculatedRange=function(r){var i=this.option;D(["start","startValue","end","endValue"],function(n){i[n]=r[n]})},t.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},t.prototype.getValueRange=function(r,i){if(r==null&&i==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(r,i).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var i,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var a=n[o],s=this._targetAxisInfoMap.get(a),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(a,s.indexList[l]);if(c.hostedBy(this))return c;i||(i=c)}return i},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Ee);function dW(e){var t={};return D(["start","end","startValue","endValue","throttle"],function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}var gl=Bfe;var Gfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(gl),hW=Gfe;var Hfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,o){this.dataZoomModel=r,this.ecModel=i,this.api=n},t.type="dataZoom",t}(He),Th=Hfe;var Ufe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.select",t}(Th),pW=Ufe;var _h=D,gW=lr,Wfe=function(){function e(t,r,i,n){this._dimName=t,this._axisIndex=r,this.ecModel=n,this._dataZoomModel=i}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(r){if(cW(r)){var i=Nn(this._dimName),n=r.getReferringComponents(i,dt).models[0];n&&this._axisIndex===n.componentIndex&&t.push(r)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return re(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var r=this._dataExtent,i=this.getAxisModel(),n=i.axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],l=[],c;_h(["start","end"],function(h,p){var g=t[h],f=t[h+"Value"];o[p]==="percent"?(g==null&&(g=a[p]),f=n.parse(Ye(g,a,r))):(c=!0,f=f==null?r[p]:n.parse(f),g=Ye(f,r,a)),l[p]=f==null||isNaN(f)?r[p]:f,s[p]=g==null||isNaN(g)?a[p]:g}),gW(l),gW(s);var u=this._minMaxSpan;c?d(l,s,r,a,!1):d(s,l,a,r,!0);function d(h,p,g,f,v){var m=v?"Span":"ValueSpan";zi(0,h,g,"all",u["min"+m],u["max"+m]);for(var y=0;y<2;y++)p[y]=Ye(h[y],g,f,!0),v&&(p[y]=n.parse(p[y]))}return{valueWindow:l,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=jfe(this,this._dimName,r),this._updateMinMaxSpan();var i=this.calculateDataWindow(t.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,r){if(t!==this._dataZoomModel)return;var i=this._dimName,n=this.getTargetSeriesModels(),o=t.get("filterMode"),a=this._valueWindow;if(o==="none")return;_h(n,function(l){var c=l.getData(),u=c.mapDimensionsAll(i);if(u.length){if(o==="weakFilter"){var d=c.getStore(),h=N(u,function(p){return c.getDimensionIndex(p)},c);c.filterSelf(function(p){for(var g,f,v,m=0;m<u.length;m++){var y=d.get(h[m],p),w=!isNaN(y),C=y<a[0],S=y>a[1];if(w&&!C&&!S)return!0;w&&(v=!0),C&&(g=!0),S&&(f=!0)}return v&&g&&f})}else _h(u,function(p){if(o==="empty")l.setData(c=c.map(p,function(f){return s(f)?f:NaN}));else{var g={};g[p]=a,c.selectRange(g)}});_h(u,function(p){c.setApproximateExtent(a,p)})}});function s(l){return l>=a[0]&&l<=a[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},r=this._dataZoomModel,i=this._dataExtent;_h(["min","max"],function(n){var o=r.get(n+"Span"),a=r.get(n+"ValueSpan");a!=null&&(a=this.getAxisModel().axis.scale.parse(a)),a!=null?o=Ye(i[0]+a,i,[0,100],!0):o!=null&&(a=Ye(o,[0,100],i,!0)-i[0]),t[n+"Span"]=o,t[n+"ValueSpan"]=a},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),r=this._percentWindow,i=this._valueWindow;if(r){var n=By(i,[0,500]);n=Math.min(n,20);var o=t.axis.scale.rawExtentInfo;r[0]!==0&&o.setDeterminedMinMax("min",+i[0].toFixed(n)),r[1]!==100&&o.setDeterminedMinMax("max",+i[1].toFixed(n)),o.freeze()}},e}();function jfe(e,t,r){var i=[1/0,-1/0];_h(r,function(a){i5(i,a.getData(),t)});var n=e.getAxisModel(),o=Iw(n.axis.scale,n,i).calculate();return[o.min,o.max]}var fW=Wfe;var $fe={getTargetSeries:function(e){function t(n){e.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(a,s){var l=e.getComponent(Nn(a),s);n(a,s,l,o)})})}t(function(n,o,a,s){a.__dzAxisProxy=null});var r=[];t(function(n,o,a,s){a.__dzAxisProxy||(a.__dzAxisProxy=new fW(n,o,s,e),r.push(a.__dzAxisProxy))});var i=Y();return D(r,function(n){D(n.getTargetSeriesModels(),function(o){i.set(o.uid,o)})}),i},overallReset:function(e,t){e.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(i,n){r.getAxisProxy(i,n).reset(r)}),r.eachTargetAxis(function(i,n){r.getAxisProxy(i,n).filterData(r,t)})}),e.eachComponent("dataZoom",function(r){var i=r.findRepresentativeAxisProxy();if(i){var n=i.getDataPercentWindow(),o=i.getDataValueWindow();r.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}})}},vW=$fe;function KA(e){e.registerAction("dataZoom",function(t,r){var i=uW(r,t);D(i,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var mW=!1;function cu(e){mW||(mW=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,vW),KA(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function yW(e){e.registerComponentModel(hW),e.registerComponentView(pW),cu(e)}var yr=function(){function e(){}return e}();var wW={};function fl(e,t){wW[e]=t}function ab(e){return wW[e]}var qfe=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;D(this.option.feature,function(i,n){var o=ab(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(r)),fe(i,o.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(Ee),CW=qfe;function bW(e,t,r){var i=t.getBoxLayoutParams(),n=t.get("padding"),o={width:r.getWidth(),height:r.getHeight()},a=Je(i,o,n);lo(t.get("orient"),e,t.get("itemGap"),a.width,a.height),Hs(e,i,o,n)}function sb(e,t){var r=ao(t.get("padding")),i=t.getItemStyle(["color","opacity"]);return i.fill=t.get("backgroundColor"),e=new Ce({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:i,silent:!0,z2:-1}),e}var Zfe=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n,o){var a=this.group;if(a.removeAll(),!r.get("show"))return;var s=+r.get("itemSize"),l=r.get("orient")==="vertical",c=r.get("feature")||{},u=this._features||(this._features={}),d=[];D(c,function(g,f){d.push(f)}),new Pr(this._featureNames||[],d).add(h).update(h).remove(se(h,null)).execute(),this._featureNames=d;function h(g,f){var v=d[g],m=d[f],y=c[v],w=new Ve(y,r,r.ecModel),C;if(o&&o.newTitle!=null&&o.featureName===v&&(y.title=o.newTitle),v&&!m){if(Xfe(v))C={onclick:w.option.onclick,featureName:v};else{var S=ab(v);if(!S)return;C=new S}u[v]=C}else if(C=u[m],!C)return;C.uid=Dn("toolbox-feature"),C.model=w,C.ecModel=i,C.api=n;var b=C instanceof yr;if(!v&&m){b&&C.dispose&&C.dispose(i,n);return}if(!w.get("show")||b&&C.unusable){b&&C.remove&&C.remove(i,n);return}p(w,C,v),w.setIconStatus=function(x,E){var M=this.option,T=this.iconPaths;M.iconStatus=M.iconStatus||{},M.iconStatus[x]=E,T[x]&&(E==="emphasis"?Br:Gr)(T[x])},C instanceof yr&&C.render&&C.render(w,i,n,o)}function p(g,f,v){var m=g.getModel("iconStyle"),y=g.getModel(["emphasis","iconStyle"]),w=f instanceof yr&&f.getIcons?f.getIcons():g.get("icon"),C=g.get("title")||{},S,b;H(w)?(S={},S[v]=w):S=w,H(C)?(b={},b[v]=C):b=C;var x=g.iconPaths={};D(S,function(E,M){var T=za(E,{},{x:-s/2,y:-s/2,width:s,height:s});T.setStyle(m.getItemStyle());var _=T.ensureState("emphasis");_.style=y.getItemStyle();var R=new De({style:{text:b[M],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:Od({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},i)},ignore:!0});T.setTextContent(R),oo({el:T,componentModel:r,itemName:M,formatterParamsExtra:{title:b[M]}}),T.__title=b[M],T.on("mouseover",function(){var A=y.getItemStyle(),P=l?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";R.setStyle({fill:y.get("textFill")||A.fill||A.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),T.setTextConfig({position:y.get("textPosition")||P}),R.ignore=!r.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",M])!=="emphasis"&&n.leaveEmphasis(this),R.hide()}),(g.get(["iconStatus",M])==="emphasis"?Br:Gr)(T),a.add(T),T.on("click",$(f.onclick,f,i,n,M)),x[M]=T})}bW(a,r,n),a.add(sb(a.getBoundingRect(),r)),l||a.eachChild(function(g){var f=g.__title,v=g.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),y=g.getTextContent(),w=y&&y.ensureState("emphasis");if(w&&!Z(w)&&f){var C=w.style||(w.style={}),S=Bo(f,De.makeFont(C)),b=g.x+a.x,x=g.y+a.y+s,E=!1;x+S.height>n.getHeight()&&(m.position="top",E=!0);var M=E?-5-S.height:s+10;b+S.width/2>n.getWidth()?(m.position=["100%",M],C.align="right"):b-S.width/2<0&&(m.position=[0,M],C.align="left")}})},t.prototype.updateView=function(r,i,n,o){D(this._features,function(a){a instanceof yr&&a.updateView&&a.updateView(a.model,i,n,o)})},t.prototype.remove=function(r,i){D(this._features,function(n){n instanceof yr&&n.remove&&n.remove(r,i)}),this.group.removeAll()},t.prototype.dispose=function(r,i){D(this._features,function(n){n instanceof yr&&n.dispose&&n.dispose(r,i)})},t.type="toolbox",t}(He);function Xfe(e){return e.indexOf("my")===0}var SW=Zfe;var Qfe=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){var n=this.model,o=n.get("name")||r.get("title.0.text")||"echarts",a=i.getZr().painter.getType()==="svg",s=a?"svg":n.get("type",!0)||"png",l=i.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),c=Re.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=o+"."+s,u.target="_blank",u.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||a){var h=l.split(","),p=h[0].indexOf("base64")>-1,g=a?decodeURIComponent(h[1]):h[1];p&&(g=window.atob(g));var f=o+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=g.length,m=new Uint8Array(v);v--;)m[v]=g.charCodeAt(v);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,f)}else{var w=document.createElement("iframe");document.body.appendChild(w);var C=w.contentWindow,S=C.document;S.open("image/svg+xml","replace"),S.write(g),S.close(),C.focus(),S.execCommand("SaveAs",!0,f),document.body.removeChild(w)}}else{var b=n.get("lang"),x='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(b&&b[0]||"")+'" /></body>',E=window.open();E.document.write(x),E.document.title=o}},t.getDefaultOption=function(r){var i={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return i},t}(yr),xW=Qfe;var DW="__ec_magicType_stack__";var Jfe=[["line","bar"],["stack"]],eve=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var r=this.model,i=r.get("icon"),n={};return D(r.get("type"),function(o){i[o]&&(n[o]=i[o])}),n},t.getDefaultOption=function(r){var i={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return i},t.prototype.onclick=function(r,i,n){var o=this.model,a=o.get(["seriesIndex",n]);if(EW[n]){var s={series:[]},l=function(d){var h=d.subType,p=d.id,g=EW[n](h,p,d,o);g&&(Q(g,d.option),s.series.push(g));var f=d.coordinateSystem;if(f&&f.type==="cartesian2d"&&(n==="line"||n==="bar")){var v=f.getAxesByScale("ordinal")[0];if(v){var m=v.dim,y=m+"Axis",w=d.getReferringComponents(y,dt).models[0],C=w.componentIndex;s[y]=s[y]||[];for(var S=0;S<=C;S++)s[y][C]=s[y][C]||{};s[y][C].boundaryGap=n==="bar"}}};D(Jfe,function(d){pe(d,n)>=0&&D(d,function(h){o.setIconStatus(h,"normal")})}),o.setIconStatus(n,"emphasis"),r.eachComponent({mainType:"series",query:a==null?null:{seriesIndex:a}},l);var c,u=n;n==="stack"&&(c=fe({stack:o.option.title.tiled,tiled:o.option.title.stack},o.option.title),o.get(["iconStatus",n])!=="emphasis"&&(u="tiled")),i.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},t}(yr),EW={line:function(e,t,r,i){if(e==="bar")return fe({id:t,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(e,t,r,i){if(e==="line")return fe({id:t,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(e,t,r,i){var n=r.get("stack")===DW;if(e==="line"||e==="bar")return i.setIconStatus("stack",n?"normal":"emphasis"),fe({id:t,stack:n?"":DW},i.get(["option","stack"])||{},!0)}};ni({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var MW=eve;var cb=new Array(60).join("-"),Rh="	";function tve(e){var t={},r=[],i=[];return e.eachRawSeries(function(n){var o=n.coordinateSystem;if(o&&(o.type==="cartesian2d"||o.type==="polar")){var a=o.getBaseAxis();if(a.type==="category"){var s=a.dim+"_"+a.index;t[s]||(t[s]={categoryAxis:a,valueAxis:o.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),t[s].series.push(n)}else r.push(n)}else r.push(n)}),{seriesGroupByCategoryAxis:t,other:r,meta:i}}function rve(e){var t=[];return D(e,function(r,i){var n=r.categoryAxis,o=r.valueAxis,a=o.dim,s=[" "].concat(N(r.series,function(p){return p.name})),l=[n.model.getCategories()];D(r.series,function(p){var g=p.getRawData();l.push(p.getRawData().mapArray(g.mapDimension(a),function(f){return f}))});for(var c=[s.join(Rh)],u=0;u<l[0].length;u++){for(var d=[],h=0;h<l.length;h++)d.push(l[h][u]);c.push(d.join(Rh))}t.push(c.join(`
`))}),t.join(`

`+cb+`

`)}function ive(e){return N(e,function(t){var r=t.getRawData(),i=[t.name],n=[];return r.each(r.dimensions,function(){for(var o=arguments.length,a=arguments[o-1],s=r.getName(a),l=0;l<o-1;l++)n[l]=arguments[l];i.push((s?s+Rh:"")+n.join(Rh))}),i.join(`
`)}).join(`

`+cb+`

`)}function nve(e){var t=tve(e);return{value:Pe([rve(t.seriesGroupByCategoryAxis),ive(t.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+cb+`

`),meta:t.meta}}function lb(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ove(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf(Rh)>=0)return!0}var ZA=new RegExp("["+Rh+"]+","g");function ave(e){for(var t=e.split(/\n+/g),r=lb(t.shift()).split(ZA),i=[],n=N(r,function(l){return{name:l,data:[]}}),o=0;o<t.length;o++){var a=lb(t[o]).split(ZA);i.push(a.shift());for(var s=0;s<a.length;s++)n[s]&&(n[s].data[o]=a[s])}return{series:n,categories:i}}function sve(e){for(var t=e.split(/\n+/g),r=lb(t.shift()),i=[],n=0;n<t.length;n++){var o=lb(t[n]);if(o){var a=o.split(ZA),s="",l=void 0,c=!1;isNaN(a[0])?(c=!0,s=a[0],a=a.slice(1),i[n]={name:s,value:[]},l=i[n].value):l=i[n]=[];for(var u=0;u<a.length;u++)l.push(+a[u]);l.length===1&&(c?i[n].value=l[0]:i[n]=l[0])}}return{name:r,data:i}}function lve(e,t){var r=e.split(new RegExp(`
*`+cb+`
*`,"g")),i={series:[]};return D(r,function(n,o){if(ove(n)){var a=ave(n),s=t[o],l=s.axisDim+"Axis";s&&(i[l]=i[l]||[],i[l][s.axisIndex]={data:a.categories},i.series=i.series.concat(a.series))}else{var a=sve(n);i.series.push(a)}}),i}var cve=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){setTimeout(function(){i.dispatchAction({type:"hideTip"})});var n=i.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",a.style.backgroundColor=o.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=o.get("lang")||[];s.innerHTML=l[0]||o.get("title"),s.style.cssText="margin:10px 20px",s.style.color=o.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var d=o.get("optionToContent"),h=o.get("contentToOption"),p=nve(r);if(Z(d)){var g=d(i.getOption());H(g)?c.innerHTML=g:bs(g)&&c.appendChild(g)}else{u.readOnly=o.get("readOnly");var f=u.style;f.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",f.color=o.get("textColor"),f.borderColor=o.get("textareaBorderColor"),f.backgroundColor=o.get("textareaColor"),u.value=p.value,c.appendChild(u)}var v=p.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),C=document.createElement("div");y+=";background-color:"+o.get("buttonColor"),y+=";color:"+o.get("buttonTextColor");var S=this;function b(){n.removeChild(a),S._dom=null}Ip(w,"click",b),Ip(C,"click",function(){if(h==null&&d!=null||h!=null&&d==null){b();return}var x;try{Z(h)?x=h(c,i.getOption()):x=lve(u.value,v)}catch(E){throw b(),new Error("Data view format error "+E)}x&&i.dispatchAction({type:"changeDataView",newOption:x}),b()}),w.innerHTML=l[1],C.innerHTML=l[2],C.style.cssText=w.style.cssText=y,!o.get("readOnly")&&m.appendChild(C),m.appendChild(w),a.appendChild(s),a.appendChild(c),a.appendChild(m),c.style.height=n.clientHeight-80+"px",n.appendChild(a),this._dom=a},t.prototype.remove=function(r,i){this._dom&&i.getDom().removeChild(this._dom)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.getDefaultOption=function(r){var i={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return i},t}(yr);function uve(e,t){return N(e,function(r,i){var n=t&&t[i];if(J(n)&&!O(n)){var o=J(r)&&!O(r);o||(r={value:r});var a=n.name!=null&&r.name==null;return r=Q(r,n),a&&delete r.name,r}else return r})}ni({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var r=[];D(e.newOption.series,function(i){var n=t.getSeriesByName(i.name)[0];if(!n)r.push(F({type:"scatter"},i));else{var o=n.get("data");r.push({name:i.name,data:uve(i.data,o)})}}),t.mergeOption(Q({series:r},e.newOption))});var TW=cve;var _W=D,RW=he();function AW(e,t){var r=XA(e);_W(t,function(i,n){for(var o=r.length-1;o>=0;o--){var a=r[o];if(a[n])break}if(o<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();r[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),r.push(t)}function IW(e){var t=XA(e),r=t[t.length-1];t.length>1&&t.pop();var i={};return _W(r,function(n,o){for(var a=t.length-1;a>=0;a--)if(n=t[a][o],n){i[o]=n;break}}),i}function PW(e){RW(e).snapshots=null}function kW(e){return XA(e).length}function XA(e){var t=RW(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var dve=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(r,i){PW(r),i.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(r){var i={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return i},t}(yr);ni({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var FW=dve;var hve=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],pve=function(){function e(t,r,i){var n=this;this._targetInfoList=[];var o=OW(r,t);D(gve,function(a,s){(!i||!i.include||pe(i.include,s)>=0)&&a(o,n._targetInfoList)})}return e.prototype.setOutputRanges=function(t,r){return this.matchOutputRanges(t,r,function(i,n,o){if((i.coordRanges||(i.coordRanges=[])).push(n),!i.coordRange){i.coordRange=n;var a=QA[i.brushType](0,o,n);i.__rangeOffset={offset:BW[i.brushType](a.values,i.range,[1,1]),xyMinMax:a.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,r,i){D(t,function(n){var o=this.findTargetInfo(n,r);o&&o!==!0&&D(o.coordSyses,function(a){var s=QA[n.brushType](1,a,n.range,!0);i(n,s.values,a,r)})},this)},e.prototype.setInputRanges=function(t,r){D(t,function(i){var n=this.findTargetInfo(i,r);if(i.range=i.range||[],n&&n!==!0){i.panelId=n.panelId;var o=QA[i.brushType](0,n.coordSys,i.coordRange),a=i.__rangeOffset;i.range=a?BW[i.brushType](o.values,a.offset,fve(o.xyMinMax,a.xyMinMax)):o.values}},this)},e.prototype.makePanelOpts=function(t,r){return N(this._targetInfoList,function(i){var n=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:r?r(i):null,clipPath:LC(n),isTargetByCursor:OC(n,t,i.coordSysModel),getLinearBrushOtherExtent:FC(n)}})},e.prototype.controlSeries=function(t,r,i){var n=this.findTargetInfo(t,i);return n===!0||n&&pe(n.coordSyses,r.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,r){for(var i=this._targetInfoList,n=OW(r,t),o=0;o<i.length;o++){var a=i[o],s=t.panelId;if(s){if(a.panelId===s)return a}else for(var l=0;l<NW.length;l++)if(NW[l](n,a))return a}return!0},e}();function JA(e){return e[0]>e[1]&&e.reverse(),e}function OW(e,t){return Ps(e,t,{includeMainTypes:hve})}var gve={grid:function(e,t){var r=e.xAxisModels,i=e.yAxisModels,n=e.gridModels,o=Y(),a={},s={};!r&&!i&&!n||(D(r,function(l){var c=l.axis.grid.model;o.set(c.id,c),a[c.id]=!0}),D(i,function(l){var c=l.axis.grid.model;o.set(c.id,c),s[c.id]=!0}),D(n,function(l){o.set(l.id,l),a[l.id]=!0,s[l.id]=!0}),o.each(function(l){var c=l.coordinateSystem,u=[];D(c.getCartesians(),function(d,h){(pe(r,d.getAxis("x").model)>=0||pe(i,d.getAxis("y").model)>=0)&&u.push(d)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:zW.grid,xAxisDeclared:a[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){D(e.geoModels,function(r){var i=r.coordinateSystem;t.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:i,coordSyses:[i],getPanelRect:zW.geo})})}},NW=[function(e,t){var r=e.xAxisModel,i=e.yAxisModel,n=e.gridModel;return!n&&r&&(n=r.axis.grid.model),!n&&i&&(n=i.axis.grid.model),n&&n===t.gridModel},function(e,t){var r=e.geoModel;return r&&r===t.geoModel}],zW={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(no(e)),t}},QA={lineX:se(VW,0),lineY:se(VW,1),rect:function(e,t,r,i){var n=e?t.pointToData([r[0][0],r[1][0]],i):t.dataToPoint([r[0][0],r[1][0]],i),o=e?t.pointToData([r[0][1],r[1][1]],i):t.dataToPoint([r[0][1],r[1][1]],i),a=[JA([n[0],o[0]]),JA([n[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,r,i){var n=[[1/0,-1/0],[1/0,-1/0]],o=N(r,function(a){var s=e?t.pointToData(a,i):t.dataToPoint(a,i);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:o,xyMinMax:n}}};function VW(e,t,r,i){var n=r.getAxis(["x","y"][e]),o=JA(N([0,1],function(s){return t?n.coordToData(n.toLocalCoord(i[s]),!0):n.toGlobalCoord(n.dataToCoord(i[s]))})),a=[];return a[e]=o,a[1-e]=[NaN,NaN],{values:o,xyMinMax:a}}var BW={lineX:se(GW,0),lineY:se(GW,1),rect:function(e,t,r){return[[e[0][0]-r[0]*t[0][0],e[0][1]-r[0]*t[0][1]],[e[1][0]-r[1]*t[1][0],e[1][1]-r[1]*t[1][1]]]},polygon:function(e,t,r){return N(e,function(i,n){return[i[0]-r[0]*t[n][0],i[1]-r[1]*t[n][1]]})}};function GW(e,t,r,i){return[t[0]-i[e]*r[0],t[1]-i[e]*r[1]]}function fve(e,t){var r=HW(e),i=HW(t),n=[r[0]/i[0],r[1]/i[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function HW(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Lf=pve;var eI=D,vve=tN("toolbox-dataZoom_");var mve=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n,o){this._brushController||(this._brushController=new yh(n.getZr()),this._brushController.on("brush",$(this._onBrush,this)).mount()),Cve(r,i,this,o,n),wve(r,i)},t.prototype.onclick=function(r,i,n){yve[n].call(this)},t.prototype.remove=function(r,i){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(r,i){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(r){var i=r.areas;if(!r.isEnd||!i.length)return;var n={},o=this.ecModel;this._brushController.updateCovers([]);var a=new Lf(tI(this.model),o,{include:["grid"]});a.matchOutputRanges(i,o,function(c,u,d){if(d.type==="cartesian2d"){var h=c.brushType;h==="rect"?(s("x",d,u[0]),s("y",d,u[1])):s({lineX:"x",lineY:"y"}[h],d,u)}}),AW(o,n),this._dispatchZoomAction(n);function s(c,u,d){var h=u.getAxis(c),p=h.model,g=l(c,p,o),f=g.findRepresentativeAxisProxy(p).getMinMaxSpan();(f.minValueSpan!=null||f.maxValueSpan!=null)&&(d=zi(0,d.slice(),h.scale.getExtent(),0,f.minValueSpan,f.maxValueSpan)),g&&(n[g.id]={dataZoomId:g.id,startValue:d[0],endValue:d[1]})}function l(c,u,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(p){var g=p.getAxisModel(c,u.componentIndex);g&&(h=p)}),h}},t.prototype._dispatchZoomAction=function(r){var i=[];eI(r,function(n,o){i.push(re(n))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},t.getDefaultOption=function(r){var i={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return i},t}(yr),yve={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(IW(this.ecModel))}};function tI(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function wve(e,t){e.setIconStatus("back",kW(t)>1?"emphasis":"normal")}function Cve(e,t,r,i,n){var o=r._isZoomActive;i&&i.type==="takeGlobalCursor"&&(o=i.key==="dataZoomSelect"?i.dataZoomSelectActive:!1),r._isZoomActive=o,e.setIconStatus("zoom",o?"emphasis":"normal");var a=new Lf(tI(e),t,{include:["grid"]}),s=a.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(s).enableBrush(o&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}S6("dataZoom",function(e){var t=e.getComponent("toolbox",0),r=["feature","dataZoom"];if(!t||t.get(r)==null)return;var i=t.getModel(r),n=[],o=tI(i),a=Ps(e,o);eI(a.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),eI(a.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var d=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:vve+c+d};h[u]=d,n.push(h)}return n});var UW=mve;function rI(e){e.registerComponentModel(CW),e.registerComponentView(SW),fl("saveAsImage",xW),fl("magicType",MW),fl("dataView",TW),fl("dataZoom",UW),fl("restore",FW),Te(yW)}var bve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Ee),WW=bve;function ub(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function jW(e){if(Re.domSupported){for(var t=document.documentElement.style,r=0,i=e.length;r<i;r++)if(e[r]in t)return e[r]}}var iI=jW(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$W=jW(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function nI(e,t){if(!e)return t;t=_0(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function YW(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Sve=nI($W,"transition"),oI=nI(iI,"transform"),xve="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Re.transform3dSupported?"will-change:transform;":"");function Dve(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Eve(e,t,r){if(!H(r)||r==="inside")return"";var i=e.get("backgroundColor"),n=e.get("borderWidth");t=so(t);var o=Dve(r),a=Math.max(Math.round(n)*1.5,6),s="",l=oI+":",c;pe(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=o==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=a+n,h=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),p=Math.round(((h-Math.SQRT2*n)/2+Math.SQRT2*n-(h-d)/2)*100)/100;s+=";"+o+":-"+p+"px";var g=t+" solid "+n+"px;",f=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",s+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+i+";"];return'<div style="'+f.join("")+'"></div>'}function Mve(e,t){var r="cubic-bezier(0.23,1,0.32,1)",i=" "+e/2+"s "+r,n="opacity"+i+",visibility"+i;return t||(i=" "+e+"s "+r,n+=Re.transformSupported?","+oI+i:",left"+i+",top"+i),Sve+":"+n}function qW(e,t,r){var i=e.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!Re.transformSupported)return r?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var o=Re.transform3dSupported,a="translate"+(o?"3d":"")+"("+i+","+n+(o?",0":"")+")";return r?"top:0;left:0;"+oI+":"+a+";":[["top",0],["left",0],[iI,a]]}function Tve(e){var t=[],r=e.get("fontSize"),i=e.getTextColor();i&&t.push("color:"+i),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var n=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return n&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+n),D(["decoration","align"],function(l){var c=e.get(l);c&&t.push("text-"+l+":"+c)}),t.join(";")}function _ve(e,t,r){var i=[],n=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),c=e.get("shadowOffsetY"),u=e.getModel("textStyle"),d=K0(e,"html"),h=l+"px "+c+"px "+a+"px "+s;return i.push("box-shadow:"+h),t&&n&&i.push(Mve(n,r)),o&&i.push("background-color:"+o),D(["width","color","radius"],function(p){var g="border-"+p,f=_0(g),v=e.get(f);v!=null&&i.push(g+":"+v+(p==="color"?"":"px"))}),i.push(Tve(u)),d!=null&&i.push("padding:"+ao(d).join("px ")+"px"),i.join(";")+";"}function KW(e,t,r,i,n){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&NF(e,a,r,i,n)}else{e[0]=i,e[1]=n;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Rve=function(){function e(t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Re.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var n=this._zr=t.getZr(),o=r.appendTo,a=o&&(H(o)?document.querySelector(o):bs(o)?o:Z(o)&&o(t.getDom()));KW(this._styleCoord,n,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(i),this._api=t,this._container=a;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=n.handler,u=n.painter.getViewportRoot();wi(u,l,!0),c.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var r=this._api.getDom(),i=YW(r,"position"),n=r.style;n.position!=="absolute"&&i!=="absolute"&&(n.position="relative")}var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this._alwaysShowContent=o,this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,o=this._styleCoord;i.innerHTML?n.cssText=xve+_ve(t,!this._firstShow,this._longHide)+qW(o[0],o[1],!0)+("border-color:"+so(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,i,n,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(H(o)&&i.get("trigger")==="item"&&!ub(i)&&(s=Eve(i,n,o)),H(t))a.innerHTML=t+s;else if(t){a.innerHTML="",O(t)||(t=[t]);for(var l=0;l<t.length;l++)bs(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var c=document.createElement("div");c.innerHTML=s,a.appendChild(c)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var i=this._styleCoord;if(KW(i,this._zr,this._container,t,r),i[0]!=null&&i[1]!=null){var n=this.el.style,o=qW(i[0],i[1]);D(o,function(a){n[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Re.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout($(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),ZW=Rve;var Ave=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),QW(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,i,n,o){var a=this;J(t)&&qe(""),this.el&&this._zr.remove(this.el);var s=i.getModel("textStyle");this.el=new De({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:K0(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),D(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){a.el.style[c]=i.get(c)}),D(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){a.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),i=XW(t.style);return[r.width+i.left+i.right,r.height+i.top+i.bottom]},e.prototype.moveTo=function(t,r){var i=this.el;if(i){var n=this._styleCoord;QW(n,this._zr,t,r),t=n[0],r=n[1];var o=i.style,a=vl(o.borderWidth||0),s=XW(o);i.x=t+a+s.left,i.y=r+a+s.top,i.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout($(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function vl(e){return Math.max(0,e)}function XW(e){var t=vl(e.shadowBlur||0),r=vl(e.shadowOffsetX||0),i=vl(e.shadowOffsetY||0);return{left:vl(t-r),right:vl(t+r),top:vl(t-i),bottom:vl(t+i)}}function QW(e,t,r,i){e[0]=r,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var JW=Ave;var Ive=new Ce({shape:{x:-1,y:-1,width:2,height:2}}),Pve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){if(!(Re.node||!i.getDom())){var n=r.getComponent("tooltip"),o=this._renderMode=aN(n.get("renderMode"));this._tooltipContent=o==="richText"?new JW(i):new ZW(i,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},t.prototype.render=function(r,i,n){if(!(Re.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=i,this._api=n;var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?_n(this,"_updatePosition",50,"fixRate"):ja(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,i=r.get("triggerOn");XC("itemTooltip",this._api,$(function(n,o,a){i!=="none"&&(i.indexOf(n)>=0?this._tryShow(o,a):n==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,i=this._ecModel,n=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&a.manuallyShowTip(r,i,n,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,i,n,o){if(!(o.from===this.uid||Re.node||!n.getDom())){var a=e9(o,n);this._ticket="";var s=o.dataByCoordSys,l=Ove(o,i,n);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var u=Ive;u.x=o.x,u.y=o.y,u.update(),ae(u).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:u},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,i,n,o))return;var d=Pf(o,i),h=d.point[0],p=d.point[1];h!=null&&p!=null&&this._tryShow({offsetX:h,offsetY:p,target:d.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:n.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,i,n,o){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(e9(o,n))},t.prototype._manuallyAxisShowTip=function(r,i,n,o){var a=o.seriesIndex,s=o.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var c=i.getSeriesByIndex(a);if(c){var u=c.getData(),d=Ff([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,i){var n=r.target,o=this._tooltipModel;if(o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(n){var s=ae(n);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;uo(n,function(u){if(ae(u).dataIndex!=null)return l=u,!0;if(ae(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(r,l,i):c?this._showComponentItemTooltip(r,c,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(r,i){var n=r.get("showDelay");i=$(i,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(i,n):i()},t.prototype._showAxisTooltip=function(r,i){var n=this._ecModel,o=this._tooltipModel,a=[i.offsetX,i.offsetY],s=Ff([i.tooltipOption],o),l=this._renderMode,c=[],u=wt("section",{blocks:[],noHeader:!0}),d=[],h=new Z0;D(r,function(y){D(y.dataByAxis,function(w){var C=n.getComponent(w.axisDim+"Axis",w.axisIndex),S=w.value;if(!(!C||S==null)){var b=IA(S,C.axis,n,w.seriesDataIndices,w.valueLabelOpt),x=wt("section",{header:b,noHeader:!dr(b),sortBlocks:!0,blocks:[]});u.blocks.push(x),D(w.seriesDataIndices,function(E){var M=n.getSeriesByIndex(E.seriesIndex),T=E.dataIndexInside,_=M.getDataParams(T);if(!(_.dataIndex<0)){_.axisDim=w.axisDim,_.axisIndex=w.axisIndex,_.axisType=w.axisType,_.axisId=w.axisId,_.axisValue=ef(C.axis,{value:S}),_.axisValueLabel=b,_.marker=h.makeTooltipMarker("item",so(_.color),l);var R=iM(M.formatTooltip(T,!0,null)),A=R.frag;if(A){var P=Ff([M],o).get("valueFormatter");x.blocks.push(P?F({valueFormatter:P},A):A)}R.text&&d.push(R.text),c.push(_)}})}})}),u.blocks.reverse(),d.reverse();var p=i.position,g=s.get("order"),f=uM(u,h,l,g,n.get("useUTC"),s.get("textStyle"));f&&d.unshift(f);var v=l==="richText"?`

`:"<br/>",m=d.join(v);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,c)?this._updatePosition(s,p,a[0],a[1],this._tooltipContent,c):this._showTooltipContent(s,m,c,Math.random()+"",a[0],a[1],p,null,h)})},t.prototype._showSeriesItemTooltip=function(r,i,n){var o=this._ecModel,a=ae(i),s=a.seriesIndex,l=o.getSeriesByIndex(s),c=a.dataModel||l,u=a.dataIndex,d=a.dataType,h=c.getData(d),p=this._renderMode,g=r.positionDefault,f=Ff([h.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),v=f.get("trigger");if(!(v!=null&&v!=="item")){var m=c.getDataParams(u,d),y=new Z0;m.marker=y.makeTooltipMarker("item",so(m.color),p);var w=iM(c.formatTooltip(u,!1,d)),C=f.get("order"),S=f.get("valueFormatter"),b=w.frag,x=b?uM(S?F({valueFormatter:S},b):b,y,p,C,o.get("useUTC"),f.get("textStyle")):w.text,E="item_"+c.name+"_"+u;this._showOrMove(f,function(){this._showTooltipContent(f,x,m,E,r.offsetX,r.offsetY,r.position,r.target,y)}),n({type:"showTip",dataIndexInside:u,dataIndex:h.getRawIndex(u),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,i,n){var o=this._renderMode==="html",a=ae(i),s=a.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(H(l)){var u=l;l={content:u,formatter:u},c=!0}c&&o&&l.content&&(l=re(l),l.content=gr(l.content));var d=[l],h=this._ecModel.getComponent(a.componentMainType,a.componentIndex);h&&d.push(h),d.push({formatter:l.content});var p=r.positionDefault,g=Ff(d,this._tooltipModel,p?{position:p}:null),f=g.get("content"),v=Math.random()+"",m=new Z0;this._showOrMove(g,function(){var y=re(g.get("formatterParams")||{});this._showTooltipContent(g,f,y,v,r.offsetX,r.offsetY,r.position,i,m)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,i,n,o,a,s,l,c,u){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var d=this._tooltipContent;d.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var p=i,g=this._getNearestPoint([a,s],n,r.get("trigger"),r.get("borderColor")),f=g.color;if(h)if(H(h)){var v=r.ecModel.get("useUTC"),m=O(n)?n[0]:n,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;p=h,y&&(p=Fc(m.axisValue,p,v)),p=A0(p,n,!0)}else if(Z(h)){var w=$(function(C,S){C===this._ticket&&(d.setContent(S,u,r,f,l),this._updatePosition(r,l,a,s,d,n,c))},this);this._ticket=o,p=h(n,o,w)}else p=h;d.setContent(p,u,r,f,l),d.show(r,f),this._updatePosition(r,l,a,s,d,n,c)}},t.prototype._getNearestPoint=function(r,i,n,o){if(n==="axis"||O(i))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!O(i))return{color:o||i.color||i.borderColor}},t.prototype._updatePosition=function(r,i,n,o,a,s,l){var c=this._api.getWidth(),u=this._api.getHeight();i=i||r.get("position");var d=a.getSize(),h=r.get("align"),p=r.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),Z(i)&&(i=i([n,o],s,a.el,g,{viewSize:[c,u],contentSize:d.slice()})),O(i))n=j(i[0],c),o=j(i[1],u);else if(J(i)){var f=i;f.width=d[0],f.height=d[1];var v=Je(f,{width:c,height:u});n=v.x,o=v.y,h=null,p=null}else if(H(i)&&l){var m=Fve(i,g,d,r.get("borderWidth"));n=m[0],o=m[1]}else{var m=kve(n,o,a,c,u,h?null:20,p?null:20);n=m[0],o=m[1]}if(h&&(n-=t9(h)?d[0]/2:h==="right"?d[0]:0),p&&(o-=t9(p)?d[1]/2:p==="bottom"?d[1]:0),ub(r)){var m=Lve(n,o,a,c,u);n=m[0],o=m[1]}a.moveTo(n,o)},t.prototype._updateContentNotChangedOnAxis=function(r,i){var n=this._lastDataByCoordSys,o=this._cbParamsList,a=!!n&&n.length===r.length;return a&&D(n,function(s,l){var c=s.dataByAxis||[],u=r[l]||{},d=u.dataByAxis||[];a=a&&c.length===d.length,a&&D(c,function(h,p){var g=d[p]||{},f=h.seriesDataIndices||[],v=g.seriesDataIndices||[];a=a&&h.value===g.value&&h.axisType===g.axisType&&h.axisId===g.axisId&&f.length===v.length,a&&D(f,function(m,y){var w=v[y];a=a&&m.seriesIndex===w.seriesIndex&&m.dataIndex===w.dataIndex}),o&&D(h.seriesDataIndices,function(m){var y=m.seriesIndex,w=i[y],C=o[y];w&&C&&C.data!==w.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=i,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,i){Re.node||!i.getDom()||(ja(this,"_updatePosition"),this._tooltipContent.dispose(),If("itemTooltip",i))},t.type="tooltip",t}(He);function Ff(e,t,r){var i=t.ecModel,n;r?(n=new Ve(r,i,i),n=new Ve(t.option,n,i)):n=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof Ve&&(a=a.get("tooltip",!0)),H(a)&&(a={formatter:a}),a&&(n=new Ve(a,n,i)))}return n}function e9(e,t){return e.dispatchAction||$(t.dispatchAction,t)}function kve(e,t,r,i,n,o,a){var s=r.getSize(),l=s[0],c=s[1];return o!=null&&(e+l+o+2>i?e-=l+o:e+=o),a!=null&&(t+c+a>n?t-=c+a:t+=a),[e,t]}function Lve(e,t,r,i,n){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,i)-a,t=Math.min(t+s,n)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Fve(e,t,r,i){var n=r[0],o=r[1],a=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,c=t.width,u=t.height;switch(e){case"inside":s=t.x+c/2-n/2,l=t.y+u/2-o/2;break;case"top":s=t.x+c/2-n/2,l=t.y-o-a;break;case"bottom":s=t.x+c/2-n/2,l=t.y+u+a;break;case"left":s=t.x-n-a,l=t.y+u/2-o/2;break;case"right":s=t.x+c+a,l=t.y+u/2-o/2}return[s,l]}function t9(e){return e==="center"||e==="middle"}function Ove(e,t,r){var i=Qp(e).queryOptionMap,n=i.keys()[0];if(!(!n||n==="series")){var o=ks(t,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(c){var u=ae(c).tooltipConfig;if(u&&u.name===e.name)return l=c,!0}),l)return{componentMainType:n,componentIndex:a.componentIndex,el:l}}}}var r9=Pve;function aI(e){Te(So),e.registerComponentModel(WW),e.registerComponentView(r9),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},pt),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},pt)}var Nve=["rect","polygon","keep","clear"];function sI(e,t){var r=Ge(e?e.brush:[]);if(r.length){var i=[];D(r,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(i=i.concat(c))});var n=e&&e.toolbox;O(n)&&(n=n[0]),n||(n={feature:{}},e.toolbox=[n]);var o=n.feature||(n.feature={}),a=o.brush||(o.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),zve(s),t&&!s.length&&s.push.apply(s,Nve)}}function zve(e){var t={};D(e,function(r){t[r]=1}),e.length=0,D(t,function(r,i){e.push(i)})}var i9=D;function n9(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function Of(e,t,r){var i={};return i9(t,function(o){var a=i[o]=n();i9(e[o],function(s,l){if(Ht.isValidType(l)){var c={type:l,visual:s};r&&r(c,o),a[l]=new Ht(c),l==="opacity"&&(c=re(c),c.type="colorAlpha",a.__hidden.__alphaForOpacity=new Ht(c))}})}),i;function n(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function db(e,t,r){var i;D(r,function(n){t.hasOwnProperty(n)&&n9(t[n])&&(i=!0)}),i&&D(r,function(n){t.hasOwnProperty(n)&&n9(t[n])?e[n]=re(t[n]):delete e[n]})}function o9(e,t,r,i,n,o){var a={};D(e,function(d){var h=Ht.prepareVisualTypes(t[d]);a[d]=h});var s;function l(d){return Ng(r,s,d)}function c(d,h){mM(r,s,d,h)}o==null?r.each(u):r.each([o],u);function u(d,h){s=o==null?d:h;var p=r.getRawDataItem(s);if(!(p&&p.visualMap===!1))for(var g=i.call(n,d),f=t[g],v=a[g],m=0,y=v.length;m<y;m++){var w=v[m];f[w]&&f[w].applyVisual(d,l,c)}}}function a9(e,t,r,i){var n={};return D(e,function(o){var a=Ht.prepareVisualTypes(t[o]);n[o]=a}),{progress:function(a,s){var l;i!=null&&(l=s.getDimensionIndex(i));function c(S){return Ng(s,d,S)}function u(S,b){mM(s,d,S,b)}for(var d,h=s.getStore();(d=a.next())!=null;){var p=s.getRawDataItem(d);if(!(p&&p.visualMap===!1))for(var g=i!=null?h.get(l,d):d,f=r(g),v=t[f],m=n[f],y=0,w=m.length;y<w;y++){var C=m[y];v[C]&&v[C].applyVisual(g,c,u)}}}}}function c9(e){var t=e.brushType,r={point:function(i){return s9[t].point(i,r,e)},rect:function(i){return s9[t].rect(i,r,e)}};return r}var s9={lineX:l9(0),lineY:l9(1),rect:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])},rect:function(e,t,r){return e&&r.boundingRect.intersect(e)}},polygon:{point:function(e,t,r){return e&&r.boundingRect.contain(e[0],e[1])&&$a(r.range,e[0],e[1])},rect:function(e,t,r){var i=r.range;if(!e||i.length<=1)return!1;var n=e.x,o=e.y,a=e.width,s=e.height,l=i[0];if($a(i,n,o)||$a(i,n+a,o)||$a(i,n,o+s)||$a(i,n+a,o+s)||le.create(e).contain(l[0],l[1])||Fd(n,o,n+a,o,i)||Fd(n,o,n,o+s,i)||Fd(n+a,o,n+a,o+s,i)||Fd(n,o+s,n+a,o+s,i))return!0}}};function l9(e){var t=["x","y"],r=["width","height"];return{point:function(i,n,o){if(i){var a=o.range,s=i[e];return Nf(s,a)}},rect:function(i,n,o){if(i){var a=o.range,s=[i[t[e]],i[t[e]]+i[r[e]]];return s[1]<s[0]&&s.reverse(),Nf(s[0],a)||Nf(s[1],a)||Nf(a[0],s)||Nf(a[1],s)}}}}function Nf(e,t){return t[0]<=e&&e<=t[1]}var u9=["inBrush","outOfBrush"],lI="__ecBrushSelect",cI="__ecInBrushSelectEvent";function uI(e){e.eachComponent({mainType:"brush"},function(t){var r=t.brushTargetManager=new Lf(t.option,e);r.setInputRanges(t.areas,e)})}function dI(e,t,r){var i=[],n,o;e.eachComponent({mainType:"brush"},function(a){r&&r.type==="takeGlobalCursor"&&a.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),uI(e),e.eachComponent({mainType:"brush"},function(a,s){var l={brushId:a.id,brushIndex:s,brushName:a.name,areas:re(a.areas),selected:[]};i.push(l);var c=a.option,u=c.brushLink,d=[],h=[],p=[],g=!1;s||(n=c.throttleType,o=c.throttleDelay);var f=N(a.areas,function(S){var b=Hve[S.brushType],x=Q({boundingRect:b?b(S):void 0},S);return x.selectors=c9(x),x}),v=Of(a.option,u9,function(S){S.mappingMethod="fixed"});O(u)&&D(u,function(S){d[S]=1});function m(S){return u==="all"||!!d[S]}function y(S){return!!S.length}e.eachSeries(function(S,b){var x=p[b]=[];S.subType==="parallel"?w(S,b):C(S,b,x)});function w(S,b){var x=S.coordinateSystem;g=g||x.hasAxisBrushed(),m(b)&&x.eachActiveState(S.getData(),function(E,M){E==="active"&&(h[M]=1)})}function C(S,b,x){if(!(!S.brushSelector||Gve(a,b))&&(D(f,function(M){a.brushTargetManager.controlSeries(M,S,e)&&x.push(M),g=g||y(x)}),m(b)&&y(x))){var E=S.getData();E.each(function(M){d9(S,x,E,M)&&(h[M]=1)})}}e.eachSeries(function(S,b){var x={seriesId:S.id,seriesIndex:b,seriesName:S.name,dataIndex:[]};l.selected.push(x);var E=p[b],M=S.getData(),T=m(b)?function(_){return h[_]?(x.dataIndex.push(M.getRawIndex(_)),"inBrush"):"outOfBrush"}:function(_){return d9(S,E,M,_)?(x.dataIndex.push(M.getRawIndex(_)),"inBrush"):"outOfBrush"};(m(b)?g:y(E))&&o9(u9,v,M,T)})}),Vve(t,n,o,i,r)}function Vve(e,t,r,i,n){if(n){var o=e.getZr();if(!o[cI]){o[lI]||(o[lI]=Bve);var a=_n(o,lI,r,t);a(e,i)}}}function Bve(e,t){if(!e.isDisposed()){var r=e.getZr();r[cI]=!0,e.dispatchAction({type:"brushSelect",batch:t}),r[cI]=!1}}function d9(e,t,r,i){for(var n=0,o=t.length;n<o;n++){var a=t[n];if(e.brushSelector(i,r,a.selectors,a))return!0}}function Gve(e,t){var r=e.option.seriesIndex;return r!=null&&r!=="all"&&(O(r)?pe(r,t)<0:t!==r)}var Hve={rect:function(e){return h9(e.range)},polygon:function(e){for(var t,r=e.range,i=0,n=r.length;i<n;i++){t=t||[[1/0,-1/0],[1/0,-1/0]];var o=r[i];o[0]<t[0][0]&&(t[0][0]=o[0]),o[0]>t[0][1]&&(t[0][1]=o[0]),o[1]<t[1][0]&&(t[1][0]=o[1]),o[1]>t[1][1]&&(t[1][1]=o[1])}return t&&h9(t)}};function h9(e){return new le(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var Uve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){this.ecModel=r,this.api=i,this.model,(this._brushController=new yh(i.getZr())).on("brush",$(this._onBrush,this)).mount()},t.prototype.render=function(r,i,n,o){this.model=r,this._updateController(r,i,n,o)},t.prototype.updateTransform=function(r,i,n,o){uI(i),this._updateController(r,i,n,o)},t.prototype.updateVisual=function(r,i,n,o){this.updateTransform(r,i,n,o)},t.prototype.updateView=function(r,i,n,o){this._updateController(r,i,n,o)},t.prototype._updateController=function(r,i,n,o){(!o||o.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(n)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(r){var i=this.model.id,n=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:re(n),$from:i}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:re(n),$from:i})},t.type="brush",t}(He),p9=Uve;var Wve="#ddd",jve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.areas=[],r.brushOption={},r}return t.prototype.optionUpdated=function(r,i){var n=this.option;!i&&db(n,r,["inBrush","outOfBrush"]);var o=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:Wve},o.hasOwnProperty("liftZ")||(o.liftZ=5)},t.prototype.setAreas=function(r){r&&(this.areas=N(r,function(i){return g9(this.option,i)},this))},t.prototype.setBrushOption=function(r){this.brushOption=g9(this.option,r),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(Ee);function g9(e,t){return fe({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Ve(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var f9=jve;var $ve=["rect","polygon","lineX","lineY","keep","clear"],Yve=function(e){I(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(r,i,n){var o,a,s;i.eachComponent({mainType:"brush"},function(l){o=l.brushType,a=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=o,this._brushMode=a,D(r.get("type",!0),function(l){r.setIconStatus(l,(l==="keep"?a==="multiple":l==="clear"?s:l===o)?"emphasis":"normal")})},t.prototype.updateView=function(r,i,n){this.render(r,i,n)},t.prototype.getIcons=function(){var r=this.model,i=r.get("icon",!0),n={};return D(r.get("type",!0),function(o){i[o]&&(n[o]=i[o])}),n},t.prototype.onclick=function(r,i,n){var o=this._brushType,a=this._brushMode;n==="clear"?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?o:o===n?!1:n,brushMode:n==="keep"?a==="multiple"?"single":"multiple":a}})},t.getDefaultOption=function(r){var i={show:!0,type:$ve.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return i},t}(yr),v9=Yve;function hI(e){e.registerComponentView(p9),e.registerComponentModel(f9),e.registerPreprocessor(sI),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,dI),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,r){r.eachComponent({mainType:"brush",query:t},function(i){i.setAreas(t.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},pt),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},pt),fl("brush",v9)}var qve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Ee),Kve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),c=de(r.get("textBaseline"),r.get("textVerticalAlign")),u=new De({style:Ke(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=r.get("subtext"),p=new De({style:Ke(s,{text:h,fill:s.getTextColor(),y:d.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=r.get("link"),f=r.get("sublink"),v=r.get("triggerEvent",!0);u.silent=!g&&!v,p.silent=!f&&!v,g&&u.on("click",function(){Oc(g,"_"+r.get("target"))}),f&&p.on("click",function(){Oc(f,"_"+r.get("subtarget"))}),ae(u).eventData=ae(p).eventData=v?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(u),h&&o.add(p);var m=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=m.width,y.height=m.height;var w=Je(y,{width:n.getWidth(),height:n.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?w.x+=w.width:l==="center"&&(w.x+=w.width/2)),c||(c=r.get("top")||r.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?w.y+=w.height:c==="middle"&&(w.y+=w.height/2),c=c||"top"),o.x=w.x,o.y=w.y,o.markRedraw();var C={align:l,verticalAlign:c};u.setStyle(C),p.setStyle(C),m=o.getBoundingRect();var S=w.margin,b=r.getItemStyle(["color","opacity"]);b.fill=r.get("backgroundColor");var x=new Ce({shape:{x:m.x-S[3],y:m.y-S[0],width:m.width+S[1]+S[3],height:m.height+S[0]+S[2],r:r.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});o.add(x)}},t.type="title",t}(He);function pI(e){e.registerComponentModel(qve),e.registerComponentView(Kve)}var Zve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode="box",r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._initData()},t.prototype.mergeOption=function(r){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var i=this._data.count();this.option.loop?r=(r%i+i)%i:(r>=i&&(r=i-1),r<0&&(r=0)),this.option.currentIndex=r},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(r){this.option.autoPlay=!!r},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var r=this.option,i=r.data||[],n=r.axisType,o=this._names=[],a;n==="category"?(a=[],D(i,function(c,u){var d=Mt(eo(c),""),h;J(c)?(h=re(c),h.value=u):h=u,a.push(h),o.push(d)})):a=i;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new Pt([{name:"value",type:s}],this);l.initData(a,o)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(Ee),gI=Zve;var m9=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline.slider",t.defaultOption=Wr(gI.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(gI);ot(m9,Gc.prototype);var y9=m9;var Xve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="timeline",t}(He),w9=Xve;var Qve=function(e){I(t,e);function t(r,i,n,o){var a=e.call(this,r,i,n)||this;return a.type=o||"value",a}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(xr),C9=Qve;var fI=Math.PI,b9=he(),Jve=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){this.api=i},t.prototype.render=function(r,i,n){if(this.model=r,this.api=n,this.ecModel=i,this.group.removeAll(),r.get("show",!0)){var o=this._layout(r,n),a=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(o,r);r.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return wt("nameValue",{noName:!0,value:u})},D(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](o,a,l,r)},this),this._renderAxisLabel(o,s,l,r),this._position(o,r)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(r,i){var n=r.get(["label","position"]),o=r.get("orient"),a=tme(r,i),s;n==null||n==="auto"?s=o==="horizontal"?a.y+a.height/2<i.getHeight()/2?"-":"+":a.x+a.width/2<i.getWidth()/2?"+":"-":H(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:fI/2},d=o==="vertical"?a.height:a.width,h=r.getModel("controlStyle"),p=h.get("show",!0),g=p?h.get("itemSize"):0,f=p?h.get("itemGap"):0,v=g+f,m=r.get(["label","rotate"])||0;m=m*fI/180;var y,w,C,S=h.get("position",!0),b=p&&h.get("showPlayBtn",!0),x=p&&h.get("showPrevBtn",!0),E=p&&h.get("showNextBtn",!0),M=0,T=d;S==="left"||S==="bottom"?(b&&(y=[0,0],M+=v),x&&(w=[M,0],M+=v),E&&(C=[T-g,0],T-=v)):(b&&(y=[T-g,0],T-=v),x&&(w=[0,0],M+=v),E&&(C=[T-g,0],T-=v));var _=[M,T];return r.get("inverse")&&_.reverse(),{viewRect:a,mainLength:d,orient:o,rotation:u[o],labelRotation:m,labelPosOpt:s,labelAlign:r.get(["label","align"])||l[o],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||c[o],playPosition:y,prevBtnPosition:w,nextBtnPosition:C,axisExtent:_,controlSize:g,controlGap:f}},t.prototype._position=function(r,i){var n=this._mainGroup,o=this._labelGroup,a=r.viewRect;if(r.orient==="vertical"){var s=Xt(),l=a.x,c=a.y+a.height;Mr(s,s,[-l,-c]),Si(s,s,-fI/2),Mr(s,s,[l,c]),a=a.clone(),a.applyTransform(s)}var u=y(a),d=y(n.getBoundingRect()),h=y(o.getBoundingRect()),p=[n.x,n.y],g=[o.x,o.y];g[0]=p[0]=u[0][0];var f=r.labelPosOpt;if(f==null||H(f)){var v=f==="+"?0:1;w(p,d,u,1,v),w(g,h,u,1,1-v)}else{var v=f>=0?0:1;w(p,d,u,1,v),g[1]=p[1]+f}n.setPosition(p),o.setPosition(g),n.rotation=o.rotation=r.rotation,m(n),m(o);function m(C){C.originX=u[0][0]-C.x,C.originY=u[1][0]-C.y}function y(C){return[[C.x,C.x+C.width],[C.y,C.y+C.height]]}function w(C,S,b,x,E){C[x]+=b[x][E]-S[x][E]}},t.prototype._createAxis=function(r,i){var n=i.getData(),o=i.get("axisType"),a=eme(i,o);a.getTicks=function(){return n.mapArray(["value"],function(c){return{value:c}})};var s=n.getDataExtent("value");a.setExtent(s[0],s[1]),a.calcNiceTicks();var l=new C9("value",a,r.axisExtent,o);return l.model=i,l},t.prototype._createGroup=function(r){var i=this[r]=new ee;return this.group.add(i),i},t.prototype._renderAxisLine=function(r,i,n,o){var a=n.getExtent();if(o.get(["lineStyle","show"])){var s=new _t({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:F({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(s);var l=this._progressLine=new _t({shape:{x1:a[0],x2:this._currentPointer?this._currentPointer.x:a[0],y1:0,y2:0},style:Q({lineCap:"round",lineWidth:s.style.lineWidth},o.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(l)}},t.prototype._renderAxisTick=function(r,i,n,o){var a=this,s=o.getData(),l=n.scale.getTicks();this._tickSymbols=[],D(l,function(c){var u=n.dataToCoord(c.value),d=s.getItemModel(c.value),h=d.getModel("itemStyle"),p=d.getModel(["emphasis","itemStyle"]),g=d.getModel(["progress","itemStyle"]),f={x:u,y:0,onclick:$(a._changeTimeline,a,c.value)},v=S9(d,h,i,f);v.ensureState("emphasis").style=p.getItemStyle(),v.ensureState("progress").style=g.getItemStyle(),$o(v);var m=ae(v);d.get("tooltip")?(m.dataIndex=c.value,m.dataModel=o):m.dataIndex=m.dataModel=null,a._tickSymbols.push(v)})},t.prototype._renderAxisLabel=function(r,i,n,o){var a=this,s=n.getLabelModel();if(s.get("show")){var l=o.getData(),c=n.getViewLabels();this._tickLabels=[],D(c,function(u){var d=u.tickValue,h=l.getItemModel(d),p=h.getModel("label"),g=h.getModel(["emphasis","label"]),f=h.getModel(["progress","label"]),v=n.dataToCoord(u.tickValue),m=new De({x:v,y:0,rotation:r.labelRotation-r.rotation,onclick:$(a._changeTimeline,a,d),silent:!1,style:Ke(p,{text:u.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});m.ensureState("emphasis").style=Ke(g),m.ensureState("progress").style=Ke(f),i.add(m),$o(m),b9(m).dataIndex=d,a._tickLabels.push(m)})}},t.prototype._renderControl=function(r,i,n,o){var a=r.controlSize,s=r.rotation,l=o.getModel("controlStyle").getItemStyle(),c=o.getModel(["emphasis","controlStyle"]).getItemStyle(),u=o.getPlayState(),d=o.get("inverse",!0);h(r.nextBtnPosition,"next",$(this._changeTimeline,this,d?"-":"+")),h(r.prevBtnPosition,"prev",$(this._changeTimeline,this,d?"+":"-")),h(r.playPosition,u?"stop":"play",$(this._handlePlayClick,this,!u),!0);function h(p,g,f,v){if(p){var m=Tr(de(o.get(["controlStyle",g+"BtnSize"]),a),a),y=[0,-m/2,m,m],w=rme(o,g+"Icon",y,{x:p[0],y:p[1],originX:a/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:f});w.ensureState("emphasis").style=c,i.add(w),$o(w)}}},t.prototype._renderCurrentPointer=function(r,i,n,o){var a=o.getData(),s=o.getCurrentIndex(),l=a.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(d){d.draggable=!0,d.drift=$(c._handlePointerDrag,c),d.ondragend=$(c._handlePointerDragend,c),x9(d,c._progressLine,s,n,o,!0)},onUpdate:function(d){x9(d,c._progressLine,s,n,o)}};this._currentPointer=S9(l,l,this._mainGroup,{},this._currentPointer,u)},t.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},t.prototype._handlePointerDrag=function(r,i,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},t.prototype._pointerChangeTimeline=function(r,i){var n=this._toAxisCoord(r)[0],o=this._axis,a=lr(o.getExtent().slice());n>a[1]&&(n=a[1]),n<a[0]&&(n=a[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),c=this.model;(i||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=r.model;r._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(r){var i=this._mainGroup.getLocalTransform();return Rr(r,i,!0)},t.prototype._findNearestTick=function(r){var i=this.model.getData(),n=1/0,o,a=this._axis;return i.each(["value"],function(s,l){var c=a.dataToCoord(s),u=Math.abs(c-r);u<n&&(n=u,o=l)}),o},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(r){var i=this.model.getCurrentIndex();r==="+"?r=i+1:r==="-"&&(r=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},t.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),i=this._tickSymbols,n=this._tickLabels;if(i)for(var o=0;o<i.length;o++)i&&i[o]&&i[o].toggleState("progress",o<r);if(n)for(var o=0;o<n.length;o++)n&&n[o]&&n[o].toggleState("progress",b9(n[o]).dataIndex<=r)},t.type="timeline.slider",t}(w9);function eme(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new Qg({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new Tw({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new Oi}}function tme(e,t){return Je(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}function rme(e,t,r,i){var n=i.style,o=za(e.get(["controlStyle",t]),i||{},new le(r[0],r[1],r[2],r[3]));return n&&o.setStyle(n),o}function S9(e,t,r,i,n,o){var a=t.get("color");if(n)n.setColor(a),r.add(n),o&&o.onUpdate(n);else{var s=e.get("symbol");n=et(s,-1,-1,2,2,a),n.setStyle("strokeNoScale",!0),r.add(n),o&&o.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),i=fe({rectHover:!0,z2:100},i,!0);var c=ho(e.get("symbolSize"));i.scaleX=c[0]/2,i.scaleY=c[1]/2;var u=Qi(e.get("symbolOffset"),c);u&&(i.x=(i.x||0)+u[0],i.y=(i.y||0)+u[1]);var d=e.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,n.attr(i),n.updateTransform(),n}function x9(e,t,r,i,n,o){if(!e.dragging){var a=n.getModel("checkpointStyle"),s=i.dataToCoord(n.getData().get("value",r));if(o||!a.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}var D9=Jve;function E9(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,r,i){var n=r.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),i.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),r.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Q({currentIndex:n.option.currentIndex},t)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,r){var i=r.getComponent("timeline");i&&t.playState!=null&&i.setPlayState(t.playState)})}function vI(e){var t=e&&e.timeline;O(t)||(t=t?[t]:[]),D(t,function(r){r&&ime(r)})}function ime(e){var t=e.type,r={number:"value",time:"time"};if(r[t]&&(e.axisType=r[t],delete e.type),M9(e),uu(e,"controlPosition")){var i=e.controlStyle||(e.controlStyle={});uu(i,"position")||(i.position=e.controlPosition),i.position==="none"&&!uu(i,"show")&&(i.show=!1,delete i.position),delete e.controlPosition}D(e.data||[],function(n){J(n)&&!O(n)&&(!uu(n,"value")&&uu(n,"name")&&(n.value=n.name),M9(n))})}function M9(e){var t=e.itemStyle||(e.itemStyle={}),r=t.emphasis||(t.emphasis={}),i=e.label||e.label||{},n=i.normal||(i.normal={}),o={normal:1,emphasis:1};D(i,function(a,s){!o[s]&&!uu(n,s)&&(n[s]=a)}),r.label&&!uu(i,"emphasis")&&(i.emphasis=r.label,delete r.label)}function uu(e,t){return e.hasOwnProperty(t)}function mI(e){e.registerComponentModel(y9),e.registerComponentView(D9),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),E9(e),e.registerPreprocessor(vI)}function du(e,t){if(!e)return!1;for(var r=O(e)?e:[e],i=0;i<r.length;i++)if(r[i]&&r[i][t])return!0;return!1}function pb(e){Yi(e,"label",["show"])}var gb=he(),T9=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._mergeOption(r,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Re.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,i){this._mergeOption(r,i,!1,!1)},t.prototype._mergeOption=function(r,i,n,o){var a=this.mainType;n||i.eachSeries(function(s){var l=s.get(this.mainType,!0),c=gb(s)[a];if(!l||!l.data){gb(s)[a]=null;return}c?c._mergeOption(l,i,!0):(o&&pb(l),D(l.data,function(u){u instanceof Array?(pb(u[0]),pb(u[1])):pb(u)}),c=this.createMarkerModelFromSeries(l,this,i),F(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),gb(s)[a]=c},this)},t.prototype.formatTooltip=function(r,i,n){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return wt("section",{header:this.name,blocks:[wt("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.prototype.getDataParams=function(r,i){var n=Gc.prototype.getDataParams.call(this,r,i),o=this.__hostSeries;return o&&(n.seriesId=o.id,n.seriesName=o.name,n.seriesType=o.subType),n},t.getMarkerModelFromSeries=function(r,i){return gb(r)[i]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Ee);ot(T9,Gc.prototype);var ci=T9;var nme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(ci),_9=nme;function wI(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function ome(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function fb(e,t,r,i,n,o){var a=[],s=Ji(t,i),l=s?t.getCalculationInfo("stackResultDimension"):i,c=mb(t,l,e),u=t.indicesOfNearest(l,c)[0];a[n]=t.get(r,u),a[o]=t.get(l,u);var d=t.get(i,u),h=Qr(t.get(i,u));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,d]}var yI={min:se(fb,"min"),max:se(fb,"max"),average:se(fb,"average"),median:se(fb,"median")};function ml(e,t){if(t){var r=e.getData(),i=e.coordinateSystem,n=i&&i.dimensions;if(!ome(t)&&!O(t.coord)&&O(n)){var o=CI(t,r,i,e);if(t=re(t),t.type&&yI[t.type]&&o.baseAxis&&o.valueAxis){var a=pe(n,o.baseAxis.dim),s=pe(n,o.valueAxis.dim),l=yI[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!O(n))t.coord=[];else for(var c=t.coord,u=0;u<2;u++)yI[c[u]]&&(c[u]=mb(r,r.mapDimension(n[u]),c[u]));return t}}function CI(e,t,r,i){var n={};return e.valueIndex!=null||e.valueDim!=null?(n.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=r.getAxis(ame(i,n.valueDataDim)),n.baseAxis=r.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=r.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function ame(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function yl(e,t){return e&&e.containData&&t.coord&&!wI(t)?e.containData(t.coord):!0}function R9(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!wI(t)&&!wI(r)?e.containZone(t.coord,r.coord):!0}function vb(e,t){return e?function(r,i,n,o){var a=o<2?r.coord&&r.coord[o]:r.value;return Tn(a,t[o])}:function(r,i,n,o){return Tn(r.value,t[o])}}function mb(e,t,r){if(r==="average"){var i=0,n=0;return e.each(t,function(o,a){isNaN(o)||(i+=o,n++)}),i/n}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var SI=he(),sme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=Y()},t.prototype.render=function(r,i,n){var o=this,a=this.markerGroupMap;a.each(function(s){SI(s).keep=!1}),i.eachSeries(function(s){var l=ci.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,i,n)}),a.each(function(s){!SI(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){SI(r).keep=!0},t.prototype.toggleBlurSeries=function(r,i){var n=this;D(r,function(o){var a=ci.getMarkerModelFromSeries(o,n.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(i?r0(l):lg(l))})}})},t.type="marker",t}(He),Ah=sme;function A9(e,t,r){var i=t.coordinateSystem;e.each(function(n){var o=e.getItemModel(n),a,s=j(o.get("x"),r.getWidth()),l=j(o.get("y"),r.getHeight());if(!isNaN(s)&&!isNaN(l))a=[s,l];else if(t.getMarkerPosition)a=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(i){var c=e.get(i.dimensions[0],n),u=e.get(i.dimensions[1],n);a=i.dataToPoint([c,u])}isNaN(s)||(a[0]=s),isNaN(l)||(a[1]=l),e.setItemLayout(n,a)})}var lme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(o){var a=ci.getMarkerModelFromSeries(o,"markPoint");a&&(A9(a.getData(),o,n),this.markerGroupMap.get(o.id).updateLayout())},this)},t.prototype.renderSeries=function(r,i,n,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new ra),d=cme(a,r,i);i.setData(d),A9(i.getData(),r,o),d.each(function(h){var p=d.getItemModel(h),g=p.getShallow("symbol"),f=p.getShallow("symbolSize"),v=p.getShallow("symbolRotate"),m=p.getShallow("symbolOffset"),y=p.getShallow("symbolKeepAspect");if(Z(g)||Z(f)||Z(v)||Z(m)){var w=i.getRawValue(h),C=i.getDataParams(h);Z(g)&&(g=g(w,C)),Z(f)&&(f=f(w,C)),Z(v)&&(v=v(w,C)),Z(m)&&(m=m(w,C))}var S=p.getModel("itemStyle").getItemStyle(),b=Zo(l,"color");S.fill||(S.fill=b),d.setItemVisual(h,{symbol:g,symbolSize:f,symbolRotate:v,symbolOffset:m,symbolKeepAspect:y,style:S})}),u.updateData(d),this.group.add(u.group),d.eachItemGraphicEl(function(h){h.traverse(function(p){ae(p).dataModel=i})}),this.markKeep(u),u.group.silent=i.get("silent")||r.get("silent")},t.type="markPoint",t}(Ah);function cme(e,t,r){var i;e?i=N(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return F(F({},l),{name:s,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new Pt(i,r),o=N(r.get("data"),se(ml,t));e&&(o=Pe(o,se(yl,e)));var a=vb(!!e,i);return n.initData(o,null,a),n}var I9=lme;function xI(e){e.registerComponentModel(_9),e.registerComponentView(I9),e.registerPreprocessor(function(t){du(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var ume=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(ci),P9=ume;var yb=he(),dme=function(e,t,r,i){var n=e.getData(),o;if(O(i))o=i;else{var a=i.type;if(a==="min"||a==="max"||a==="average"||a==="median"||i.xAxis!=null||i.yAxis!=null){var s=void 0,l=void 0;if(i.yAxis!=null||i.xAxis!=null)s=t.getAxis(i.yAxis!=null?"y":"x"),l=bt(i.yAxis,i.xAxis);else{var c=CI(i,n,t,e);s=c.valueAxis;var u=bw(n,c.valueDataDim);l=mb(n,u,a)}var d=s.dim==="x"?0:1,h=1-d,p=re(i),g={coord:[]};p.type=null,p.coord=[],p.coord[h]=-1/0,g.coord[h]=1/0;var f=r.get("precision");f>=0&&be(l)&&(l=+l.toFixed(Math.min(f,20))),p.coord[d]=g.coord[d]=l,o=[p,g,{type:a,valueIndex:i.valueIndex,value:l}]}else o=[]}var v=[ml(e,o[0]),ml(e,o[1]),F({},o[2])];return v[2].type=v[2].type||null,fe(v[2],v[0]),fe(v[2],v[1]),v};function wb(e){return!isNaN(e)&&!isFinite(e)}function k9(e,t,r,i){var n=1-e,o=i.dimensions[e];return wb(t[n])&&wb(r[n])&&t[e]===r[e]&&i.getAxis(o).containData(t[e])}function hme(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,i=t[1].coord;if(r&&i&&(k9(1,r,i,e)||k9(0,r,i,e)))return!0}return yl(e,t[0])&&yl(e,t[1])}function DI(e,t,r,i,n){var o=i.coordinateSystem,a=e.getItemModel(t),s,l=j(a.get("x"),n.getWidth()),c=j(a.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(i.getMarkerPosition)s=i.getMarkerPosition(e.getValues(e.dimensions,t));else{var u=o.dimensions,d=e.get(u[0],t),h=e.get(u[1],t);s=o.dataToPoint([d,h])}if(In(o,"cartesian2d")){var p=o.getAxis("x"),g=o.getAxis("y"),u=o.dimensions;wb(e.get(u[0],t))?s[0]=p.toGlobalCoord(p.getExtent()[r?0:1]):wb(e.get(u[1],t))&&(s[1]=g.toGlobalCoord(g.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}e.setItemLayout(t,s)}var pme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(o){var a=ci.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=yb(a).from,c=yb(a).to;l.each(function(u){DI(l,u,!0,o,n),DI(c,u,!1,o,n)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,i,n,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new ph);this.group.add(u.group);var d=gme(a,r,i),h=d.from,p=d.to,g=d.line;yb(i).from=h,yb(i).to=p,i.setData(g);var f=i.get("symbol"),v=i.get("symbolSize"),m=i.get("symbolRotate"),y=i.get("symbolOffset");O(f)||(f=[f,f]),O(v)||(v=[v,v]),O(m)||(m=[m,m]),O(y)||(y=[y,y]),d.from.each(function(C){w(h,C,!0),w(p,C,!1)}),g.each(function(C){var S=g.getItemModel(C).getModel("lineStyle").getLineStyle();g.setItemLayout(C,[h.getItemLayout(C),p.getItemLayout(C)]),S.stroke==null&&(S.stroke=h.getItemVisual(C,"style").fill),g.setItemVisual(C,{fromSymbolKeepAspect:h.getItemVisual(C,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(C,"symbolOffset"),fromSymbolRotate:h.getItemVisual(C,"symbolRotate"),fromSymbolSize:h.getItemVisual(C,"symbolSize"),fromSymbol:h.getItemVisual(C,"symbol"),toSymbolKeepAspect:p.getItemVisual(C,"symbolKeepAspect"),toSymbolOffset:p.getItemVisual(C,"symbolOffset"),toSymbolRotate:p.getItemVisual(C,"symbolRotate"),toSymbolSize:p.getItemVisual(C,"symbolSize"),toSymbol:p.getItemVisual(C,"symbol"),style:S})}),u.updateData(g),d.line.eachItemGraphicEl(function(C){ae(C).dataModel=i,C.traverse(function(S){ae(S).dataModel=i})});function w(C,S,b){var x=C.getItemModel(S);DI(C,S,b,r,o);var E=x.getModel("itemStyle").getItemStyle();E.fill==null&&(E.fill=Zo(l,"color")),C.setItemVisual(S,{symbolKeepAspect:x.get("symbolKeepAspect"),symbolOffset:de(x.get("symbolOffset",!0),y[b?0:1]),symbolRotate:de(x.get("symbolRotate",!0),m[b?0:1]),symbolSize:de(x.get("symbolSize"),v[b?0:1]),symbol:de(x.get("symbol",!0),f[b?0:1]),style:E})}this.markKeep(u),u.group.silent=i.get("silent")||r.get("silent")},t.type="markLine",t}(Ah);function gme(e,t,r){var i;e?i=N(e&&e.dimensions,function(c){var u=t.getData().getDimensionInfo(t.getData().mapDimension(c))||{};return F(F({},u),{name:c,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new Pt(i,r),o=new Pt(i,r),a=new Pt([],r),s=N(r.get("data"),se(dme,t,e,r));e&&(s=Pe(s,se(hme,e)));var l=vb(!!e,i);return n.initData(N(s,function(c){return c[0]}),null,l),o.initData(N(s,function(c){return c[1]}),null,l),a.initData(N(s,function(c){return c[2]})),a.hasItemOption=!0,{from:n,to:o,line:a}}var L9=pme;function EI(e){e.registerComponentModel(P9),e.registerComponentView(L9),e.registerPreprocessor(function(t){du(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var fme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(ci),F9=fme;var Cb=he(),vme=function(e,t,r,i){var n=i[0],o=i[1];if(!(!n||!o)){var a=ml(e,n),s=ml(e,o),l=a.coord,c=s.coord;l[0]=bt(l[0],-1/0),l[1]=bt(l[1],-1/0),c[0]=bt(c[0],1/0),c[1]=bt(c[1],1/0);var u=nd([{},a,s]);return u.coord=[a.coord,s.coord],u.x0=a.x,u.y0=a.y,u.x1=s.x,u.y1=s.y,u}};function bb(e){return!isNaN(e)&&!isFinite(e)}function O9(e,t,r,i){var n=1-e;return bb(t[n])&&bb(r[n])}function mme(e,t){var r=t.coord[0],i=t.coord[1],n={coord:r,x:t.x0,y:t.y0},o={coord:i,x:t.x1,y:t.y1};return In(e,"cartesian2d")?r&&i&&(O9(1,r,i,e)||O9(0,r,i,e))?!0:R9(e,n,o):yl(e,n)||yl(e,o)}function N9(e,t,r,i,n){var o=i.coordinateSystem,a=e.getItemModel(t),s,l=j(a.get(r[0]),n.getWidth()),c=j(a.get(r[1]),n.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(i.getMarkerPosition){var u=e.getValues(["x0","y0"],t),d=e.getValues(["x1","y1"],t),h=o.clampData(u),p=o.clampData(d),g=[];r[0]==="x0"?g[0]=h[0]>p[0]?d[0]:u[0]:g[0]=h[0]>p[0]?u[0]:d[0],r[1]==="y0"?g[1]=h[1]>p[1]?d[1]:u[1]:g[1]=h[1]>p[1]?u[1]:d[1],s=i.getMarkerPosition(g,r,!0)}else{var f=e.get(r[0],t),v=e.get(r[1],t),m=[f,v];o.clampData&&o.clampData(m,m),s=o.dataToPoint(m,!0)}if(In(o,"cartesian2d")){var y=o.getAxis("x"),w=o.getAxis("y"),f=e.get(r[0],t),v=e.get(r[1],t);bb(f)?s[0]=y.toGlobalCoord(y.getExtent()[r[0]==="x0"?0:1]):bb(v)&&(s[1]=w.toGlobalCoord(w.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}return s}var z9=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],yme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(o){var a=ci.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var c=N(z9,function(d){return N9(s,l,d,o,n)});s.setItemLayout(l,c);var u=s.getItemGraphicEl(l);u.setShape("points",c)})}},this)},t.prototype.renderSeries=function(r,i,n,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,{group:new ee});this.group.add(u.group),this.markKeep(u);var d=wme(a,r,i);i.setData(d),d.each(function(h){var p=N(z9,function(E){return N9(d,h,E,r,o)}),g=a.getAxis("x").scale,f=a.getAxis("y").scale,v=g.getExtent(),m=f.getExtent(),y=[g.parse(d.get("x0",h)),g.parse(d.get("x1",h))],w=[f.parse(d.get("y0",h)),f.parse(d.get("y1",h))];lr(y),lr(w);var C=!(v[0]>y[1]||v[1]<y[0]||m[0]>w[1]||m[1]<w[0]),S=!C;d.setItemLayout(h,{points:p,allClipped:S});var b=d.getItemModel(h).getModel("itemStyle").getItemStyle(),x=Zo(l,"color");b.fill||(b.fill=x,H(b.fill)&&(b.fill=ac(b.fill,.4))),b.stroke||(b.stroke=x),d.setItemVisual(h,"style",b)}),d.diff(Cb(u).data).add(function(h){var p=d.getItemLayout(h);if(!p.allClipped){var g=new It({shape:{points:p.points}});d.setItemGraphicEl(h,g),u.group.add(g)}}).update(function(h,p){var g=Cb(u).data.getItemGraphicEl(p),f=d.getItemLayout(h);f.allClipped?g&&u.group.remove(g):(g?Me(g,{shape:{points:f.points}},i,h):g=new It({shape:{points:f.points}}),d.setItemGraphicEl(h,g),u.group.add(g))}).remove(function(h){var p=Cb(u).data.getItemGraphicEl(h);u.group.remove(p)}).execute(),d.eachItemGraphicEl(function(h,p){var g=d.getItemModel(p),f=d.getItemVisual(p,"style");h.useStyle(d.getItemVisual(p,"style")),ft(h,at(g),{labelFetcher:i,labelDataIndex:p,defaultText:d.getName(p)||"",inheritColor:H(f.fill)?ac(f.fill,1):"#000"}),Dt(h,g),We(h,null,null,g.get(["emphasis","disabled"])),ae(h).dataModel=i}),Cb(u).data=d,u.group.silent=i.get("silent")||r.get("silent")},t.type="markArea",t}(Ah);function wme(e,t,r){var i,n,o=["x0","y0","x1","y1"];if(e){var a=N(e&&e.dimensions,function(c){var u=t.getData(),d=u.getDimensionInfo(u.mapDimension(c))||{};return F(F({},d),{name:c,ordinalMeta:null})});n=N(o,function(c,u){return{name:c,type:a[u%2].type}}),i=new Pt(n,r)}else n=[{name:"value",type:"float"}],i=new Pt(n,r);var s=N(r.get("data"),se(vme,t,e,r));e&&(s=Pe(s,se(mme,e)));var l=e?function(c,u,d,h){var p=c.coord[Math.floor(h/2)][h%2];return Tn(p,n[h])}:function(c,u,d,h){return Tn(c.value,n[h])};return i.initData(s,null,l),i.hasItemOption=!0,i}var V9=yme;function MI(e){e.registerComponentModel(F9),e.registerComponentView(V9),e.registerPreprocessor(function(t){du(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Cme=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},bme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),this._updateSelector(r)},t.prototype._updateSelector=function(r){var i=r.selector,n=this.ecModel;i===!0&&(i=r.selector=["all","inverse"]),O(i)&&D(i,function(o,a){H(o)&&(o={type:o}),i[a]=fe(o,Cme(n,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var i=!1,n=0;n<r.length;n++){var o=r[n].get("name");if(this.isSelected(o)){this.select(o),i=!0;break}}!i&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var i=[],n=[];r.eachRawSeries(function(l){var c=l.name;n.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,h=d.getAllNames();r.isSeriesFiltered(l)||(n=n.concat(h)),h.length?i=i.concat(h):u=!0}else u=!0;u&&bd(l)&&i.push(l.name)}),this._availableNames=n;var o=this.get("data")||i,a=Y(),s=N(o,function(l){return(H(l)||be(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new Ve(l,this,this.ecModel))},this);this._data=Pe(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var i=this.option.selected,n=this.get("selectedMode");if(n==="single"){var o=this._data;D(o,function(a){i[a.get("name")]=!1})}i[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var i=this.option.selected;i.hasOwnProperty(r)||(i[r]=!0),this[i[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,i=this.option.selected;D(r,function(n){i[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,i=this.option.selected;D(r,function(n){var o=n.get("name",!0);i.hasOwnProperty(o)||(i[o]=!0),i[o]=!i[o]})},t.prototype.isSelected=function(r){var i=this.option.selected;return!(i.hasOwnProperty(r)&&!i[r])&&pe(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Ee),zf=bme;var Ih=se,TI=D,Sb=ee,Sme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new Sb),this.group.add(this._selectorGroup=new Sb),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,i,n){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),c=r.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(a,r,i,n,l,s,c);var u=r.getBoxLayoutParams(),d={width:n.getWidth(),height:n.getHeight()},h=r.get("padding"),p=Je(u,d,h),g=this.layoutInner(r,a,p,o,l,c),f=Je(Q({width:g.width,height:g.height},u),d,h);this.group.x=f.x-g.x,this.group.y=f.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=sb(g,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,i,n,o,a,s,l){var c=this.getContentGroup(),u=Y(),d=i.get("selectedMode"),h=[];n.eachRawSeries(function(p){!p.get("legendHoverLink")&&h.push(p.id)}),TI(i.getData(),function(p,g){var f=p.get("name");if(!this.newlineDisabled&&(f===""||f===`
`)){var v=new Sb;v.newline=!0,c.add(v);return}var m=n.getSeriesByName(f)[0];if(!u.get(f))if(m){var y=m.getData(),w=y.getVisual("legendLineStyle")||{},C=y.getVisual("legendIcon"),S=y.getVisual("style"),b=this._createItem(m,f,g,p,i,r,w,S,C,d,o);b.on("click",Ih(B9,f,null,o,h)).on("mouseover",Ih(_I,m.name,null,o,h)).on("mouseout",Ih(RI,m.name,null,o,h)),n.ssr&&b.eachChild(function(x){var E=ae(x);E.seriesIndex=m.seriesIndex,E.dataIndex=g,E.ssrType="legend"}),u.set(f,!0)}else n.eachRawSeries(function(x){if(!u.get(f)&&x.legendVisualProvider){var E=x.legendVisualProvider;if(!E.containName(f))return;var M=E.indexOfName(f),T=E.getItemVisual(M,"style"),_=E.getItemVisual(M,"legendIcon"),R=Cr(T.fill);R&&R[3]===0&&(R[3]=.2,T=F(F({},T),{fill:yn(R,"rgba")}));var A=this._createItem(x,f,g,p,i,r,{},T,_,d,o);A.on("click",Ih(B9,null,f,o,h)).on("mouseover",Ih(_I,null,f,o,h)).on("mouseout",Ih(RI,null,f,o,h)),n.ssr&&A.eachChild(function(P){var k=ae(P);k.seriesIndex=x.seriesIndex,k.dataIndex=g,k.ssrType="legend"}),u.set(f,!0)}},this)},this),a&&this._createSelector(a,i,o,s,l)},t.prototype._createSelector=function(r,i,n,o,a){var s=this.getSelectorGroup();TI(r,function(c){var u=c.type,d=new De({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(d);var h=i.getModel("selectorLabel"),p=i.getModel(["emphasis","selectorLabel"]);ft(d,{normal:h,emphasis:p},{defaultText:c.title}),$o(d)})},t.prototype._createItem=function(r,i,n,o,a,s,l,c,u,d,h){var p=r.visualDrawType,g=a.get("itemWidth"),f=a.get("itemHeight"),v=a.isSelected(i),m=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),w=o.get("icon");u=w||u||"roundRect";var C=xme(u,o,l,c,p,v,h),S=new Sb,b=o.getModel("textStyle");if(Z(r.getLegendIcon)&&(!w||w==="inherit"))S.add(r.getLegendIcon({itemWidth:g,itemHeight:f,icon:u,iconRotate:m,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:y}));else{var x=w==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;S.add(Dme({itemWidth:g,itemHeight:f,icon:u,iconRotate:x,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:y}))}var E=s==="left"?g+5:-5,M=s,T=a.get("formatter"),_=i;H(T)&&T?_=T.replace("{name}",i??""):Z(T)&&(_=T(i));var R=v?b.getTextColor():o.get("inactiveColor");S.add(new De({style:Ke(b,{text:_,x:E,y:f/2,fill:R,align:M,verticalAlign:"middle"},{inheritColor:R})}));var A=new Ce({shape:S.getBoundingRect(),style:{fill:"transparent"}}),P=o.getModel("tooltip");return P.get("show")&&oo({el:A,componentModel:a,itemName:i,itemTooltipOption:P.option}),S.add(A),S.eachChild(function(k){k.silent=!0}),A.silent=!d,this.getContentGroup().add(S),$o(S),S.__legendDataIndex=n,S},t.prototype.layoutInner=function(r,i,n,o,a,s){var l=this.getContentGroup(),c=this.getSelectorGroup();lo(r.get("orient"),l,r.get("itemGap"),n.width,n.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),a){lo("horizontal",c,r.get("selectorItemGap",!0));var h=c.getBoundingRect(),p=[-h.x,-h.y],g=r.get("selectorButtonGap",!0),f=r.getOrient().index,v=f===0?"width":"height",m=f===0?"height":"width",y=f===0?"y":"x";s==="end"?p[f]+=u[v]+g:d[f]+=h[v]+g,p[1-f]+=u[m]/2-h[m]/2,c.x=p[0],c.y=p[1],l.x=d[0],l.y=d[1];var w={x:0,y:0};return w[v]=u[v]+g+h[v],w[m]=Math.max(u[m],h[m]),w[y]=Math.min(0,h[y]+p[1-f]),w}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(He);function xme(e,t,r,i,n,o,a){function s(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),TI(v,function(y,w){v[w]==="inherit"&&(v[w]=m[w])})}var l=t.getModel("itemStyle"),c=l.getItemStyle(),u=e.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?i.decal:po(d,a),c.fill==="inherit"&&(c.fill=i[n]),c.stroke==="inherit"&&(c.stroke=i[u]),c.opacity==="inherit"&&(c.opacity=(n==="fill"?i:r).opacity),s(c,i);var h=t.getModel("lineStyle"),p=h.getLineStyle();if(s(p,r),c.fill==="auto"&&(c.fill=i.fill),c.stroke==="auto"&&(c.stroke=i.fill),p.stroke==="auto"&&(p.stroke=i.fill),!o){var g=t.get("inactiveBorderWidth"),f=c[u];c.lineWidth=g==="auto"?i.lineWidth>0&&f?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),p.stroke=h.get("inactiveColor"),p.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:p}}function Dme(e){var t=e.icon||"roundRect",r=et(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function B9(e,t,r,i){RI(e,t,r,i),r.dispatchAction({type:"legendToggleSelect",name:e??t}),_I(e,t,r,i)}function G9(e){for(var t=e.getZr().storage.getDisplayList(),r,i=0,n=t.length;i<n&&!(r=t[i].states.emphasis);)i++;return r&&r.hoverLayer}function _I(e,t,r,i){G9(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function RI(e,t,r,i){G9(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}var xb=Sme;function AI(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var i=0;i<t.length;i++)if(!t[i].isSelected(r.name))return!1;return!0})}function Vf(e,t,r){var i={},n=e==="toggleSelected",o;return r.eachComponent("legend",function(a){n&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();D(s,function(l){var c=l.get("name");if(!(c===`
`||c==="")){var u=a.isSelected(c);i.hasOwnProperty(c)?i[c]=i[c]&&u:i[c]=u}})}),e==="allSelect"||e==="inverseSelect"?{selected:i}:{name:t.name,selected:i}}function H9(e){e.registerAction("legendToggleSelect","legendselectchanged",se(Vf,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",se(Vf,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",se(Vf,"inverseSelect")),e.registerAction("legendSelect","legendselected",se(Vf,"select")),e.registerAction("legendUnSelect","legendunselected",se(Vf,"unSelect"))}function Db(e){e.registerComponentModel(zf),e.registerComponentView(xb),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,AI),e.registerSubTypeDefaulter("legend",function(){return"plain"}),H9(e)}var Eme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,i,n){var o=En(r);e.prototype.init.call(this,r,i,n),U9(this,r,o)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),U9(this,this.option,r)},t.type="legend.scroll",t.defaultOption=Wr(zf.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(zf);function U9(e,t,r){var i=e.getOrient(),n=[1,1];n[i.index]=0,Ii(t,r,{type:"box",ignoreSize:!!n})}var W9=Eme;var j9=ee,II=["width","height"],PI=["x","y"],Mme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new j9),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new j9)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,i,n,o,a,s,l){var c=this;e.prototype.renderInner.call(this,r,i,n,o,a,s,l);var u=this._controllerGroup,d=i.get("pageIconSize",!0),h=O(d)?d:[d,d];g("pagePrev",0);var p=i.getModel("pageTextStyle");u.add(new De({name:"pageText",style:{text:"xx/xx",fill:p.getTextColor(),font:p.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(f,v){var m=f+"DataIndex",y=za(i.get("pageIcons",!0)[i.getOrient().name][v],{onclick:$(c._pageGo,c,m,i,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=f,u.add(y)}},t.prototype.layoutInner=function(r,i,n,o,a,s){var l=this.getSelectorGroup(),c=r.getOrient().index,u=II[c],d=PI[c],h=II[1-c],p=PI[1-c];a&&lo("horizontal",l,r.get("selectorItemGap",!0));var g=r.get("selectorButtonGap",!0),f=l.getBoundingRect(),v=[-f.x,-f.y],m=re(n);a&&(m[u]=n[u]-f[u]-g);var y=this._layoutContentAndController(r,o,m,c,u,h,p,d);if(a){if(s==="end")v[c]+=y[u]+g;else{var w=f[u]+g;v[c]-=w,y[d]-=w}y[u]+=f[u]+g,v[1-c]+=y[p]+y[h]/2-f[h]/2,y[h]=Math.max(y[h],f[h]),y[p]=Math.min(y[p],f[p]+v[1-c]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,i,n,o,a,s,l,c){var u=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;lo(r.get("orient"),u,r.get("itemGap"),o?n.width:null,o?null:n.height),lo("horizontal",h,r.get("pageButtonItemGap",!0));var p=u.getBoundingRect(),g=h.getBoundingRect(),f=this._showController=p[a]>n[a],v=[-p.x,-p.y];i||(v[o]=u[c]);var m=[0,0],y=[-g.x,-g.y],w=de(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(f){var C=r.get("pageButtonPosition",!0);C==="end"?y[o]+=n[a]-g[a]:m[o]+=g[a]+w}y[1-o]+=p[s]/2-g[s]/2,u.setPosition(v),d.setPosition(m),h.setPosition(y);var S={x:0,y:0};if(S[a]=f?n[a]:p[a],S[s]=Math.max(p[s],g[s]),S[l]=Math.min(0,g[l]+y[1-o]),d.__rectSize=n[a],f){var b={x:0,y:0};b[a]=Math.max(n[a]-g[a]-w,0),b[s]=S[s],d.setClipPath(new Ce({shape:b})),d.__rectSize=b[a]}else h.eachChild(function(E){E.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(r);return x.pageIndex!=null&&Me(u,{x:x.contentPosition[0],y:x.contentPosition[1]},f?r:null),this._updatePageInfoView(r,x),S},t.prototype._pageGo=function(r,i,n){var o=this._getPageInfo(i)[r];o!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:i.id})},t.prototype._updatePageInfoView=function(r,i){var n=this._controllerGroup;D(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",h=i[d]!=null,p=n.childOfName(u);p&&(p.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),p.cursor=h?"pointer":"default")});var o=n.childOfName("pageText"),a=r.get("pageFormatter"),s=i.pageIndex,l=s!=null?s+1:0,c=i.pageCount;o&&a&&o.setStyle("text",H(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):a({current:l,total:c}))},t.prototype._getPageInfo=function(r){var i=r.get("scrollDataIndex",!0),n=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=II[a],l=PI[a],c=this._findTargetItemIndex(i),u=n.children(),d=u[c],h=u.length,p=h?1:0,g={contentPosition:[n.x,n.y],pageCount:p,pageIndex:p-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return g;var f=C(d);g.contentPosition[a]=-f.s;for(var v=c+1,m=f,y=f,w=null;v<=h;++v)w=C(u[v]),(!w&&y.e>m.s+o||w&&!S(w,m.s))&&(y.i>m.i?m=y:m=w,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),y=w;for(var v=c-1,m=f,y=f,w=null;v>=-1;--v)w=C(u[v]),(!w||!S(y,w.s))&&m.i<y.i&&(y=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=w;return g;function C(b){if(b){var x=b.getBoundingRect(),E=x[l]+b[l];return{s:E,e:E+x[s],i:b.__legendDataIndex}}}function S(b,x){return b.e>=x&&b.s<=x+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var i,n=this.getContentGroup(),o;return n.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(i=s)}),i??o},t.type="legend.scroll",t}(xb),$9=Mme;function kI(e){e.registerAction("legendScroll","legendscroll",function(t,r){var i=t.scrollDataIndex;i!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(i)})})}function Y9(e){Te(Db),e.registerComponentModel(W9),e.registerComponentView($9),kI(e)}function LI(e){Te(Db),Te(Y9)}var Tme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.inside",t.defaultOption=Wr(gl.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(gl),q9=Tme;var FI=he();function K9(e,t,r){FI(e).coordSysRecordMap.each(function(i){var n=i.dataZoomInfoMap.get(t.uid);n&&(n.getRange=r)})}function Z9(e,t){for(var r=FI(e).coordSysRecordMap,i=r.keys(),n=0;n<i.length;n++){var o=i[n],a=r.get(o),s=a.dataZoomInfoMap;if(s){var l=t.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||X9(r,a))}}}function X9(e,t){if(t){e.removeKey(t.model.uid);var r=t.controller;r&&r.dispose()}}function _me(e,t){var r={model:t,containsPoint:se(Ame,t),dispatchAction:se(Rme,e),dataZoomInfoMap:null,controller:null},i=r.controller=new aa(e.getZr());return D(["pan","zoom","scrollMove"],function(n){i.on(n,function(o){var a=[];r.dataZoomInfoMap.each(function(s){if(o.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[n],c=l&&l(s.dzReferCoordSysInfo,r.model.mainType,r.controller,o);!s.model.get("disabled",!0)&&c&&a.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),a.length&&r.dispatchAction(a)})}),r}function Rme(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function Ame(e,t,r,i){return e.coordinateSystem.containPoint([r,i])}function Ime(e){var t,r="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each(function(o){var a=o.model,s=a.get("disabled",!0)?!1:a.get("zoomLock",!0)?"move":!0;i[r+s]>i[r+t]&&(t=s),n=n&&a.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function Q9(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,r){var i=FI(r),n=i.coordSysRecordMap||(i.coordSysRecordMap=Y());n.each(function(o){o.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(o){var a=ob(o);D(a.infoList,function(s){var l=s.model.uid,c=n.get(l)||n.set(l,_me(r,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=Y());u.set(o.uid,{dzReferCoordSysInfo:s,model:o,getRange:null})})}),n.each(function(o){var a=o.controller,s,l=o.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){X9(n,o);return}var u=Ime(l);a.enable(u.controlType,u.opt),a.setPointerChecker(o.containsPoint),_n(o,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var kme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return t.prototype.render=function(r,i,n){if(e.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),K9(n,r,{pan:$(OI.pan,this),zoom:$(OI.zoom,this),scrollMove:$(OI.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Z9(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(Th),OI={zoom:function(e,t,r,i){var n=this.range,o=n.slice(),a=e.axisModels[0];if(a){var s=NI[t](null,[i.originX,i.originY],a,r,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],c=Math.max(1/i.scale,0);o[0]=(o[0]-l)*c+l,o[1]=(o[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(zi(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,n[0]!==o[0]||n[1]!==o[1])return o}},pan:J9(function(e,t,r,i,n,o){var a=NI[i]([o.oldX,o.oldY],[o.newX,o.newY],t,n,r);return a.signal*(e[1]-e[0])*a.pixel/a.pixelLength}),scrollMove:J9(function(e,t,r,i,n,o){var a=NI[i]([0,0],[o.scrollDelta,o.scrollDelta],t,n,r);return a.signal*(e[1]-e[0])*o.scrollDelta})};function J9(e){return function(t,r,i,n){var o=this.range,a=o.slice(),s=t.axisModels[0];if(s){var l=e(a,s,t,r,i,n);if(zi(l,a,[0,100],"all"),this.range=a,o[0]!==a[0]||o[1]!==a[1])return a}}}var NI={grid:function(e,t,r,i,n){var o=r.axis,a={},s=n.model.coordinateSystem.getRect();return e=e||[0,0],o.dim==="x"?(a.pixel=t[0]-e[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(e,t,r,i,n){var o=r.axis,a={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),r.mainType==="radiusAxis"?(a.pixel=t[0]-e[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=c[1]-c[0],a.pixelStart=c[0],a.signal=o.inverse?-1:1),a},singleAxis:function(e,t,r,i,n){var o=r.axis,a=n.model.coordinateSystem.getRect(),s={};return e=e||[0,0],o.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}},ej=kme;function Bf(e){cu(e),e.registerComponentModel(q9),e.registerComponentView(ej),Q9(e)}var Lme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Wr(gl.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(gl),tj=Lme;var Gf=Ce,rj=7,Fme=1,zI=30,Ome=7,Hf="horizontal",ij="vertical",Nme=5,zme=["line","bar","candlestick","scatter"],Vme={easing:"cubicOut",duration:100,delay:0},Bme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._displayables={},r}return t.prototype.init=function(r,i){this.api=i,this._onBrush=$(this._onBrush,this),this._onBrushEnd=$(this._onBrushEnd,this)},t.prototype.render=function(r,i,n,o){if(e.prototype.render.apply(this,arguments),_n(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!o||o.type!=="dataZoom"||o.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){ja(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new ee;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(i),this._positionGroup()},t.prototype._resetLocation=function(){var r=this.dataZoomModel,i=this.api,n=r.get("brushSelect"),o=n?Ome:0,a=this._findCoordRect(),s={width:i.getWidth(),height:i.getHeight()},l=this._orient===Hf?{right:s.width-a.x-a.width,top:s.height-zI-rj-o,width:a.width,height:zI}:{right:rj,top:a.y,width:zI,height:a.height},c=En(r.option);D(["right","top","width","height"],function(d){c[d]==="ph"&&(c[d]=l[d])});var u=Je(c,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===ij&&this._size.reverse()},t.prototype._positionGroup=function(){var r=this.group,i=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),a=o&&o.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(n===Hf&&!a?{scaleY:l?1:-1,scaleX:1}:n===Hf&&a?{scaleY:l?1:-1,scaleX:-1}:n===ij&&!a?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=r.getBoundingRect([s]);r.x=i.x-c.x,r.y=i.y-c.y,r.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var r=this.dataZoomModel,i=this._size,n=this._displayables.sliderGroup,o=r.get("brushSelect");n.add(new Gf({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var a=new Gf({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:$(this._onClickPanel,this)}),s=this.api.getZr();o?(a.on("mousedown",this._onBrushStart,this),a.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),n.add(a)},t.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var i=this._size,n=this._shadowSize||[],o=r.series,a=o.getRawData(),s=o.getShadowDim&&o.getShadowDim(),l=s&&a.getDimensionInfo(s)?o.getShadowDim():r.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(a!==this._shadowData||l!==this._shadowDim||i[0]!==n[0]||i[1]!==n[1]){var d=a.getDataExtent(l),h=(d[1]-d[0])*.3;d=[d[0]-h,d[1]+h];var p=[0,i[1]],g=[0,i[0]],f=[[i[0],0],[0,0]],v=[],m=g[1]/(a.count()-1),y=0,w=Math.round(a.count()/i[0]),C;a.each([l],function(M,T){if(w>0&&T%w){y+=m;return}var _=M==null||isNaN(M)||M==="",R=_?0:Ye(M,d,p,!0);_&&!C&&T?(f.push([f[f.length-1][0],0]),v.push([v[v.length-1][0],0])):!_&&C&&(f.push([y,0]),v.push([y,0])),f.push([y,R]),v.push([y,R]),y+=m,C=_}),c=this._shadowPolygonPts=f,u=this._shadowPolylinePts=v}this._shadowData=a,this._shadowDim=l,this._shadowSize=[i[0],i[1]];var S=this.dataZoomModel;function b(M){var T=S.getModel(M?"selectedDataBackground":"dataBackground"),_=new ee,R=new It({shape:{points:c},segmentIgnoreThreshold:1,style:T.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),A=new Rt({shape:{points:u},segmentIgnoreThreshold:1,style:T.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return _.add(R),_.add(A),_}for(var x=0;x<3;x++){var E=b(x===1);this._displayables.sliderGroup.add(E),this._displayables.dataShadowSegs.push(E)}},t.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,i=r.get("showDataShadow");if(i!==!1){var n,o=this.ecModel;return r.eachTargetAxis(function(a,s){var l=r.getAxisProxy(a,s).getTargetSeriesModels();D(l,function(c){if(!n&&!(i!==!0&&pe(zme,c.get("type"))<0)){var u=o.getComponent(Nn(a),s).axis,d=Gme(a),h,p=c.coordinateSystem;d!=null&&p.getOtherAxis&&(h=p.getOtherAxis(u).inverse),d=c.getData().mapDimension(d),n={thisAxis:u,series:c,thisDim:a,otherDim:d,otherAxisInverse:h}}},this)},this),n}},t.prototype._renderHandle=function(){var r=this.group,i=this._displayables,n=i.handles=[null,null],o=i.handleLabels=[null,null],a=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,d=l.get("brushSelect"),h=i.filler=new Gf({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});a.add(h),a.add(new Gf({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Fme,fill:"rgba(0,0,0,0)"}})),D([0,1],function(w){var C=l.get("handleIcon");!zg[C]&&C.indexOf("path://")<0&&C.indexOf("image://")<0&&(C="path://"+C);var S=et(C,-1,0,2,2,null,!0);S.attr({cursor:nj(this._orient),draggable:!0,drift:$(this._onDragMove,this,w),ondragend:$(this._onDragEnd,this),onmouseover:$(this._showDataInfo,this,!0),onmouseout:$(this._showDataInfo,this,!1),z2:5});var b=S.getBoundingRect(),x=l.get("handleSize");this._handleHeight=j(x,this._size[1]),this._handleWidth=b.width/b.height*this._handleHeight,S.setStyle(l.getModel("handleStyle").getItemStyle()),S.style.strokeNoScale=!0,S.rectHover=!0,S.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),$o(S);var E=l.get("handleColor");E!=null&&(S.style.fill=E),a.add(n[w]=S);var M=l.getModel("textStyle");r.add(o[w]=new De({silent:!0,invisible:!0,style:Ke(M,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:M.getTextColor(),font:M.getFont()}),z2:10}))},this);var p=h;if(d){var g=j(l.get("moveHandleSize"),s[1]),f=i.moveHandle=new Ce({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:g}}),v=g*.8,m=i.moveHandleIcon=et(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=s[1]+g/2-.5,f.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(g,10));p=i.moveZone=new Ce({invisible:!0,shape:{y:s[1]-y,height:g+y}}),p.on("mouseover",function(){c.enterEmphasis(f)}).on("mouseout",function(){c.leaveEmphasis(f)}),a.add(f),a.add(m),a.add(p)}p.attr({draggable:!0,cursor:nj(this._orient),drift:$(this._onDragMove,this,"all"),ondragstart:$(this._showDataInfo,this,!0),ondragend:$(this._onDragEnd,this),onmouseover:$(this._showDataInfo,this,!0),onmouseout:$(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[Ye(r[0],[0,100],i,!0),Ye(r[1],[0,100],i,!0)]},t.prototype._updateInterval=function(r,i){var n=this.dataZoomModel,o=this._handleEnds,a=this._getViewExtent(),s=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];zi(i,o,a,n.get("zoomLock")?"all":r,s.minSpan!=null?Ye(s.minSpan,l,a,!0):null,s.maxSpan!=null?Ye(s.maxSpan,l,a,!0):null);var c=this._range,u=this._range=lr([Ye(o[0],a,l,!0),Ye(o[1],a,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},t.prototype._updateView=function(r){var i=this._displayables,n=this._handleEnds,o=lr(n.slice()),a=this._size;D([0,1],function(p){var g=i.handles[p],f=this._handleHeight;g.attr({scaleX:f/2,scaleY:f/2,x:n[p]+(p?-1:1),y:a[1]/2-f/2})},this),i.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:a[1]});var s={x:o[0],width:o[1]-o[0]};i.moveHandle&&(i.moveHandle.setShape(s),i.moveZone.setShape(s),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=i.dataShadowSegs,c=[0,o[0],o[1],a[0]],u=0;u<l.length;u++){var d=l[u],h=d.getClipPath();h||(h=new Ce,d.setClipPath(h)),h.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:a[1]})}this._updateDataInfo(r)},t.prototype._updateDataInfo=function(r){var i=this.dataZoomModel,n=this._displayables,o=n.handleLabels,a=this._orient,s=["",""];if(i.get("showDetail")){var l=i.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,d=r?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],c),this._formatLabel(d[1],c)]}}var h=lr(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(g){var f=no(n.handles[g].parent,this.group),v=Ic(g===0?"right":"left",f),m=this._handleWidth/2+Nme,y=Rr([h[g]+(g===0?-m:m),this._size[1]/2],f);o[g].setStyle({x:y[0],y:y[1],verticalAlign:a===Hf?"middle":v,align:a===Hf?v:"center",text:s[g]})}},t.prototype._formatLabel=function(r,i){var n=this.dataZoomModel,o=n.get("labelFormatter"),a=n.get("labelPrecision");(a==null||a==="auto")&&(a=i.getPixelPrecision());var s=r==null||isNaN(r)?"":i.type==="category"||i.type==="time"?i.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(a,20));return Z(o)?o(r,s):H(o)?o.replace("{value}",s):s},t.prototype._showDataInfo=function(r){r=this._dragging||r;var i=this._displayables,n=i.handleLabels;n[0].attr("invisible",!r),n[1].attr("invisible",!r),i.moveHandle&&this.api[r?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},t.prototype._onDragMove=function(r,i,n,o){this._dragging=!0,Ci(o.event);var a=this._displayables.sliderGroup.getLocalTransform(),s=Rr([i,n],a,!0),l=this._updateInterval(r,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(r){var i=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(n[0]<0||n[0]>i[0]||n[1]<0||n[1]>i[1])){var o=this._handleEnds,a=(o[0]+o[1])/2,s=this._updateInterval("all",n[0]-a);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(r){var i=r.offsetX,n=r.offsetY;this._brushStart=new _e(i,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(r){if(this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,!!i){i.attr("ignore",!0);var n=i.shape,o=+new Date;if(!(o-this._brushStartTime<200&&Math.abs(n.width)<5)){var a=this._getViewExtent(),s=[0,100];this._range=lr([Ye(n.x,a,s,!0),Ye(n.x+n.width,a,s,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(r){this._brushing&&(Ci(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},t.prototype._updateBrushRect=function(r,i){var n=this._displayables,o=this.dataZoomModel,a=n.brushRect;a||(a=n.brushRect=new Gf({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(a)),a.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(r,i),u=l.transformCoordToLocal(s.x,s.y),d=this._size;c[0]=Math.max(Math.min(d[0],c[0]),0),a.setShape({x:u[0],y:0,width:c[0]-u[0],height:d[1]})},t.prototype._dispatchZoomAction=function(r){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?Vme:null,start:i[0],end:i[1]})},t.prototype._findCoordRect=function(){var r,i=ob(this.dataZoomModel).infoList;if(!r&&i.length){var n=i[0].model.coordinateSystem;r=n.getRect&&n.getRect()}if(!r){var o=this.api.getWidth(),a=this.api.getHeight();r={x:o*.2,y:a*.2,width:o*.6,height:a*.6}}return r},t.type="dataZoom.slider",t}(Th);function Gme(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function nj(e){return e==="vertical"?"ns-resize":"ew-resize"}var oj=Bme;function Uf(e){e.registerComponentModel(tj),e.registerComponentView(oj),cu(e)}function VI(e){Te(Bf),Te(Uf)}var Hme={get:function(e,t,r){var i=re((Ume[e]||{})[t]);return r&&O(i)?i[i.length-1]:i}},Ume={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Eb=Hme;var aj=Ht.mapVisual,Wme=Ht.eachVisual,jme=O,sj=D,$me=lr,Yme=Ye,qme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.optionUpdated=function(r,i){var n=this.option;!i&&db(n,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var i=this.stateList;r=$(r,this),this.controllerVisuals=Of(this.option.controller,i,r),this.targetVisuals=Of(this.option.target,i,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,i=[];return r==null||r==="all"?this.ecModel.eachSeries(function(n,o){i.push(o)}):i=Ge(r),i},t.prototype.eachTargetSeries=function(r,i){D(this.getTargetSeriesIndices(),function(n){var o=this.ecModel.getSeriesByIndex(n);o&&r.call(i,o)},this)},t.prototype.isTargetSeries=function(r){var i=!1;return this.eachTargetSeries(function(n){n===r&&(i=!0)}),i},t.prototype.formatValueText=function(r,i,n){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,c;n=n||["<",">"],O(r)&&(r=r.slice(),c=!0);var u=i?r:c?[d(r[0]),d(r[1])]:d(r);if(H(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(Z(l))return c?l(r[0],r[1]):l(r);if(c)return r[0]===s[0]?n[0]+" "+u[1]:r[1]===s[1]?n[1]+" "+u[0]:u[0]+" - "+u[1];return u;function d(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,i=$me([r.min,r.max]);this._dataExtent=i},t.prototype.getDataDimensionIndex=function(r){var i=this.option.dimension;if(i!=null)return r.getDimensionIndex(i);for(var n=r.dimensions,o=n.length-1;o>=0;o--){var a=n[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,i=this.option,n={inRange:i.inRange,outOfRange:i.outOfRange},o=i.target||(i.target={}),a=i.controller||(i.controller={});fe(o,n),fe(a,n);var s=this.isCategory();l.call(this,o),l.call(this,a),c.call(this,o,"inRange","outOfRange"),u.call(this,a);function l(d){jme(i.color)&&!d.inRange&&(d.inRange={color:i.color.slice().reverse()}),d.inRange=d.inRange||{color:r.get("gradientColor")}}function c(d,h,p){var g=d[h],f=d[p];g&&!f&&(f=d[p]={},sj(g,function(v,m){if(Ht.isValidType(m)){var y=Eb.get(m,"inactive",s);y!=null&&(f[m]=y,m==="color"&&!f.hasOwnProperty("opacity")&&!f.hasOwnProperty("colorAlpha")&&(f.opacity=[0,0]))}}))}function u(d){var h=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,p=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),f=this.getItemSymbol(),v=f||"roundRect";sj(this.stateList,function(m){var y=this.itemSize,w=d[m];w||(w=d[m]={color:s?g:[g]}),w.symbol==null&&(w.symbol=h&&re(h)||(s?v:[v])),w.symbolSize==null&&(w.symbolSize=p&&re(p)||(s?y[0]:[y[0],y[0]])),w.symbol=aj(w.symbol,function(b){return b==="none"?v:b});var C=w.symbolSize;if(C!=null){var S=-1/0;Wme(C,function(b){b>S&&(S=b)}),w.symbolSize=aj(C,function(b){return Yme(b,[0,S],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Ee),Ph=qme;var lj=[20,140],Kme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=lj[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=lj[1])},t.prototype._resetRange=function(){var r=this.getExtent(),i=this.option.range;!i||i.auto?(r.auto=1,this.option.range=r):O(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],r[0]),i[1]=Math.min(i[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),D(this.stateList,function(r){var i=this.option.controller[r].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),i=lr((this.get("range")||[]).slice());return i[0]>r[1]&&(i[0]=r[1]),i[1]>r[1]&&(i[1]=r[1]),i[0]<r[0]&&(i[0]=r[0]),i[1]<r[0]&&(i[1]=r[0]),i},t.prototype.getValueState=function(r){var i=this.option.range,n=this.getExtent();return(i[0]<=n[0]||i[0]<=r)&&(i[1]>=n[1]||r<=i[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var i=[];return this.eachTargetSeries(function(n){var o=[],a=n.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),i.push({seriesId:n.id,dataIndex:o})},this),i},t.prototype.getVisualMeta=function(r){var i=cj(this,"outOfRange",this.getExtent()),n=cj(this,"inRange",this.option.range.slice()),o=[];function a(p,g){o.push({value:p,color:r(p,g)})}for(var s=0,l=0,c=n.length,u=i.length;l<u&&(!n.length||i[l]<=n[0]);l++)i[l]<n[s]&&a(i[l],"outOfRange");for(var d=1;s<c;s++,d=0)d&&o.length&&a(n[s],"outOfRange"),a(n[s],"inRange");for(var d=1;l<u;l++)(!n.length||n[n.length-1]<i[l])&&(d&&(o.length&&a(o[o.length-1].value,"outOfRange"),d=0),a(i[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Wr(Ph.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Ph);function cj(e,t,r){if(r[0]===r[1])return r.slice();for(var i=200,n=(r[1]-r[0])/i,o=r[0],a=[],s=0;s<=i&&o<r[1];s++)a.push(o),o+=n;return a.push(r[1]),a}var uj=Kme;var Zme=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,i){this.ecModel=r,this.api=i},t.prototype.render=function(r,i,n,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,i,n,o)},t.prototype.renderBackground=function(r){var i=this.visualMapModel,n=ao(i.get("padding")||0),o=r.getBoundingRect();r.add(new Ce({z2:-1,silent:!0,shape:{x:o.x-n[3],y:o.y-n[0],width:o.width+n[3]+n[1],height:o.height+n[0]+n[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,i,n){n=n||{};var o=n.forceState,a=this.visualMapModel,s={};if(i==="color"){var l=a.get("contentColor");s.color=l}function c(p){return s[p]}function u(p,g){s[p]=g}var d=a.controllerVisuals[o||a.getValueState(r)],h=Ht.prepareVisualTypes(d);return D(h,function(p){var g=d[p];n.convertOpacityToAlpha&&p==="opacity"&&(p="colorAlpha",g=d.__alphaForOpacity),Ht.dependsOn(p,i)&&g&&g.applyVisual(r,c,u)}),s[i]},t.prototype.positionGroup=function(r){var i=this.visualMapModel,n=this.api;Hs(r,i.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(r,i,n,o){},t.type="visualMap",t}(He),Mb=Zme;var dj=[["left","right","width"],["top","bottom","height"]];function Tb(e,t,r){var i=e.option,n=i.align;if(n!=null&&n!=="auto")return n;for(var o={width:t.getWidth(),height:t.getHeight()},a=i.orient==="horizontal"?1:0,s=dj[a],l=[0,null,10],c={},u=0;u<3;u++)c[dj[1-a][u]]=l[u],c[s[u]]=u===2?r[0]:i[s[u]];var d=[["x","width",3],["y","height",0]][a],h=Je(c,o,i.padding);return s[(h.margin[d[2]]||0)+h[d[0]]+h[d[1]]*.5<o[d[1]]*.5?0:1]}function kh(e,t){return D(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var ca=Ye,Xme=D,pj=Math.min,BI=Math.max,Qme=12,Jme=6,eye=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.init=function(r,i){e.prototype.init.call(this,r,i),this._hoverLinkFromSeriesMouseOver=$(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=$(this._hideIndicator,this)},t.prototype.doRender=function(r,i,n,o){(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,i=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(i);var n=r.get("text");this._renderEndsText(i,n,0),this._renderEndsText(i,n,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},t.prototype._renderEndsText=function(r,i,n){if(i){var o=i[1-n];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,n===0?-s:l[1]+s],c),d=this._applyTransform(n===0?"bottom":"top",c),h=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new De({style:Ke(p,{x:u[0],y:u[1],verticalAlign:h==="horizontal"?"middle":d,align:h==="horizontal"?d:"center",text:o})}))}},t.prototype._renderBar=function(r){var i=this.visualMapModel,n=this._shapes,o=i.itemSize,a=this._orient,s=this._useHandle,l=Tb(i,this.api,o),c=n.mainGroup=this._createBarGroup(l),u=new ee;c.add(u),u.add(n.outOfRange=gj()),u.add(n.inRange=gj(null,s?vj(this._orient):null,$(this._dragHandle,this,"all",!1),$(this._dragHandle,this,"all",!0))),u.setClipPath(new Ce({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var d=i.textStyleModel.getTextRect("\u56FD"),h=BI(d.width,d.height);s&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(i,c,0,o,h,a),this._createHandle(i,c,1,o,h,a)),this._createIndicator(i,c,o,h,a),r.add(c)},t.prototype._createHandle=function(r,i,n,o,a,s){var l=$(this._dragHandle,this,n,!1),c=$(this._dragHandle,this,n,!0),u=Tr(r.get("handleSize"),o[0]),d=et(r.get("handleIcon"),-u/2,-u/2,u,u,null,!0),h=vj(this._orient);d.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(m){Ci(m.event)}}),d.x=o[0]/2,d.useStyle(r.getModel("handleStyle").getItemStyle()),d.setStyle({strokeNoScale:!0,strokeFirst:!0}),d.style.lineWidth*=2,d.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),ka(d,!0),i.add(d);var p=this.visualMapModel.textStyleModel,g=new De({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Ci(m.event)},ondragend:c,style:Ke(p,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var f=[u,0],v=this._shapes;v.handleThumbs[n]=d,v.handleLabelPoints[n]=f,v.handleLabels[n]=g},t.prototype._createIndicator=function(r,i,n,o,a){var s=Tr(r.get("indicatorSize"),n[0]),l=et(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var c=r.getModel("indicatorStyle").getItemStyle();if(l instanceof vt){var u=l.style;l.useStyle(F({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);i.add(l);var d=this.visualMapModel.textStyleModel,h=new De({silent:!0,invisible:!0,style:Ke(d,{x:0,y:0,text:""})});this.group.add(h);var p=[(a==="horizontal"?o/2:Jme)+n[0]/2,0],g=this._shapes;g.indicator=l,g.indicatorLabel=h,g.indicatorLabelPoint=p,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,i,n,o){if(this._useHandle){if(this._dragging=!i,!i){var a=this._applyTransform([n,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():fj(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,i=this._dataInterval=r.getSelected(),n=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[ca(i[0],n,o,!0),ca(i[1],n,o,!0)]},t.prototype._updateInterval=function(r,i){i=i||0;var n=this.visualMapModel,o=this._handleEnds,a=[0,n.itemSize[1]];zi(i,o,a,r,0);var s=n.getExtent();this._dataInterval=[ca(o[0],a,s,!0),ca(o[1],a,s,!0)]},t.prototype._updateView=function(r){var i=this.visualMapModel,n=i.getExtent(),o=this._shapes,a=[0,i.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,s,"inRange"),c=this._createBarVisual(n,n,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,i,n,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],c=this._createBarPoints(n,l);return{barColor:new qo(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,i){var n=100,o=[],a=(r[1]-r[0])/n;o.push({color:this.getControllerVisual(r[0],"color",i),offset:0});for(var s=1;s<n;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",i),offset:s/n})}return o.push({color:this.getControllerVisual(r[1],"color",i),offset:1}),o},t.prototype._createBarPoints=function(r,i){var n=this.visualMapModel.itemSize;return[[n[0]-i[0],r[0]],[n[0],r[0]],[n[0],r[1]],[n[0]-i[1],r[1]]]},t.prototype._createBarGroup=function(r){var i=this._orient,n=this.visualMapModel.get("inverse");return new ee(i==="horizontal"&&!n?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:i==="horizontal"&&n?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:i==="vertical"&&!n?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,i){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,a=n.handleThumbs,s=n.handleLabels,l=o.itemSize,c=o.getExtent();Xme([0,1],function(u){var d=a[u];d.setStyle("fill",i.handlesColor[u]),d.y=r[u];var h=ca(r[u],[0,l[1]],c,!0),p=this.getControllerVisual(h,"symbolSize");d.scaleX=d.scaleY=p/l[0],d.x=l[0]-p/2;var g=Rr(n.handleLabelPoints[u],no(d,this.group));s[u].setStyle({x:g[0],y:g[1],text:o.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,i,n,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,c=[0,l[1]],u=this._shapes,d=u.indicator;if(d){d.attr("invisible",!1);var h={convertOpacityToAlpha:!0},p=this.getControllerVisual(r,"color",h),g=this.getControllerVisual(r,"symbolSize"),f=ca(r,s,c,!0),v=l[0]-g/2,m={x:d.x,y:d.y};d.y=f,d.x=v;var y=Rr(u.indicatorLabelPoint,no(d,this.group)),w=u.indicatorLabel;w.attr("invisible",!1);var C=this._applyTransform("left",u.mainGroup),S=this._orient,b=S==="horizontal";w.setStyle({text:(n||"")+a.formatValueText(i),verticalAlign:b?C:"middle",align:b?"center":C});var x={x:v,y:f,style:{fill:p}},E={style:{x:y[0],y:y[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var M={duration:100,easing:"cubicInOut",additive:!0};d.x=m.x,d.y=m.y,d.animateTo(x,M),w.animateTo(E,M)}else d.attr(x),w.attr(E);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var _=0;_<T.length;_++)this.api.enterBlur(T[_])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(i){if(r._hovering=!0,!r._dragging){var n=r.visualMapModel.itemSize,o=r._applyTransform([i.offsetX,i.offsetY],r._shapes.mainGroup,!0,!0);o[1]=pj(BI(0,o[1]),n[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,i){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var a=[0,o[1]],s=n.getExtent();r=pj(BI(a[0],r),a[1]);var l=tye(n,s,a),c=[r-l,r+l],u=ca(r,a,s,!0),d=[ca(c[0],a,s,!0),ca(c[1],a,s,!0)];c[0]<a[0]&&(d[0]=-1/0),c[1]>a[1]&&(d[1]=1/0),i&&(d[0]===-1/0?this._showIndicator(u,d[1],"< ",l):d[1]===1/0?this._showIndicator(u,d[0],"> ",l):this._showIndicator(u,u,"\u2248 ",l));var h=this._hoverLinkDataIndices,p=[];(i||fj(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(d));var g=iN(h,p);this._dispatchHighDown("downplay",kh(g[0],n)),this._dispatchHighDown("highlight",kh(g[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var i;if(uo(r.target,function(l){var c=ae(l);if(c.dataIndex!=null)return i=c,!0},!0),!!i){var n=this.ecModel.getSeriesByIndex(i.seriesIndex),o=this.visualMapModel;if(o.isTargetSeries(n)){var a=n.getData(i.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),i.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var n=0;n<i.length;n++)this.api.leaveBlur(i[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",kh(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,i,n,o){var a=no(i,o?null:this.group);return O(r)?Rr(r,a,n):Ic(r,a,n)},t.prototype._dispatchHighDown=function(r,i){i&&i.length&&this.api.dispatchAction({type:r,batch:i})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(Mb);function gj(e,t,r,i){return new It({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(n){Ci(n.event)},ondragend:i})}function tye(e,t,r){var i=Qme/2,n=e.get("hoverLinkDataSize");return n&&(i=ca(n,t,r,!0)/2),i}function fj(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function vj(e){return e==="vertical"?"ns-resize":"ew-resize"}var mj=eye;var yj={type:"selectDataRange",event:"dataRangeSelected",update:"update"},wj=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})};var Cj=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(i){var n=e.pipelineContext;!i.isTargetSeries(e)||n&&n.large||r.push(a9(i.stateList,i.targetVisuals,$(i.getValueState,i),i.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),i=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(e)){var o=n.getVisualMeta($(rye,null,e,n))||{stops:[],outerColors:[]},a=n.getDataDimensionIndex(r);a>=0&&(o.dimension=a,i.push(o))}}),e.getData().setVisual("visualMeta",i)}}];function rye(e,t,r,i){for(var n=t.targetVisuals[i],o=Ht.prepareVisualTypes(n),a={color:Zo(e.getData(),"color")},s=0,l=o.length;s<l;s++){var c=o[s],u=n[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(r,d,h)}return a.color;function d(p){return a[p]}function h(p,g){a[p]=g}}var bj=D;function GI(e){var t=e&&e.visualMap;O(t)||(t=t?[t]:[]),bj(t,function(r){if(r){Lh(r,"splitList")&&!Lh(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var i=r.pieces;i&&O(i)&&bj(i,function(n){J(n)&&(Lh(n,"start")&&!Lh(n,"min")&&(n.min=n.start),Lh(n,"end")&&!Lh(n,"max")&&(n.max=n.end))})}})}function Lh(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Sj=!1;function Wf(e){Sj||(Sj=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(yj,wj),D(Cj,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(GI))}function jf(e){e.registerComponentModel(uj),e.registerComponentView(mj),Wf(e)}var iye=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,i){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],nye[this._mode].call(this,this._pieceList),this._resetSelected(r,i);var o=this.option.categories;this.resetVisual(function(a,s){n==="categories"?(a.mappingMethod="category",a.categories=re(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=N(this._pieceList,function(l){return l=re(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,i={},n=Ht.listVisualTypes(),o=this.isCategory();D(r.pieces,function(s){D(n,function(l){s.hasOwnProperty(l)&&(i[l]=1)})}),D(i,function(s,l){var c=!1;D(this.stateList,function(u){c=c||a(r,u,l)||a(r.target,u,l)},this),!c&&D(this.stateList,function(u){(r[u]||(r[u]={}))[l]=Eb.get(l,u==="inRange"?"active":"inactive",o)})},this);function a(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,i){var n=this.option,o=this._pieceList,a=(i?n:r).selected||{};if(n.selected=a,D(o,function(l,c){var u=this.getSelectedMapKey(l);a.hasOwnProperty(u)||(a[u]=!0)},this),n.selectedMode==="single"){var s=!1;D(o,function(l,c){var u=this.getSelectedMapKey(l);a[u]&&(s?a[u]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=re(r)},t.prototype.getValueState=function(r){var i=Ht.findPieceIndex(r,this._pieceList);return i!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var i=[],n=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var u=Ht.findPieceIndex(l,n);u===r&&a.push(c)},this),i.push({seriesId:o.id,dataIndex:a})},this),i},t.prototype.getRepresentValue=function(r){var i;if(this.isCategory())i=r.value;else if(r.value!=null)i=r.value;else{var n=r.interval||[];i=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return i},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var i=[],n=["",""],o=this;function a(u,d){var h=o.getRepresentValue({interval:u});d||(d=o.getValueState(h));var p=r(h,d);u[0]===-1/0?n[0]=p:u[1]===1/0?n[1]=p:i.push({value:u[0],color:p},{value:u[1],color:p})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return D(s,function(u){var d=u.interval;d&&(d[0]>c&&a([c,d[0]],"outOfRange"),a(d.slice()),c=d[1])},this),{stops:i,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=Wr(Ph.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Ph),nye={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),i=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var o=(i[1]-i[0])/n;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<n;s+=o,a++){var l=a===n-1?i[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),PD(e),D(e,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(e){var t=this.option;D(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),xj(t,e)},pieces:function(e){var t=this.option;D(t.pieces,function(r,i){J(r)||(r={value:r});var n={text:"",index:i};if(r.label!=null&&(n.text=r.label),r.hasOwnProperty("value")){var o=n.value=r.value;n.interval=[o,o],n.close=[1,1]}else{for(var a=n.interval=[],s=n.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],d=0;d<2;d++){for(var h=[["gte","gt","min"],["lte","lt","max"]][d],p=0;p<3&&a[d]==null;p++)a[d]=r[h[p]],s[d]=l[p],u[d]=p===2;a[d]==null&&(a[d]=c[d])}u[0]&&a[1]===1/0&&(s[0]=0),u[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(n.value=a[0])}n.visual=Ht.retrieveVisuals(r),e.push(n)},this),xj(t,e),PD(e),D(e,function(r){var i=r.close,n=[["<","\u2264"][i[1]],[">","\u2265"][i[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,n)},this)}};function xj(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}var Dj=iye;var oye=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var i=this.visualMapModel,n=i.get("textGap"),o=i.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),c=i.itemSize,u=this._getViewData(),d=u.endsText,h=bt(i.get("showLabel",!0),!d);d&&this._renderEndsText(r,d[0],c,h,l),D(u.viewPieceList,function(p){var g=p.piece,f=new ee;f.onclick=$(this._onItemClick,this,g),this._enableHoverLink(f,p.indexInModelPieceList);var v=i.getRepresentValue(g);if(this._createItemSymbol(f,v,[0,0,c[0],c[1]]),h){var m=this.visualMapModel.getValueState(v);f.add(new De({style:{x:l==="right"?-n:c[0]+n,y:c[1]/2,text:g.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(f)},this),d&&this._renderEndsText(r,d[1],c,h,l),lo(i.get("orient"),r,i.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,i){var n=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=n.visualMapModel;s.option.hoverLink&&n.api.dispatchAction({type:a,batch:kh(s.findTargetDataIndices(i),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,i=r.option;if(i.orient==="vertical")return Tb(r,this.api,r.itemSize);var n=i.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(r,i,n,o,a){if(i){var s=new ee,l=this.visualMapModel.textStyleModel;s.add(new De({style:Ke(l,{x:o?a==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:o?a:"center",text:i})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,i=N(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),n=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?i.reverse():n&&(n=n.slice().reverse()),{viewPieceList:i,endsText:n}},t.prototype._createItemSymbol=function(r,i,n){r.add(et(this.getControllerVisual(i,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(i,"color")))},t.prototype._onItemClick=function(r){var i=this.visualMapModel,n=i.option,o=n.selectedMode;if(o){var a=re(n.selected),s=i.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,D(a,function(l,c){a[c]=c===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(Mb),Ej=oye;function $f(e){e.registerComponentModel(Dj),e.registerComponentView(Ej),Wf(e)}function HI(e){Te(jf),Te($f)}var aye={label:{enabled:!0},decal:{show:!1}},Mj=he(),sye={};function UI(e,t){var r=e.getModel("aria");if(!r.get("enabled"))return;var i=re(aye);fe(i.label,e.getLocaleModel().get("aria"),!1),fe(r.option,i,!1),n(),o();function n(){var c=r.getModel("decal"),u=c.get("show");if(u){var d=Y();e.eachSeries(function(h){if(!h.isColorBySeries()){var p=d.get(h.type);p||(p={},d.set(h.type,p)),Mj(h).scope=p}}),e.eachRawSeries(function(h){if(e.isSeriesFiltered(h))return;if(Z(h.enableAriaDecal)){h.enableAriaDecal();return}var p=h.getData();if(h.isColorBySeries()){var y=Eg(h.ecModel,h.name,sye,e.getSeriesCount()),w=p.getVisual("decal");p.setVisual("decal",C(w,y))}else{var g=h.getRawData(),f={},v=Mj(h).scope;p.each(function(S){var b=p.getRawIndex(S);f[b]=S});var m=g.count();g.each(function(S){var b=f[S],x=g.getName(S)||S+"",E=Eg(h.ecModel,x,v,m),M=p.getItemVisual(b,"decal");p.setItemVisual(b,"decal",C(M,E))})}function C(S,b){var x=S?F(F({},b),S):b;return x.dirty=!0,x}})}}function o(){var c=t.getZr().dom;if(c){var u=e.getLocaleModel().get("aria"),d=r.getModel("label");if(d.option=Q(d.option,u),!!d.get("enabled")){if(d.get("description")){c.setAttribute("aria-label",d.get("description"));return}var h=e.getSeriesCount(),p=d.get(["data","maxCount"])||10,g=d.get(["series","maxCount"])||10,f=Math.min(h,g),v;if(!(h<1)){var m=s();if(m){var y=d.get(["general","withTitle"]);v=a(y,{title:m})}else v=d.get(["general","withoutTitle"]);var w=[],C=h>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);v+=a(C,{seriesCount:h}),e.eachSeries(function(E,M){if(M<f){var T=void 0,_=E.get("name"),R=_?"withName":"withoutName";T=h>1?d.get(["series","multiple",R]):d.get(["series","single",R]),T=a(T,{seriesId:E.seriesIndex,seriesName:E.get("name"),seriesType:l(E.subType)});var A=E.getData();if(A.count()>p){var P=d.get(["data","partialData"]);T+=a(P,{displayCnt:p})}else T+=d.get(["data","allData"]);for(var k=d.get(["data","separator","middle"]),L=d.get(["data","separator","end"]),V=[],z=0;z<A.count();z++)if(z<p){var B=A.getName(z),K=A.getValues(z),X=d.get(["data",B?"withName":"withoutName"]);V.push(a(X,{name:B,value:K.join(k)}))}T+=V.join(k)+L,w.push(T)}});var S=d.getModel(["series","multiple","separator"]),b=S.get("middle"),x=S.get("end");v+=w.join(b)+x,c.setAttribute("aria-label",v)}}}}function a(c,u){if(!H(c))return c;var d=c;return D(u,function(h,p){d=d.replace(new RegExp("\\{\\s*"+p+"\\s*\\}","g"),h)}),d}function s(){var c=e.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=e.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function WI(e){if(!(!e||!e.aria)){var t=e.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},D(["description","general","series","data"],function(r){t[r]!=null&&(t.label[r]=t[r])})}}function jI(e){e.registerPreprocessor(WI),e.registerVisual(e.PRIORITY.VISUAL.ARIA,UI)}var Tj={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},lye=function(){function e(t){var r=this._condVal=H(t)?new RegExp(t):IF(t)?t:null;if(r==null){var i="";qe(i)}}return e.prototype.evaluate=function(t){var r=typeof t;return H(r)?this._condVal.test(t):be(r)?this._condVal.test(t+""):!1},e}(),cye=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),uye=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),dye=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),hye=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),pye=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,i=r(this.valueGetterParam),n=t?this.valueParser(i):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?n:i))return!1;return!0},e}();function $I(e,t){if(e===!0||e===!1){var r=new cye;return r.value=e,r}var i="";return Rj(e)||qe(i),e.and?_j("and",e,t):e.or?_j("or",e,t):e.not?gye(e,t):fye(e,t)}function _j(e,t,r){var i=t[e],n="";O(i)||qe(n),i.length||qe(n);var o=e==="and"?new uye:new dye;return o.children=N(i,function(a){return $I(a,r)}),o.children.length||qe(n),o}function gye(e,t){var r=e.not,i="";Rj(r)||qe(i);var n=new hye;return n.child=$I(r,t),n.child||qe(i),n}function fye(e,t){for(var r="",i=t.prepareGetValue(e),n=[],o=me(e),a=e.parser,s=a?U0(a):null,l=0;l<o.length;l++){var c=o[l];if(!(c==="parser"||t.valueGetterAttrMap.get(c))){var u=ne(Tj,c)?Tj[c]:c,d=e[c],h=s?s(d):d,p=q6(u,h)||u==="reg"&&new lye(h);p||qe(r),n.push(p)}}n.length||qe(r);var g=new pye;return g.valueGetterParam=i,g.valueParser=s,g.getValue=t.getValue,g.subCondList=n,g}function Rj(e){return J(e)&&!Vt(e)}var vye=function(){function e(t,r){this._cond=$I(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Aj(e,t){return new vye(e,t)}var Ij={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,i=Aj(e.config,{valueGetterAttrMap:Y({dimension:!0}),prepareGetValue:function(s){var l="",c=s.dimension;ne(s,"dimension")||qe(l);var u=t.getDimensionInfo(c);return u||qe(l),{dimIdx:u.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),n=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),i.evaluate()&&n.push(r);return{data:n}}};var Pj={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,i="",n=Ge(r);n.length||qe(i);var o=[];D(n,function(u){var d=u.dimension,h=u.order,p=u.parser,g=u.incomparable;if(d==null&&qe(i),h!=="asc"&&h!=="desc"&&qe(i),g&&g!=="min"&&g!=="max"){var f="";qe(f)}if(h!=="asc"&&h!=="desc"){var v="";qe(v)}var m=t.getDimensionInfo(d);m||qe(i);var y=p?U0(p):null;p&&!y&&qe(i),o.push({dimIdx:m.index,parser:y,comparator:new W0(h,g)})});var a=t.sourceFormat;a!==Qt&&a!==Ir&&qe(i);for(var s=[],l=0,c=t.count();l<c;l++)s.push(t.getRawDataItem(l));return s.sort(function(u,d){for(var h=0;h<o.length;h++){var p=o[h],g=t.retrieveValueFromItem(u,p.dimIdx),f=t.retrieveValueFromItem(d,p.dimIdx);p.parser&&(g=p.parser(g),f=p.parser(f));var v=p.comparator.evaluate(g,f);if(v!==0)return v}return 0}),{data:s}}};function YI(e){e.registerTransform(Ij),e.registerTransform(Pj)}var mye=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,i,n){e.prototype.init.call(this,r,i,n),this._sourceManager=new Y0(this),sM(this)},t.prototype.mergeOption=function(r,i){e.prototype.mergeOption.call(this,r,i),sM(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Pi},t}(Ee);var yye=function(e){I(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(He);function qI(e){e.registerComponentModel(mye),e.registerComponentView(yye)}var ua=vr.CMD;function Fh(e,t){return Math.abs(e-t)<1e-5}function _b(e){var t=e.data,r=e.len(),i=[],n,o=0,a=0,s=0,l=0;function c(A,P){n&&n.length>2&&i.push(n),n=[A,P]}function u(A,P,k,L){Fh(A,k)&&Fh(P,L)||n.push(A,P,k,L,k,L)}function d(A,P,k,L,V,z){var B=Math.abs(P-A),K=Math.tan(B/4)*4/3,X=P<A?-1:1,oe=Math.cos(A),ye=Math.sin(A),we=Math.cos(P),Oe=Math.sin(P),$e=oe*V+k,Ne=ye*z+L,xe=we*V+k,ze=Oe*z+L,Ae=V*K*X,ve=z*K*X;n.push($e-Ae*ye,Ne+ve*oe,xe+Ae*Oe,ze-ve*we,xe,ze)}for(var h,p,g,f,v=0;v<r;){var m=t[v++],y=v===1;switch(y&&(o=t[v],a=t[v+1],s=o,l=a,(m===ua.L||m===ua.C||m===ua.Q)&&(n=[s,l])),m){case ua.M:o=s=t[v++],a=l=t[v++],c(s,l);break;case ua.L:h=t[v++],p=t[v++],u(o,a,h,p),o=h,a=p;break;case ua.C:n.push(t[v++],t[v++],t[v++],t[v++],o=t[v++],a=t[v++]);break;case ua.Q:h=t[v++],p=t[v++],g=t[v++],f=t[v++],n.push(o+2/3*(h-o),a+2/3*(p-a),g+2/3*(h-g),f+2/3*(p-f),g,f),o=g,a=f;break;case ua.A:var w=t[v++],C=t[v++],S=t[v++],b=t[v++],x=t[v++],E=t[v++]+x;v+=1;var M=!t[v++];h=Math.cos(x)*S+w,p=Math.sin(x)*b+C,y?(s=h,l=p,c(s,l)):u(o,a,h,p),o=Math.cos(E)*S+w,a=Math.sin(E)*b+C;for(var T=(M?-1:1)*Math.PI/2,_=x;M?_>E:_<E;_+=T){var R=M?Math.max(_+T,E):Math.min(_+T,E);d(_,R,w,C,S,b)}break;case ua.R:s=o=t[v++],l=a=t[v++],h=s+t[v++],p=l+t[v++],c(h,l),u(h,l,h,p),u(h,p,s,p),u(s,p,s,l),u(s,l,h,l);break;case ua.Z:n&&u(o,a,s,l),o=s,a=l;break}}return n&&n.length>2&&i.push(n),i}function KI(e,t,r,i,n,o,a,s,l,c){if(Fh(e,r)&&Fh(t,i)&&Fh(n,a)&&Fh(o,s)){l.push(a,s);return}var u=2/c,d=u*u,h=a-e,p=s-t,g=Math.sqrt(h*h+p*p);h/=g,p/=g;var f=r-e,v=i-t,m=n-a,y=o-s,w=f*f+v*v,C=m*m+y*y;if(w<d&&C<d){l.push(a,s);return}var S=h*f+p*v,b=-h*m-p*y,x=w-S*S,E=C-b*b;if(x<d&&S>=0&&E<d&&b>=0){l.push(a,s);return}var M=[],T=[];vn(e,r,n,a,.5,M),vn(t,i,o,s,.5,T),KI(M[0],T[0],M[1],T[1],M[2],T[2],M[3],T[3],l,c),KI(M[4],T[4],M[5],T[5],M[6],T[6],M[7],T[7],l,c)}function kj(e,t){var r=_b(e),i=[];t=t||1;for(var n=0;n<r.length;n++){var o=r[n],a=[],s=o[0],l=o[1];a.push(s,l);for(var c=2;c<o.length;){var u=o[c++],d=o[c++],h=o[c++],p=o[c++],g=o[c++],f=o[c++];KI(s,l,u,d,h,p,g,f,a,t),s=g,l=f}i.push(a)}return i}function Nj(e,t,r){var i=e[t],n=e[1-t],o=Math.abs(i/n),a=Math.ceil(Math.sqrt(o*r)),s=Math.floor(r/a);s===0&&(s=1,a=r);for(var l=[],c=0;c<a;c++)l.push(s);var u=a*s,d=r-u;if(d>0)for(var c=0;c<d;c++)l[c%a]+=1;return l}function Lj(e,t,r){for(var i=e.r0,n=e.r,o=e.startAngle,a=e.endAngle,s=Math.abs(a-o),l=s*n,c=n-i,u=l>Math.abs(c),d=Nj([l,c],u?0:1,t),h=(u?s:c)/d.length,p=0;p<d.length;p++)for(var g=(u?c:s)/d[p],f=0;f<d[p];f++){var v={};u?(v.startAngle=o+h*p,v.endAngle=o+h*(p+1),v.r0=i+g*f,v.r=i+g*(f+1)):(v.startAngle=o+g*f,v.endAngle=o+g*(f+1),v.r0=i+h*p,v.r=i+h*(p+1)),v.clockwise=e.clockwise,v.cx=e.cx,v.cy=e.cy,r.push(v)}}function wye(e,t,r){for(var i=e.width,n=e.height,o=i>n,a=Nj([i,n],o?0:1,t),s=o?"width":"height",l=o?"height":"width",c=o?"x":"y",u=o?"y":"x",d=e[s]/a.length,h=0;h<a.length;h++)for(var p=e[l]/a[h],g=0;g<a[h];g++){var f={};f[c]=h*d,f[u]=g*p,f[s]=d,f[l]=p,f.x+=e.x,f.y+=e.y,r.push(f)}}function Fj(e,t,r,i){return e*i-r*t}function Cye(e,t,r,i,n,o,a,s){var l=r-e,c=i-t,u=a-n,d=s-o,h=Fj(u,d,l,c);if(Math.abs(h)<1e-6)return null;var p=e-n,g=t-o,f=Fj(p,g,u,d)/h;return f<0||f>1?null:new _e(f*l+e,f*c+t)}function bye(e,t,r){var i=new _e;_e.sub(i,r,t),i.normalize();var n=new _e;_e.sub(n,e,t);var o=n.dot(i);return o}function Oh(e,t){var r=e[e.length-1];r&&r[0]===t[0]&&r[1]===t[1]||e.push(t)}function Sye(e,t,r){for(var i=e.length,n=[],o=0;o<i;o++){var a=e[o],s=e[(o+1)%i],l=Cye(a[0],a[1],s[0],s[1],t.x,t.y,r.x,r.y);l&&n.push({projPt:bye(l,t,r),pt:l,idx:o})}if(n.length<2)return[{points:e},{points:e}];n.sort(function(v,m){return v.projPt-m.projPt});var c=n[0],u=n[n.length-1];if(u.idx<c.idx){var d=c;c=u,u=d}for(var h=[c.pt.x,c.pt.y],p=[u.pt.x,u.pt.y],g=[h],f=[p],o=c.idx+1;o<=u.idx;o++)Oh(g,e[o].slice());Oh(g,p),Oh(g,h);for(var o=u.idx+1;o<=c.idx+i;o++)Oh(f,e[o%i].slice());return Oh(f,h),Oh(f,p),[{points:g},{points:f}]}function Oj(e){var t=e.points,r=[],i=[];yc(t,r,i);var n=new le(r[0],r[1],i[0]-r[0],i[1]-r[1]),o=n.width,a=n.height,s=n.x,l=n.y,c=new _e,u=new _e;return o>a?(c.x=u.x=s+o/2,c.y=l,u.y=l+a):(c.y=u.y=l+a/2,c.x=s,u.x=s+o),Sye(t,c,u)}function Rb(e,t,r,i){if(r===1)i.push(t);else{var n=Math.floor(r/2),o=e(t);Rb(e,o[0],n,i),Rb(e,o[1],r-n,i)}return i}function xye(e,t){for(var r=[],i=0;i<t;i++)r.push(Ad(e));return r}function Dye(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function Eye(e){for(var t=[],r=0;r<e.length;)t.push([e[r++],e[r++]]);return t}function zj(e,t){var r=[],i=e.shape,n;switch(e.type){case"rect":wye(i,t,r),n=Ce;break;case"sector":Lj(i,t,r),n=qt;break;case"circle":Lj({r0:0,r:i.r,startAngle:0,endAngle:Math.PI*2,cx:i.cx,cy:i.cy},t,r),n=qt;break;default:var o=e.getComputedTransform(),a=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=N(kj(e.getUpdatedPathProxy(),a),function(m){return Eye(m)}),l=s.length;if(l===0)Rb(Oj,{points:s[0]},t,r);else if(l===t)for(var c=0;c<l;c++)r.push({points:s[c]});else{var u=0,d=N(s,function(m){var y=[],w=[];yc(m,y,w);var C=(w[1]-y[1])*(w[0]-y[0]);return u+=C,{poly:m,area:C}});d.sort(function(m,y){return y.area-m.area});for(var h=t,c=0;c<l;c++){var p=d[c];if(h<=0)break;var g=c===l-1?h:Math.ceil(p.area/u*t);g<0||(Rb(Oj,{points:p.poly},g,r),h-=g)}}n=It;break}if(!n)return xye(e,t);for(var f=[],c=0;c<r.length;c++){var v=new n;v.setShape(r[c]),Dye(e,v),f.push(v)}return f}function Mye(e,t){var r=e.length,i=t.length;if(r===i)return[e,t];for(var n=[],o=[],a=r<i?e:t,s=Math.min(r,i),l=Math.abs(i-r)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,d=[a[0],a[1]],h=l,p=2;p<s;){var g=a[p-2],f=a[p-1],v=a[p++],m=a[p++],y=a[p++],w=a[p++],C=a[p++],S=a[p++];if(h<=0){d.push(v,m,y,w,C,S);continue}for(var b=Math.min(h,u-1)+1,x=1;x<=b;x++){var E=x/b;vn(g,v,y,C,E,n),vn(f,m,w,S,E,o),g=n[3],f=o[3],d.push(n[1],o[1],n[2],o[2],g,f),v=n[5],m=o[5],y=n[6],w=o[6]}h-=b-1}return a===e?[d,t]:[e,d]}function Vj(e,t){for(var r=e.length,i=e[r-2],n=e[r-1],o=[],a=0;a<t.length;)o[a++]=i,o[a++]=n;return o}function Tye(e,t){for(var r,i,n,o=[],a=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],c=t[s],u=void 0,d=void 0;l?c?(r=Mye(l,c),u=r[0],d=r[1],i=u,n=d):(d=Vj(n||l,l),u=l):(u=Vj(i||c,c),d=c),o.push(u),a.push(d)}return[o,a]}function Bj(e){for(var t=0,r=0,i=0,n=e.length,o=0,a=n-2;o<n;a=o,o+=2){var s=e[a],l=e[a+1],c=e[o],u=e[o+1],d=s*u-c*l;t+=d,r+=(s+c)*d,i+=(l+u)*d}return t===0?[e[0]||0,e[1]||0]:[r/t/3,i/t/3,t]}function _ye(e,t,r,i){for(var n=(e.length-2)/6,o=1/0,a=0,s=e.length,l=s-2,c=0;c<n;c++){for(var u=c*6,d=0,h=0;h<s;h+=2){var p=h===0?u:(u+h-2)%l+2,g=e[p]-r[0],f=e[p+1]-r[1],v=t[h]-i[0],m=t[h+1]-i[1],y=v-g,w=m-f;d+=y*y+w*w}d<o&&(o=d,a=c)}return a}function Rye(e){for(var t=[],r=e.length,i=0;i<r;i+=2)t[i]=e[r-i-2],t[i+1]=e[r-i-1];return t}function Aye(e,t,r,i){for(var n=[],o,a=0;a<e.length;a++){var s=e[a],l=t[a],c=Bj(s),u=Bj(l);o==null&&(o=c[2]<0!=u[2]<0);var d=[],h=[],p=0,g=1/0,f=[],v=s.length;o&&(s=Rye(s));for(var m=_ye(s,l,c,u)*6,y=v-2,w=0;w<y;w+=2){var C=(m+w)%y+2;d[w+2]=s[C]-c[0],d[w+3]=s[C+1]-c[1]}if(d[0]=s[m]-c[0],d[1]=s[m+1]-c[1],r>0)for(var S=i/r,b=-i/2;b<=i/2;b+=S){for(var x=Math.sin(b),E=Math.cos(b),M=0,w=0;w<s.length;w+=2){var T=d[w],_=d[w+1],R=l[w]-u[0],A=l[w+1]-u[1],P=R*E-A*x,k=R*x+A*E;f[w]=P,f[w+1]=k;var L=P-T,V=k-_;M+=L*L+V*V}if(M<g){g=M,p=b;for(var z=0;z<f.length;z++)h[z]=f[z]}}else for(var B=0;B<v;B+=2)h[B]=l[B]-u[0],h[B+1]=l[B+1]-u[1];n.push({from:d,to:h,fromCp:c,toCp:u,rotation:-p})}return n}function qf(e){return e.__isCombineMorphing}var Hj="__mOriginal_";function Ab(e,t,r){var i=Hj+t,n=e[i]||e[t];e[i]||(e[i]=e[t]);var o=r.replace,a=r.after,s=r.before;e[t]=function(){var l=arguments,c;return s&&s.apply(this,l),o?c=o.apply(this,l):c=n.apply(this,l),a&&a.apply(this,l),c}}function Yf(e,t){var r=Hj+t;e[r]&&(e[t]=e[r],e[r]=null)}function Gj(e,t){for(var r=0;r<e.length;r++)for(var i=e[r],n=0;n<i.length;){var o=i[n],a=i[n+1];i[n++]=t[0]*o+t[2]*a+t[4],i[n++]=t[1]*o+t[3]*a+t[5]}}function Uj(e,t){var r=e.getUpdatedPathProxy(),i=t.getUpdatedPathProxy(),n=Tye(_b(r),_b(i)),o=n[0],a=n[1],s=e.getComputedTransform(),l=t.getComputedTransform();function c(){this.transform=null}s&&Gj(o,s),l&&Gj(a,l),Ab(t,"updateTransform",{replace:c}),t.transform=null;var u=Aye(o,a,10,Math.PI),d=[];Ab(t,"buildPath",{replace:function(h){for(var p=t.__morphT,g=1-p,f=[],v=0;v<u.length;v++){var m=u[v],y=m.from,w=m.to,C=m.rotation*p,S=m.fromCp,b=m.toCp,x=Math.sin(C),E=Math.cos(C);ld(f,S,b,p);for(var M=0;M<y.length;M+=2){var T=y[M],_=y[M+1],R=w[M],A=w[M+1],P=T*g+R*p,k=_*g+A*p;d[M]=P*E-k*x+f[0],d[M+1]=P*x+k*E+f[1]}var L=d[0],V=d[1];h.moveTo(L,V);for(var M=2;M<y.length;){var R=d[M++],A=d[M++],z=d[M++],B=d[M++],K=d[M++],X=d[M++];L===R&&V===A&&z===K&&B===X?h.lineTo(K,X):h.bezierCurveTo(R,A,z,B,K,X),L=K,V=X}}}})}function Pb(e,t,r){if(!e||!t)return t;var i=r.done,n=r.during;Uj(e,t),t.__morphT=0;function o(){Yf(t,"buildPath"),Yf(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},Q({during:function(a){t.dirtyShape(),n&&n(a)},done:function(){o(),i&&i()}},r)),t}function Iye(e,t,r,i,n,o){var a=16;e=n===r?0:Math.round(32767*(e-r)/(n-r)),t=o===i?0:Math.round(32767*(t-i)/(o-i));for(var s=0,l,c=(1<<a)/2;c>0;c/=2){var u=0,d=0;(e&c)>0&&(u=1),(t&c)>0&&(d=1),s+=c*c*(3*u^d),d===0&&(u===1&&(e=c-1-e,t=c-1-t),l=e,e=t,t=l)}return s}function Ib(e){var t=1/0,r=1/0,i=-1/0,n=-1/0,o=N(e,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),d=l.y+l.height/2+(c?c[5]:0);return t=Math.min(u,t),r=Math.min(d,r),i=Math.max(u,i),n=Math.max(d,n),[u,d]}),a=N(o,function(s,l){return{cp:s,z:Iye(s[0],s[1],t,r,i,n),path:e[l]}});return a.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function Wj(e){return zj(e.path,e.count)}function ZI(){return{fromIndividuals:[],toIndividuals:[],count:0}}function jj(e,t,r){var i=[];function n(S){for(var b=0;b<S.length;b++){var x=S[b];qf(x)?n(x.childrenRef()):x instanceof ce&&i.push(x)}}n(e);var o=i.length;if(!o)return ZI();var a=r.dividePath||Wj,s=a({path:t,count:o});if(s.length!==o)return console.error("Invalid morphing: unmatched splitted path"),ZI();i=Ib(i),s=Ib(s);for(var l=r.done,c=r.during,u=r.individualDelay,d=new xi,h=0;h<o;h++){var p=i[h],g=s[h];g.parent=t,g.copyTransform(d),u||Uj(p,g)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function f(S){for(var b=0;b<s.length;b++)s[b].addSelfToZr(S)}Ab(t,"addSelfToZr",{after:function(S){f(S)}}),Ab(t,"removeSelfFromZr",{after:function(S){for(var b=0;b<s.length;b++)s[b].removeSelfFromZr(S)}});function v(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,Yf(t,"addSelfToZr"),Yf(t,"removeSelfFromZr")}var m=s.length;if(u)for(var y=m,w=function(){y--,y===0&&(v(),l&&l())},h=0;h<m;h++){var C=u?Q({delay:(r.delay||0)+u(h,m,i[h],s[h]),done:w},r):r;Pb(i[h],s[h],C)}else t.__morphT=0,t.animateTo({__morphT:1},Q({during:function(S){for(var b=0;b<m;b++){var x=s[b];x.__morphT=t.__morphT,x.dirtyShape()}c&&c(S)},done:function(){v();for(var S=0;S<e.length;S++)Yf(e[S],"updateTransform");l&&l()}},r));return t.__zr&&f(t.__zr),{fromIndividuals:i,toIndividuals:s,count:m}}function $j(e,t,r){var i=t.length,n=[],o=r.dividePath||Wj;function a(p){for(var g=0;g<p.length;g++){var f=p[g];qf(f)?a(f.childrenRef()):f instanceof ce&&n.push(f)}}if(qf(e)){a(e.childrenRef());var s=n.length;if(s<i)for(var l=0,c=s;c<i;c++)n.push(Ad(n[l++%s]));n.length=i}else{n=o({path:e,count:i});for(var u=e.getComputedTransform(),c=0;c<n.length;c++)n[c].setLocalTransform(u);if(n.length!==i)return console.error("Invalid morphing: unmatched splitted path"),ZI()}n=Ib(n),t=Ib(t);for(var d=r.individualDelay,c=0;c<i;c++){var h=d?Q({delay:(r.delay||0)+d(c,i,n[c],t[c])},r):r;Pb(n[c],t[c],h)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function Yj(e){return O(e[0])}function qj(e,t){for(var r=[],i=e.length,n=0;n<i;n++)r.push({one:e[n],many:[]});for(var n=0;n<t.length;n++){var o=t[n].length,a=void 0;for(a=0;a<o;a++)r[a%i].many.push(t[n][a])}for(var s=0,n=i-1;n>=0;n--)if(!r[n].many.length){var l=r[s].many;if(l.length<=1)if(s)s=0;else return r;var o=l.length,c=Math.ceil(o/2);r[n].many=l.slice(c,o),r[s].many=l.slice(0,c),s++}return r}var Pye={clone:function(e){for(var t=[],r=1-Math.pow(1-e.path.style.opacity,1/e.count),i=0;i<e.count;i++){var n=Ad(e.path);n.setStyle("opacity",r),t.push(n)}return t},split:null};function kb(e,t,r,i,n,o){if(!e.length||!t.length)return;var a=Ko("update",i,n);if(!(a&&a.duration>0))return;var s=i.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},a),c,u;Yj(e)&&(c=e,u=t),Yj(t)&&(c=t,u=e);function d(m,y,w,C,S){var b=m.many,x=m.one;if(b.length===1&&!S){var E=y?b[0]:x,M=y?x:b[0];if(qf(E))d({many:[E],one:M},!0,w,C,!0);else{var T=s?Q({delay:s(w,C)},l):l;Pb(E,M,T),o(E,M,E,M,T)}}else for(var _=Q({dividePath:Pye[r],individualDelay:s&&function(V,z,B,K){return s(V+w,C)}},l),R=y?jj(b,x,_):$j(x,b,_),A=R.fromIndividuals,P=R.toIndividuals,k=A.length,L=0;L<k;L++){var T=s?Q({delay:s(L,k)},l):l;o(A[L],P[L],y?b[L]:m.one,y?m.one:b[L],T)}}for(var h=c?c===e:e.length>t.length,p=c?qj(u,c):qj(h?t:e,[h?e:t]),g=0,f=0;f<p.length;f++)g+=p[f].many.length;for(var v=0,f=0;f<p.length;f++)d(p[f],h,v,g),v+=p[f].many.length}function wl(e){if(!e)return[];if(O(e)){for(var t=[],r=0;r<e.length;r++)t.push(wl(e[r]));return t}var i=[];return e.traverse(function(n){n instanceof ce&&!n.disableMorphing&&!n.invisible&&!n.ignore&&i.push(n)}),i}var r$=1e4,kye=0,Kj=1,Zj=2,Lye=he();function Fye(e,t){for(var r=e.dimensions,i=0;i<r.length;i++){var n=e.getDimensionInfo(r[i]);if(n&&n.otherDims[t]===0)return r[i]}}function Oye(e,t,r){var i=e.getDimensionInfo(r),n=i&&i.ordinalMeta;if(i){var o=e.get(i.name,t);return n&&n.categories[o]||o+""}}function Xj(e,t,r,i){var n=i?"itemChildGroupId":"itemGroupId",o=Fye(e,n);if(o){var a=Oye(e,t,o);return a}var s=e.getRawDataItem(t),l=i?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!i)return r||e.getId(t)}function Qj(e){var t=[];return D(e,function(r){var i=r.data,n=r.dataGroupId;if(!(i.count()>r$))for(var o=i.getIndices(),a=0;a<o.length;a++)t.push({data:i,groupId:Xj(i,a,n,!1),childGroupId:Xj(i,a,n,!0),divide:r.divide,dataIndex:a})}),t}function XI(e,t,r){e.traverse(function(i){i instanceof ce&&je(i,{style:{opacity:0}},t,{dataIndex:r,isFrom:!0})})}function QI(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function Nh(e){e.stopAnimation(),e.isGroup&&e.traverse(function(t){t.stopAnimation()})}function Nye(e,t,r){var i=Ko("update",r,t);i&&e.traverse(function(n){if(n instanceof Yt){var o=Vz(n);o&&n.animateFrom({style:o},i)}})}function zye(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++){var n=e[i],o=t[i];if(n.data.getId(n.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}function i$(e,t,r){var i=Qj(e),n=Qj(t);function o(w,C,S,b,x){(S||w)&&C.animateFrom({style:S&&S!==w?F(F({},S.style),w.style):w.style},x)}var a=!1,s=kye,l=Y(),c=Y();i.forEach(function(w){w.groupId&&l.set(w.groupId,!0),w.childGroupId&&c.set(w.childGroupId,!0)});for(var u=0;u<n.length;u++){var d=n[u].groupId;if(c.get(d)){s=Kj;break}var h=n[u].childGroupId;if(h&&l.get(h)){s=Zj;break}}function p(w,C){return function(S){var b=S.data,x=S.dataIndex;return C?b.getId(x):w?s===Kj?S.childGroupId:S.groupId:s===Zj?S.childGroupId:S.groupId}}var g=zye(i,n),f={};if(!g)for(var u=0;u<n.length;u++){var v=n[u],m=v.data.getItemGraphicEl(v.dataIndex);m&&(f[m.id]=!0)}function y(w,C){var S=i[C],b=n[w],x=b.data.hostModel,E=S.data.getItemGraphicEl(S.dataIndex),M=b.data.getItemGraphicEl(b.dataIndex);if(E===M){M&&Nye(M,b.dataIndex,x);return}E&&f[E.id]||M&&(Nh(M),E?(Nh(E),QI(E),a=!0,kb(wl(E),wl(M),b.divide,x,w,o)):XI(M,x,w))}new Pr(i,n,p(!0,g),p(!1,g),null,"multiple").update(y).updateManyToOne(function(w,C){var S=n[w],b=S.data,x=b.hostModel,E=b.getItemGraphicEl(S.dataIndex),M=Pe(N(C,function(T){return i[T].data.getItemGraphicEl(i[T].dataIndex)}),function(T){return T&&T!==E&&!f[T.id]});E&&(Nh(E),M.length?(D(M,function(T){Nh(T),QI(T)}),a=!0,kb(wl(M),wl(E),S.divide,x,w,o)):XI(E,x,S.dataIndex))}).updateOneToMany(function(w,C){var S=i[C],b=S.data.getItemGraphicEl(S.dataIndex);if(!(b&&f[b.id])){var x=Pe(N(w,function(M){return n[M].data.getItemGraphicEl(n[M].dataIndex)}),function(M){return M&&M!==b}),E=n[w[0]].data.hostModel;x.length&&(D(x,function(M){return Nh(M)}),b?(Nh(b),QI(b),a=!0,kb(wl(b),wl(x),S.divide,E,w[0],o)):D(x,function(M){return XI(M,E,w[0])}))}}).updateManyToMany(function(w,C){new Pr(C,w,function(S){return i[S].data.getId(i[S].dataIndex)},function(S){return n[S].data.getId(n[S].dataIndex)}).update(function(S,b){y(w[S],C[b])}).execute()}).execute(),a&&D(t,function(w){var C=w.data,S=C.hostModel,b=S&&r.getViewOfSeriesModel(S),x=Ko("update",S,0);b&&S.isAnimationEnabled()&&x&&x.duration>0&&b.group.traverse(function(E){E instanceof ce&&!E.animators.length&&E.animateFrom({style:{opacity:0}},x)})})}function Jj(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function e$(e){return O(e)?e.sort().join(","):e}function Cl(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function Vye(e,t){var r=Y(),i=Y(),n=Y();D(e.oldSeries,function(a,s){var l=e.oldDataGroupIds[s],c=e.oldData[s],u=Jj(a),d=e$(u);i.set(d,{dataGroupId:l,data:c}),O(u)&&D(u,function(h){n.set(h,{key:d,dataGroupId:l,data:c})})});function o(a){r.get(a)&&KO("Duplicated seriesKey in universalTransition "+a)}return D(t.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var s=a.get("dataGroupId"),l=a.getData(),c=Jj(a),u=e$(c),d=i.get(u);if(d)r.set(u,{oldSeries:[{dataGroupId:d.dataGroupId,divide:Cl(d.data),data:d.data}],newSeries:[{dataGroupId:s,divide:Cl(l),data:l}]});else if(O(c)){var h=[];D(c,function(f){var v=i.get(f);v.data&&h.push({dataGroupId:v.dataGroupId,divide:Cl(v.data),data:v.data})}),h.length&&r.set(u,{oldSeries:h,newSeries:[{dataGroupId:s,data:l,divide:Cl(l)}]})}else{var p=n.get(c);if(p){var g=r.get(p.key);g||(g={oldSeries:[{dataGroupId:p.dataGroupId,data:p.data,divide:Cl(p.data)}],newSeries:[]},r.set(p.key,g)),g.newSeries.push({dataGroupId:s,data:l,divide:Cl(l)})}}}}),r}function t$(e,t){for(var r=0;r<e.length;r++){var i=t.seriesIndex!=null&&t.seriesIndex===e[r].seriesIndex||t.seriesId!=null&&t.seriesId===e[r].id;if(i)return r}}function Bye(e,t,r,i){var n=[],o=[];D(Ge(e.from),function(a){var s=t$(t.oldSeries,a);s>=0&&n.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:Cl(t.oldData[s]),groupIdDim:a.dimension})}),D(Ge(e.to),function(a){var s=t$(r.updatedSeries,a);if(s>=0){var l=r.updatedSeries[s].getData();o.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:Cl(l),groupIdDim:a.dimension})}}),n.length>0&&o.length>0&&i$(n,o,i)}function JI(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,r,i){D(Ge(i.seriesTransition),function(n){D(Ge(n.to),function(o){for(var a=i.updatedSeries,s=0;s<a.length;s++)(o.seriesIndex!=null&&o.seriesIndex===a[s].seriesIndex||o.seriesId!=null&&o.seriesId===a[s].id)&&(a[s][kg]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(t,r,i){var n=Lye(r);if(n.oldSeries&&i.updatedSeries&&i.optionChanged){var o=i.seriesTransition;if(o)D(Ge(o),function(p){Bye(p,n,i,r)});else{var a=Vye(n,i);D(a.keys(),function(p){var g=a.get(p);i$(g.oldSeries,g.newSeries,r)})}D(i.updatedSeries,function(p){p[kg]&&(p[kg]=!1)})}for(var s=t.getSeries(),l=n.oldSeries=[],c=n.oldDataGroupIds=[],u=n.oldData=[],d=0;d<s.length;d++){var h=s[d].getData();h.count()<r$&&(l.push(s[d]),c.push(s[d].get("dataGroupId")),u.push(h))}})}Te([IT]);Te([AT]);Te([zT,GT,qT,o_,l_,E_,F_,j_,hR,pR,fR,kR,NR,BR,$R,YR,qR,KR,JR,rA,aA,TA]);Te(LA);Te(VA);Te(ff);Te(HA);Te(Tf);Te(WA);Te($A);Te(rI);Te(aI);Te(So);Te(hI);Te(pI);Te(mI);Te(xI);Te(EI);Te(MI);Te(LI);Te(VI);Te(Bf);Te(Uf);Te(HI);Te(jf);Te($f);Te(jI);Te(YI);Te(qI);Te(JI);Te(cT);var qh=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,r){let i=t?this.allAsyncListeners:this.allSyncListeners,n=i.get(e);return!n&&r&&(n=new Set,i.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,r=!1){this.getListeners(e,r,!0).add(t)}removeEventListener(e,t,r=!1){let i=this.getListeners(e,r,!1);i&&(i.delete(t),i.size===0&&(r?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let r=e.type;if(t&&"event"in e){let s=e.event;s instanceof Event&&(e.eventPath=s.composedPath())}let i=(s,l)=>s.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),n=this.getListeners(r,t,!1)??new Set,o=new Set(n);o.size>0&&i(o,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(s=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>s(r,e)):()=>s(r,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},F$=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(F$||{}),n$={};function z2(e,t){n$[t]||(e(),n$[t]=!0)}function Bn(e,...t){console.log("AG Grid: "+e,...t)}function q(e,...t){z2(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function ht(e,...t){z2(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function V2(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Hye(e){Uye(e,400)}var e2=[],t2=!1;function o$(e){e2.push(e),!t2&&(t2=!0,window.setTimeout(()=>{let t=e2.slice();e2.length=0,t2=!1,t.forEach(r=>r())},0))}function Uye(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(r=>r()),t)}function gi(e,t){let r;return function(...i){let n=this;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(n,i)},t)}}function a$(e,t){let r=0;return function(...i){let n=this,o=new Date().getTime();o-r<t||(r=o,e.apply(n,i))}}function Wye(e,t,r=100,i){let n=new Date().getTime(),o=null,a=!1,s=()=>{let l=new Date().getTime()-n>r;(e()||l)&&(t(),a=!0,o!=null&&(window.clearInterval(o),o=null),l&&i&&q(i))};s(),a||(o=window.setInterval(s,10))}function jye(...e){return t=>e.reduce((r,i)=>i(r),t)}function ts(e){return e==null||e===""?null:e}function te(e,t=!1){return e!=null&&(e!==""||t)}function tt(e){return!te(e)}function on(e){return e==null||e.length===0}function m2(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function mu(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function y2(e){if(e!==void 0)return e===null||e===""?!1:w2(e)}function w2(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function av(e,t){let r=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return r===i}function $ye(e,t,r=!1){let i=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function o(a,s){return a>s?1:a<s?-1:0}if(typeof e!="string"||!r)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}function Hb(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(r=>t.push(r)),t}return Object.values(e)}function O$(e,t){return e.get("rowModelType")===t}function Ut(e){return O$(e,"clientSide")}function os(e){return O$(e,"serverSide")}function Lr(e,t){return e.get("domLayout")===t}function $b(e){return Kb(e)!==void 0}function Yb(e){return!e.get("suppressAsyncEvents")}function N$(e){return typeof e.get("getRowHeight")=="function"}function Yye(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Ml(e,t,r=!1,i){if(i==null&&(i=e.environment.getDefaultRowHeight()),N$(e)){if(r)return{height:i,estimated:!0};let a={node:t,data:t.data},s=e.getCallback("getRowHeight")(a);if(C2(s))return s===0&&q("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,s),estimated:!1}}if(t.detail&&e.get("masterDetail"))return qye(e);let n=e.get("rowHeight");return{height:n&&C2(n)?n:i,estimated:!1}}function qye(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return C2(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function yu(e){let{environment:t}=e,r=e.get("rowHeight");if(!r||tt(r))return t.getDefaultRowHeight();let i=t.refreshRowHeightVariable();return i!==-1?i:(q("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function C2(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function sv(e,t,r){let i=t[e.getDomDataKey()];return i?i[r]:void 0}function Su(e,t,r,i){let n=e.getDomDataKey(),o=t[n];tt(o)&&(o={},t[n]=o),o[r]=i}function tr(e){let t=null,r=e.get("getDocument");return r&&te(r)?t=r():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&te(t)?t:document}function z$(e){return tr(e).defaultView||window}function lv(e){return e.eGridDiv.getRootNode()}function Ft(e){return lv(e).activeElement}function V$(e){let t=tr(e),r=Ft(e);return r===null||r===t.body}function Gh(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function aS(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Lr(e,"print"))}function ha(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function b2(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function B$(e){let t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function G$(e){let t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;let r=e.get("groupIncludeFooter");if(typeof r=="function"){let i=e.getCallback("groupIncludeFooter");return n=>i(n)?"bottom":void 0}return()=>r?"bottom":void 0}function H$(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function sS(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Kh(e){let t=e.getCallback("getRowId");return t===void 0?t:r=>{let i=t(r);return typeof i!="string"&&(q("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}function Wh(e){return e?.checkboxes??!0}function qb(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function Kye(e){return e?.hideDisabledCheckboxes??!1}function Zye(e){return typeof e.get("rowSelection")!="string"}function Xye(e){return e.get("cellSelection")!==void 0}function Qye(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t?.suppressMultiRanges??!1:!1:e.get("suppressMultiRangeSelection")}function ga(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function Jye(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="range":!1:e.get("enableRangeHandle")}function s$(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="fill":!1:e.get("enableFillHandle")}function U$(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let r=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return r&&i?!1:r?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function e0e(e){let t=U$(e);return t===!0||t==="enableSelection"}function l$(e){let t=U$(e);return t===!0||t==="enableDeselection"}function B2(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function Kb(e){let t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function G2(e){return Kb(e)==="multiRow"}function t0e(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function H2(e){let t=e.get("rowSelection");if(typeof t=="string"){let r=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return r&&i?"filteredDescendants":r?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function xu(e){let t=H2(e);return t==="descendants"||t==="filteredDescendants"}function r2(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function rt(e){if(!(!e||!e.length))return e[e.length-1]}function Rl(e,t,r){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,n)=>r?r(i,t[n]):t[n]===i)}function r0e(e){return e.sort((t,r)=>t-r)}function W$(e,t){let r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.pop())}function fi(e,t){let r=e.indexOf(t);r>=0&&e.splice(r,1)}function i0e(e,t){for(let r=0;r<t.length;r++)W$(e,t[r])}function n0e(e,t){for(let r=0;r<t.length;r++)fi(e,t[r])}function Zb(e,t,r){e.splice(r,0,t)}function j$(e,t,r){n0e(e,t),t.slice().reverse().forEach(i=>Zb(e,i,r))}function wu(e,t){return e.indexOf(t)>-1}function o0e(e){return e?.flatMap(t=>t)??[]}function c$(e,t){t==null||e==null||t.forEach(r=>e.push(r))}var $$="__ag_Grid_Stop_Propagation",a0e=["touchstart","touchend","touchmove","touchcancel","scroll"],i2={};function jh(e){e[$$]=!0}function rs(e){return e[$$]===!0}var Y$=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r=>{if(typeof i2[r]=="boolean")return i2[r];let i=document.createElement(e[r]||"div");return r="on"+r,i2[r]=r in i}})();function S2(e,t,r){let i=t;for(;i;){let n=sv(e,i,r);if(n)return n;i=i.parentElement}return null}function s0e(e,t){return!t||!e?!1:c0e(t).indexOf(e)>=0}function l0e(e){let t=[],r=e.target;for(;r;)t.push(r),r=r.parentElement;return t}function c0e(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():l0e(t)}function u0e(e,t,r,i){let o=wu(a0e,r)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,r,i,o)}var U=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,r){this.localEventService||(this.localEventService=new qh),this.localEventService.addEventListener(e,t,r)}removeEventListener(e,t,r){this.localEventService&&this.localEventService.removeEventListener(e,t,r)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let r=[];for(let i in t){let n=t[i];n&&r.push(this._setupListener(e,i,n))}return r}_setupListener(e,t,r){if(this.destroyed)return()=>null;e instanceof HTMLElement?u0e(this.getFrameworkOverrides(),e,t,r):e.addEventListener(t,r);let i=()=>(e.removeEventListener(t,r),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let r=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==r),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let r=e.join("-")+this.propertyListenerId++,i=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[r])return;this.lastChangeSetIdLookup[r]=n.changeSet.id}let o={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};t(o)};e.forEach(n=>this.setupGridOptionListener(n,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let r=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),r}createBean(e,t,r){return(t||this.stubContext).createBean(e,r)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function hi(e){return e instanceof Ub}var Ub=class extends U{constructor(e,t,r,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=Z$(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=r,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{_l(t)?e.push(t):hi(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,r=!1,i=this.findChildrenRemovingPadding();for(let o=0,a=i.length;o<a;o++){let s=i[o];if(!s.isVisible())continue;let l=s.getColumnGroupShow();l==="open"?(e=!0,r=!0):l==="closed"?(t=!0,r=!0):(e=!0,t=!0)}let n=e&&t&&r;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=r=>{r.forEach(i=>{hi(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},q$="ag-Grid-ControlsColumn",d0e=class extends U{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){let{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];let r=Wh(t),i=qb(t);if(r||i){let n=e.get("selectionColumnDef"),o=e.get("enableRtl"),a=Xe(ue({maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:o?"right":"left",comparator(l,c,u,d){let h=u.isSelected(),p=d.isSelected();return h&&p?0:h?1:-1},editable:!1,suppressFillHandle:!0},n),{colId:`${q$}`}),s=new $2(a,null,a.colId,!1);return this.createBean(s),[s]}return[]}},lS="ag-Grid-AutoColumn";function U2(e){let t=[],r=i=>{for(let n=0;n<i.length;n++){let o=i[n];_l(o)?t.push(o):hi(o)&&r(o.getChildren())}};return r(e),t}function Ja(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}function Dl(e,t,r){let i={};if(!t)return;ns(null,t,o=>{i[o.getInstanceId()]=o}),r&&ns(null,r,o=>{i[o.getInstanceId()]=null});let n=Object.values(i).filter(o=>o!=null);e.destroyBeans(n)}function x2(e){return e.getId().startsWith(lS)}function gv(e){return e.getColId().startsWith(q$)}function Wb(e){let t=[];return e instanceof Array?e.some(i=>typeof i!="string")?q("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):q("colDef.type should be of type 'string' | 'string[]'"),t}var W2=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=r=>{this.frameworkOverrides.wrapOutgoing(()=>e(r))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(r,i)=>{this.frameworkOverrides.wrapOutgoing(()=>e(r,i))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},j2=new Set(["__proto__","constructor","prototype"]);function Vn(e,t){if(e!=null){if(Array.isArray(e)){for(let r=0;r<e.length;r++)t(r.toString(),e[r]);return}for(let[r,i]of Object.entries(e))t(r,i)}}function K$(e){let t={},r=Object.keys(e);for(let i=0;i<r.length;i++){if(j2.has(r[i]))continue;let n=r[i],o=e[n];t[n]=o}return t}function D2(e,t){if(!e)return;let r=e,i={};return Object.keys(r).forEach(n=>{if(t&&t.indexOf(n)>=0||j2.has(n))return;let o=r[n];E2(o)&&o.constructor===Object?i[n]=D2(o):i[n]=o}),i}function Tl(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let r=[];for(let i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&r.push(e[i]);return r}function pi(e,t,r=!0,i=!1){te(t)&&Vn(t,(n,o)=>{if(j2.has(n))return;let a=e[n];a!==o&&(i&&a==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(a={},e[n]=a),E2(o)&&E2(a)&&!Array.isArray(a)?pi(a,o,r,i):(r||o!==void 0)&&(e[n]=o))})}function tv(e,t,r){if(!t||!e)return;if(!r)return e[t];let i=t.split("."),n=e;for(let o=0;o<i.length;o++){if(n==null)return;n=n[i[o]]}return n}function E2(e){return typeof e=="object"&&e!==null}var h0e={resizable:!0,sortable:!0},p0e=0;function Z$(){return p0e++}function _l(e){return e instanceof $2}var $2=class extends U{constructor(e,t,r,i){super(),this.isColumn=!0,this.instanceId=Z$(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new qh,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=r,this.primary=i,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,r=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):r!==null&&(this.sortIndex=r);let i=e.hide,n=e.initialHide;i!==void 0?this.visible=!i:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let o=e.flex,a=e.initialFlex;o!==void 0?this.flex=o:a!==void 0&&(this.flex=a)}setColDef(e,t,r){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",r))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=te(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=te(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=te(this.colDef.tooltipField)||te(this.colDef.tooltipValueGetter)||te(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,r=mu(e.width),i=mu(e.initialWidth);return r!=null?t=r:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(tt(this.colDef)||tt(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,r=this.colDef.showRowGroup===e;return t||r}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new W2(this.frameworkOverrides));let r=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,r)}removeEventListener(e,t){let r=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,r)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),r=this.colDef.suppressNavigable;return r(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){let t=this.gos.get("rowSelection");if(t&&typeof t!="string"){let r=gv(this)&&Wh(t);return this.isColumnFunc(e,r)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??h0e[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let r=this.createColumnFunctionCallbackParams(e);return t(r)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return tt(this.sort)}isSorting(){return te(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,r){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let i=this.createColumnEvent("filterChanged",t);r&&pi(i,r),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let r=e===!0;this.visible!==r&&(this.visible=r,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,r=!0;for(;e;){if(!e.isPadding()){r=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:r}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(tt(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),r=this.colDef.colSpan(t);return Math.max(r,1)}getRowSpan(e){if(tt(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),r=this.colDef.rowSpan(t);return Math.max(r,1)}setActualWidth(e,t,r=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),r||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},g0e={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},f0e=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=m2(e);let r=0;for(;;){let i;if(e?(i=e,r!==0&&(i+="_"+r)):t?(i=t,r!==0&&(i+="_"+r)):i=r,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);r++}}},v0e=class extends U{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,r,i){let n=new f0e,{existingCols:o,existingGroups:a,existingColKeys:s}=this.extractExistingTreeData(r);n.addExistingKeys(s);let l=this.recursivelyCreateColumns(e,0,t,o,n,a,i),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,n);return ns(null,u,(h,p)=>{hi(h)&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){let t=[],r=[],i=[];return e&&ns(null,e,n=>{if(hi(n)){let o=n;r.push(o)}else{let o=n;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:r,existingColKeys:i}}balanceTreeForAutoCols(e,t){let r=[],i=this.findDepth(t);return e.forEach(n=>{let o=n;for(let a=i-1;a>=0;a--){let s=new Ub(null,`FAKE_PATH_${n.getId()}}_${a}`,!0,a);this.createBean(s),s.setChildren([o]),o.setOriginalParent(s),o=s}i===0&&n.setOriginalParent(null),r.push(o)}),[r,i]}findDepth(e){let t=0,r=e;for(;r&&r[0]&&hi(r[0]);)t++,r=r[0].getChildren();return t}balanceColumnTree(e,t,r,i){let n=[];for(let o=0;o<e.length;o++){let a=e[o];if(hi(a)){let s=a,l=this.balanceColumnTree(s.getChildren(),t+1,r,i);s.setChildren(l),n.push(s)}else{let s,l;for(let c=r-1;c>=t;c--){let u=i.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new Ub(d,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,s||(s=l)}if(s&&l)if(n.push(s),e.some(u=>hi(u))){l.setChildren([a]);continue}else{l.setChildren(e);break}n.push(a)}}return n}findMaxDept(e,t){let r=t;for(let i=0;i<e.length;i++){let n=e[i];if(hi(n)){let o=n,a=this.findMaxDept(o.getChildren(),t+1);r<a&&(r=a)}}return r}recursivelyCreateColumns(e,t,r,i,n,o,a){if(!e)return[];let s=new Array(e.length);for(let l=0;l<s.length;l++){let c=e[l];this.isColumnGroup(c)?s[l]=this.createColumnGroup(r,c,t,i,n,o,a):s[l]=this.createColumn(r,c,i,n,a)}return s}createColumnGroup(e,t,r,i,n,o,a){let s=this.createMergedColGroupDef(t),l=n.getUniqueKey(s.groupId||null,null),c=new Ub(s,l,!1,r);this.createBean(c);let u=this.findExistingGroup(t,o);u&&o.splice(u.idx,1);let d=u?.group;d&&c.setExpanded(d.isExpanded());let h=this.recursivelyCreateColumns(s.children,r+1,e,i,n,o,a);return c.setChildren(h),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,r,i,n){let o=this.findExistingColumn(t,r);o&&r?.splice(o.idx,1);let a=o?.column;if(a){let s=this.addColumnDefaultAndTypes(t,a.getColId());a.setColDef(s,t,n),this.applyColumnState(a,s,n)}else{let s=i.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,s);a=new $2(l,t,s,e),this.createBean(a)}return this.dataTypeService?.addColumnListeners(a),a}applyColumnState(e,t,r){let i=mu(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){let s=mu(t.width);if(s!=null)e.setActualWidth(s,r);else{let l=e.getActualWidth();e.setActualWidth(l,r)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,r):e.setSort(void 0,r));let o=mu(t.sortIndex);o!==void 0&&e.setSortIndex(o);let a=y2(t.hide);a!==void 0&&e.setVisible(!a,r),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let r=0;r<t.length;r++){let i=t[r].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[r].getId()===e.colId)return{idx:r,column:t[r]};continue}if(e.field!=null){if(i.field===e.field)return{idx:r,column:t[r]};continue}if(i===e)return{idx:r,column:t[r]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}addColumnDefaultAndTypes(e,t){let r={},i=this.gos.get("defaultColDef");pi(r,i,!1,!0);let n=this.updateColDefAndGetColumnType(r,e,t);n&&this.assignColumnTypes(n,r),pi(r,e,!1,!0);let o=this.gos.get("autoGroupColumnDef"),a=ha(this.gos);return e.rowGroup&&o&&a&&pi(r,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService?.validateColDef(r),r}updateColDefAndGetColumnType(e,t,r){let i=this.dataTypeService?.updateColDefAndGetColumnType(e,t,r),n=t.type??i??e.type;return e.type=n,n?Wb(n):void 0}assignColumnTypes(e,t){if(!e.length)return;let r=Object.assign({},g0e),i=this.gos.get("columnTypes")||{};Vn(i,(n,o)=>{n in r?q(`the column type '${n}' is a default column type and cannot be overridden.`):(o.type&&q("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),r[n]=o)}),e.forEach(n=>{let o=r[n.trim()];o?pi(t,o,!1,!0):q("colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function ns(e,t,r){if(t)for(let i=0;i<t.length;i++){let n=t[i];hi(n)&&ns(n,n.getChildren(),r),r(n,e)}}var m0e=class extends U{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(gu(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,gu(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(gu(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(gu(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),gu(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){let t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();let r=this.colDefCols?.list,i=this.colDefCols?.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,i,e);Dl(this.context,this.colDefCols?.tree,n.columnTree);let o=n.columnTree,a=n.treeDept,s=U2(o),l={};s.forEach(c=>l[c.getId()]=c),this.colDefCols={tree:o,treeDepth:a,list:s,map:l},this.funcColsService.extractCols(e,r),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();let r=Yye(this.gos,this.showingPivotResult);(!e||r)&&this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!Rl(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:r,tree:i,treeDepth:n}=e;this.cols={list:r.slice(),map:ue({},t),tree:i.slice(),treeDepth:n},e.list.some(a=>this.cols?.map[a.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:r,tree:i,treeDepth:n}=this.colDefCols;this.cols={list:r.slice(),map:ue({},t),tree:i.slice(),treeDepth:n}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(i=>{let n=x2(i);if(e){let o=t&&wu(t,i);return n||o}else return n||i.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),u$(this.cols))}createAutoCols(){let e=sS(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),r=this.funcColsService.getRowGroupColumns(),n=!(r.length>0||this.gos.get("treeData"))||t||e,o=()=>{this.autoCols&&(Dl(this.context,this.autoCols.tree),this.autoCols=null)};if(n||!this.autoColService){o();return}let a=this.autoColService.createAutoCols(r)??[],s=h$(a,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(s&&u)return;o();let[d,h]=this.columnFactory.balanceTreeForAutoCols(a,this.cols.tree);this.autoCols={list:a,tree:d,treeDepth:h,map:{}};let p=g=>{if(!g)return null;let f=g.filter(v=>!x2(v));return[...a,...f]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}createControlsCols(){let e=()=>{Dl(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();let t=this.cols.treeDepth,i=(this.controlsCols?.treeDepth??-1)==t,n=this.controlsColService?.createControlsCols()??[];if(h$(n,this.controlsCols?.list??[])&&i)return;e();let[a,s]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.controlsCols={list:n,tree:a,treeDepth:s,map:{}};let l=c=>{if(!c)return null;let u=c.filter(d=>!gv(d));return[...n,...u]};this.lastOrder=l(this.lastOrder),this.lastPivotOrder=l(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),u$(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,r){this.columnApplyStateService.applyColumnState({state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},r)}setColsPinned(e,t,r){if(!this.cols||on(e))return;if(Lr(this.gos,"print")){q("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;t===!0||t==="left"?i="left":t==="right"?i="right":i=null;let n=[];e.forEach(o=>{if(!o)return;let a=this.getCol(o);a&&a.getPinned()!==i&&(a.setPinned(i),n.push(a))}),n.length&&(this.visibleColsService.refresh(r),this.eventDispatcher.columnPinned(n,r)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,r){let i;hi(e)?i=e.getId():i=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:t}],r)}getProvidedColGroup(e){let t=null;return ns(null,this.cols?.tree,r=>{hi(r)&&r.getId()===e&&(t=r)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let i=this.funcColsService.getRowGroupColumns().findIndex(n=>n.getColId()===e.getColId());return t>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,Ut(this.gos)||os(this.gos)||q("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;let i=new Map(this.cols.list.map(l=>[l,!0])),n=e.filter(l=>i.has(l)),o=new Map(n.map(l=>[l,!0])),a=this.cols.list.filter(l=>!o.has(l)),s=n.slice();a.forEach(l=>{let c=l.getOriginalParent();if(!c){s.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(g=>{let f=s.indexOf(g)>=0,v=u.indexOf(g)<0;f&&v&&u.push(g)}),c=c.getOriginalParent();if(!u.length){s.push(l);return}let d=u.map(p=>s.indexOf(p)),h=Math.max(...d);Zb(s,l,h+1)}),this.cols.list=s}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],r={};e.forEach(n=>{if(r[n])return;let o=this.cols.map[n];o&&(t.push(o),r[n]=!0)});let i=0;if(this.cols.list.forEach(n=>{let o=n.getColId();if(r[o]!=null)return;o.startsWith(lS)?Zb(t,n,i++):t.push(n)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){q("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(r=>this.cols.list.indexOf(r)<0).length>0||e.sort((r,i)=>{let n=this.cols.list.indexOf(r),o=this.cols.list.indexOf(i);return n-o})}resetColDefIntoCol(e,t){let r=e.getUserProvidedColDef();if(!r)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(r,e.getColId());return e.setColDef(i,r,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,r){j$(this.cols?.list,e,t),this.visibleColsService.refresh(r)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((i,n)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(n)):this.lastOrder&&e.sort((i,n)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(n));let t=this.funcColsService.getRowGroupColumns(),r=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,r)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(q("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!on(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){Dl(this.context,this.colDefCols?.tree),Dl(this.context,this.autoCols?.tree),Dl(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:r,list:i}=t;if(typeof e=="string"&&r[e])return r[e];for(let n=0;n<i.length;n++)if(d$(i[n],e))return i[n];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find(t=>d$(t,e))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){let e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(let r of t){if(!r)continue;let i=r.getGroupRowCount()||0;for(let n=0;n<i;n++){let o=r.getGroupRowCtrlAtIndex(n),a=e[n];if(o){let s=this.getColumnGroupHeaderRowHeight(o);(a==null||s>a)&&(e[n]=s)}}}return e}getColumnGroupHeaderRowHeight(e){let t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight(),r=0,i=e.getHeaderCtrls();for(let n of i){let o=n.getColumn();if(o.isAutoHeaderHeight()){let a=o.getAutoHeaderHeight();a!=null&&a>r&&(r=a)}}return Math.max(t,r)}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),r=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...r)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:r}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:r,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",r)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,r){let i=t&&typeof t!="string"?Wh(t):void 0,n=e&&typeof e!="string"?Wh(e):void 0,o=i!==n,a=t&&typeof t!="string"?qb(t):void 0,s=e&&typeof e!="string"?qb(e):void 0;(o||a!==s)&&this.refreshAll(r)}};function gu(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function u$(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function d$(e,t){let r=e===t,i=e.getColDef()===t,n=e.getColId()==t;return r||i||n}function h$(e,t){return Rl(e,t,(r,i)=>r.getColId()===i.getColId())}var y0e=class extends U{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:r,skipHeaderGroups:i,stopAtGroup:n,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let a=[],s=-1,l=r??this.gos.get("skipHeaderOnAutoSize"),c=i??l;for(;s!==0;){s=0;let u=[];t.forEach(d=>{if(!d)return;let h=this.columnModel.getCol(d);if(!h||a.indexOf(h)>=0)return;let p=this.autoWidthCalculator.getPreferredWidthForColumn(h,l);if(p>0){let g=this.normaliseColumnWidth(h,p);h.setActualWidth(g,o),a.push(h),s++}u.push(h)}),u.length&&this.visibleColsService.refresh(o)}c||this.autoSizeColumnGroupsByColumns(t,o,n),this.eventDispatcher.columnResized(a,!0,"autosizeColumns")}autoSizeColumn(e,t,r){e&&this.autoSizeCols({colKeys:[e],skipHeader:r,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,r){let i=new Set;this.columnModel.getColsForKeys(e).forEach(s=>{let l=s.getParent();for(;l&&l!=r;)l.isPadding()||i.add(l),l=l.getParent()});let o,a=[];for(let s of i){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(o=l.getHeaderCtrlForColumn(s),o)break;o&&o.resizeLeafColumnsToFit(t)}return a}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let r=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:r,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let r=e.getMinWidth();t<r&&(t=r);let i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}},w0e=class extends U{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>fi(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>fi(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>fi(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let r=this.columnModel.getColDefCol(t);return r?[r]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return on(this.rowGroupCols)}setColumnAggFunc(e,t,r){if(!e)return;let i=this.columnModel.getColDefCol(e);i&&(i.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[i],r))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(r,i)=>this.setRowGroupActive(r,i,t),t)}setRowGroupActive(e,t,r){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,r),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,r),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,r))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,r=>this.setRowGroupActive(!0,r,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,r=>this.setRowGroupActive(!1,r,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,r=>r.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(r,i)=>{i.setPivotActive(r,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,r=>r.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(r,i)=>this.setValueActive(r,i,t),t)}setValueActive(e,t,r){if(e!==t.isValueActive()&&(t.setValueActive(e,r),e&&!t.getAggFunc()&&this.aggFuncService)){let i=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(i)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,r=>this.setValueActive(!0,r,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,r=>this.setValueActive(!1,r,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,r){if(this.isRowGroupEmpty())return;let i=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,i),this.eventDispatcher.rowGroupChanged(n,r)}setColList(e,t,r,i,n,o,a){if(!this.columnModel.getCols())return;let s=new Map;t.forEach((c,u)=>s.set(c,u)),t.length=0,te(e)&&e.forEach(c=>{let u=this.columnModel.getColDefCol(c);u&&t.push(u)}),t.forEach((c,u)=>{let d=s.get(c);if(d===void 0){s.set(c,0);return}i&&d!==u||s.delete(c)}),(this.columnModel.getColDefCols()||[]).forEach(c=>{let u=t.indexOf(c)>=0;o(u,c)}),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(a),this.eventDispatcher.columnChanged(r,[...s.keys()],a)}updateColList(e,t,r,i,n,o,a){if(!e||on(e))return;let s=!1,l=new Set;e.forEach(c=>{if(!c)return;let u=this.columnModel.getColDefCol(c);if(u){if(l.add(u),r){if(t.indexOf(u)>=0)return;t.push(u)}else{let d=t.indexOf(u);if(d<0)return;for(let h=d+1;h<t.length;h++)l.add(t[h]);fi(t,u)}n(u),s=!0}}),s&&(i&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(a),this.eventDispatcher.genericColumnEvent(o,Array.from(l),a))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(r,i)=>r.setValueActive(i,e),()=>{},()=>{},r=>{let i=r.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},r=>r.initialAggFunc!=null&&r.initialAggFunc!=""),this.valueCols.forEach(r=>{let i=r.getColDef();i.aggFunc!=null&&i.aggFunc!=""?r.setAggFunc(i.aggFunc):r.getAggFunc()||r.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(r,i)=>r.setRowGroupActive(i,e),r=>r.rowGroupIndex,r=>r.initialRowGroupIndex,r=>r.rowGroup,r=>r.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(r,i)=>r.setPivotActive(i,e),r=>r.pivotIndex,r=>r.initialPivotIndex,r=>r.pivot,r=>r.initialPivot)}extractColsCommon(e=[],t=[],r,i,n,o,a){let s=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(h=>{let p=e.indexOf(h)<0,g=h.getColDef(),f=y2(o(g)),v=y2(a(g)),m=mu(i(g)),y=mu(n(g)),w;f!==void 0?w=f:m!==void 0?m===null?w=!1:w=m>=0:p?v!==void 0?w=v:y!==void 0?w=y!=null&&y>=0:w=!1:w=t.indexOf(h)>=0,w&&((p?m!=null||y!=null:m!=null)?s.push(h):l.push(h))});let u=h=>{let p=i(h.getColDef()),g=n(h.getColDef());return p??g};s.sort((h,p)=>{let g=u(h),f=u(p);return g===f?0:g<f?-1:1});let d=[].concat(s);return t.forEach(h=>{l.indexOf(h)>=0&&d.push(h)}),l.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),t.forEach(h=>{d.indexOf(h)<0&&r(h,!1)}),d.forEach(h=>{t.indexOf(h)<0&&r(h,!0)}),d}generateColumnStateForRowGroupAndPivotIndexes(e,t){let r={},i=(n,o,a,s,l,c)=>{let u=this.columnModel.getColDefCols();if(!o.length||!u)return[];let d=Object.keys(n),h=new Set(d),p=new Set(d),g=new Set(o.map(b=>{let x=b.getColId();return p.delete(x),x}).concat(d)),f=[],v={},m=0;for(let b=0;b<u.length;b++){let x=u[b].getColId();g.has(x)&&(f.push(x),v[x]=m++)}let y=1e3,w=!1,C=0,S=b=>{let x=v[b];for(let E=C;E<x;E++){let M=f[E];p.has(M)&&(n[M][l]=y++,p.delete(M))}C=x};o.forEach(b=>{let x=b.getColId();if(h.has(x))S(x),n[x][l]=y++;else{let E=b.getColDef();(E[l]===null||E[l]===void 0&&E[c]==null)&&(w||(E[a]||E[a]===void 0&&E[s]?S(x):(p.forEach(_=>{n[_][l]=y+v[_]}),y+=f.length,w=!0)),r[x]||(r[x]={colId:x}),r[x][l]=y++)}})};return i(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(r)}},C0e=class extends U{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let r=this.columnModel.getColDefCols()||[];if(on(r))return!1;if(e&&e.state&&!e.state.forEach)return q("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(s,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(t),d=l.slice(),h={},p={},g=[],f=[],v=0,m=this.funcColsService.getRowGroupColumns().slice(),y=this.funcColsService.getPivotColumns().slice();s.forEach(b=>{let x=b.colId||"";if(x.startsWith(lS)){g.push(b),f.push(b);return}let M=c(x);M?(this.syncColumnWithStateItem(M,b,e.defaultState,h,p,!1,t,i),fi(d,M)):(f.push(b),v+=1)});let w=b=>this.syncColumnWithStateItem(b,null,e.defaultState,h,p,!1,t,i);d.forEach(w),this.funcColsService.sortRowGroupColumns(p$.bind(this,h,m)),this.funcColsService.sortPivotColumns(p$.bind(this,p,y)),this.columnModel.refreshCols(!1);let S=(this.columnModel.getAutoCols()||[]).slice();return g.forEach(b=>{let x=this.columnModel.getAutoCol(b.colId);fi(S,x),this.syncColumnWithStateItem(x,b,e.defaultState,null,null,!0,t,i)}),S.forEach(w),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:f,unmatchedCount:v}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:a}=n(e.state||[],r,s=>this.columnModel.getColDefCol(s));if(o.length>0||te(e.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;a=n(o,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),a===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(on(t))return;let r=this.columnModel.getColDefColTree(),i=U2(r),n=[],o=1e3,a=1e3,s=[],l=this.columnModel.getAutoCols();l&&(s=s.concat(l)),i&&(s=s.concat(i)),s.forEach(c=>{let u=this.getColumnStateFromColDef(c);tt(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=o++),tt(u.pivotIndex)&&u.pivot&&(u.pivotIndex=a++),n.push(u)}),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(g,f)=>g??f??null,r=e.getColDef(),i=t(r.sort,r.initialSort),n=t(r.sortIndex,r.initialSortIndex),o=t(r.hide,r.initialHide),a=t(r.pinned,r.initialPinned),s=t(r.width,r.initialWidth),l=t(r.flex,r.initialFlex),c=t(r.rowGroupIndex,r.initialRowGroupIndex),u=t(r.rowGroup,r.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(r.pivotIndex,r.initialPivotIndex),h=t(r.pivot,r.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);let p=t(r.aggFunc,r.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:n,hide:o,pinned:a,width:s,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(e,t,r,i,n,o,a,s){if(!e)return;let l=(C,S)=>{let b={value1:void 0,value2:void 0},x=!1;return t&&(t[C]!==void 0&&(b.value1=t[C],x=!0),te(S)&&t[S]!==void 0&&(b.value2=t[S],x=!0)),!x&&r&&(r[C]!==void 0&&(b.value1=r[C]),te(S)&&r[S]!==void 0&&(b.value2=r[S])),b},c=l("hide").value1;c!==void 0&&e.setVisible(!c,a);let u=l("pinned").value1;u!==void 0&&e.setPinned(u);let d=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),h=l("flex").value1;if(h!==void 0&&e.setFlex(h),h==null){let C=l("width").value1;C!=null&&d!=null&&C>=d&&e.setActualWidth(C,a)}let p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,a):e.setSort(void 0,a));let g=l("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),o||!e.isPrimary())return;let f=l("aggFunc").value1;f!==void 0&&(typeof f=="string"?(e.setAggFunc(f),e.isValueActive()||(e.setValueActive(!0,a),s.addValueCol(e))):(te(f)&&q("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),s.removeValueCol(e))));let{value1:v,value2:m}=l("rowGroup","rowGroupIndex");(v!==void 0||m!==void 0)&&(typeof m=="number"||v?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),s.addGroupCol(e)),i&&typeof m=="number"&&(i[e.getId()]=m)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),s.removeGroupCol(e)));let{value1:y,value2:w}=l("pivot","pivotIndex");(y!==void 0||w!==void 0)&&(typeof w=="number"||y?(e.isPivotActive()||(e.setPivotActive(!0,a),s.addPivotCol(e)),n&&typeof w=="number"&&(n[e.getId()]=w)):e.isPivotActive()&&(e.setPivotActive(!1,a),s.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(r=>{r.colId!=null&&t.push(r.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},r=this.columnGetStateService.getColumnState(),i={};return r.forEach(n=>{i[n.colId]=n}),()=>{let n=this.columnModel.getAllCols(),o=(f,v,m,y)=>{let w=v.map(y),C=m.map(y);if(Rl(w,C))return;let b=new Set(v);m.forEach(E=>{b.delete(E)||b.add(E)});let x=[...b];this.eventService.dispatchEvent({type:f,columns:x,column:x.length===1?x[0]:null,source:e})},a=f=>{let v=[];return n.forEach(m=>{let y=i[m.getColId()];y&&f(y,m)&&v.push(m)}),v},s=f=>f.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),s),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),s);let c=a((f,v)=>{let m=f.aggFunc!=null,y=m!=v.isValueActive(),w=m&&f.aggFunc!=v.getAggFunc();return y||w});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);let u=(f,v)=>f.width!=v.getActualWidth();this.eventDispatcher.columnResized(a(u),!0,e);let d=(f,v)=>f.pinned!=v.getPinned();this.eventDispatcher.columnPinned(a(d),e);let h=(f,v)=>f.hide==v.isVisible();this.eventDispatcher.columnVisible(a(h),e);let g=a((f,v)=>f.sort!=v.getSort()||f.sortIndex!=v.getSortIndex());g.length>0&&this.sortController.dispatchSortChangedEvents(e,g),this.normaliseColumnMovedEventForColumnState(r,e)}}normaliseColumnMovedEventForColumnState(e,t){let r=this.columnGetStateService.getColumnState(),i={};r.forEach(l=>i[l.colId]=l);let n={};e.forEach(l=>{i[l.colId]&&(n[l.colId]=!0)});let o=e.filter(l=>n[l.colId]),a=r.filter(l=>n[l.colId]),s=[];a.forEach((l,c)=>{let u=o&&o[c];if(u&&u.colId!==l.colId){let d=this.columnModel.getCol(u.colId);d&&s.push(d)}}),s.length&&this.eventDispatcher.columnMoved({movedColumns:s,source:t,finished:!0})}},p$=(e,t,r,i)=>{let n=e[r.getId()],o=e[i.getId()],a=n!=null,s=o!=null;if(a&&s)return n-o;if(a)return-1;if(s)return 1;let l=t.indexOf(r),c=t.indexOf(i),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},b0e=class extends U{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,r){let i=this.columnModel.getCols();if(!i)return;let n=i[e];this.moveColumns([n],t,r)}moveColumns(e,t,r,i=!0){let n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length){q("tried to insert columns in invalid location, toIndex = ",t),q("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();let o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,r),this.eventDispatcher.columnMoved({movedColumns:o,source:r,toIndex:t,finished:i})),this.columnAnimationService.finish()}doesMovePassRules(e,t){let r=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(r)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let i=this.columnModel.getCols().slice();return j$(i,e,t),i}doesMovePassLockedPositions(e){let t=o=>o?o==="left"||o===!0?-1:1:0,r=this.gos.get("enableRtl"),i=r?1:-1,n=!0;return e.forEach(o=>{let a=t(o.getColDef().lockPosition);r?a>i&&(n=!1):a<i&&(n=!1),i=a}),n}doesMovePassMarryChildren(e){let t=!0,r=this.columnModel.getColTree();return ns(null,r,i=>{if(!hi(i))return;let n=i,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;let s=[];n.getLeafColumns().forEach(h=>{let p=e.indexOf(h);s.push(p)});let l=Math.max.apply(Math,s),c=Math.min.apply(Math,s),u=l-c,d=n.getLeafColumns().length-1;u>d&&(t=!1)}),t}placeLockedColumns(e){let t=[],r=[],i=[];return e.forEach(o=>{let a=o.getColDef().lockPosition;a==="right"?i.push(o):a==="left"||a===!0?t.push(o):r.push(o)}),this.gos.get("enableRtl")?[...i,...r,...t]:[...t,...r,...i]}},S0e=/[&<>"']/g,x0e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function D0e(e){let t=String.fromCharCode;function r(d){let h=[];if(!d)return[];let p=d.length,g=0,f,v;for(;g<p;)f=d.charCodeAt(g++),f>=55296&&f<=56319&&g<p?(v=d.charCodeAt(g++),(v&64512)==56320?h.push(((f&1023)<<10)+(v&1023)+65536):(h.push(f),g--)):h.push(f);return h}function i(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function n(d,h){return t(d>>h&63|128)}function o(d){if(!(d&4294967168))return t(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=t(d>>18&7|240),h+=n(d,12),h+=n(d,6)):(i(d),h=t(d>>12&15|224),h+=n(d,6)):h=t(d>>6&31|192),h+=t(d&63|128),h}let a=r(e),s=a.length,l=-1,c,u="";for(;++l<s;)c=a[l],u+=o(c);return u}function pa(e,t){if(e==null)return null;let r=e.toString().toString();return t?r:r.replace(S0e,i=>x0e[i])}function E0e(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,r=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(r,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}function M0e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var T0e=class extends U{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,r=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t);return r?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,r){let i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,r):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,r,i,n){let o=e.headerValueGetter;if(o){let a=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:r,providedColumnGroup:i,location:n});return typeof o=="function"?o(a):typeof o=="string"?this.expressionService.evaluate(o,a):(q("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return E0e(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let r=e.getColDef().pivotValueColumn,i=te(r),n=null,o;if(i){let a=this.funcColsService.getValueColumns(),s=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&a.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(s&&!l)return t;n=r?r.getAggFunc():null,o=!0}else{let a=e.isValueActive(),s=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();a&&s?(n=e.getAggFunc(),o=!0):o=!1}if(o){let a=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${t})`}return t}},_0e=class extends U{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){Dl(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let r=this.columnModel.getColDefCol(t),i=null;return this.pivotResultCols.list.forEach(n=>{let o=n.getColDef().pivotKeys,a=n.getColDef().pivotValueColumn;Rl(o,e)&&a===r&&(i=n)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let r=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);Dl(this.context,this.pivotResultCols?.tree,r.columnTree);let i=r.columnTree,n=r.treeDept,o=U2(i),a={};this.pivotResultCols={tree:i,treeDepth:n,list:o,map:a},this.pivotResultCols.list.forEach(l=>this.pivotResultCols.map[l.getId()]=l);let s=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!s)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),r=this.gos.get("processPivotResultColGroupDef");if(!t&&!r)return;let i=n=>{n.forEach(o=>{if(te(o.children)){let s=o;r&&r(s),i(s.children)}else t&&t(o)})};e&&i(e)}},R0e=class extends U{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,r,i){let n=[];e.forEach(o=>{let a=this.columnModel.getColDefCol(o.key)||this.columnModel.getCol(o.key);if(!a)return;if(n.push({width:o.newWidth,ratios:[1],columns:[a]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.visibleColsService.getColAfter(a);if(!l)return;let c=a.getActualWidth()-o.newWidth,u=l.getActualWidth()+c;n.push({width:u,ratios:[1],columns:[l]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:r,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:r,source:i}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(r){let u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,r,i)}return}let o=[],a=[];t.forEach(u=>{let{width:d,columns:h,ratios:p}=u,g={},f={};h.forEach(y=>a.push(y));let v=!0,m=0;for(;v;){if(m++,m>1e3){ht("infinite loop in resizeColumnSets");break}v=!1;let y=[],w=0,C=d;h.forEach((b,x)=>{if(f[b.getId()])C-=g[b.getId()];else{y.push(b);let M=p[x];w+=M}});let S=1/w;y.forEach((b,x)=>{let E=x===y.length-1,M;E?M=C:(M=Math.round(p[x]*d*S),C-=M);let T=b.getMinWidth(),_=b.getMaxWidth();M<T?(M=T,f[b.getId()]=!0,v=!0):_>0&&M>_&&(M=_,f[b.getId()]=!0,v=!0),g[b.getId()]=M})}h.forEach(y=>{let w=g[y.getId()];y.getActualWidth()!==w&&(y.setActualWidth(w,i),o.push(y))})});let s=o.length>0,l=[];s&&(l=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=a.concat(l);(s||r)&&this.eventDispatcher.columnResized(c,r,i,l)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:r}=e,i=0,n=0,o=!0;t.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?n+=u:o=!1});let a=r>=i,s=!o||r<=n;return a&&s}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let r=this.visibleColsService.getCenterCols(),i=-1;if(e.resizingCols){let h=new Set(e.resizingCols);for(let p=r.length-1;p>=0;p--)if(h.has(r[p])){i=p;break}}let n=0,o=[],a=0,s=0;for(let h=0;h<r.length;h++)r[h].getFlex()&&h>i?(o.push(r[h]),s+=r[h].getFlex(),a+=r[h].getMinWidth()):n+=r[h].getActualWidth();if(!o.length)return[];let l=[];n+a>this.flexViewportWidth&&(o.forEach(h=>h.setActualWidth(h.getMinWidth(),t)),l=o,o=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-n;let h=u/s;for(let p=0;p<o.length;p++){let g=o[p],f=h*g.getFlex(),v=0,m=g.getMinWidth(),y=g.getMaxWidth();if(f<m?v=m:f>y&&(v=y),v){g.setActualWidth(v,t),W$(o,g),s-=g.getFlex(),l.push(g),n+=g.getActualWidth();continue e}c[p]=Math.floor(f)}break}let d=u;return o.forEach((h,p)=>{let g=p<o.length-1?Math.min(c[p],d):Math.max(c[p],d);h.setActualWidth(g,t),l.push(h),d-=c[p]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",r,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,r,i));return}let n={};i&&i?.columnLimits?.forEach(g=>{var f=g,{key:h}=f,p=mS(f,["key"]);n[typeof h=="string"?h:h.getColId()]=p});let o=this.visibleColsService.getAllCols(),a=e===Ja(o);if(e<=0||!o.length||a)return;let s=[],l=[];o.forEach(h=>{h.getColDef().suppressSizeToFit===!0?l.push(h):s.push(h)});let c=s.slice(0),u=!1,d=h=>{fi(s,h),l.push(h)};for(s.forEach(h=>{h.resetActualWidth(t);let p=n?.[h.getId()],g=p?.minWidth??i?.defaultMinWidth,f=p?.maxWidth??i?.defaultMaxWidth,v=h.getActualWidth();typeof g=="number"&&v<g?h.setActualWidth(g,t,!0):typeof f=="number"&&v>f&&h.setActualWidth(f,t,!0)});!u;){u=!0;let h=e-Ja(l);if(h<=0)s.forEach(p=>{let g=n?.[p.getId()]?.minWidth??i?.defaultMinWidth;if(typeof g=="number"){p.setActualWidth(g,t,!0);return}p.setMinimum(t)});else{let p=h/Ja(s),g=h;for(let f=s.length-1;f>=0;f--){let v=s[f],m=n?.[v.getId()],y=m?.minWidth??i?.defaultMinWidth,w=m?.maxWidth??i?.defaultMaxWidth,C=v.getMinWidth(),S=v.getMaxWidth(),b=typeof y=="number"&&y>C?y:C,x=typeof w=="number"&&w<S?w:S,E=Math.round(v.getActualWidth()*p);E<b?(E=b,d(v),u=!1):E>x?(E=x,d(v),u=!1):f===0&&(E=g),v.setActualWidth(E,t,!0),g-=E}}}c.forEach(h=>{h.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!r&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:r,defaultMinWidth:i,defaultMaxWidth:n}=e,o=r?.map(({colId:a,minWidth:s,maxWidth:l})=>({key:a,minWidth:s,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:n,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function X$(e,t){return e+"_"+t}function ar(e){return e instanceof Q$}var Q$=class extends U{constructor(e,t,r,i){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=r,this.providedColumnGroup=e,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return X$(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{ar(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=rt(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{_l(t)?e.push(t):ar(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{_l(t)?e.push(t):ar(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(r=>{if(ar(r)&&(!r.displayedChildren||!r.displayedChildren.length))return;switch(r.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(r);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(r);break;default:this.displayedChildren.push(r);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},J$=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],r;return typeof t!="number"?r=0:r=t+1,this.existingIds[e]=r,r}},A0e=class extends U{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=n2(this.treeLeft),this.columnsCenter=n2(this.treeCenter),this.columnsRight=n2(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(r=>r.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){let e=Ja(this.columnsCenter),t=Ja(this.columnsLeft),r=Ja(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==r)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=r,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,r;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,r=this.columnsRight?rt(this.columnsRight):null):(t=this.columnsLeft?rt(this.columnsLeft):null,r=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===r,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(o=>o.getPinned()=="left"),r=e.filter(o=>o.getPinned()=="right"),i=e.filter(o=>o.getPinned()!="left"&&o.getPinned()!="right"),n=new J$;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:r,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],r=[],i=[];for(let n of e){let o=n.getPinned();o?o===!0||o==="left"?t.push(n):i.push(n):r.push(n)}this.ariaOrderColumns=t.concat(r).concat(i)}getAriaColIndex(e){let t;return ar(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{ar(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let r=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(n=>{if(i){let o=Ja(n);n.forEach(a=>{o-=a.getActualWidth(),a.setLeft(o,e)})}else{let o=0;n.forEach(a=>{a.setLeft(o,e),o+=a.getActualWidth()})}i0e(r,n)}),r.forEach(n=>{n.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,r,i){let n=[],o=null;for(let a=0;a<t.length;a++){let s=t[a],l=t.length-a,c=Math.min(s.getColSpan(e),l),u=[s];if(c>1){let h=c-1;for(let p=1;p<=h;p++)u.push(t[a+p]);a+=h}let d;r?(d=!1,u.forEach(h=>{r(h)&&(d=!0)})):d=!0,d&&(n.length===0&&o&&(i&&i(s))&&n.push(o),n.push(s)),o=s}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),r=t.indexOf(e);return r>0?t[r-1]:null}getGroupAtDirection(e,t){let r=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),n=t==="After"?rt(i):i[0],o=`getCol${t}`;for(;;){let a=this[o](n);if(!a)return null;let s=this.getColGroupAtLevel(a,r);if(s!==e)return s}}getColGroupAtLevel(e,t){let r=e.getParent(),i,n;for(;i=r.getProvidedColumnGroup().getLevel(),n=r.getPaddingLevel(),!(i+n<=t);)r=r.getParent();return r}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};fu(this.treeCenter,!1,e),fu(this.treeLeft,!1,e),fu(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();fu(e,!1,t=>{ar(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let r=0;r<t.length;r++){let i=this[t[r]]();if(i.length)return e?rt(i):i[0]}return null}getColumnGroup(e,t){if(!e)return null;if(ar(e))return e;let r=this.getAllTrees(),i=typeof t=="number",n=null;return fu(r,!1,o=>{if(ar(o)){let a=o,s;i?s=e===a.getGroupId()&&t===a.getPartId():s=e===a.getGroupId(),s&&(n=a)}}),n}getColAfter(e){let t=this.getAllCols(),r=t.indexOf(e);return r<t.length-1?t[r+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return Ja(this.columnsLeft)}getDisplayedColumnsRightWidth(){return Ja(this.columnsRight)}isColAtEdge(e,t){let r=this.getAllCols();if(!r.length)return!1;let i=t==="first",n;if(ar(e)){let o=e.getDisplayedLeafColumns();if(!o.length)return!1;n=i?o[0]:rt(o)}else n=e;return(i?r[0]:rt(r))===n}createGroups(e){let{columns:t,idCreator:r,pinned:i,oldDisplayedGroups:n,isStandaloneStructure:o}=e,a=this.mapOldGroupsById(n),s=[],l=t;for(;l.length;){let c=l;l=[];let u=0,d=h=>{let p=u;u=h;let g=c[p],v=(ar(g)?g.getProvidedColumnGroup():g).getOriginalParent();if(v==null){for(let y=p;y<h;y++)s.push(c[y]);return}let m=this.createColGroup(v,r,a,i,o);for(let y=p;y<h;y++)m.addChild(c[y]);l.push(m)};for(let h=1;h<c.length;h++){let p=c[h],f=(ar(p)?p.getProvidedColumnGroup():p).getOriginalParent(),v=c[u],y=(ar(v)?v.getProvidedColumnGroup():v).getOriginalParent();f!==y&&d(h)}u<c.length&&d(c.length)}return o||this.setupParentsIntoCols(s,null),s}createColGroup(e,t,r,i,n){let o=e.getGroupId(),a=t.getInstanceIdForKey(o),s=X$(o,a),l=r[s];return l&&l.getProvidedColumnGroup()!==e&&(l=null),te(l)?l.reset():(l=new Q$(e,o,a,i),n||this.createBean(l)),l}mapOldGroupsById(e){let t={},r=i=>{i.forEach(n=>{if(ar(n)){let o=n;t[n.getUniqueId()]=o,r(o.getChildren())}})};return e&&r(e),t}setupParentsIntoCols(e,t){e.forEach(r=>{if(r.setParent(t),ar(r)){let i=r;this.setupParentsIntoCols(i.getChildren(),i)}})}};function fu(e,t,r){if(e)for(let i=0;i<e.length;i++){let n=e[i];if(ar(n)){let o=t?n.getDisplayedChildren():n.getChildren();fu(o,t,r)}r(n)}}function n2(e){let t=[];return fu(e,!0,r=>{_l(r)&&t.push(r)}),t}var eY=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],I0e=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],P0e=[...eY,...I0e],k0e={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},qr=class{};qr.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];qr.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];qr.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];qr.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];qr.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];qr.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];qr.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];qr.ALL_PROPERTIES=[...qr.ARRAY_PROPERTIES,...qr.OBJECT_PROPERTIES,...qr.STRING_PROPERTIES,...qr.NUMBER_PROPERTIES,...qr.FUNCTION_PROPERTIES,...qr.BOOLEAN_PROPERTIES,...qr.OTHER_PROPERTIES];var cv=qr,Hn=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Hn.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Hn.PUBLIC_EVENTS=eY;Hn.EVENT_CALLBACKS=P0e.map(e=>Hn.getCallbackForEvent(e));Hn.BOOLEAN_PROPERTIES=cv.BOOLEAN_PROPERTIES;Hn.ALL_PROPERTIES=cv.ALL_PROPERTIES;Hn.ALL_PROPERTIES_AND_CALLBACKS=[...Hn.ALL_PROPERTIES,...Hn.EVENT_CALLBACKS];Hn.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Hn.ALL_PROPERTIES_AND_CALLBACKS);var uv=Hn;function tY(e,t){typeof e!="object"&&(e={});let r=ue({},e);return uv.ALL_PROPERTIES_AND_CALLBACKS.forEach(n=>{let o=t[n];typeof o<"u"&&o!==uv.VUE_OMITTED_PROPERTY&&(r[n]=o)}),r}function rY(e,t){if(!e)return;let r={},i=!1;if(Object.keys(e).filter(a=>uv.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{r[a]=e[a],i=!0}),!i)return;let n={type:"gridOptionsChanged",options:r};t.dispatchEvent(n);let o={type:"componentStateChanged"};Vn(r,(a,s)=>{o[a]=s}),t.dispatchEvent(o)}function fv(e,t,r){return r&&e.addDestroyFunc(()=>t.destroyBean(r)),r??e}var L0e=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[e]!==!0&&e.length){let i=this.getGui();i&&i.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[e]!==!1&&e.length){let i=this.getGui();i&&i.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){i.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){let i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function as(e,t,r){r==null||typeof r=="string"&&r==""?iY(e,t):Eo(e,t,r)}function Eo(e,t,r){e.setAttribute(nY(t),r.toString())}function iY(e,t){e.removeAttribute(nY(t))}function nY(e){return`aria-${e}`}function Gi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function F0e(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function O0e(e){return e.getAttribute("aria-label")}function $h(e,t){as(e,"label",t)}function dv(e,t){as(e,"labelledby",t)}function oY(e,t){as(e,"live",t)}function N0e(e,t){as(e,"atomic",t)}function z0e(e,t){as(e,"relevant",t)}function V0e(e,t){as(e,"disabled",t)}function aY(e,t){as(e,"hidden",t)}function Xb(e,t){Eo(e,"expanded",t)}function B0e(e,t){Eo(e,"setsize",t)}function G0e(e,t){Eo(e,"posinset",t)}function H0e(e,t){Eo(e,"multiselectable",t)}function U0e(e,t){Eo(e,"rowcount",t)}function sY(e,t){Eo(e,"rowindex",t)}function W0e(e,t){Eo(e,"colcount",t)}function lY(e,t){Eo(e,"colindex",t)}function j0e(e,t){Eo(e,"colspan",t)}function $0e(e,t){Eo(e,"sort",t)}function Y0e(e){iY(e,"sort")}function Qb(e,t){as(e,"selected",t)}function q0e(e,t){as(e,"controls",t.id),dv(t,e.id)}function Y2(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var o2,Lb,a2,s2,l2,c2,M2,T2,u2;function fa(){return o2===void 0&&(o2=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),o2}function cY(){if(Lb===void 0)if(fa()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Lb=e[1]!=null?parseFloat(e[1]):0)}else Lb=0;return Lb}function q2(){if(a2===void 0){let e=window;a2=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return a2}function K2(){return s2===void 0&&(s2=/(firefox)/i.test(navigator.userAgent)),s2}function uY(){return l2===void 0&&(l2=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),l2}function Al(){return c2===void 0&&(c2=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),c2}function _2(){return!fa()||cY()>=15}function R2(e){if(!e)return null;let t=e.tabIndex,r=e.getAttribute("tabIndex");return t===-1&&(r===null||r===""&&!K2())?null:t.toString()}function K0e(){if(u2!==void 0)return u2;if(!document.body)return-1;let e=1e6,t=K2()?6e6:1e9,r=document.createElement("div");for(document.body.appendChild(r);;){let i=e*2;if(r.style.height=i+"px",i>t||r.clientHeight!==i)break;e=i}return document.body.removeChild(r),u2=e,e}function Z0e(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function X0e(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function Q0e(){return T2==null&&dY(),T2}function dY(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let r=t.offsetWidth-t.clientWidth;r===0&&t.clientWidth===0&&(r=null),t.parentNode&&t.parentNode.removeChild(t),r!=null&&(T2=r,M2=r===0)}function hY(){return M2==null&&dY(),M2}var Fb;var J0e="[tabindex], input, select, button, textarea, [href]",pY="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Z2(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),n=t.call(e,pY),o=Do(e);return i&&!n&&o}function Lt(e,t,r={}){let{skipAriaHidden:i}=r;e.classList.toggle("ag-hidden",!t),i||aY(e,!t)}function ewe(e,t,r={}){let{skipAriaHidden:i}=r;e.classList.toggle("ag-invisible",!t),i||aY(e,!t)}function hv(e,t){let r="disabled",i=t?n=>n.setAttribute(r,""):n=>n.removeAttribute(r);i(e),CY(e.querySelectorAll("input"),n=>i(n))}function Hh(e,t,r){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof r=="number"){if(++i>r)break}else if(e===r)break}return!1}function Du(e){let{height:t,width:r,borderTopWidth:i,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:a,paddingTop:s,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:f}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(r||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(a||"0"),paddingTop:parseFloat(s||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:f}}function X2(e){let t=Du(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function vv(e){let t=Du(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function gY(e){let{height:t,marginBottom:r,marginTop:i}=Du(e);return Math.floor(t+r+i)}function Jb(e){let{width:t,marginLeft:r,marginRight:i}=Du(e);return Math.floor(t+r+i)}function fY(e){let t=e.getBoundingClientRect(),{borderTopWidth:r,borderLeftWidth:i,borderRightWidth:n,borderBottomWidth:o}=Du(e);return{top:t.top+(r||0),left:t.left+(i||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function eS(){if(typeof Fb=="boolean")return Fb;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Fb=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Fb}function tS(e,t){let r=e.scrollLeft;return t&&(r=Math.abs(r),q2()&&!eS()&&(r=e.scrollWidth-e.getBoundingClientRect().width-r)),r}function rS(e,t,r){r&&(eS()?t*=-1:(fa()||q2())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function Kr(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Gn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function vY(e){return!!e.offsetParent}function Do(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!vY(e)||window.getComputedStyle(e).visibility!=="visible")}function pv(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function mY(e,t,r){r&&r.nextSibling===t||(r?r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function yY(e,t){for(let r=0;r<t.length;r++){let i=t[r],n=e.children[r];n!==i&&e.insertBefore(i,n)}}function twe(e,t,r){r?r.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function wY(e,t){if(t)for(let[r,i]of Object.entries(t)){if(!r||!r.length||i==null)continue;let n=M0e(r),o=i.toString(),a=o.replace(/\s*!important/g,""),s=a.length!=o.length?"important":void 0;e.style.setProperty(n,a,s)}}function rwe(e){return e.clientWidth<e.scrollWidth}function iwe(e){return e.clientHeight<e.scrollHeight}function iS(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):xo(e,t)}function xo(e,t){t=Q2(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function rv(e,t){t=Q2(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function Q2(e){return typeof e=="number"?`${e}px`:e}function J2(e){return e instanceof Node||e instanceof HTMLElement}function nwe(e){if(e==null)return[];let t=[];return CY(e,r=>t.push(r)),t}function owe(e,t){if(e)for(let r=0;r<e.length;r++){let i=e[r];t(i.name,i.value)}}function Un(e,t,r){r==null||r===""?e.removeAttribute(t):e.setAttribute(t,r.toString())}function CY(e,t){if(e!=null)for(let r=0;r<e.length;r++)t(e[r])}var Yh=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},awe=1e3,swe=1e3,g$=100,bY=class hu extends U{constructor(t,r,i,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=r,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=n,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let r=this.gos.get(t);return r<0&&q(`${t} should not be lower than 0`),Math.max(200,r)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Al()&&(hu.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},g$):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let r=t.relatedTarget,i=this.parentComp.getGui(),n=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(r)||this.interactionEnabled&&n?.contains(r)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||hu.isLocked)return;let r=0;t&&(r=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),r),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),r=hu.lastTooltipHideTime;return t-r<awe}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=ue({},this.parentComp.getTooltipParams());if(!te(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let r=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(r)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),hu.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,r){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(r);return}let n=r.getGui();this.tooltipComp=r,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");let o=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(a&&(this.tooltipPopupDestroyFunc=a.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let s=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:s,columnMoved:s})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(tr(this.gos),{keydown:s=>{n.contains(s?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let t=this.tooltipComp?.getGui(),r=Ft(this.gos);return!!t&&t.contains(r)}onTooltipFocusOut(t){let r=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,r.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Xe(ue({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Xe(ue({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,r=this.tooltipComp,i=this.tooltipTrigger===0?swe:0;window.setTimeout(()=>{t(),this.destroyBean(r)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){hu.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},g$)}unlockService(){hu.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};bY.isLocked=!1;var lwe=bY,Zh=class extends U{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",r=this.ctrl.getGui();r&&(e!=null&&e!=""?r.setAttribute(t,e):r.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new lwe(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?.(),r=e.getColDef?.(),i=e.getRowNode?.();return{location:e.getLocation(),colDef:r,column:t,rowIndex:e.getRowIndex?.(),node:i,data:i?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},cwe=new Yh,ge=null,st=class SY extends U{constructor(t,r){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=cwe.next(),this.cssClassManager=new L0e(()=>this.eGui),this.componentSelectors=new Map((r??[]).map(i=>[i.selector,i])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,r){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,r))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:r,showDelayOverride:i,hideDelayOverride:n,location:o,shouldDisplayTooltip:a}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==r&&(this.tooltipText=r);let s=()=>this.tooltipText;r!=null&&(this.tooltipFeature=this.createBean(new Zh({getTooltipValue:s,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:a})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,r,i,n=null){if(r===void 0&&(r=this.getDataRefAttribute(t)),r){let o=this[r];if(o===ge)this[r]=n??t;else{let a=i&&i[r];!this.suppressDataRefValidation&&!a&&q(`Issue with data-ref: ${r} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(t,r){nwe(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;let o=this.createComponentFromElement(n,a=>{a.getGui()&&this.copyAttributesFromNode(n,a.getGui())},r);if(o){if(o.addItems&&n.children.length){this.createChildComponentsFromTags(n,r);let a=Array.prototype.slice.call(n.children);o.addItems(a)}this.swapComponentForNode(o,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,r)})}createComponentFromElement(t,r,i){let n=t.nodeName,o=this.getDataRefAttribute(t),a=n.indexOf("AG-")===0,s=a?this.componentSelectors.get(n):null,l=null;if(s){SY.elementGettingCreated=t;let c=i&&o?i[o]:void 0;l=new s.component(c),l.setParentComponent(this),this.createBean(l,null,r)}else a&&q(`Missing selector: ${n}`);return this.applyElementsToComponent(t,o,i,l),l}copyAttributesFromNode(t,r){owe(t.attributes,(i,n)=>r.setAttribute(i,n))}swapComponentForNode(t,r,i){let n=t.getGui();r.replaceChild(n,i),r.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let r=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(i=>i.setAttribute("tabindex",r.toString()))}setTemplate(t,r,i){let n=pv(t);this.setTemplateFromElement(n,r,i)}setTemplateFromElement(t,r,i,n=!1){if(this.eGui=t,this.suppressDataRefValidation=n,r)for(let o=0;o<r.length;o++){let a=r[o];this.componentSelectors.set(a.selector,a)}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,r){let i=r;return t==null?null:(i||(i=this.eGui),J2(t)?{element:t,parent:i}:{element:t.getGui(),parent:i})}prependChild(t,r){let{element:i,parent:n}=this.getContainerAndElement(t,r)||{};!i||!n||n.insertAdjacentElement("afterbegin",i)}appendChild(t,r){let{element:i,parent:n}=this.getContainerAndElement(t,r)||{};!i||!n||n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,r={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:i}=r;ewe(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,r={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:i}=r;Lt(this.eGui,t,{skipAriaHidden:i});let n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,r,i){this.eGui.addEventListener(t,r,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,r))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,r){this.cssClassManager.addOrRemoveCssClass(t,r)}},xY={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},uwe=(()=>{let e=new Set(Object.values(xY));return e.add("eye"),e})();function dwe(e,t,r){let i=nn(e,t,r);if(i){let{className:o}=i;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return i}let n=document.createElement("span");return n.appendChild(i),n}function nn(e,t,r,i){let n=null,o=r&&r.getColDef().icons;if(o&&(n=o[e]),t&&!n){let a=t.get("icons");a&&(n=a[e])}if(n){let a;if(typeof n=="function")a=n();else if(typeof n=="string")a=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof a=="string")return pv(a);if(J2(a))return a;q("iconRenderer should return back a string or a dom object")}else{let a=document.createElement("span"),s=xY[e]??(uwe.has(e)?e:void 0);return s||(i?s=e:(q(`Did not find icon ${e}`),s="")),a.setAttribute("class",`ag-icon ag-icon-${s}`),a.setAttribute("unselectable","on"),Gi(a,"presentation"),a}}var hwe=class extends st{constructor(){super(...arguments),this.dragSource=null,this.eIcon=ge,this.eLabel=ge}postConstruct(){let e=t=>dwe(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){Kr(this.eIcon);let r=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),r=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(r===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&r&&this.eIcon.appendChild(r)}setLabel(e){this.eLabel.textContent=pa(e)}};function DY(e,t,r){if(r===0)return!1;let i=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(i,n)<=r}var El=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new qh,this.eElement=e,this.preventMouseClick=t;let r=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",r,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",r,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let r=this.touchStart===t;if(this.touching&&r&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!DY(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let r={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(r),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function Kf(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var pwe=`<span class="ag-sort-indicator-container">
        ${Kf("Order","order")}
        ${Kf("Asc","ascending-icon")}
        ${Kf("Desc","descending-icon")}
        ${Kf("Mixed","mixed-icon")}
        ${Kf("None","none-icon")}
    </span>`,eP=class extends st{constructor(e){super(),this.eSortOrder=ge,this.eSortAsc=ge,this.eSortDesc=ge,this.eSortMixed=ge,this.eSortNone=ge,e||this.setTemplate(pwe)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,r,i,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=r,this.eSortMixed=i,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);let r=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",r),this.addManagedEventListeners({newColumnsLoaded:r,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,r){if(t==null)return;let i=nn(e,this.gos,r);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";Lt(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";Lt(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),r=e==null;Lt(this.eSortNone,!t&&r,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;ha(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Lt(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,r=e.some(n=>this.sortController.getDisplaySortIndexForColumn(n)??!1),i=t>=0&&r;Lt(this.eSortOrder,i,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():Kr(this.eSortOrder)}},gwe={selector:"AG-SORT-INDICATOR",component:eP},fwe=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,A2=class extends st{constructor(){super(...arguments),this.eFilter=ge,this.eFilterButton=ge,this.eSortIndicator=ge,this.eMenu=ge,this.eLabel=ge,this.eText=ge,this.eSortOrder=ge,this.eSortAsc=ge,this.eSortDesc=ge,this.eSortMixed=ge,this.eSortNone=ge,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??fwe;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[gwe]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=pa(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,r){if(t==null)return;let i=nn(e,this.gos,r);i&&t.appendChild(i)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new El(this.getGui(),!0),r=this.shouldSuppressMenuHide(),i=r&&te(this.eMenu),n=i?new El(this.eMenu,!0):t;if(this.params.enableMenu){let o=i?"tap":"longTap",a=s=>this.params.showColumnMenuAfterMouseClick(s.touchStart);this.addManagedListeners(n,{[o]:a})}if(this.params.enableSorting){let o=a=>{let s=a.touchStart.target;r&&(this.eMenu?.contains(s)||this.eFilterButton?.contains(s))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:o})}if(this.params.enableFilterButton){let o=new El(this.eFilterButton,!0);this.addManagedListeners(o,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>t.destroy()),i&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Gn(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,r=this.menuService.isLegacyMenuEnabled();if(e&&!r){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new eP(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let r=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(r||n)){let s=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(s)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let n=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(o=>this.params.column.getSort()==o.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,r){if(!e)return Gn(t),!1;let i=this.params.column;return this.addInIcon("filter",t,i),this.addManagedListeners(i,{filterChanged:r}),r(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();Lt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},vwe=class extends st{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=ge,this.agClosed=ge,this.agLabel=ge}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&q("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=n=>{if(rs(n))return;let o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=n=>{jh(n)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let r=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(e,t){let r=new El(e,!0);this.addManagedListeners(r,{tap:t}),this.addDestroyFunc(()=>r.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();Lt(this.agOpened,t),Lt(this.agClosed,!t)}else Lt(this.agOpened,!1),Lt(this.agClosed,!1)}addInIcon(e,t){let r=nn(e,this.gos,null);r&&t.appendChild(r)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Lt(this.agOpened,!1),Lt(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(te(e)){let r=pa(e,!0);this.agLabel.textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},mwe="\u2191",ywe="\u2193",wwe=class extends st{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let r=document.createElement("span");r.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(r),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let r=Math.abs(t),i=e.formatValue(r),n=te(i)?i:r,o=t>=0;o?this.eDelta.textContent=mwe+n:this.eDelta.textContent=ywe+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Kr(this.eDelta)}refresh(e,t=!1){let r=e.value;if(r===this.lastValue||(te(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:te(e.value)?this.eValue.textContent=r:Kr(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof r=="number"&&typeof this.lastValue=="number"){let i=r-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=r,!0}},Cwe=class extends st{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let r=e.value;return tt(r)&&(r=""),r===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=r,te(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:te(e.value)?this.eCurrent.textContent=r:Kr(this.eCurrent),!0)}},G=class{};G.BACKSPACE="Backspace";G.TAB="Tab";G.ENTER="Enter";G.ESCAPE="Escape";G.SPACE=" ";G.LEFT="ArrowLeft";G.UP="ArrowUp";G.RIGHT="ArrowRight";G.DOWN="ArrowDown";G.DELETE="Delete";G.F2="F2";G.PAGE_UP="PageUp";G.PAGE_DOWN="PageDown";G.PAGE_HOME="Home";G.PAGE_END="End";G.A="KeyA";G.C="KeyC";G.D="KeyD";G.V="KeyV";G.X="KeyX";G.Y="KeyY";G.Z="KeyZ";var bwe=class extends st{constructor(e,t,r){super(t,r),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:r,labelAlignment:i,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),r!=null&&this.setLabelWidth(r),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){Kr(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Lt(this.eLabel,!1),Gi(this.eLabel,"presentation")):(Lt(this.eLabel,!0),Gi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let r=this.getGui().classList;return r.toggle("ag-label-align-left",e==="left"),r.toggle("ag-label-align-right",e==="right"),r.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(iS(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return hv(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},EY=class extends bwe{constructor(e,t,r,i){super(e,t,r),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:r}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),r!=null&&this.onValueChange(r),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),r=this.getLabel();r==null||r==""||O0e(e)!==null?dv(e,""):dv(e,t??"")}setAriaLabel(e){return $h(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return xo(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},vu=class extends EY{constructor(e,t,r="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=r,this.displayFieldTag=i,this.eLabel=ge,this.eWrapper=ge,this.eInput=ge}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return iS(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Un(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return $h(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return hv(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Un(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";Un(this.eInput,"autocomplete",t)}return this}},tP=class extends vu{constructor(e,t="ag-checkbox",r="checkbox"){super(e,t,r),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,r){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:r});let i=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),r=this.selected=e.target.checked;this.refreshSelectedClass(r),this.dispatchChange(r,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},rP={selector:"AG-CHECKBOX",component:tP},Swe=class extends st{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[rP]),this.eCheckbox=ge}init(e){this.refresh(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),oY(t,"polite"),this.addManagedListeners(t,{click:r=>{if(jh(r),this.eCheckbox.isDisabled())return;let i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:r=>{jh(r)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:r=>{if(r.key===G.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===Ft(this.gos)&&this.eCheckbox.toggle();let i=this.eCheckbox.getValue();this.onCheckboxChanged(i),r.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,r=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{let s=e.column.getColId();s.startsWith(lS)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[s]!==void 0?t=e.value??void 0:r=!1}else t=e.value??void 0;if(!r){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let i=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(i);let n=this.localeService.getLocaleTextFunc(),o=Y2(n,t),a=i?o:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(a)}onCheckboxChanged(e){let{column:t,node:r,value:i}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:r.data,node:r,rowIndex:r.rowIndex,rowPinned:r.rowPinned,value:i});let n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:r.data,node:r,rowIndex:r.rowIndex,rowPinned:r.rowPinned,value:i,oldValue:i,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},xwe=class extends st{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=ge,this.eLoadingText=ge}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=nn("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},Dwe=class extends st{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>dv(e.eParentOfValue)),dv(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");$h(this.getGui(),t)}setupLoading(e){let r=tr(this.gos).createElement("div");r.classList.add("ag-skeleton-effect");let i=e.node.rowIndex;if(i!=null){let a=75+25*(i%2===0?Math.sin(i):Math.cos(i));r.style.width=`${a}%`}this.getGui().appendChild(r);let o=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");$h(this.getGui(),o)}refresh(e){return!1}destroy(){super.destroy()}},MY=class extends st{constructor(){super()}destroy(){super.destroy()}},Ewe=class extends MY{init(){let e=ts(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},Mwe=class extends MY{init(){let e=ts(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},Xh=class extends st{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Twe=class extends Xh{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=pa(t,!0)}};function TY(e){let{inputValue:t,allSuggestions:r,hideIrrelevant:i,filterByPercentageOfBestMatch:n,addSequentialWeight:o}=e,a=r.map((c,u)=>({value:c,relevance:Rwe(t.toLowerCase(),c.toLocaleLowerCase(),o),idx:u}));if(a.sort((c,u)=>u.relevance-c.relevance),i&&(a=a.filter(c=>c.relevance!==0)),a.length>0&&n&&n>0){let u=a[0].relevance*n;a=a.filter(d=>u-d.relevance<0)}let s=[],l=[];for(let c of a)s.push(c.value),l.push(c.idx);return{values:s,indices:l}}function _we(e){let t=[],r=e.length;for(let i=1;i<=r;i++)for(let n=0;n<=r-i;n++){let o=n+i-1;t.push(e.slice(n,o+1))}return t}function Rwe(e,t,r=!1){let i=e.replace(/\s/g,""),n=t.replace(/\s/g,""),o=i.length,a=n.length,s=new Array(o+1).fill(null).map(()=>new Array(a+1).fill(0));for(let d=0;d<=o;d+=1)s[d][0]=d;for(let d=0;d<=a;d+=1)s[0][d]=d;for(let d=1;d<=o;d++)for(let h=1;h<=a;h++)i[d-1]===n[h-1]?s[d][h]=s[d-1][h-1]:s[d][h]=1+Math.min(s[d][h-1],Math.min(s[d-1][h],s[d-1][h-1]));let l=s[o][a],u=Math.max(o,a)-l;if(r){let d=_we(i);for(let h=0;h<d.length;h++){let p=d[h];n.indexOf(p)!==-1&&(u+=1,u*=p.length)}}return u}var Awe=class extends U{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:hwe,agColumnHeader:A2,agColumnGroupHeader:vwe,agSortIndicator:eP,agAnimateShowChangeCellRenderer:wwe,agAnimateSlideCellRenderer:Cwe,agLoadingCellRenderer:xwe,agSkeletonCellRenderer:Dwe,agCheckboxCellRenderer:Swe,agLoadingOverlay:Ewe,agNoRowsOverlay:Mwe,agTooltipComponent:Twe},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&Vn(e,(t,r)=>this.registerJsComponent(t,r))}registerDefaultComponent(e,t,r){this.agGridDefaults[e]=t,r&&(this.agGridDefaultParams[e]=r)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let r=(s,l,c)=>({componentFromFramework:l,component:s,params:c}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(i!=null)return r(i,!0);let n=this.jsComps[t];if(n){let s=this.getFrameworkOverrides().isFrameworkComponent(n);return r(n,s)}let o=this.agGridDefaults[t];if(o)return r(o,!1,this.agGridDefaultParams[t]);let a=this.enterpriseAgDefaultCompsModule[t];return a?this.gos.assertModuleRegistered(a,`AG Grid '${e}' component: ${t}`):z2(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let r=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],i=TY({inputValue:t,allSuggestions:r,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;q(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&q(`         Did you mean: [${i.slice(0,3)}]?`),q(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},rn=class Jf{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(r=>this.onDone(r),r=>this.onReject(r))}static all(t){return t.length?new Jf(r=>{let i=t.length,n=new Array(i);t.forEach((o,a)=>{o.then(s=>{n[a]=s,i--,i===0&&r(n)})})}):Jf.resolve()}static resolve(t=null){return new Jf(r=>r(t))}then(t){return new Jf(r=>{this.status===1?r(t(this.resolution)):this.waiters.push(i=>r(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(r=>r(t))}onReject(t){}},Iwe={propertyName:"dateComponent",cellRenderer:!1},Pwe={propertyName:"dragAndDropImageComponent",cellRenderer:!1},kwe={propertyName:"headerComponent",cellRenderer:!1},Lwe={propertyName:"headerGroupComponent",cellRenderer:!1},f$={propertyName:"cellRenderer",cellRenderer:!0},Fwe={propertyName:"cellRenderer",cellRenderer:!1},Owe={propertyName:"loadingCellRenderer",cellRenderer:!0},Nwe={propertyName:"cellEditor",cellRenderer:!1},v$={propertyName:"innerRenderer",cellRenderer:!0},zwe={propertyName:"loadingOverlayComponent",cellRenderer:!1},Vwe={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Bwe={propertyName:"tooltipComponent",cellRenderer:!1},iP={propertyName:"filter",cellRenderer:!1},Gwe={propertyName:"floatingFilterComponent",cellRenderer:!1},Hwe={propertyName:"toolPanel",cellRenderer:!1},Uwe={propertyName:"statusPanel",cellRenderer:!1},Wwe={propertyName:"fullWidthCellRenderer",cellRenderer:!0},jwe={propertyName:"loadingCellRenderer",cellRenderer:!0},$we={propertyName:"groupRowRenderer",cellRenderer:!0},Ywe={propertyName:"detailCellRenderer",cellRenderer:!0},qwe={propertyName:"menuItem",cellRenderer:!1},_Y=class RY extends U{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,Pwe,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,r){return this.getCompDetails(t,kwe,"agColumnHeader",r)}getHeaderGroupCompDetails(t){let r=t.columnGroup.getColGroupDef();return this.getCompDetails(r,Lwe,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,Wwe,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,jwe,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,$we,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,Ywe,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,r){return this.getCompDetails(t,v$,null,r)}getFullWidthGroupRowInnerCellRenderer(t,r){return this.getCompDetails(t,v$,null,r)}getCellRendererDetails(t,r){return this.getCompDetails(t,f$,null,r)}getEditorRendererDetails(t,r){return this.getCompDetails(t,Fwe,null,r)}getLoadingCellRendererDetails(t,r){return this.getCompDetails(t,Owe,"agSkeletonCellRenderer",r,!0)}getCellEditorDetails(t,r){return this.getCompDetails(t,Nwe,"agCellEditor",r,!0)}getFilterDetails(t,r,i){return this.getCompDetails(t,iP,i,r,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,Iwe,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,zwe,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,Vwe,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,Bwe,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,r){return this.getCompDetails(t,f$,null,r)}getFloatingFilterCompDetails(t,r,i){return this.getCompDetails(t,Gwe,i,r)}getToolPanelCompDetails(t,r){return this.getCompDetails(t,Hwe,null,r,!0)}getStatusPanelCompDetails(t,r){return this.getCompDetails(t,Uwe,null,r,!0)}getMenuItemCompDetails(t,r){return this.getCompDetails(t,qwe,"agMenuItem",r,!0)}getCompDetails(t,r,i,n,o=!1){let{propertyName:a,cellRenderer:s}=r,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:p}=RY.getCompKeys(this.frameworkOverrides,t,r,n),g,f=w=>{let C=this.userComponentRegistry.retrieve(a,w);C&&(c=C.componentFromFramework?void 0:C.component,u=C.componentFromFramework?C.component:void 0,g=C.params)};if(l!=null&&f(l),c==null&&u==null&&i!=null&&f(i),c&&s&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(a,c)),!c&&!u){o&&ht(`Could not find component ${l}, did you forget to configure this component?`);return}let v=this.mergeParamsWithApplicationProvidedParams(t,r,n,d,g),m=c==null,y=c||u;return{componentFromFramework:m,componentClass:y,params:v,type:r,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(y,m,v,r)}}static getCompKeys(t,r,i,n){let{propertyName:o}=i,a,s,l,c,u,d;if(r){let h=r,p=h[o+"Selector"],g=p?p(n):null,f=v=>{typeof v=="string"?a=v:v!=null&&v!==!0&&(t.isFrameworkComponent(v)?l=v:s=v)};g?(f(g.component),c=g.params,u=g.popup,d=g.popupPosition):f(h[o])}return{compName:a,jsComp:s,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:d}}newAgStackInstance(t,r,i,n){let o=n.propertyName,a=!r,s;if(a)s=new t;else{let c=this.componentMetadataProvider.retrieve(o);s=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,n)}let l=this.initComponent(s,i);return l==null?rn.resolve(s):l.then(()=>s)}mergeParamsWithApplicationProvidedParams(t,r,i,n=null,o){let a=this.gos.getGridCommonParams();pi(a,i),o&&pi(a,o);let s=t,l=s&&s[r.propertyName+"Params"];if(typeof l=="function"){let c=l(i);pi(a,c)}else typeof l=="object"&&pi(a,l);return pi(a,n),a}initComponent(t,r){if(this.createBean(t),t.init!=null)return t.init(r)}};function iv(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var cS=class mt{static register(t){mt.__register(t,!0,void 0)}static registerModules(t){mt.__registerModules(t,!0,void 0)}static __register(t,r,i){mt.runVersionChecks(t),i!==void 0?(mt.areGridScopedModules=!0,mt.gridModulesMap[i]===void 0&&(mt.gridModulesMap[i]={}),mt.gridModulesMap[i][t.moduleName]=t):mt.globalModulesMap[t.moduleName]=t,mt.setModuleBased(r)}static __unRegisterGridModules(t){delete mt.gridModulesMap[t]}static __registerModules(t,r,i){mt.setModuleBased(r),t&&t.forEach(n=>mt.__register(n,r,i))}static isValidModuleVersion(t){let[r,i]=t.version.split(".")||[],[n,o]=mt.currentModuleVersion.split(".")||[];return r===n&&i===o}static runVersionChecks(t){mt.currentModuleVersion||(mt.currentModuleVersion=t.version);let r=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(t.version?mt.isValidModuleVersion(t)||ht(r(`'${t.moduleName}' is version ${t.version} but the other modules are version ${mt.currentModuleVersion}.`)):ht(r(`'${t.moduleName}' is incompatible.`)),t.validate){let i=t.validate();i.isValid||ht(`${i.message}`)}}static setModuleBased(t){mt.moduleBased===void 0?mt.moduleBased=t:mt.moduleBased!==t&&(ht("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),ht("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){mt.isBundled=!0}static __assertRegistered(t,r,i){if(this.__isRegistered(t,i))return!0;let n;if(mt.isBundled)n=`AG Grid: unable to use ${r} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(mt.moduleBased||mt.moduleBased===void 0){let o=Object.entries(F$).find(([a,s])=>s===t)?.[0];n=`AG Grid: unable to use ${r} as the ${o} is not registered${mt.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${o} } from '${t}';
    
    ModuleRegistry.registerModules([ ${o} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${r} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return ht(n),!1}static __isRegistered(t,r){return!!mt.globalModulesMap[t]||!!mt.gridModulesMap[r]?.[t]}static __getRegisteredModules(t){return[...Hb(mt.globalModulesMap),...Hb(mt.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return Hb(mt.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!mt.moduleBased}};cS.globalModulesMap={};cS.gridModulesMap={};cS.areGridScopedModules=!1;var es=cS,Kwe=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,r])=>{this.beans[t]=r}),e.beanClasses.forEach(t=>{let r=new t;r.beanName?this.beans[r.beanName]=r:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(r)}),e.derivedBeans?.forEach(t=>{let{beanName:r,bean:i}=t(this);this.beans[r]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(r=>{r.preWireBeans?.(this.beans),r.wireBeans?.(this.beans)}),e.forEach(r=>r.preConstruct?.()),t&&e.forEach(t),e.forEach(r=>r.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},Zwe=class extends Kwe{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),es.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var AY=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(AY||{});var Xwe=class extends U{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){let r={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:r,dragSource:e}),this.dragService.addDragSource(r)}getDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){let t=this.dragSourceAndParamsList.find(r=>r.dragSource===e);t&&(this.dragService.removeDragSource(t.params),fi(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){let r=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);let n=this.dropTargets.filter(a=>this.isMouseOnDropTarget(e,a)),o=this.findCurrentDropTarget(e,n);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,r,i,t),this.lastDropTarget!==null&&o===null&&this.dragSource?.onGridExit?.(this.dragItem),this.lastDropTarget===null&&o!==null&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(o,e,r,i,t),o&&this.dragAndDropImageComp){let{comp:a,promise:s}=this.dragAndDropImageComp;a?a.setIcon(o.getIconName?o.getIconName():null):s.then(l=>{l&&l.setIcon(o.getIconName?o.getIconName():null)})}this.lastDropTarget=o}else if(o&&o.onDragging){let a=this.createDropTargetEvent(o,e,r,i,t);o.onDragging(a)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,r=[[e.getContainer()]];return t?r.concat(t):r}allContainersIntersect(e,t){for(let r of t){let{width:i,height:n,left:o,right:a,top:s,bottom:l}=r.getBoundingClientRect();if(i===0||n===0)return!1;let c=e.clientX>=o&&e.clientX<a,u=e.clientY>=s&&e.clientY<l;if(!c||!u)return!1}return!0}isMouseOnDropTarget(e,t){let r=this.getAllContainersFromDropTarget(t),i=!1;for(let a of r)if(this.allContainersIntersect(e,a)){i=!0;break}let{eElement:n,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(n)?!1:i&&t.isInterestedIn(o,n)}findCurrentDropTarget(e,t){let r=t.length;if(r===0)return null;if(r===1)return t[0];let n=lv(this.gos).elementsFromPoint(e.clientX,e.clientY);for(let o of n)for(let a of t)if(o0e(this.getAllContainersFromDropTarget(a)).indexOf(o)!==-1)return a;return null}enterDragTargetIfExists(e,t,r,i,n){if(e&&e.onDragEnter){let o=this.createDropTargetEvent(e,t,r,i,n);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,r,i){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){let o=this.createDropTargetEvent(this.lastDropTarget,e,t,r,i);this.lastDropTarget.onDragLeave(o)}let n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(r=>r.external).find(r=>r.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){let r=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return r.contains(i)}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,r=e.clientX;return t===r?null:t>r?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,r=e.clientY;return t===r?null:t>r?0:1}createDropTargetEvent(e,t,r,i,n){let o=e.getContainer(),a=o.getBoundingClientRect(),{dragItem:s,dragSource:l}=this,c=t.clientX-a.left,u=t.clientY-a.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:i,hDirection:r,dragSource:l,fromNudge:n,dragItem:s,dropZoneTarget:o})}positionDragAndDropImageComp(e){let t=this.getDragAndDropImageComponent();if(!t)return;let r=t.getGui(),n=r.getBoundingClientRect().height,o=Z0e()-2,a=X0e()-2;if(!r.offsetParent)return;let l=fY(r.offsetParent),{clientY:c,clientX:u}=e,d=c-l.top-n/2,h=u-l.left-10,p=tr(this.gos),g=p.defaultView||window,f=g.pageYOffset||p.documentElement.scrollTop,v=g.pageXOffset||p.documentElement.scrollLeft;o>0&&h+r.clientWidth>o+v&&(h=o+v-r.clientWidth),h<0&&(h=0),a>0&&d+r.clientHeight>a+f&&(d=a+f-r.clientHeight),d<0&&(d=0),r.style.left=`${h}px`,r.style.top=`${d}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){let{comp:e}=this.dragAndDropImageComp;if(e){let t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:e}=this;if(!e)return;let r=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:r},r.then(i=>{!i||!this.isAlive()||(this.processDragAndDropImageComponent(i),this.dragAndDropImageComp.comp=i)})}processDragAndDropImageComponent(e){let{dragSource:t,mouseEventService:r,environment:i}=this;if(!t)return;let n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),r.stampTopLevelGridCompWithGridInstance(n),i.applyThemeClasses(n),e.setIcon(null);let{dragItemName:o}=t;V2(o)&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";let a=tr(this.gos),s=null,l=null;try{s=a.fullscreenElement}catch{}finally{s||(s=lv(this.gos));let c=s.querySelector("body");c?l=c:s instanceof ShadowRoot?l=s:s instanceof Document?l=s?.documentElement:l=s}this.dragAndDropImageParent=l,l?l.appendChild(n):q("Could not find document body, it is needed for drag and drop.")}},Qwe=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let r=t||this.shouldSkipVerticalScroll();if(r&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<i.left+n,this.tickRight=e.clientX>i.right-n,this.tickUp=e.clientY<i.top+n&&!r,this.tickDown=e.clientY>i.bottom-n&&!r,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var Jwe=class extends U{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){Ut(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{let t=e.gridBodyCtrl;this.autoScrollService=new Qwe({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:r=>t.getScrollFeature().setVerticalScrollPosition(r),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.selectionService.getSelectedNodes()].sort((n,o)=>n.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(o));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let r=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!r?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(rt(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),r=t&&t.highlighted===1,i=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes,o=r?1:0;if(this.isFromThisGrid(e))n.forEach(a=>{a.rowTop<i&&(o-=1)}),this.moveRows(n,i,o);else{let a=Kh(this.gos),s=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&s--,this.clientSideRowModel.updateRowData({add:n.filter(l=>!this.clientSideRowModel.getRowNode(a?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:s})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,r=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,r)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){q("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){q("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",i))}),e.onDragCancel&&(t.onDragCancel=i=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",i))}));let r=ue({isInterestedIn:i=>i===2,getIconName:()=>"move",external:!0},t);this.dragAndDropService.addDropTarget(r),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(r))}getRowDropZone(e){let t=this.getContainer.bind(this),r=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this),a=this.onDragCancel.bind(this),s;return e?s={getContainer:t,onDragEnter:e.onDragEnter?l=>{r(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:r,onDragLeave:e.onDragLeave?l=>{i(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:i,onDragging:e.onDragging?l=>{n(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:n,onDragStop:e.onDragStop?l=>{o(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:o,onDragCancel:e.onDragCancel?l=>{a(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:a,fromGrid:!0}:s={getContainer:t,onDragEnter:r,onDragLeave:i,onDragging:n,onDragStop:o,onDragCancel:a,fromGrid:!0},s}draggingToRowDragEvent(e,t){let r=this.mouseEventService.getNormalisedPosition(t).y,i=r>this.pageBoundsService.getCurrentPageHeight(),n=-1,o;i||(n=this.rowModel.getRowIndexAtPixel(r),o=this.rowModel.getRow(n));let a;switch(t.vDirection){case 1:a="down";break;case 0:a="up";break;default:a=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:o,y:r,vDirection:a})}dispatchGridEvent(e,t){let r=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(r)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},eCe=class extends U{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,r=e.mouseDownListener;if(t.removeEventListener("mousedown",r),e.touchEnabled){let i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(r=>r.dragSource===e);t&&(this.removeListener(t),fi(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:r,includeTouch:i,stopPropagationForTouch:n}=e;r.addEventListener("mousedown",t);let o=null,a=this.gos.get("suppressTouch");i&&!a&&(o=s=>{Z2(s.target)||(n&&s.stopPropagation(),this.onTouchStart(e,s))},r.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let r=t.touches[0];this.touchLastTime=r,this.touchStart=r;let i=l=>this.onTouchMove(l,e.eElement),n=l=>this.onTouchUp(l,e.eElement),o=l=>{l.cancelable&&l.preventDefault()},a=t.target,s=[{target:lv(this.gos),type:"touchmove",listener:o,options:{passive:!1}},{target:a,type:"touchmove",listener:i,options:{passive:!0}},{target:a,type:"touchend",listener:n,options:{passive:!0}},{target:a,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(s),e.dragStartPixels===0&&this.onCommonMove(r,this.touchStart,e.eElement)}onMouseDown(e,t){let r=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||r._alreadyProcessedByDragService||(r._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let i=c=>this.onMouseMove(c,e.eElement),n=c=>this.onMouseUp(c,e.eElement),o=c=>c.preventDefault(),a=c=>{c.key===G.ESCAPE&&this.cancelDrag(e.eElement)},s=lv(this.gos),l=[{target:s,type:"mousemove",listener:i},{target:s,type:"mouseup",listener:n},{target:s,type:"contextmenu",listener:o},{target:s,type:"keydown",listener:a}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:r,type:i,listener:n,options:o}=t;r.addEventListener(i,n,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:r,type:i,listener:n,options:o}=t;r.removeEventListener(i,n,o)})})}isEventNearStartEvent(e,t){let{dragStartPixels:r}=this.currentDragParams,i=te(r)?r:4;return DY(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,r){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:r}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){let r=this.getFirstActiveTouch(e.touches);r&&this.onCommonMove(r,this.touchStart,t)}onMouseMove(e,t){fa()&&tr(this.gos).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),r=e.type==="mousemove";return t&&r&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let r=this.getFirstActiveTouch(e.changedTouches);r||(r=this.touchLastTime),this.onUpCommon(r,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},I2=class extends st{constructor(e,t,r,i,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=r,this.customGui=i,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(nn("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new rCe(this,this.beans,this.rowNode,this.column):new tCe(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&q("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let r=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let i=this.getDragItem(),n=i.rowNodes?.length||1,o=this.getRowDragText(this.column);return o?o(i,n):n===1?this.cellValueFn():`${n} ${r("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},IY=class extends U{constructor(e,t,r){super(),this.parent=e,this.rowNode=t,this.column=r}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let r=!0,i=!1;this.column&&(r=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=V2(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(r,t)):(this.parent.setDisplayed(r,t),this.parent.setVisible(!0,t))}}},tCe=class extends IY{constructor(e,t,r,i){super(e,r,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},rCe=class extends IY{constructor(e,t,r,i){super(e,r,i),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),r=t&&t.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),o=r&&!n||i;this.setDisplayedOrVisible(o)}},iCe=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),mv=class xl{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=xl.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,r){let i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let n=this.createDataChangedEvent(t,i,r);this.localEventService?.dispatchEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,r,i){return{type:"dataChanged",node:this,oldData:r,newData:t,update:i}}getRowIndexString(){return this.rowIndex==null?(ht("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?xl.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?xl.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new xl(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,r){let i=te(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(r),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);let o=this.createDataChangedEvent(t,n,!1);this.localEventService?.dispatchEvent(o)}checkRowSelectable(){let t=B2(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,r){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),r)return;if(xu(this.beans.gos)){let n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let r=Kh(this.beans.gos);if(r)if(this.data){let i=this.parent?.getRoute()??[];this.id=r({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(xl.ID_PREFIX_ROW_GROUP)&&ht(`Row IDs cannot start with ${xl.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,r=!1){this.rowHeight=t,this.rowHeightEstimated=r,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,r){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[r.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=gi(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,r=!0,i=0,n=this.__autoHeights;if(n==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(s=>{let l=n[s.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(s.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(s)){t=!0;return}l=-1}else{t=!0;return}else r=!1;l>i&&(i=l)}),t)||((r||i<10)&&(i=Ml(this.beans.gos,this).height),i==this.rowHeight))return;this.setRowHeight(i),this.beans.rowModel.onRowHeightChangedDebounced?.()}setExpanded(t,r,i){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");let n=Xe(ue({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:t,event:r||null});this.beans.rowNodeEventThrottle.dispatchExpanded(n,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,r,i){let o=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),a=this.beans.valueService.getValueForDisplay(o,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:o,colDef:o.getColDef(),data:this.data,node:this,oldValue:a,newValue:r,value:r,source:i}),!1;let s=this.beans.valueService.setValue(this,o,r,i);return this.dispatchCellChangedEvent(o,r,a),this.checkRowSelectable(),s}setGroupValue(t,r){let i=this.beans.columnModel.getCol(t);tt(this.groupData)&&(this.groupData={});let n=i.getColId(),o=this.groupData[n];o!==r&&(this.groupData[n]=r,this.dispatchCellChangedEvent(i,r,o))}setAggData(t){let r=this.aggData;if(this.aggData=t,this.localEventService){let i=n=>{let o=this.aggData?this.aggData[n]:void 0,a=r?r[n]:void 0;if(o===a)return;let s=this.beans.columnModel.getCol(n);s&&this.dispatchCellChangedEvent(s,o,a)};for(let n in r)i(n);for(let n in t)(!r||!(n in r))&&i(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(os(this.beans.gos)){let i=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,r,i){let n={type:"cellChanged",node:this,column:t,newValue:r,oldValue:i};this.localEventService?.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(r=>r.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,r=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){let n=this.childrenAfterGroup[i],o=n.isSelected();if(!n.selectable){let a=n.calculateSelectedFromChildren();if(a===null)continue;o=a}switch(o){case!0:t=!0;break;case!1:r=!0;break;default:return}}if(!(t&&r))return t?!0:r?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){this.localEventService?.dispatchEvent({type:t,node:this})}selectThisNode(t,r,i="api"){let n=!this.selectable&&t,o=this.selected===t;if(n||o)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");let a=this.sibling;return a&&a.footer&&a.localEventService&&a.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent(Xe(ue({},this.createGlobalRowEvent("rowSelected")),{event:r||null,source:i})),!0}setSelected(t,r=!1,i="api"){if(typeof i=="boolean"){q("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:r,rangeSelect:!1,source:i})}setSelectedParams(t){return this.rowPinned?(q("cannot select pinned rows"),0):this.id===void 0?(q("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Xe(ue({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return!!this.rowPinned}addEventListener(t,r){this.localEventService||(this.localEventService=new qh),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new W2(this.beans.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(r)??r;this.localEventService.addEventListener(t,i)}removeEventListener(t,r){if(!this.localEventService)return;let i=this.frameworkEventListenerService?.unwrap(r)??r;this.localEventService.removeEventListener(t,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(q("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let t=[],r=this;for(;r&&r.key!=null;)t.push(r.key),r=r.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new xl(this.beans);Object.keys(this).forEach(r=>{iCe.has(r)||(t[r]=this[r])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};mv.ID_PREFIX_ROW_GROUP="row-group-";mv.ID_PREFIX_TOP_PINNED="t-";mv.ID_PREFIX_BOTTOM_PINNED="b-";mv.OBJECT_ID_SEQUENCE=0;var is=mv,nCe=class extends U{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:r})=>this.onAdvancedFilterEnabledChanged(r),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",r=>this.setAdvancedFilterModel(r.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){b2(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:r,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):rn.resolve()).then(()=>{let n={source:t,type:"filterChanged",columns:i};r&&pi(n,r),this.eventService.dispatchEvent(n),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!b2(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){q("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,r){this.columnFilterService?.setColDefPropertiesForDataType(e,t,r)}},oCe=class extends st{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??rn.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:r}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let n=i.getGui();te(n)||q(`getGui method from filter returned ${n}; it should be a DOM element.`),this.appendChild(n),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:r,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(Kr(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},PY="ag-resizer-wrapper",bl=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,aCe=`<div class="${PY}">
        ${bl("eTopLeft","topLeft")}
        ${bl("eTop","top")}
        ${bl("eTopRight","topRight")}
        ${bl("eRight","right")}
        ${bl("eBottomRight","bottomRight")}
        ${bl("eBottom","bottom")}
        ${bl("eBottomLeft","bottomLeft")}
        ${bl("eLeft","left")}
    </div>`,sCe=class extends U{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,r=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(r,i)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:r,width:i,minHeight:n,height:o,x:a,y:s}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=Do(this.element);if(u){let d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){let p=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){let p=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=n||l,this.minWidth=r||c,i&&this.setWidth(i),o&&this.setHeight(o),(!i||!o)&&this.refreshSize(),e)this.center();else if(a||s)this.offsetElement(a,s);else if(u&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){let p=parseFloat(d.style.top),g=parseFloat(d.style.left);h?this.offsetElement(isNaN(g)?0:g,isNaN(p)?0:p):this.setPosition(g,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let r=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(r),this.moveElementDragListener=r):(this.dragService.removeDragSource(r),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,r=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)rv(r,e),e=gY(r),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(i?(r.style.maxHeight="unset",r.style.minHeight="unset"):t?rv(r,e):(r.style.height=`${e}px`,r.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:r}=this.offsetParent;if(!r)return null;let i=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,a=e?0:n.top,s=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();s=u-i.bottom}}return r+a-o-s}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:r}=this.config,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)xo(t,e),e=Jb(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:n}=this.offsetParent,o=r?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?xo(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:r}=this.config,i=r?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let r=this.getAvailableHeight();this.element.style.setProperty("max-height",`${r}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:r,isTop:i,anywhereWithin:n,topBuffer:o}=e,a=t.clientX-this.dragStartPosition.x,s=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!r,!!n,a)?0:a,c=this.shouldSkipY(t,!!i,o,s)?0:s;return{movementX:l,movementY:c}}shouldSkipX(e,t,r,i){let n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),s=this.config.popup?this.position.x:n.left,l=s<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=a.right;return l?!0:(t?l=i<0&&e.clientX>s+o.left||i>0&&e.clientX<s+o.left:r?l=i<0&&e.clientX>a.right||i>0&&e.clientX<s+o.left:l=i<0&&e.clientX>a.right||i>0&&e.clientX<a.right,l)}shouldSkipY(e,t,r=0,i){let n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),s=this.config.popup?this.position.y:n.top,l=s<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=a.bottom;return l?!0:(t?l=i<0&&e.clientY>s+o.top+r||i>0&&e.clientY<s+o.top:l=i<0&&e.clientY>a.bottom||i>0&&e.clientY<a.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let r=new DOMParser().parseFromString(aCe,"text/html").body;e.appendChild(r.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${PY}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:r,forcePopupParentAsOffsetParent:i}=this.config;!r&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(r=>!r.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,r=0;for(let i=0;i<e.length;i++){let n=e[i],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let a=this.minHeight||0,s=this.minWidth||0;if(o){let l=window.getComputedStyle(n);l.minHeight&&(a=parseInt(l.minHeight,10)),l.minWidth&&(s=parseInt(l.minWidth,10))}else a=n.offsetHeight,s=n.offsetWidth;t+=a,r+=s}return{height:t,width:r}}applySizeToSiblings(e){let t=null,r=this.getSiblings();if(r){for(let i=0;i<r.length;i++){let n=r[i];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=r[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:r}=this.config,{isTop:i,isRight:n,isBottom:o,isLeft:a}=this.currentResizer,s=n||a,l=o||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:a,isTop:i}),d=this.position.x,h=this.position.y,p=0,g=0;if(s&&c){let f=a?-1:1,v=this.getWidth(),m=v+c*f,y=!1;a&&(p=v-m,(d+p<=0||m<=this.minWidth)&&(y=!0,p=0)),y||this.setWidth(m)}if(l&&u){let f=i?-1:1,v=this.getHeight(),m=v+u*f,y=!1;i?(g=v-m,(h+g<=0||m<=this.minHeight)&&(y=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<m&&this.getMinSizeOfSiblings().height+m>this.element.parentElement.offsetHeight&&(y=!0),y||this.setHeight(m)}this.updateDragStartPosition(e.clientX,e.clientY),((t||r)&&p||g)&&this.offsetElement(d+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:r}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+n,r+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},kY=class LY extends U{constructor(t,r={}){super(),this.eFocusableElement=t,this.callbacks=r,this.callbacks=ue({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);n&&(n.focus(),i.preventDefault())}},r)}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(LY.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:r=>{if(!(r.defaultPrevented||rs(r))){if(this.callbacks.shouldStopEventPropagation(r)){jh(r);return}r.key===G.TAB?this.callbacks.onTabKeyDown(r):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(r)}}})}};kY.FOCUS_MANAGED_CLASS="ag-focus-managed";var Eu=kY,FY={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function nP(e,t){return nS(e)?(e.debounceMs!=null&&q("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function nS(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var lCe=class extends st{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=ge,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Eu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new sCe(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let r=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(r,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=nS(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=nS(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){let{buttons:r,readOnly:i}=t??{},{buttons:n,readOnly:o}=e;if(i===o&&av(r,n))return;let a=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Kr(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):a&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!a){this.eButtonsPanel&&Gn(this.eButtonsPanel);return}let s=document.createDocumentFragment(),l=c=>{let u,d;switch(c){case"apply":u=this.translate("applyFilter"),d=g=>this.onBtApply(!1,!1,g);break;case"clear":u=this.translate("clearFilter"),d=()=>this.onBtClear();break;case"reset":u=this.translate("resetFilter"),d=()=>this.onBtReset();break;case"cancel":u=this.translate("cancelFilter"),d=g=>{this.onBtCancel(g)};break;default:q("Unknown button type specified");return}let p=pv(`<button
                    type="${c==="apply"?"submit":"button"}"
                    data-ref="${c}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${u}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(p,{click:d})),s.append(p)};n.forEach(c=>l(c)),this.eButtonsPanel.append(s),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=nP(this.providedFilterParams,this.getDefaultDebounceMs()),t=gi(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let r=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(r):this.resetUiToDefaults().then(r)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let r=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(r,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,r){r&&r.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(r)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,r=t&&t.key,i;(r==="Enter"||r==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let r=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&hv(i,!r)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:r,gos:i}=this;t?(r.restoreLastSize(),r.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){let t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,FY[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},cCe=class extends tP{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},uCe=class extends st{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case G.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let r=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(r)}break;case G.DOWN:case G.UP:e.preventDefault(),this.navigate(t);break;case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===G.DOWN,r;if(!this.highlightedEl)r=this.itemEls[t?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),r=this.itemEls[n]}this.highlightItem(r)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),r=this.options.length-1,i=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/i),o=-1;e===G.PAGE_HOME?o=0:e===G.PAGE_END?o=r:e===G.PAGE_DOWN?o=Math.min(t+n,r):e===G.PAGE_UP&&(o=Math.max(t-n,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:r}=e,i=r||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{Gn(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,r)=>{G0e(t,r+1),B0e(t,e.length)})}renderOption(e,t){let r=tr(this.gos),i=r.createElement("div");Gi(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let n=r.createElement("span");i.appendChild(n),n.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:o=>{o.preventDefault(),o.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Zh({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let r=this.options.findIndex(i=>i.value===e);if(r!==-1){let i=this.options[r];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[r]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Do(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Qb(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:r,clientHeight:i}=t,{offsetTop:n,offsetHeight:o}=e;(n+o>r+i||n<r)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Do(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Qb(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},dCe=class extends EY{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ge,this.eWrapper=ge,this.eDisplayField=ge,this.eIcon=ge,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:r,variableWidth:i,minPickerWidth:n,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,r!=null&&this.setPickerMaxHeight(r),n!=null&&this.setPickerMinWidth(n),o!=null&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:r,inputWidth:i}=this.config;if(r){let n=nn(r,this.gos);n&&this.eIcon.appendChild(n)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Xb(e,!1),this.ariaRole&&Gi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case G.UP:case G.DOWN:case G.ENTER:case G.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case G.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:r,pickerAriaLabelValue:i,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{let h=V$(this.gos);this.beforeHidePicker(),h&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(r,i),anchorToElement:this.eWrapper};e.style.position="absolute";let a=this.popupService.addPopup(o),{maxPickerHeight:s,minPickerWidth:l,maxPickerWidth:c,variableWidth:u}=this;u?(l&&(e.style.minWidth=l),e.style.width=Q2(Jb(this.eWrapper)),c&&(e.style.maxWidth=c)):iS(e,c??Jb(this.eWrapper));let d=s??`${X2(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",d),this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,r=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();Xb(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return iS(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},oP=class extends dCe{constructor(e){super(ue({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:r}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),r&&t==null&&(this.eDisplayField.textContent=r),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new uCe("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),q0e(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===G.TAB&&this.hidePicker(),t){case G.ENTER:case G.UP:case G.DOWN:case G.PAGE_UP:case G.PAGE_DOWN:case G.PAGE_HOME:case G.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case G.ESCAPE:super.onKeyDown(e);break;case G.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,r){if(this.value===e||!this.listComponent)return this;if(r||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},hCe={selector:"AG-SELECT",component:oP},OY=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],r=i=>i.some(n=>e[n]!=null)?!0:(q(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!t.every(r)){this.filterOptions=this.filterOptions.filter(i=>i===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:q("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else q("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},NY=class extends lCe{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,r)=>{r===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let r=!e.operator,i=!t.operator;if(!r&&i||r&&!i)return!1;let o;if(r){let a=e,s=t;o=this.areSimpleModelsEqual(a,s)}else{let a=e,s=t;o=a.operator===s.operator&&Rl(a.conditions,s.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}shouldRefresh(e){let t=this.getModel(),r=t?t.conditions??[t]:null,i=e.filterOptions?.map(o=>typeof o=="string"?o:o.displayKey)??this.getDefaultFilterOptions();return!(!(!r||r.every(o=>i.find(a=>a===o.type)!==void 0))||typeof e.maxNumConditions=="number"&&r&&r.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let r=e,i=r.conditions;i==null&&(i=[],q("Filter model is missing 'conditions'"));let n=this.validateAndUpdateConditions(i),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let s=o;s<n;s++)this.createJoinOperatorPanel(),this.createOption();let a=r.operator==="OR";this.eJoinOperatorsAnd.forEach(s=>s.setValue(!a,!0)),this.eJoinOperatorsOr.forEach(s=>s.setValue(a,!0)),i.forEach((s,l)=>{this.eTypes[l].setValue(s.type,!0),this.setConditionIntoUi(s,l)})}else{let r=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(r.type,!0),this.setConditionIntoUi(r,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),rn.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),q('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:r}=t,i=[];if(r){let o=t;i.push(...o.conditions??[])}else i.push(t);return i[r&&r==="OR"?"some":"every"](o=>this.individualConditionPasses(e,o))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new OY,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(q('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(q('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(q('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new oP);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let r=this.getNumConditions()-1;this.forEachPositionInput(r,i=>this.resetInput(i)),this.addChangedListeners(e,r)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),r=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let i=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,n),this.resetJoinOperatorOr(r,i,n),this.isReadOnly()||(t.onValueChange(this.listener),r.onValueChange(this.listener))}createJoinOperator(e,t,r){let i=this.createManagedBean(new cCe);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${r}`),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,r=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:r?this.localeService.getLocaleTextFunc()(r.displayKey,r.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?e=r:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let r=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<r){this.removeConditionsAndOperators(r+1);let i=e+1,n=r-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,n)=>{let o=this.isConditionDisabled(n,e);i.setDisabled(o||this.filterListOptions.length<=1),n===1&&(hv(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((i,n)=>{Lt(i,this.isConditionBodyVisible(n))});let r=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!r,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(r,!0)}),this.forEachInput((i,n,o,a)=>{this.setElementDisplayed(i,n<a),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let r=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,r,t),this.removeComponents(this.eJoinOperatorsAnd,r,t),this.removeComponents(this.eJoinOperatorsOr,r,t)}removeElements(e,t,r){this.removeItems(e,t,r).forEach(n=>Gn(n))}removeComponents(e,t,r){this.removeItems(e,t,r).forEach(n=>{Gn(n.getGui()),this.destroyBean(n)})}removeItems(e,t,r){return r==null?e.splice(t):e.splice(t,r)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof vu&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,r=-1,i=!1,n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,r=a);else{let s=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),l=a<t;(s||l)&&(this.removeConditionsAndOperators(a,1),i=!0,l&&r--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(r===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(r,n),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=r}getPlaceholderText(e,t){let r=this.translate(e);if(V2(this.filterPlaceholder)){let i=this.filterPlaceholder,n=this.eTypes[t].getValue(),o=this.translate(n);r=i({filterOptionKey:n,filterOption:o,placeholder:r})}else typeof this.filterPlaceholder=="string"&&(r=this.filterPlaceholder);return r}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,r,i,n)=>{if(!(t instanceof vu))return;let o=r===0&&n>1?"inRangeStart":r===0?"filterOoo":"inRangeEnd",a=r===0&&n>1?e("ariaFilterFromValue","Filter from value"):r===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,i)),t.setInputAriaLabel(a)})}setElementValue(e,t,r){e instanceof vu&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof st&&Lt(e.getGui(),t)}setElementDisabled(e,t){e instanceof st&&hv(e.getGui(),t)}attachElementOnChange(e,t){e instanceof vu&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,r)=>{this.forEachPositionTypeInput(r,t,e)})}forEachPositionInput(e,t){let r=this.getConditionType(e);this.forEachPositionTypeInput(e,r,t)}forEachPositionTypeInput(e,t,r){let i=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){let a=n[o];a!=null&&r(a,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(r=>r==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,r)=>this.resetJoinOperatorAnd(t,r,this.joinOperatorId+r)),this.eJoinOperatorsOr.forEach((t,r)=>this.resetJoinOperatorOr(t,r,this.joinOperatorId+r)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),rn.resolve()}resetType(e){let r=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(r).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,r){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),r)}resetJoinOperatorOr(e,t,r){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),r)}resetJoinOperator(e,t,r,i,n){this.updateJoinOperatorDisabled(e.setValue(r,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let r=this.mapValuesFromModel(e);this.forEachInput((i,n,o)=>{o===t&&this.setElementValue(i,r[n]!=null?r[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,r,i)=>{this.setElementValue(t,r===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,r=>{this.attachElementOnChange(r,this.listener)}))}individualConditionPasses(e,t){let r=this.getCellValue(e.node),i=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,i,r);return o??(r==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,r,t,e))}evaluateCustomFilter(e,t,r){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(n=>n==null))return i(t,r)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},zY=class extends NY{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,r){let i=this.comparator(),n=e[0]!=null?i(e[0],t):0;switch(r.type){case"equals":return n===0;case"notEqual":return n!==0;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{let o=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return q('Unexpected type of filter "'+r.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},pCe=65,gCe=67,fCe=86,vCe=68,mCe=90,yCe=89;function VY(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function P2(e,t,r,i,n){let o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;let a=e.addGridCommonParams({event:t,editing:n,column:i,node:r,data:r.data,colDef:i.getColDef()});return!!(o&&o(a))}function wCe(e,t,r,i){let n=i.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!te(o))return!1;let a=e.addGridCommonParams({colDef:n,column:i,headerRowIndex:r,event:t});return!!o(a)}function CCe(e){let{keyCode:t}=e,r;switch(t){case pCe:r=G.A;break;case gCe:r=G.C;break;case fCe:r=G.V;break;case vCe:r=G.D;break;case mCe:r=G.Z;break;case yCe:r=G.Y;break;default:r=e.code}return r}function bCe(e,t=!1){return e===G.DELETE?!0:!t&&e===G.BACKSPACE?uY():!1}var Mu=class extends vu{constructor(e,t="ag-text-field",r="text"){super(e,t,r)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=te(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=r=>{VY(r)&&r.key&&!e.test(r.key)&&r.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:r=>{let i=r.clipboardData?.getData("text");i&&i.split("").some(n=>!e.test(n))&&r.preventDefault()}})}},uS={selector:"AG-INPUT-TEXT-FIELD",component:Mu},aP=class extends Mu{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let n=parseFloat(this.eInput.value),o=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==o&&this.setValue(o)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:r,step:i}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof r=="number"&&this.setMax(r),typeof i=="number"&&this.setStep(i)}onWheel(e){Ft(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let i=parseFloat(e).toFixed(this.precision);return parseFloat(i).toString()}let r=String(e).split(".");if(r.length>1){if(r[1].length<=this.precision)return e;if(this.precision>0)return`${r[0]}.${r[1].slice(0,this.precision)}`}return r[0]}setMin(e){return this.min===e?this:(this.min=e,Un(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Un(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Un(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(r=>super.setValue(r,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,r){if(te(r)){let i=this.isScientificNotation(r);if(i&&this.eInput.validity.valid)return e(r);if(!i){r=this.adjustPrecision(r);let n=this.normalizeValue(r);i=r!=n}if(i)return t(r)}return e(r)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},SCe={selector:"AG-INPUT-NUMBER-FIELD",component:aP},BY=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],sP=class{constructor(e,t,r){this.localeService=e,this.optionsFactory=t,this.valueFormatter=r}getModelAsString(e){if(!e)return null;let t=e.operator!=null,r=this.localeService.getLocaleTextFunc();if(t){let i=e,o=(i.conditions??[]).map(s=>this.getModelAsString(s)),a=i.operator==="AND"?"andCondition":"orCondition";return o.join(` ${r(a,FY[a])} `)}else{if(e.type==="blank"||e.type==="notBlank")return r(e.type,e.type);{let i=e,n=this.optionsFactory.getCustomOption(i.type),{displayKey:o,displayName:a,numberOfInputs:s}=n||{};return o&&a&&s===0?(r(o,a),a):this.conditionToString(i,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},GY=class extends sP{conditionToString(e,t){let{numberOfInputs:r}=t||{};return e.type=="inRange"||r===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function k2(e){let{allowedCharPattern:t}=e??{};return t??null}var xCe=class extends zY{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:r,type:i}=e||{};return[this.processValue(t),this.processValue(r)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new GY(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return BY}setElementValue(e,t,r){let i=!r&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,i)}createValueElement(){let e=k2(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Gi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,r,i){let n=this.createManagedBean(i?new Mu({allowedCharPattern:i}):new aP);n.addCssClass(`ag-filter-${r}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(r,i,n,o)=>{i<o&&t.push(this.processValue(this.stringToFloat(r.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=ts(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),r={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},HY=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],UY=class extends sP{conditionToString(e,t){let{numberOfInputs:r}=t||{};return e.type=="inRange"||r===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function WY(e){let t=e&&e.trim();return t===""?e:t}var DCe=class extends NY{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:r})=>{if(r==null)return!1;switch(e){case"contains":return t.indexOf(r)>=0;case"notContains":return t.indexOf(r)<0;case"equals":return t===r;case"notEqual":return t!=r;case"startsWith":return t.indexOf(r)===0;case"endsWith":{let i=t.lastIndexOf(r);return i>=0&&i===t.length-r.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new UY(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(q("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:r,filterText:i})=>e(t,r,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),r={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(r.filter=i[0]),i.length>1&&(r.filterTo=i[1]),r}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let r=[];return this.forEachPositionInput(e,(i,n,o,a)=>{if(n<a){let s=ts(i.getValue());t&&this.textFilterParams.trimInput&&(s=WY(s)??null,i.setValue(s,!0)),r.push(s)}}),r}getDefaultFilterOptions(){return HY}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),Gi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,r){let i=this.createManagedBean(new Mu);i.addCssClass(`ag-filter-${r}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:r,type:i}=e||{};return[t||null,r||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,r,i){let n=e.map(h=>this.formatter(h))||[],o=this.formatter(t),{api:a,colDef:s,column:l,context:c,textFormatter:u}=this.textFilterParams;if(r.type==="blank")return this.isBlank(t);if(r.type==="notBlank")return!this.isBlank(t);let d={api:a,colDef:s,column:l,context:c,node:i.node,data:i.data,filterOption:r.type,value:o,textFormatter:u};return n.some(h=>this.matcher(Xe(ue({},d),{filterText:h})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function jY(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function da(e,t=Number.MAX_VALUE){return r=>{let i=jY(r);if(!(i==null||i<e||i>t))return i}}function nv(e,t){return e.toString().padStart(t,"0")}function ECe(e,t){let r=[];for(let i=e;i<=t;i++)r.push(i);return r}function MCe(e,t,r){return typeof e!="number"?"":e.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Wn(e,t=!0,r="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>nv(n,2)).join(r);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>nv(n,2)).join(":")),i}var d2=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function ov(e,t="YYYY-MM-DD"){let r=nv(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>r.slice(r.length-4,r.length),YY:()=>r.slice(r.length-2,r.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>nv(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${d2(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${d2(e.getDate())}`,DD:()=>nv(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${d2(e.getDay())}`,d:()=>`${e.getDay()}`},a=new RegExp(Object.keys(o).join("|"),"g");return t.replace(a,s=>s in o?o[s]():s)}function Bi(e){if(!e)return null;let[t,r]=e.split(" ");if(!t)return null;let i=t.split("-").map(d=>parseInt(d,10));if(i.filter(d=>!isNaN(d)).length!==3)return null;let[n,o,a]=i,s=new Date(n,o-1,a);if(s.getFullYear()!==n||s.getMonth()!==o-1||s.getDate()!==a)return null;if(!r||r==="00:00:00")return s;let[l,c,u]=r.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&s.setHours(l),c>=0&&c<60&&s.setMinutes(c),u>=0&&u<60&&s.setSeconds(u),s}var $Y=class{constructor(e,t,r,i,n){this.alive=!0,this.context=e,this.eParent=i,t.getDateCompDetails(r).newAgStackInstance().then(s=>{if(!this.alive){e.destroyBean(s);return}this.dateComp=s,s&&(i.appendChild(s.getGui()),s.afterGuiAttached&&s.afterGuiAttached(),this.tempValue&&s.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),n?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Lt(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&q("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},YY=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],qY=class extends sP{constructor(e,t,r){super(t,r),this.dateFilterParams=e}conditionToString(e,t){let{type:r}=e,{numberOfInputs:i}=t||{},n=r=="inRange"||i===2,o=Bi(e.dateFrom),a=Bi(e.dateTo),s=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){let l=o!==null?ov(o,s):"null",c=a!==null?ov(a,s):"null";return`${l}-${c}`}return o!=null?ov(o,s):`${r}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},m$=1e3,y$=1/0,TCe=class extends zY{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=m$,this.maxValidYear=y$,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:r,type:i}=e||{};return[t&&Bi(t)||null,r&&Bi(r)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let r=t;return t==null||r<e?-1:r>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(r,i)=>{if(e[r]!=null)if(isNaN(e[r]))q(`DateFilter ${r} is not a number`);else return e[r]==null?i:Number(e[r]);return i};this.minValidYear=t("minValidYear",m$),this.maxValidYear=t("maxValidYear",y$),this.minValidYear>this.maxValidYear&&q("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Bi(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Bi(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&q("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new qY(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new $Y(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return YY}createValueElement(){let t=tr(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,r,i){let o=tr(this.gos).createElement("div");o.classList.add(`ag-filter-${i}`),o.classList.add(`ag-filter-date-${i}`),t.push(o),e.appendChild(o),r.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,r){this.removeItems(e,t,r).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((r,i,n,o)=>{n!==e||!t||i>=o||(t=t&&this.isValidDateValue(r.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),r={},i=this.getValues(e);return i.length>0&&(r.dateFrom=Wn(i[0])),i.length>1&&(r.dateTo=Wn(i[1])),ue({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},r)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),r=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(r)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(r,i,n,o)=>{i<o&&t.push(r.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},lP=class extends U{constructor(e,t,r,i){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=r}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?rt(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=te(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),r=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,r),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!Lr(this.beans.gos,"print")||e.getPinned()==="left")return t;let i=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let n=this.beans.visibleColsService.getBodyContainerWidth();return i+n+t}return i+t}setLeft(e){if(te(e)&&(this.eCell.style.left=`${e}px`),ar(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&j0e(this.ariaEl,t.length)}}},_Ce="ag-column-first",RCe="ag-column-last";function KY(e,t,r,i){return tt(e)?[]:ICe(e.headerClass,e,t,r,i)}function ZY(e,t,r){e.addOrRemoveCssClass(_Ce,r.isColAtEdge(t,"first")),e.addOrRemoveCssClass(RCe,r.isColAtEdge(t,"last"))}function ACe(e,t,r,i){return t.addGridCommonParams({colDef:e,column:r,columnGroup:i})}function ICe(e,t,r,i,n){if(tt(e))return[];let o;if(typeof e=="function"){let a=ACe(t,r,i,n);o=e(a)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}var PCe=0,XY=class QY extends U{constructor(t,r,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=i,this.beans=r,this.instanceId=t.getUniqueId()+"-"+PCe++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){let t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){let{headerRowIndex:r,column:i}=this.focusService.getFocusedHeader();return wCe(this.gos,t,r,i)}getWrapperHasFocus(){return Ft(this.gos)===this.eGui}setGui(t,r){this.eGui=t,this.addDomData(r),r.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),r.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){let{wrapperElement:r,checkMeasuringCallback:i,compBean:n}=t,{animationFrameService:o,resizeObserverService:a,columnModel:s,gos:l}=this.beans,c=f=>{if(!this.isAlive()||!n.isAlive())return;let{paddingTop:v,paddingBottom:m,borderBottomWidth:y,borderTopWidth:w}=Du(this.getGui()),C=v+m+y+w,b=r.offsetHeight+C;if(f<5){let x=tr(l),E=!x||!x.contains(r),M=b==0;if(E||M){o.requestAnimationFrame(()=>c(f+1));return}}s.setColHeaderHeight(this.column,b)},u=!1,d,h=()=>{let f=this.column.isAutoHeaderHeight();f&&!u&&p(),!f&&u&&g()},p=()=>{u=!0,c(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),d=a.observeResize(r,()=>c(0))},g=()=>{u=!1,d&&d(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),d=void 0};h(),n.addDestroyFunc(()=>g()),n.addManagedListeners(this.column,{widthChanged:()=>u&&c(0)}),n.addManagedEventListeners({sortChanged:()=>{u&&window.setTimeout(()=>c(0))}}),i&&i(h)}onDisplayedColumnsChanged(){let{comp:t,column:r,beans:i,eGui:n}=this;!t||!r||!n||(ZY(t,r,i.visibleColsService),lY(n,i.visibleColsService.getAriaColIndex(r)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let t=this.focusService.isHeaderFocusSuppressed();this.eGui&&Un(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){let r=Ft(this.gos),i=t.key===G.LEFT||t.key===G.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),r!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;let n=t.key===G.LEFT!==this.gos.get("enableRtl"),o=AY[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(t){let r=this.getResizeDiff(t);if(this.column.getPinned()){let n=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),a=vv(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+o+r>a)if(a>n+o)r=a-n-o;else return 0}return r}getResizeDiff(t){let r=t.key===G.LEFT!==this.gos.get("enableRtl"),i=this.column.getPinned(),n=this.gos.get("enableRtl");return i&&n!==(i==="right")&&(r=!r),(r?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let r=this.getWrapperHasFocus();switch(t.key){case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:r&&t.preventDefault()}}addDomData(t){let r=QY.DOM_DATA_KEY_HEADER_CTRL;Su(this.gos,this.eGui,r,this),t.addDestroyFunc(()=>Su(this.gos,this.eGui,r,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,r,i){let n=t??r;this.gos.get("preventDefaultOnContextMenu")&&n.preventDefault(),this.menuService.isHeaderContextMenuEnabled(i)&&this.menuService.showHeaderContextMenu(i,t,r),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,r){this.eventService.dispatchEvent({type:t,column:r})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};XY.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var dS=XY,cP=class extends U{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},kCe=class extends dS{constructor(e,t,r){super(e,t,r),this.iconCreated=!1,this.column=e}setComp(e,t,r,i,n){this.comp=e,n=fv(this,this.beans.context,n),this.eButtonShowMainFilter=r,this.eFloatingFilterBody=i,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,r=!!e.floatingFilter;this.active=t&&r}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=nn("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Eu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();$h(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(Ft(this.gos)===this.eGui)return;let i=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),i.focus();return}let n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,r=this.column;do if(r=e?t.getColBefore(r):t.getColAfter(r),!r)break;while(!r.getColDef().filter||!r.getColDef().floatingFilter);return r}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case G.UP:case G.DOWN:t||e.preventDefault();case G.LEFT:case G.RIGHT:if(t)return;e.stopPropagation();case G.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case G.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let r=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Hh(e.relatedTarget,"ag-floating-filter");if(r&&i&&e.target===this.eGui){let o=this.lastFocusEvent,a=!!(o&&o.key===G.TAB);if(o&&a){let s=o.shiftKey;this.focusService.focusInto(this.eGui,s)}}let n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(e){e.createManagedBean(new cP([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let r=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){let t=new lP(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{filterManager:t}=this.beans,r=i=>{if(i?.source==="filterDestroyed"&&!this.isAlive())return;let n=this.comp.getFloatingFilterComp();n&&n.then(o=>{if(o){let a=t?.getCurrentFloatingFilterParentModel(this.column),s=i?Xe(ue({},i),{columns:i.columns??[],source:i.source==="api"?"api":"columnFilter"}):null;o.onParentModelChanged(a,s)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:r}),t?.isFilterActive(this.column)&&r(null)}setupWidth(e){let t=()=>{let r=`${this.column.getActualWidth()}px`;this.comp.setWidth(r)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let r=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let i=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!i?this.updateCompDetails(e,i,r):n.then(o=>{!o||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,i)?this.updateCompDetails(e,i,r):this.updateFloatingFilterParams(i)})}updateCompDetails(e,t,r){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),r&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(r=>{let i=!1;r?.refresh&&typeof r.refresh=="function"&&r.refresh(t)!==null&&(i=!0),!i&&r?.onParamsUpdated&&typeof r.onParamsUpdated=="function"&&r.onParamsUpdated(t)!==null&&q("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var Fe="32.3.0";function LCe(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function FCe(e,t,r){return e.filterManager?.getFilterInstance(t,r)}function OCe(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function NCe(e,t){let r=e.columnModel.getColDefCol(t);if(r)return e.filterManager?.destroyFilter(r,"api")}function zCe(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function VCe(e){return e.filterManager?.getFilterModel()??{}}function BCe(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function GCe(e,t,r){return e.filterManager?.setColumnFilterModel(t,r)??Promise.resolve()}function HCe(e,t){let r=e.columnModel.getCol(t);if(!r){ht(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:r,containerType:"columnFilter",positionBy:"auto"})}function UCe(e,t,r){if(t==null)return null;let i=null,{compName:n,jsComp:o,fwComp:a}=_Y.getCompKeys(e,t,iP);return n?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:o==null&&a==null&&t.filter===!0&&(i=r()),i}var w$={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},C$=["january","february","march","april","may","june","july","august","september","october","november","december"],WCe=class extends U{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=ue({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let r=[],i=this.getFilterModel(!0);if(e){let n=new Set(Object.keys(e));this.allColumnFilters.forEach((o,a)=>{let s=e[a];r.push(this.setModelOnFilterWrapper(o.filterPromise,s)),n.delete(a)}),n.forEach(o=>{let a=this.columnModel.getColDefCol(o)||this.columnModel.getCol(o);if(!a){q("setFilterModel() - no column found for colId: "+o);return}if(!a.isFilterAllowed()){q("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);return}let s=this.getOrCreateFilterWrapper(a);if(!s){q("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o);return}r.push(this.setModelOnFilterWrapper(s.filterPromise,e[o]))})}else this.allColumnFilters.forEach(n=>{r.push(this.setModelOnFilterWrapper(n.filterPromise,null))});rn.all(r).then(()=>{let n=this.getFilterModel(!0),o=[];this.allColumnFilters.forEach((a,s)=>{let l=i?i[s]:null,c=n?n[s]:null;av(l,c)||o.push(a.column)}),o.length>0&&this.filterManager?.onFilterChanged({columns:o,source:t})})}setModelOnFilterWrapper(e,t){return new rn(r=>{e.then(i=>{typeof i.setModel!="function"&&(q("filter missing setModel method, which is needed for setFilterModel"),r()),(i.setModel(t)||rn.resolve()).then(()=>r())})})}getFilterModel(e){let t={},{allColumnFilters:r,initialFilterModel:i}=this;return r.forEach((n,o)=>{let a=this.getModelFromFilterWrapper(n);te(a)&&(t[o]=a)}),e||Object.entries(i).forEach(([n,o])=>{te(o)&&!r.has(n)&&this.columnModel.getCol(n)?.isFilterAllowed()&&(t[n]=o)}),t}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(q("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=o=>o?o.isFilterActive?o.isFilterActive():(q("Filter is missing isFilterActive() method"),!1):!1,t=!!b2(this.gos),r=o=>{if(!o.isPrimary())return!0;let s=!this.columnModel.isPivotActive();return!o.isValueActive()||!s?!1:this.columnModel.isPivotMode()?!0:t},i=[],n=[];return this.forEachColumnFilter((o,a)=>{e(o)&&(r(a.column)?i.push(o):n.push(o))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((r,i)=>i.column.setFilterActive(r.isFilterActive(),e,t))}forEachColumnFilter(e){return rn.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(r=>e(r,t))))}doColumnFiltersPass(e,t,r){let{data:i,aggData:n}=e,o=r?this.activeAggregateFilters:this.activeColumnFilters,a=r?n:i;for(let s=0;s<o.length;s++){let l=o[s];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:a}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:r}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",r).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(n=>{n&&n!==t&&n.onAnyFilterChanged&&n.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,r)=>{let i=r?this.columnModel.getCol(r):e;return i?this.valueService.getValue(i,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(r2(this.gos))t="agSetColumnFilter";else{let r=this.dataTypeService?.getBaseDataType(e);r==="number"?t="agNumberColumnFilter":r==="date"||r==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(r2(this.gos))t="agSetColumnFloatingFilter";else{let r=this.dataTypeService?.getBaseDataType(e);r==="number"?t="agNumberColumnFloatingFilter":r==="date"||r==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let r=this.getDefaultFilter(e),i=e.getColDef(),n,o=Xe(ue({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:s=>this.filterChangedCallbackFactory(n,e)(s),doesRowPassOtherFilter:s=>this.filterManager?this.filterManager.doesRowPassOtherFilters(n,s):!0}),a=this.userComponentFactory.getFilterDetails(i,o,r);return a?{filterPromise:()=>{let s=a.newAgStackInstance();return s?.then(l=>{n=l,t&&(t.filter=l)}),s},compDetails:a}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:K$(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:r,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=r?.()??null,t.compDetails=i,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((r,i)=>{let n;r.column.isPrimary()?n=this.columnModel.getColDefCol(i):n=this.columnModel.getCol(i),!(n&&n===r.column)&&(e.push(r.column),this.disposeFilterWrapper(r,"columnChanged"),this.disposeColumnListener(i))});let t=e.every(r=>r.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:r}=this.allColumnFilters.get(e.getColId())??{};return r&&typeof r?.isFilterAllowed=="function"?r.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let r=l=>{let c=this.getOrCreateFilterWrapper(e)?.filterPromise;c?.then(u=>{l(iv(u))})},i=e.getColDef(),n=Xe(ue({},this.createFilterParams(e,i)),{filterChangedCallback:()=>r(l=>this.filterChangedCallbackFactory(l,e)())}),o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,iP,n),a=UCe(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(e));a==null&&(a="agReadOnlyFloatingFilter");let s={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:r,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,s,a)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let r=e.getColId(),i=this.allColumnFilters.get(r);this.disposeColumnListener(r),delete this.initialFilterModel[r],i&&(this.disposeFilterWrapper(i,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(r=>{this.destroyBean(r),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return r=>{let i=r?.source??"columnFilter",n={filter:e,additionalEventAttributes:r,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let r=t.column,{compDetails:i}=r.isFilterAllowed()?this.createFilterInstance(r):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(r,"paramsUpdated");return}let n=r.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(r,"paramsUpdated");return}t.filterPromise.then(o=>{(o?.refresh?o.refresh(ue(Xe(ue({},this.createFilterParams(r,r.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(o,r),filterChangedCallback:this.filterChangedCallbackFactory(o,r),doesRowPassOtherFilter:s=>this.filterManager?this.filterManager.doesRowPassOtherFilters(o,s):!0}),n)):!0)===!1&&this.destroyFilter(r,"paramsUpdated")})}setColumnFilterWrapper(e,t){let r=e.getColId();this.allColumnFilters.set(r,t),this.allColumnListeners.set(r,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(r)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:r}=e,{componentClass:i}=t;return!(r===i||r?.render&&i?.render&&r.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(r=>{let i=iv(r);t(i)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(r=>{t(iv(r))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??rn.resolve(null):rn.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:r})=>{this.setColumnFilterModel(e,t).then(()=>r())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let o=()=>{},a=new Promise(s=>{o=s});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:o}),a}let r=this.columnModel.getColDefCol(e),i=r?this.getOrCreateFilterWrapper(r):null;return i?(o=>new Promise(a=>{o.then(s=>a(s))}))(this.setModelOnFilterWrapper(i.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,r){let i=r2(this.gos),n=this.localeService.getLocaleTextFunc(),o=a=>{let{filterParams:s}=e;e.filterParams=typeof s=="object"?ue(ue({},s),a):a};switch(t.baseDataType){case"number":{i&&o({comparator:(a,s)=>{let l=a==null?0:parseInt(a),c=s==null?0:parseInt(s);return l===c?0:l>c?1:-1}});break}case"boolean":{o(i?{valueFormatter:a=>te(a.value)?n(String(a.value),a.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,s)=>s,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,s)=>s===!1,numberOfInputs:0}]});break}case"date":{i&&o({valueFormatter:a=>{let s=r(a);return te(s)?s:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,s)=>{if(s===1&&a!=null){let l=C$[Number(a)-1];return n(l,w$[l])}return a??n("blanks","(Blanks)")}});break}case"dateString":{let a=t.dateParser;o(i?{valueFormatter:s=>{let l=r(s);return te(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:s=>{let l=a(s??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(s,l)=>{if(l===1&&s!=null){let c=C$[Number(s)-1];return n(c,w$[c])}return s??n("blanks","(Blanks)")}}:{comparator:(s,l)=>{let c=a(l);return l==null||c<s?-1:c>s?1:0}});break}case"object":{i?o({valueFormatter:a=>{let s=r(a);return te(s)?s:n("blanks","(Blanks)")}}):e.filterValueGetter=a=>r({column:a.column,node:a.node,value:this.valueService.getValue(a.column,a.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function jCe(e){return!!e.filterManager?.isAnyFilterPresent()}function $Ce(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var YCe=class extends st{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[uS]),this.eFloatingFilterText=ge}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${r("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let r=t.getModelAsString(e);this.eFloatingFilterText.setValue(r)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},JY=class extends st{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,r;t?r=e.conditions[0]:r=e,this.lastType=r.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let r=e;return this.isTypeEditable(r.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new OY,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let r=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(r)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:r}=t||{};return r==null||r==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),r=this.localeService.getLocaleTextFunc();return`${t} ${r("ariaFilterInput","Filter Input")}`}},qCe=class extends JY{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[uS]),this.eReadOnlyText=ge,this.eDateWrapper=ge}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return YY}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new qY(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let r=e;this.dateComp.setDate(Bi(r.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Lt(this.eDateWrapper,e),Lt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=Wn(e);this.params.parentFilterInstance(r=>{if(r){let i=Bi(t);r.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){let e=nP(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:gi(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new $Y(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},KCe=class extends st{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[uS]),this.eDateInput=ge}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:r=>{r.target===Ft(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),r=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=r&&fa(),t.type=r?"date":"text";let{minValidYear:i,maxValidYear:n,minValidDate:o,maxValidDate:a}=e.filterParams||{};if(o&&i&&q("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),a&&n&&q("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&a){let[s,l]=[o,a].map(c=>c instanceof Date?c:Bi(c));s&&l&&s.getTime()>l.getTime()&&q("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=ov(o):t.min=o:i&&(t.min=`${i}-01-01`),a?a instanceof Date?t.max=ov(a):t.max=a:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Bi(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Wn(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:q2()||K2()||fa()&&cY()>=14.1}},eq=class extends U{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=ge,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new Mu(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let r=i=>this.valueChangedListener(i);this.addManagedListeners(t,{input:r,keydown:r})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},tq=class extends JY{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ge}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=nS(this.params.filterParams),!this.isReadOnly()){let r=nP(this.params.filterParams,this.getDefaultDebounceMs()),i=gi(this.syncUpWithParentFilter.bind(this),r);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();Kr(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===G.ENTER;if(this.applyActive&&!t)return;let r=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(r=WY(r),this.floatingFilterInputService.setValue(r,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,r||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},ZCe=class extends U{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new aP),this.eFloatingFilterTextInput=this.createManagedBean(new Mu),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),r=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(r),this.setupListeners(t,i=>this.valueChangedListener(i)),this.setupListeners(r,i=>this.valueChangedListener(i))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},XCe=class extends tq{init(e){super.init(e),this.filterModelFormatter=new GY(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){k2(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return BY}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=k2(e.filterParams),this.allowedCharPattern?this.createManagedBean(new eq({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new ZCe)}},QCe=class extends tq{init(e){super.init(e),this.filterModelFormatter=new UY(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return HY}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new eq)}};function JCe(e){return!!e.filterManager?.isQuickFilterPresent()}function ebe(e){return e.gos.get("quickFilterText")}function tbe(e){e.filterManager?.resetQuickFilterCache()}var rbe=class extends U{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),r=this.columnModel.getColDefCols(),i=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:r)??[];t&&(i=i.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(n=>n.isVisible()||n.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(r=>t?this.doesRowPassQuickFilterCache(e,r):this.doesRowPassQuickFilterNoCache(e,r))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return te(e)?Ut(this.gos)?e.toUpperCase():(q("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){q(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),r=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,r&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(r=>{let i=this.getQuickFilterTextForColumn(r,e);return te(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let r;e?(this.checkGenerateQuickFilterAggregateText(t),r=t.quickFilterAggregateText):r=this.getQuickFilterAggregateText(t);let{quickFilterParts:i,matcher:n}=this;return n(i,r)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let r=this.valueService.getValue(e,t,!0),i=e.getColDef();if(i.getQuickFilterText){let n=this.gos.addGridCommonParams({value:r,node:t,data:t.data,column:e,colDef:i});r=i.getQuickFilterText(n)}return te(r)?r.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(r=>{let i=this.getQuickFilterTextForColumn(r,e);te(i)&&t.push(i)}),t.join(`
`)}},uP={version:Fe,moduleName:"@ag-grid-community/filter-core",beans:[nCe]},ibe={version:Fe,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:jCe,onFilterChanged:$Ce},dependantModules:[uP]},hS={version:Fe,moduleName:"@ag-grid-community/column-filter",beans:[WCe],dependantModules:[uP]},nbe={version:Fe,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:LCe,getFilterInstance:FCe,getColumnFilterInstance:OCe,destroyFilter:NCe,setFilterModel:zCe,getFilterModel:VCe,getColumnFilterModel:BCe,setColumnFilterModel:GCe,showColumnFilter:HCe},dependantModules:[hS,ibe]},dP={version:Fe,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:kCe}],dependantModules:[hS]},nmt={version:Fe,moduleName:"@ag-grid-community/floating-filter",dependantModules:[dP,hS]},obe={version:Fe,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:YCe}],dependantModules:[dP]},abe={version:Fe,moduleName:"@ag-grid-community/simple-filter",dependantModules:[hS],userComponents:[{name:"agTextColumnFilter",classImp:DCe},{name:"agNumberColumnFilter",classImp:xCe},{name:"agDateColumnFilter",classImp:TCe},{name:"agDateInput",classImp:KCe}]},sbe={version:Fe,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[abe,dP],userComponents:[{name:"agTextColumnFloatingFilter",classImp:QCe},{name:"agNumberColumnFloatingFilter",classImp:XCe},{name:"agDateColumnFloatingFilter",classImp:qCe}]},rq={version:Fe,moduleName:"@ag-grid-community/quick-filter-core",beans:[rbe],dependantModules:[uP]},lbe={version:Fe,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:JCe,getQuickFilter:ebe,resetQuickFilter:tbe},dependantModules:[rq]},cbe={version:Fe,moduleName:"@ag-grid-community/quick-filter",dependantModules:[rq,lbe]},ube={version:Fe,moduleName:"@ag-grid-community/filter",dependantModules:[sbe,obe,cbe,nbe]},hP=class extends st{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},dbe=class extends hP{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=ge,this.eButtonWrapper=ge,this.eButtonShowMainFilter=ge}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(r,i)=>this.addOrRemoveCssClass(r,i),addOrRemoveBodyCssClass:(r,i)=>this.eFloatingFilterBody.classList.toggle(r,i),setButtonWrapperDisplayed:r=>Lt(this.eButtonWrapper,r),setCompDetails:r=>this.setCompDetails(r),getFloatingFilterComp:()=>this.compPromise,setWidth:r=>e.style.width=r,setMenuIcon:r=>this.eButtonShowMainFilter.appendChild(r)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},hbe=class extends hP{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=ge,this.eHeaderCompWrapper=ge,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((n,o)=>{o!=null&&o!=""?e.setAttribute(n,o):e.removeAttribute(n)})("col-id",this.column.getColId());let r={setWidth:n=>e.style.width=n,addOrRemoveCssClass:(n,o)=>this.addOrRemoveCssClass(n,o),setAriaSort:n=>n?$0e(e,n):Y0e(e),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);let i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(r=>this.afterCompCreated(t,r))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},pbe=class extends hP{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=ge,this.eHeaderCompWrapper=ge}postConstruct(){let e=this.getGui(),t=(i,n)=>n!=null?e.setAttribute(i,n):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());let r={addOrRemoveCssClass:(i,n)=>this.addOrRemoveCssClass(i,n),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>Lt(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(r,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let r=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(r)}addOrRemoveHeaderWrapperStyle(e,t){let{eHeaderCompWrapper:r}=this;t?r.style.setProperty(e,t):r.style.removeProperty(e)}};var gbe=class extends st{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){sY(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,r)=>this.setHeaderCtrls(t,r),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let r=this.headerComps;if(this.headerComps={},e.forEach(i=>{let n=i.instanceId,o=r[n];delete r[n],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[n]=o}),Vn(r,(i,n)=>{this.getGui().removeChild(n.getGui()),this.destroyBean(n)}),t){let i=Tl(this.headerComps);i.sort((o,a)=>{let s=o.getCtrl().getColumnGroupChild().getLeft(),l=a.getCtrl().getColumnGroupChild().getLeft();return s-l});let n=i.map(o=>o.getGui());yY(this.getGui(),n)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new pbe(e);break;case"filter":t=new dbe(e);break;default:t=new hbe(e);break}return this.createBean(t),t.setParentComponent(this),t}};var fbe=class extends U{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});let e=tr(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let r;if(typeof e=="string"?(r=this.columnModel.getCol(e),r||(r=this.visibleColService.getColumnGroup(e))):r=e,!r)return null;let n=this.ctrlsService.getHeaderRowContainerCtrl()?.getAllCtrls(),o=rt(n||[]).getType()==="filter",a=this.getHeaderRowCount()-1,s=-1,l=r;for(;l;)s++,l=l.getParent();let c=s;return t&&o&&c===a-1&&c++,c===-1?null:{headerRowIndex:c,column:r}}navigateVertically(e,t,r){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:i}=t,n=t.column,o=this.getHeaderRowCount(),a=e===0,{headerRowIndex:s,column:l,headerRowIndexWithoutSpan:c}=a?this.headerPositionUtils.getColumnVisibleParent(n,i):this.headerPositionUtils.getColumnVisibleChild(n,i),u=!1;return s<0&&(s=0,l=n,u=!0),s>=o?(s=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:s,column:l},allowUserOverride:!0,event:r})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,r){let i=this.focusService.getFocusedHeader(),n=e===2,o=this.gos.get("enableRtl"),a,s;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,n!==o?(s="Before",a=this.headerPositionUtils.findHeader(i,s)):(s="After",a=this.headerPositionUtils.findHeader(i,s)),a||!t)return this.focusService.focusHeaderPosition({headerPosition:a,direction:s,fromTab:t,allowUserOverride:!0,event:r});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:a,direction:s})}return this.focusNextHeaderRow(i,s,r)}focusNextHeaderRow(e,t,r){let i=e.headerRowIndex,n=null,o;if(t==="Before"?i>0&&(o=i-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!n)return!1;let{column:a,headerRowIndex:s}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:s},direction:t,fromTab:!0,allowUserOverride:!0,event:r})}scrollToColumn(e,t="After"){if(e.getPinned())return;let r;if(ar(e)){let i=e.getDisplayedLeafColumns();r=t==="Before"?rt(i):i[0]}else r=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(r)}},vbe=class extends U{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,r){this.comp=e,this.eGui=t,this.createManagedBean(new Eu(r,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,r=this.columnModel.getGroupRowsHeight().reduce((o,a)=>o+a,0),i=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=r,t+=i,this.headerHeight===t)return;this.headerHeight=t;let n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(r=>r.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),r=e.shiftKey,i=r!==t?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,e)||!r&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(r,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case G.LEFT:t=2;case G.RIGHT:{te(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case G.UP:t=0;case G.DOWN:{te(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(Ft(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,r){if(!e&&!r||!this.menuService.isHeaderContextMenuEnabled())return;let{target:i}=e??t;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement())&&this.menuService.showHeaderContextMenu(void 0,e,r)}mockContextMenuForIPad(e){if(!Al())return;let t=new El(this.eGui),r=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:r}),this.addDestroyFunc(()=>t.destroy())}},pP=class extends U{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=Lr(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),r=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth(),n;e?n=t+r+i:(n=t,this.addSpacer&&(this.gos.get("enableRtl")?r:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())),this.callback(n)}},mbe=class extends U{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(r=>{r.isPrimary()&&(r.isAnyFunctionActive()||(r.isAllowValue()?this.columnsToAggregate.push(r):r.isAllowRowGroup()?this.columnsToGroup.push(r):r.isAllowPivot()&&this.columnsToPivot.push(r)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function iq(e){let{isFromHeader:t,fromLeft:r,xPosition:i,fromEnter:n,fakeEvent:o,pinned:a,gos:s,columnModel:l,columnMoveService:c,visibleColsService:u}=e,{allMovingColumns:d}=e;if(t){let S=[];d.forEach(b=>{let x=null,E=b.getParent();for(;E!=null&&E.getDisplayedLeafColumns().length===1;)x=E,E=E.getParent();x!=null?(!!x.getColGroupDef()?.marryChildren?x.getProvidedColumnGroup().getLeafColumns():x.getLeafColumns()).forEach(_=>{S.includes(_)||S.push(_)}):S.includes(b)||S.push(b)}),d=S}let h=d.slice();l.sortColsLikeCols(h);let p=bbe({movingCols:h,draggingRight:r,xPosition:i,pinned:a,gos:s,columnModel:l,visibleColsService:u}),g=ybe(h,l);if(p.length===0)return;let f=p[0],v=g!==null&&!n;if(t&&(v=g!==null),v&&!o&&(!r&&f>=g||r&&f<=g))return;let m=u.getAllCols(),y=[],w=null;for(let S=0;S<p.length;S++){let b=p[S],x=c.getProposedColumnOrder(h,b);if(!c.doesOrderPassRules(x))continue;let E=x.filter(T=>m.includes(T));if(w===null)w=E;else if(!Rl(E,w))break;let M=wbe(x);y.push({move:b,fragCount:M})}if(y.length===0)return;y.sort((S,b)=>S.fragCount-b.fragCount);let C=y[0].move;if(!(C>l.getCols().length-d.length))return{columns:d,toIndex:C}}function gP(e){let{columns:t,toIndex:r}=iq(e)||{},{finished:i,columnMoveService:n}=e;return!t||r==null?null:(n.moveColumns(t,r,"uiColumnMoved",i),i?null:{columns:t,toIndex:r})}function ybe(e,t){let r=t.getCols(),i=r0e(e.map(l=>r.indexOf(l))),n=i[0];return rt(i)-n!==i.length-1?null:n}function wbe(e){function t(i){let n=[],o=i.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let r=0;for(let i=0;i<e.length-1;i++){let n=t(e[i]),o=t(e[i+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach(a=>{o.indexOf(a)===-1&&r++})}return r}function Cbe(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function bbe(e){let{movingCols:t,draggingRight:r,xPosition:i,pinned:n,gos:o,columnModel:a,visibleColsService:s}=e;if(o.get("suppressMovableColumns")||t.some(w=>w.getColDef().suppressMovable))return[];let c=Cbe(s,n),u=a.getCols(),d=c.filter(w=>wu(t,w)),h=c.filter(w=>!wu(t,w)),p=u.filter(w=>!wu(t,w)),g=0,f=i;if(r){let w=0;d.forEach(C=>w+=C.getActualWidth()),f-=w}if(f>0){for(let w=0;w<h.length;w++){let C=h[w];if(f-=C.getActualWidth(),f<0)break;g++}r&&g++}let v;if(g>0){let w=h[g-1];v=p.indexOf(w)+1}else v=p.indexOf(h[0]),v===-1&&(v=0);let m=[v],y=(w,C)=>w-C;if(r){let w=v+1,C=u.length-1;for(;w<=C;)m.push(w),w++;m.sort(y)}else{let w=v,C=u.length-1,S=u[w];for(;w<=C&&c.indexOf(S)<0;)w++,m.push(w),S=u[w];w=v-1;let b=0;for(;w>=b;)m.push(w),w--;m.sort(y).reverse()}return m}function oS(e){let{pinned:t,fromKeyboard:r,gos:i,ctrlsService:n,useHeaderRow:o,skipScrollPadding:a}=e,s=n.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:l}=e;return s?(r&&(l-=s.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(s=s.querySelector(".ag-header-row")),l=s.clientWidth-l),t==null&&!a&&(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function Uh(e,t){for(let r of e)r.setMoving(t,"uiColumnMoved")}var b$=7,L2=100,Ob=L2/2,Sbe=5,xbe=100,Dbe=class extends U{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!te(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let e=this.lastDraggingEvent?.dragItem.columns??[];for(let t of e){let r=t.getPinned();if(t.getColDef().lockPinned){if(r==this.pinned)return"move";continue}if(r===this.pinned||!this.pinned)return"move";if(!r&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let i=e.dragItem.visibleState,n=(t||[]).filter(o=>i[o.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,r=!1,i=!1){let n=this.gos.get("suppressMoveWhenColumnDragging");if(i&&!n){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&tt(e.hDirection))return;let{pinned:o,gos:a,ctrlsService:s}=this,l=oS({x:e.x,pinned:o,gos:a,ctrlsService:s});t||this.checkCenterForScrolling(l),n?this.handleColumnDragWhileSuppressingMovement(e,t,r,l,i):this.handleColumnDragWhileAllowingMovement(e,t,r,l,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,r){if(!e)return;let i=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColsVisible(i,t,r)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;let{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,r,i,n){let o=this.getAllMovingColumns(e,!0);if(n){let a=this.isAttemptingToPin(o);a&&this.attemptToPinColumns(o,void 0,!0);let{fromLeft:s,xPosition:l}=this.getNormalisedXPositionInfo(o,a)||{};if(s==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:r,fromLeft:s})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,r,i,n){let o=this.getAllMovingColumns(e),a=this.normaliseDirection(e.hDirection)===1,s=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:s,xPosition:i,fromLeft:a,fromEnter:t,fakeEvent:r}),c=gP(Xe(ue({},l),{finished:n}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let r=e.dragSource.getDragItem(),i=null;t?(i=r.columnsInSplit,i||(i=r.columns)):i=r.columns;let n=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(n):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:r,xPosition:i,fromLeft:n,fromEnter:o,fakeEvent:a}=e,{pinned:s,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}=this;return{allMovingColumns:t,isFromHeader:r,fromLeft:n,xPosition:i,pinned:s,fromEnter:o,fakeEvent:a,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}}findFirstAndLastMovingColumns(e){let t=e.length,r,i;for(let n=0;n<=t;n++){if(!r){let o=e[n];o.getLeft()!=null&&(r=o)}if(!i){let o=e[t-1-n];o.getLeft()!=null&&(i=o)}if(r&&i)break}return{firstMovingCol:r,lastMovingCol:i}}highlightHoveredColumn(e,t){let{gos:r,columnModel:i}=this,n=r.get("enableRtl"),o=i.getCols().filter(u=>u.isVisible()&&u.getPinned()===this.pinned),a=null,s=null,l=null;for(let u of o){if(s=u.getActualWidth(),a=this.getNormalisedColumnLeft(u,0,n),a!=null){let d=a+s;if(a<=t&&d>=t){l=u;break}}a=null,s=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let u=o.length-1;u>=0;u--){let d=o[u],h=o[u].getParent();if(!h){l=d;break}let p=h?.getDisplayedLeafColumns();if(p.length){l=rt(p);break}}if(!l)return;a=this.getNormalisedColumnLeft(l,0,n),s=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||a==null||s==null)return;let c;t-a<s/2!==n?c=0:c=1,l.setHighlighted(c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){let{gos:r,visibleColsService:i}=this,n=r.get("enableRtl"),{firstMovingCol:o,column:a,position:s}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!a||s==null)return;let l=i.getAllCols(),c=l.indexOf(o),u=l.indexOf(a),d=s===0!==n,h=c<u||c===u&&!d,p=0;if(d?h&&(p-=1):h||(p+=1),u+p===c)return;let g=l[u+p];if(!g)return;let f=this.getNormalisedColumnLeft(g,20,n);return{fromLeft:h,xPosition:f}}getColumnMoveAndTargetInfo(e,t,r){let i=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!n||!o||i.column||!t)return ue({firstMovingCol:n},i);let s=this.getPinDirection()==="left";return{firstMovingCol:n,position:s?1:0,column:s!==r?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,r){let{gos:i,ctrlsService:n}=this,o=e.getLeft();if(o==null)return null;let a=e.getActualWidth();return oS({x:r?o+a-t:o+t,pinned:e.getPinned(),useHeaderRow:r,skipScrollPadding:!0,gos:i,ctrlsService:n})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,r=this.failedMoveAttempts>b$;return t&&r||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:r,fromEnter:i,fakeEvent:n,fromLeft:o}=e,a=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:r,fromLeft:o,fromEnter:i,fakeEvent:n}),{columns:s,toIndex:l}=iq(a)||{};s&&l!=null&&(this.lastMovedInfo={columns:s,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.ctrlsService.get("center"),r=t.getCenterViewportScrollLeft(),i=r+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<r+Ob,this.needToMoveLeft=e>i-Ob):(this.needToMoveLeft=e<r+Ob,this.needToMoveRight=e>i-Ob),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),xbe),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*Sbe,e>L2&&(e=L2);let t=null,r=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=r.scrollHorizontally(-e):this.needToMoveRight&&(t=r.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=b$+1)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){let i=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(i,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,r=!1){let i=(e||[]).filter(n=>!n.getColDef().lockPinned);return i.length?(r&&(t=this.getPinDirection()),this.columnModel.setColsPinned(i,t,"uiColumnDragged"),r&&this.dragAndDropService.nudge(),i.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},Ebe=class extends U{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new Dbe(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new mbe(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},Mbe=class extends U{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,r,i,n){super(),this.pinned=e,this.column=t,this.eResize=r,this.comp=i,this.ctrl=n}postConstruct(){let e=[],t,r,i=()=>{if(Lt(this.eResize,t),!t)return;let a=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(a),r){let s=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",s)};this.eResize.addEventListener("dblclick",l);let c=new El(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},n=()=>{e.forEach(a=>a()),e.length=0},o=()=>{let a=this.column.isResizable(),s=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==t||s!==r)&&(t=a,r=s,n(),i())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){let{column:r,lastResizeAmount:i,resizeStartWidth:n}=this,o=this.normaliseResizeAmount(t),a=n+o,s=[{key:r,newWidth:a}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=vv(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(o-i)>u)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(s,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,r=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?r&&(t*=-1):i&&(t*=-1),t}},Tbe=class extends U{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Ft(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new tP),this.cbSelectAll.addCssClass("ag-header-select-all"),Gi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),r=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${r})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return G2(this.gos)?!0:(q(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return Ut(this.gos)||os(this.gos)?!0:(q(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),r=this.isCurrentPageOnly(),i="uiSelectAll";r?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");let n={source:i,justFiltered:t,justCurrentPage:r};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){let e=this.gos.get("rowSelection"),t=typeof e=="object"&&qb(e)&&gv(this.column),r=this.column.getColDef().headerCheckboxSelection,i=!1;return t?i=!0:typeof r=="function"?i=r(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):i=!!r,i&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},_be=class extends dS{constructor(e,t,r){super(e,t,r),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,r,i,n){this.comp=e,n=fv(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:a=>this.setRefreshFunction("measuring",a),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new Mbe(this.getPinned(),this.column,r,e,this)),n.createManagedBean(new cP([this.column],t)),n.createManagedBean(new lP(this.column,t,this.beans)),n.createManagedBean(new Eu(t,{shouldStopEventPropagation:a=>this.shouldStopEventPropagation(a),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(n)),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let o=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;let r=this.column.getActualWidth(),i=this.column.getMinWidth(),n=this.column.getMaxWidth(),o=Math.min(Math.max(r+e,i),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,beans:r,column:i,ctrlsService:n}=this,{gos:o,columnModel:a,columnMoveService:s,visibleColsService:l}=r,c=this.getPinned(),u=t.getBoundingClientRect().left,d=i.getActualWidth(),h=o.get("enableRtl"),g=oS({x:e===0!==h?u-20:u+d+20,pinned:c,fromKeyboard:!0,gos:o,ctrlsService:n}),f=this.focusService.getFocusedHeader();gP({allMovingColumns:[i],isFromHeader:!0,fromLeft:e===1,xPosition:g,pinned:c,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:a,columnMoveService:s,visibleColsService:l,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&f&&this.restoreFocus(f)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:Xe(ue({},e),{column:this.column})})}setupUserComp(e){let t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){let t=this.createParams(e),r=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(r,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:r=>{this.menuService.showColumnMenu({column:this.column,buttonElement:r,positionBy:"button"})},showColumnMenuAfterMouseClick:r=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:r,positionBy:"mouse"})},showFilter:r=>{this.menuService.showFilterMenu({column:this.column,buttonElement:r,containerType:"columnFilter",positionBy:"button"})},progressSort:r=>{this.beans.sortController.progressSort(this.column,!!r,"uiColumnSorted")},setSort:(r,i)=>{this.beans.sortController.setSortForColumn(this.column,r,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(r,i)=>{this.setupTooltip(e,r,i)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new Tbe(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===G.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===G.ENTER&&this.onEnterKeyDown(e),e.key===G.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let r=this.comp.getUserCompInstance();!r||!(r instanceof A2)||r.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,r){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui,o=this.column.getColDef();!r&&i&&!o.headerComponent&&(r=()=>{let l=n.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});let a={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:r},s=e.createManagedBean(new Zh(a));this.setRefreshFunction("tooltip",()=>s.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),r=KY(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(r),r.forEach(n=>{i.has(n)?i.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),i.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:r,displayName:i,dragAndDropService:n,gos:o}=this,{columnModel:a}=r,s=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>s?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{s=!o.get("suppressDragLeaveHidesColumns"),Uh([t],!0)},onDragStopped:()=>Uh([t],!1),onDragCancelled:()=>Uh([t],!1),onGridEnter:c=>{if(s){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];a.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(s){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];a.setColsVisible(u,!1,"uiColumnMoved")}}};n.addDragSource(l,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){let t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let r=this.column.getActualWidth();this.comp.setWidth(`${r}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let r=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",r),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,r=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",r)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:r,beans:i}=this,n=this.beans.columnModel.getGroupRowsHeight(),o=n.reduce((d,h)=>d+=h,0)===0;if(r.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),r.addOrRemoveCssClass("ag-header-span-height",!1),r.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:a,isSpanningTotal:s}=this.column.getColumnGroupPaddingInfo();r.addOrRemoveCssClass("ag-header-span-height",a>0);let{columnModel:l}=i,c=l.getColumnHeaderRowHeight();if(a===0){r.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${c}px`);return}r.addOrRemoveCssClass("ag-header-span-total",s);let u=0;for(let d=0;d<a;d++)u+=n[n.length-1-d];e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${c+u}px`)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(F0e(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Ft(this.beans.gos)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,r)=>t==="filter"?-1:r.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let r=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",r)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){let t=n=>this.handleMouseOverChange(n.type==="mouseenter"),r=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),i=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:r,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof A2?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},Rbe=class extends U{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,r,i){super(),this.eResize=t,this.comp=e,this.pinned=r,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let r=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||r.push(n.getColId())}),r.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:r,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,r="uiColumnResized"){let i=this.normaliseDragChange(t),n=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(n,r,e)}getInitialValues(e){let t=this.getColumnsToResize(),r=this.getInitialSizeOfColumns(t),i=this.getSizeRatiosOfColumns(t,r),n={columnsToResize:t,resizeStartWidth:r,resizeRatios:i},o=null;if(e&&(o=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),o){let a=o.getDisplayedLeafColumns(),s=n.groupAfterColumns=a.filter(c=>c.isResizable()),l=n.groupAfterStartWidth=this.getInitialSizeOfColumns(s);n.groupAfterRatios=this.getSizeRatiosOfColumns(s,l)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:r,resizeRatios:i,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:a}=e;this.resizeCols=t,this.resizeStartWidth=r,this.resizeRatios=i,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=a}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),r=this.getInitialValues();t>r.resizeStartWidth&&this.resizeColumns(r,t,e,!0)}resizeColumnsFromLocalValues(e,t,r=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,e,t,r)}resizeColumns(e,t,r,i=!0){let{columnsToResize:n,resizeStartWidth:o,resizeRatios:a,groupAfterColumns:s,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:n,ratios:a,width:t}),s){let d=t-o;u.push({columns:s,ratios:c,width:l-d})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:i,source:r}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,r)=>t+r.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(r=>r.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Abe=class extends U{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},Ibe=class extends dS{constructor(e,t,r){super(e,t,r),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let i=this.getGui();this.setDragSource(i)}},this.column=e}setComp(e,t,r,i,n){this.comp=e,n=fv(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:i,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let o=this.getParentRowCtrl().getPinned(),a=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new cP(a,t)),n.createManagedBean(new lP(this.column,t,this.beans)),n.createManagedBean(new Abe(e,this.column)),this.resizeFeature=n.createManagedBean(new Rbe(e,r,o,this.column)),n.createManagedBean(new Eu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,a),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,r=e.get("groupHeaderHeight");r!=null?r===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(r):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let r of t)e.addManagedListeners(r,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,r)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),r=t[0]===e,i=rt(t)===e;if(!r&&!i)return;let n=e.getHighlighted(),o=!!this.getParentRowCtrl().findHeaderCellCtrl(l=>l.getColumnGroupChild().isMoving()),a=!1,s=!1;if(o){let l=this.beans.gos.get("enableRtl"),c=n===1,u=n===0;r&&(l?s=c:a=u),i&&(l?a=u:s=c)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",a),this.comp.addOrRemoveCssClass("ag-header-highlight-after",s)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;let r=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(r,r.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:r,column:i,ctrlsService:n}=this,{gos:o,columnModel:a,columnMoveService:s,visibleColsService:l}=t,c=o.get("enableRtl"),u=e===0,d=this.getPinned(),h=r.getBoundingClientRect(),p=h.left,g=h.width,f=oS({x:u!==c?p-20:p+g+20,pinned:d,fromKeyboard:!0,gos:o,ctrlsService:n}),v=i.getGroupId(),m=this.focusService.getFocusedHeader();gP({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:f,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:a,columnMoveService:s,visibleColsService:l,finished:!0});let y=i.getDisplayedLeafColumns(),w=u?y[0]:rt(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(w,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&m&&this.restoreFocus(v,i,m)}restoreFocus(e,t,r){let i=t.getLeafColumns();if(!i.length)return;let n=i[0].getParent();if(!n)return;let o=this.findGroupWidthId(n,e);o&&this.focusService.focusHeaderPosition({headerPosition:Xe(ue({},r),{column:o})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,n)=>{this.setupTooltip(e,i,n)}}),r=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(r)}addHeaderMouseListeners(e){let t=n=>this.handleMouseOverChange(n.type==="mouseenter"),r=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:r,contextmenu:i})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,r){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.column.getColGroupDef(),n=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!r&&n&&!i?.headerGroupComponent&&(r=()=>{let s=o.querySelector(".ag-header-group-text");return s?s.scrollWidth>s.clientWidth:!0});let a={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(i&&i.headerTooltip),shouldDisplayTooltip:r};i&&(a.getColDef=()=>i),e.createManagedBean(new Zh(a))}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let r=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:r,expandableChanged:r})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=KY(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(r=>this.comp.addOrRemoveCssClass(r,!0))}setupMovingCss(e){let r=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());r.forEach(n=>{e.addManagedListeners(n,{movingChanged:i})}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===G.ENTER){let r=this.column,i=!r.isExpanded();this.beans.columnModel.setColumnGroupOpened(r.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:r,displayName:i,gos:n,dragAndDropService:o}=this,{columnModel:a}=t,s=r.getProvidedColumnGroup().getLeafColumns(),l=!n.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(r),onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),Uh(s,!0)},onDragStopped:()=>Uh(s,!1),onDragCancelled:()=>Uh(s,!1),onGridEnter:u=>{if(l){let{columns:d=[],visibleState:h}=u??{},p=d.filter(g=>!g.getColDef().lockVisible&&(!h||h[g.getColId()]));a.setColsVisible(p,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let d=u?.columns?.filter(h=>!h.getColDef().lockVisible)||[];a.setColsVisible(d,!1,"uiColumnMoved")}}};o.addDragSource(c,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),r={};t.forEach(a=>r[a.getId()]=a.isVisible());let i=[];this.beans.visibleColsService.getAllCols().forEach(a=>{t.indexOf(a)>=0&&(i.push(a),fi(t,a))}),t.forEach(a=>i.push(a));let n=[],o=e.getLeafColumns();for(let a of i)o.indexOf(a)!==-1&&n.push(a);return{columns:i,columnsInSplit:n,visibleState:r}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(r=>{(r.getColDef().suppressMovable||r.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Pbe=0,h2=class extends U{constructor(e,t,r){super(),this.instanceId=Pbe++,this.rowIndex=e,this.pinned=t,this.type=r;let i=r=="group"?"ag-header-row-column-group":r=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Lr(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,r=!0){this.comp=e,t=fv(this,this.beans.context,t),r&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:r=>this.onVirtualColumnsChanged(r.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",r=>this.isEnsureDomOrder=r.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Hb(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=Lr(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,r=[],i=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();r.push(...i),r.push(n),t?.hasFloatingFilters()&&r.push(e.getFloatingFiltersHeight());let o=0;for(let s=0;s<this.rowIndex;s++)o+=r[s];let a=r[this.rowIndex];return{topOffset:o,rowHeight:a}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),r=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,r,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,e);let r=i=>{let{focusService:n,visibleColsService:o}=this.beans;return n.isHeaderWrapperFocused(i)?o.isVisible(i.getColumnGroupChild()):!1};if(e)for(let[i,n]of e)r(n)?this.headerCellCtrls.set(i,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let r=e.getUniqueId(),i;if(t&&(i=t.get(r),t.delete(r)),i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":i=this.createBean(new Ibe(e,this.beans,this));break;default:i=this.createBean(new _be(e,this.beans,this));break}this.headerCellCtrls.set(r,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:r}=this.beans;return["left",null,"right"].forEach(i=>{let n=r.getHeadersToRender(i,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;let t=this.getHeaderCellCtrls(),r;return typeof e=="function"?r=t.find(e):r=t.find(i=>i.getColumnGroupChild()==e),r}focusHeader(e,t){let r=this.findHeaderCellCtrl(e);return r?r.focus(t):!1}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},kbe=class extends U{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let r=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:r,advancedFilterEnabledChanged:r});let i=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(i,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new Yh,r=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{let s=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<s;l++){let c=this.createBean(new h2(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},n=()=>{let s=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==s);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new h2(s,this.pinned,"column")))},o=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let s=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){s();return}let l=t.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&s()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new h2(l,this.pinned,"filter")))};i(),n(),o();let a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(r)}getHeaderCtrlForColumn(e){if(_l(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let r=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(r)return r}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let r=this.getAllCtrls()[e];return r?r.getType():void 0}focusHeader(e,t,r){let n=this.getAllCtrls()[e];return n?n.focusHeader(t,r):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new Ebe(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new pP(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let r=()=>{let i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;let n=i==0,o=this.hidden!==n,a=this.gos.get("enableRtl"),s=this.scrollVisibleService.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&t)?i+s:i;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!n),o&&(this.hidden=n,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}},Lbe='<div class="ag-pinned-left-header" role="rowgroup"></div>',Fbe='<div class="ag-pinned-right-header" role="rowgroup"></div>',Obe=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,p2=class extends st{constructor(e){super(),this.eCenterContainer=ge,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:r=>this.setDisplayed(r),setCtrls:r=>this.setCtrls(r),setCenterWidth:r=>this.eCenterContainer.style.width=r,setViewportScrollLeft:r=>this.getGui().scrollLeft=r,setPinnedContainerWidth:r=>{let i=this.getGui();i.style.width=r,i.style.maxWidth=r,i.style.minWidth=r}};this.createManagedBean(new kbe(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",r=e?Lbe:t?Fbe:Obe;this.setTemplate(r),this.eRowContainer=this.eCenterContainer!==ge?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let r,i=n=>{let o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),r&&mY(this.eRowContainer,o,r),r=o};e.forEach(n=>{let o=n.instanceId,a=t[o];delete t[o];let s=a||this.createBean(new gbe(n));this.headerRowComps[o]=s,this.rowCompsList.push(s),i(s)}),Tl(t).forEach(n=>this.destroyRowComp(n))}},Nbe=class extends st{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(i,n)=>this.addOrRemoveCssClass(i,n),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new vbe).setComp(e,this.getGui(),this.getFocusableElement());let r=i=>{this.createManagedBean(i),this.appendChild(i)};r(new p2("left")),r(new p2(null)),r(new p2("right"))}},zbe={selector:"AG-HEADER-ROOT",component:Nbe};var fP=class extends U{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},r=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(r,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(q(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Vbe=class extends st{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=ge,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==G.TAB||e.defaultPrevented||rs(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let r=!1;e.shiftKey?r=this.focusService.focusGridView(rt(this.visibleColsService.getAllCols()),!0,!1):r=this.focusService.focusNextGridCoreContainer(!1),r&&e.preventDefault()}updateLayoutClasses(e,t){let r=this.eOverlayWrapper.classList;r.toggle("ag-layout-auto-height",t.autoHeight),r.toggle("ag-layout-normal",t.normal),r.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new fP(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,r,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),r&&this.focusService.isGridFocused()){let n=Ft(this.gos);n&&!V$(this.gos)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!n)return;if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,i)){let a=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:s})=>{a.refresh?.(this.gos.addGridCommonParams(ue({},s??{})))})}let o=this.focusService;r&&o.isGridFocused()&&o.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);let r=this.updateListenerDestroyFunc;r&&(r(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Kr(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},Bbe={selector:"AG-OVERLAY-WRAPPER",component:Vbe},nq=class extends st{constructor(e,t){super(),this.direction=t,this.eViewport=ge,this.eContainer=ge,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",uY()||Al())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=hY(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),r=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:r,touchend:r})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewportElement();Wye(()=>Do(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Gbe=class extends nq{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=ge,this.eRightSpacer=ge}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new pP(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),r=!this.enableRtl&&e,i=this.scrollVisibleService.getScrollbarWidth();r&&(t+=i),xo(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=i),xo(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=i)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,r=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleService.getScrollbarWidth()||0,o=r?0:i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),rv(this.getGui(),o),rv(this.eViewport,o),rv(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return tS(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){Do(this.getViewportElement())||this.attemptSettingScrollPosition(e),rS(this.getViewportElement(),e,this.enableRtl)}},Hbe={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Gbe},oq=class extends U{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Ube=class extends nq{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new oq(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,r=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=r===0&&t?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),xo(this.getGui(),i),xo(this.eViewport,i),xo(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,r=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),n=r.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!Do(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},Wbe={selector:"AG-FAKE-VERTICAL-SCROLL",component:Ube},F2=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(F2||{}),jbe=class extends U{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=gi(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=gi(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(let e of Object.values(F2)){let t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),r=t?gi(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),i=t?gi(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:r}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...Object.values(F2),"Viewport"]){if(this.lastScrollSource[1]===t)continue;let r=this.getViewportForSource(t);rS(r,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:r}=t;if(this.shouldBlockScrollUpdate(1,r,!0))return;let i=tS(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent(Xe(ue({},t),{type:"bodyScrollEnd"}))},100)}shouldBlockScrollUpdate(e,t,r=!1){return r&&!Al()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=X2(this.eBodyViewport),{scrollHeight:r}=this.eBodyViewport;return e<0||e+t>r}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:r}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&eS()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>r}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&eS()?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),rS(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let r=this.rowModel.getRowCount(),i=-1;for(let n=0;n<r;n++){let o=this.rowModel.getRow(n);if(typeof e=="function"){if(o&&e(o)){i=n;break}}else if(e===o||e===o.data){i=n;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(Lr(this.gos,"print"))return;let r=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=r){q("Invalid row index for ensureIndexVisible: "+e);return}let n=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{n||this.paginationService?.goToPageWithIndex(e);let o=this.ctrlsService.getGridBodyCtrl(),a=o.getStickyTopHeight(),s=o.getStickyBottomHeight(),l=this.rowModel.getRow(e),c;do{let u=l.rowTop,d=l.rowHeight,h=this.pageBoundsService.getPixelOffset(),p=l.rowTop-h,g=p+l.rowHeight,f=this.getVScrollPosition(),v=this.heightScaler.getDivStretchOffset(),m=f.top+v,y=f.bottom+v,w=y-m,C=this.heightScaler.getScrollPositionForPixel(p),S=this.heightScaler.getScrollPositionForPixel(g-w),b=Math.min((C+S)/2,p),x=m+a>p,E=y-s<g,M=null;t==="top"?M=C:t==="bottom"?M=S:t==="middle"?M=b:x?M=C-a:E&&(M=S+s),M!==null&&(this.setVerticalScrollPosition(M),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||d!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let r=this.columnModel.getCol(e);if(!r||r.isPinned()||!this.visibleColsService.isColDisplayed(r))return;let i=this.getPositionedHorizontalScroll(r,t);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:r,columnAfterEnd:i}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl,s=(a?r:i)||n,l=a?i:r;t!=="auto"&&(s=t==="start",l=t==="end");let c=t==="middle";if(s||l||c){let{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(e);return c?d-o/2:s?a?h:u:a?u-o:h-o}return null}isColumnOutsideViewport(e){let{start:t,end:r}=this.getViewportBounds(),{colLeft:i,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,a=o?t>n:r<n,s=o?r<i:t>i;return{columnBeforeStart:a,columnAfterEnd:s}}getColumnBounds(e){let t=this.enableRtl,r=this.visibleColsService.getBodyContainerWidth(),i=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,a=t?r-n:n,s=a+i*o,l=a+i/2*o;return{colLeft:a,colMiddle:l,colRight:s}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),r=t,i=e+t;return{start:r,end:i,width:e}}},$be=class extends U{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=vv(e);if(t<=50)return;let r=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns");r.length&&(i&&(r=i({columns:r,viewportWidth:t})),this.columnModel.setColsPinned(r,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),r=this.pinnedWidthService.getPinnedLeftWidth(),i=t+r;if(i<e)return[];let n=[...this.visibleColsService.getLeftCols()],o=[...this.visibleColsService.getRightCols()],a=0,s=0,l=0,c=[],u=i-l-e;for(;(s<n.length||a<o.length)&&u>0;){if(a<o.length){let d=o[a++];u-=d.getActualWidth(),c.push(d)}if(s<n.length&&u>0){let d=n[s++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=X2(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},Ybe=class extends U{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{ga(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),ga(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},qbe=class extends st{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[rP]),this.eCheckbox=ge}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),r=Y2(e,t),[i,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(i,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${r})`)}onClicked(e,t,r){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:r.shiftKey,groupSelectsFiltered:t,event:r,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>jh(i),click:i=>{jh(i);let n=H2(this.gos)==="filteredDescendants",o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,n)?this.onClicked(!0,n,i||{})===0&&this.onClicked(!1,n,i):o?this.onClicked(!1,n,i):this.onClicked(!0,n,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),B2(this.gos)||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&Ut(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let n=this.overrides?.callbackParams;if(!this.column)e=t(Xe(ue({},n),{node:this.rowNode,data:this.rowNode.data}));else{let o=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(ue(ue({},n),o))}}else e=t??!1;let r=this.gos.get("rowSelection");if(r&&typeof r!="string"?!Kye(r):this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;let e=this.gos.get("rowSelection");return e&&typeof e!="string"?Wh(e):this.column?.getColDef()?.checkboxSelection}},Kbe=class extends st{constructor(e,t,r){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=r}postConstruct(){this.getGui().appendChild(nn("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let r=()=>{try{let i=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",i),e.dataTransfer.setData("text/plain",i)}catch{}};if(t){let i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(i)}else r()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},Zbe=class extends U{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,r=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,r,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let r=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=e.cellStyle;t=i(r)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(r=>this.cellComp.addOrRemoveCssClass(r,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(r=>this.cellComp.addOrRemoveCssClass(r,!0))}destroy(){super.destroy()}},Xbe=class extends U{constructor(e,t,r,i,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case G.ENTER:this.onEnterKeyDown(e);break;case G.F2:this.onF2KeyDown(e);break;case G.ESCAPE:this.onEscapeKeyDown(e);break;case G.TAB:this.onTabKeyDown(e);break;case G.BACKSPACE:case G.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case G.DOWN:case G.UP:case G.RIGHT:case G.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:r,beans:i,rowNode:n}=this,{gos:o,rangeService:a,eventService:s}=i;if(!r.isEditing()){if(s.dispatchEvent({type:"keyShortcutChangedCellStart"}),bCe(e,o.get("enableCellEditingOnBackspace"))){if(a&&ga(o))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(r.isCellEditable()){let l=r.getColumn(),c=this.beans.valueService.getDeleteValue(l,n);n.setDataValue(l,c,"cellClear")}}else r.startRowOrCellEdit(e,t);s.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?G.UP:G.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(G.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(G.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let i=e.key;i===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(i,e)&&e.preventDefault()}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&$b(t)){let r=this.rowNode.isSelected(),i=!r,n=H2(t)==="filteredDescendants",o=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});r===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},Qbe=class extends U{constructor(e,t,r){super(),this.cellCtrl=e,this.beans=t,this.column=r}onMouseEvent(e,t){if(!rs(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:r,gos:i}=this.beans,n=e.ctrlKey||e.metaKey;r&&n&&r.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&r.intersectLastRange(!0);let o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);let a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(o)})},0),(i.get("singleClickEdit")||a.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&r?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Al()||Y$("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:r,cellCtrl:i}=this,{eventService:n,frameworkOverrides:o,gos:a}=r,s=t.getColDef(),l=i.createEvent(e,"cellDoubleClicked");n.dispatchEvent(l),typeof s.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{s.onCellDoubleClicked(l)})},0),!a.get("singleClickEdit")&&!a.get("suppressClickEdit")&&i.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:r,shiftKey:i}=e,n=e.target,{cellCtrl:o,beans:a}=this,{eventService:s,rangeService:l,focusService:c,gos:u}=a;if(this.isRightClickInExistingRange(e))return;let d=l&&l.getCellRanges().length!=0;if(!i||!d){let p=u.get("enableCellTextSelection")&&e.defaultPrevented,g=(fa()||p)&&!o.isEditing()&&!Z2(n);o.focusCell(g)}if(i&&d&&!c.isCellFocused(o.getCellPosition())){e.preventDefault();let h=c.getFocusedCell();if(h){let{column:p,rowIndex:g,rowPinned:f}=h,m=a.rowRenderer.getRowByPosition({rowIndex:g,rowPinned:f})?.getCellCtrl(p);m?.isEditing()&&m.stopEditing(),c.setFocusedCell({column:p,rowIndex:g,rowPinned:f,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(l){let h=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(h);else{let p=t||r;l.setRangeToCell(h,p)}}s.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let r=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(r&&i)return!0}return!1}containsWidget(e){return Hh(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),r=t.contains(e.target),i=t.contains(e.relatedTarget);return r&&i}destroy(){super.destroy()}},Jbe=class extends U{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();Rl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let r=this.column,i=this.column.getPinned();for(let n=0;r&&n<e&&(t.push(r),r=this.beans.visibleColsService.getColAfter(r),!(!r||tt(r)||i!==r.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=rt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let r=this.beans.visibleColsService.getBodyContainerWidth();return t+r+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let r=yu(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${r}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var Zf="ag-cell-range-selected",eSe="ag-cell-range-chart",tSe="ag-cell-range-single-cell",rSe="ag-cell-range-chart-category",iSe="ag-cell-range-handle",nSe="ag-cell-range-top",oSe="ag-cell-range-right",aSe="ag-cell-range-bottom",sSe="ag-cell-range-left",lSe=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Zf,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Zf}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Zf}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Zf}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Zf}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(eSe,this.hasChartRange),Qb(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(tSe,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),r=!t&&e.top,i=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(nSe,r),this.cellComp.addOrRemoveCssClass(oSe,i),this.cellComp.addOrRemoveCssClass(aSe,n),this.cellComp.addOrRemoveCssClass(sSe,o)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(r=>wu([1,0],r.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,r=!1,i=!1,n=!1,o=this.cellCtrl.getCellPosition().column,a=this.beans.visibleColsService,s,l;e?(s=a.getColAfter(o),l=a.getColBefore(o)):(s=a.getColBefore(o),l=a.getColAfter(o));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));s||(n=!0),l||(r=!0);for(let u=0;u<c.length&&!(t&&r&&i&&n);u++){let d=c[u],h=this.rangeService.getRangeStartRow(d),p=this.rangeService.getRangeEndRow(d);!t&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(i=!0),!n&&s&&d.columns.indexOf(s)<0&&(n=!0),!r&&l&&d.columns.indexOf(l)<0&&(r=!0)}return{top:t,right:r,bottom:i,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(iSe,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),r=t.length;if(this.rangeCount<1||r<1)return!1;let i=rt(t),n=this.cellCtrl.getCellPosition(),o=s$(e)&&!this.cellCtrl.isSuppressFillHandle(),a=Jye(e),s=r===1&&!this.cellCtrl.isEditing()&&(o||a);if(this.hasChartRange){let c=t[0].type===1&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass(rSe,c),s=i.type===0}return s&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,n)}addSelectionHandle(){let e=rt(this.rangeService.getCellRanges()).type,r=s$(this.beans.gos)&&tt(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==r&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(r)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},cSe="ag-cell",uSe="ag-cell-auto-height",dSe="ag-cell-normal-height",hSe="ag-cell-focus",pSe="ag-cell-first-right-pinned",gSe="ag-cell-last-left-pinned",fSe="ag-cell-not-inline-editing",vSe="ag-column-hover",mSe="ag-cell-wrap-text",ySe=0,aq=class O2 extends U{constructor(t,r,i,n){super(),this.column=t,this.rowNode=r,this.beans=i,this.rowCtrl=n,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+ySe++,this.colIdSanitised=pa(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new Jbe(this,this.beans),this.cellCustomStyleFeature=new Zbe(this,this.beans),this.cellMouseListenerFeature=new Qbe(this,this.beans,this.column),this.cellKeyboardListenerFeature=new Xbe(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&ga(this.beans.gos)&&(this.cellRangeFeature=new lSe(this.beans,this))}removeFeatures(){let t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,r){let i=()=>{let a=this.column.getColDef(),s=this.rowNode.data;if(a.tooltipField&&te(s))return tv(s,a.tooltipField,this.column.isTooltipFieldContainsDots());let l=a.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!r&&n&&!this.isCellRenderer()&&(r=()=>{let a=this.getGui(),s=a.children.length===0?a:a.querySelector(".ag-cell-value");return s?s.scrollWidth>s.clientWidth:!0});let o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:r};this.tooltipFeature=new Zh(o,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,r,i,n,o,a){this.cellComp=t,this.eGui=r,this.printLayout=n,a??(a=this),this.addDomData(a),this.addFeatures(),a.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,a),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(r),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,r),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(s=>s()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,r){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let i=t.parentElement,n=Ml(this.beans.gos,this.rowNode).height,o=l=>{if(this.editing||!this.isAlive()||!r.isAlive())return;let{paddingTop:c,paddingBottom:u,borderBottomWidth:d,borderTopWidth:h}=Du(i),p=c+u+d+h,f=t.offsetHeight+p;if(l<5){let m=tr(this.beans.gos),y=!m||!m.contains(t),w=f==0;if(y||w){window.setTimeout(()=>o(l+1),0);return}}let v=Math.max(f,n);this.rowNode.setRowAutoHeight(v,this.column)},a=()=>o(0);a();let s=this.beans.resizeObserverService.observeResize(t,a);r.addDestroyFunc(()=>{s(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){let{beans:r,column:i,rowNode:n,cellRangeFeature:o,cellComp:a}=this,{userComponentFactory:s,animationFrameService:l}=r,c=this.getValueToDisplay(),u;if(n.stub&&n.groupData?.[this.column.getId()]==null){let h=this.createCellRendererParams();u=s.getLoadingCellRendererDetails(i.getColDef(),h)}else if(this.isCellRenderer()){let h=this.createCellRendererParams();u=s.getCellRendererDetails(i.getColDef(),h)}a.setRenderDetails(u,c,t),l.requestAnimationFrame(()=>o?.refreshHandle())}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){let{rowSelection:r}=this.beans.gridOptions;return t.checkboxSelection||gv(this.column)&&r&&typeof r!="string"&&Wh(r)}refreshShouldDestroy(){let t=this.column.getColDef(),r=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return r||i||n||o}startEditing(t=null,r=!1,i=null){let{editService:n}=this.beans;return!this.isCellEditable()||this.editing||!n?!0:this.cellComp?n.startEditing(this,t,r,i):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,r,i)}),!0)}setEditing(t,r){this.editCompDetails=r,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];let{editService:r}=this.beans;return!this.editing||!r?!1:r.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:r=>this.beans.valueService.setValue(this.rowNode,this.column,r),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(r,i,n,o)=>this.registerRowDragger(r,i,o),setTooltip:(r,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(r,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;let r=this.column.getColDef(),i=t!=null&&!!t.newData,n=t!=null&&!!t.suppressFlash||!!r.suppressCellFlash,o=r.field==null&&r.valueGetter==null&&r.showRowGroup==null,a=t&&t.forceRefresh||o||i,s=!!this.cellComp,l=this.updateAndFormatValue(s),c=a||l;if(s){if(c){this.showValue(i);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!n&&!u&&(this.beans.gos.get("enableCellChangeFlash")||r.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,r=!1){this.beans.editService?.stopEditingAndFocus(this,t,r)}flashCell(t){let r=t?.flashDuration??t?.flashDelay,i=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",r,i)}animateCell(t,r,i){if(!this.cellComp)return;let{gos:n}=this.beans;if(r||(r=n.get("cellFlashDuration")),r===0)return;te(i)||(i=n.get("cellFadeDuration"));let o=`ag-cell-${t}`,a=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(a,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(a,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(a,!1),this.eGui.style.transition="")},i))},r)})}onFlashCells(t){if(!this.cellComp)return;let r=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[r]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let r=this.value,i=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(r,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(t,r){let i=this.column.getColDef();return i.equals?i.equals(t,r):t===r}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){let r=this.getGui();Su(this.beans.gos,r,O2.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Su(this.beans.gos,r,O2.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,r){return this.beans.gos.addGridCommonParams({type:r,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,r){this.cellMouseListenerFeature?.onMouseEvent(t,r)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:r,beans:i}=this;ZY(t,r,i.visibleColsService)}refreshAriaColIndex(){let t=this.beans.visibleColsService.getAriaColIndex(this.column);lY(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,r=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,r):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,r)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&Un(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(pSe,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(gSe,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;let r=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){r&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(hSe,r),r&&t&&t.forceBrowserFocus){let n=this.cellComp.getFocusableElement();if(this.editing){let o=this.beans.focusService.findFocusableElements(n,null,!0);o.length&&(n=o[0])}n.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}let i=this.beans.gos.get("editType")==="fullRow";!r&&!i&&this.editing&&this.stopRowOrCellEdit(),r&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:ts(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(cSe,!0),this.cellComp.addOrRemoveCssClass(fSe,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(uSe,t),this.cellComp.addOrRemoveCssClass(dSe,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(vSe,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(mSe,t)}dispatchCellContextMenuEvent(t){let r=this.column.getColDef(),i=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(i),r.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{r.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new qbe;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new Kbe(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,r,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,r);return}let n=this.createRowDragComp(t,r,i);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,r,i){let n=this.beans.gos.get("pagination"),o=this.beans.gos.get("rowDragManaged"),a=Ut(this.beans.gos);if(o){if(!a){q("managed row dragging is only allowed in the Client Side Row Model");return}if(n){q("managed row dragging is not possible when doing pagination");return}}let s=new I2(()=>this.value,this.rowNode,this.column,t,r,i);return this.beans.context.createBean(s),s}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};aq.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Cu=aq,wSe=0,sq=class N2 extends U{constructor(t,r,i,n,o){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=r,this.gos=r.gos,this.rowNode=t,this.paginationPage=r.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=n,this.printLayout=o,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+wSe++,this.rowId=pa(t.id),this.initRowBusinessKey(),this.rowFocused=r.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=r.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=pa(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,r){t==="left"?this.leftGui=r:t==="right"?this.rightGui=r:t==="fullWidth"?this.fullWidthGui=r:this.centerGui=r}setComp(t,r,i,n){n=fv(this,this.beans.context,n);let o={rowComp:t,element:r,containerType:i,compBean:n};this.allRowGuis.push(o),this.updateGui(i,o),this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(r=>r.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let r=t?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=r)}initialiseRowComp(t){let r=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),$b(r)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>i.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Xb(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Su(r,t.element,N2.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Su(r,t.element,N2.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),r.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=pa(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:r}=t;this.slideInAnimation[r]&&(o$(()=>{this.onTopChanged()}),this.slideInAnimation[r]=!1),this.fadeInAnimation[r]&&(o$(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[r]=!1)}addRowDraggerToRow(t){if(ga(this.gos)){q("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}let r=this.beans.localeService.getLocaleTextFunc(),i=new I2(()=>`1 ${r("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(i,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){let r=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;let i=this.createFullWidthCompDetails(t.element,r);t.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){let r=this.getCellCtrl(t);return r?r.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let r={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(r)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),r=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&r&&i}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),r=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer&&sS(this.gos,n);t?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":r?this.rowType="FullWidth":a?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,r=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(r);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,r,i=null){let n={list:[],map:{}},o=(a,s)=>{n.list.push(s),n.map[a]=s};return r.forEach(a=>{let s=a.getInstanceId(),l=t.map[s];l||(l=new Cu(a,this.rowNode,this.beans,this)),o(s,l)}),t.list.forEach(a=>{let s=a.getColumn().getInstanceId();if(n.map[s]!=null)return;if(!this.isCellEligibleToBeRemoved(a,i)){o(s,a);return}a.destroy()}),n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(r=>{let i=this.getCellCtrlsForContainer(r.containerType);r.rowComp.setCellCtrls(i,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.columnViewportService,r=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,r.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let n=r.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");let o=r.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(t,r){if(t.getColumn().getPinned()!=r)return!0;let a=t.isEditing(),s=this.beans.focusService.isCellFocused(t.getCellPosition());if(a||s){let c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Lr(this.gos,"print")}listenOnDomOrder(t){let r=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],r)}setAnimateFlags(t){if(this.isSticky()||!t)return;let r=te(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),n=this.beans.visibleColsService.isPinningRight();if(r){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(s,l)=>s?s.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(s.element,l).params):!0,r=t(this.fullWidthGui,null),i=t(this.centerGui,null),n=t(this.leftGui,"left"),o=t(this.rightGui,"right");return r&&i&&n&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(r=>{this.addRowDraggerToRow(r)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(r=>r.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(r=>{let i=t===0,n=t===1;r.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),r.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),r=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&r),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!r),Xb(i.element,t&&r)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:ts(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(r=>r.element.contains(t))}onKeyboardNavigate(t){let r=this.findFullWidthRowGui(t.target);if(!((r?r.element:null)===t.target))return;let o=this.rowNode,a=this.beans.focusService.getFocusedCell(),s={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:a?.column??this.getColumnForFullWidth(r)};this.beans.navigationService.navigateToNextCell(t,t.key,s,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||rs(t))return;let r=this.allRowGuis.find(l=>l.element.contains(t.target)),i=r?r.element:null,n=i===t.target,o=Ft(this.gos),a=!1;i&&o&&(a=i.contains(o)&&o.classList.contains("ag-cell"));let s=null;!n&&!a&&(s=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&n||!s)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(r=>Do(r.element))?.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){let r=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(i=>{Un(i.element,"tabindex",r)})}onFullWidthRowFocused(t){let r=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===r.rowIndex&&t.rowPinned==r.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;n&&(n.classList.toggle("ag-full-width-focus",i),i&&t?.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,r){let i={list:[],map:{}};return t.list.forEach(n=>{n!==r&&(i.list.push(n),i.map[n.getColumn().getInstanceId()]=n)}),i}onMouseEvent(t,r){switch(t){case"dblclick":this.onRowDblClick(r);break;case"click":this.onRowClick(r);break;case"touchstart":case"mousedown":this.onRowMouseDown(r);break}}createRowEvent(t,r){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:r})}createRowEventWithSource(t,r){let i=this.createRowEvent(t,r);return i.source=this,i}onRowDblClick(t){rs(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){let{visibleColsService:r}=this.beans;switch(t?.containerType){case"center":return r.getCenterCols()[0];case"left":return r.getLeftCols()[0];case"right":return r.getRightCols()[0];default:return r.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Hh(t.target,"ag-row-drag",3),!this.isFullWidth())return;let r=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let i=this.findFullWidthRowGui(t.target),n=i?.element,o=t.target,a=!0;n&&n.contains(o)&&Z2(o)&&(a=!1),this.beans.focusService.setFocusedCell({rowIndex:r.rowIndex,column:this.getColumnForFullWidth(i),rowPinned:r.rowPinned,forceBrowserFocus:a})}onRowClick(t){if(rs(t)||this.lastMouseDownOnDragger)return;let{gos:i}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));let n=t.ctrlKey||t.metaKey,o=t.shiftKey,a=this.rowNode.isSelected(),s=xu(i),l=l$(i),c=e0e(i);if(s&&this.rowNode.group||this.isRowSelectionBlocked()||!c&&!a||!l&&a)return;let u=t0e(i),d="rowClicked";if(a)u?this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):n?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):c&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:d});else{let h=u?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:h,rangeSelect:o,event:t,source:d})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!$b(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let r=()=>{let n=t.clientHeight;if(n!=null&&n>0){let o=()=>{this.rowNode.setRowHeight(n),(Ut(this.gos)||os(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(o,0)}},i=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(i),r()}createFullWidthCompDetails(t,r){let{gos:i,rowNode:n}=this,o=i.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:t,eParentOfValue:t,pinned:r,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,l,c,u)=>this.addFullWidthRowDragging(s,l,c,u),setTooltip:(s,l)=>this.refreshRowTooltip(s,l)}),a=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return a.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return a.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return a.getFullWidthLoadingCellRendererDetails(o);default:return a.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(t,r){if(!this.fullWidthGui)return;let i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:r};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Zh(i,this.beans))}addFullWidthRowDragging(t,r,i="",n){if(!this.isFullWidth())return;let o=new I2(()=>i,this.rowNode,void 0,t,r,n);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let r="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(r,!0),n.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),r=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==r&&(this.lastRowOnPage=r,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",r)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(){let t=this.editingRow||this.getAllCellCtrls().some(r=>r.isEditing());this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),r.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,r=null,i=null){return this.editingRow?!0:this.beans.rowEditService?.startEditing(this,t,r,i)??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(r=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(r,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,r){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(r,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let r=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:r};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){q("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let r=this.gos.getCallback("getRowStyle"),i;if(r){let n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=r(n)}return i||t?Object.assign({},t,i):this.emptyStyle}onRowSelected(t){let r=!!this.rowNode.isSelected();this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",r),Qb(i.element,r),i.element.contains(Ft(this.gos))&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&!l$(this.gos))return;let i=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;let{element:r,compBean:i}=t,{rowNode:n,beans:o,gos:a}=this;i.addManagedListeners(r,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),i.addManagedListeners(n,{mouseEnter:()=>{!o.dragService.isDragging()&&!a.get("suppressRowHoverHighlight")&&(r.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{r.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){let r=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(r.top,!0)-100,n=this.applyPaginationOffset(r.bottom,!0)+100;return Math.min(Math.max(i,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,r){t?r(t):this.allRowGuis.forEach(r)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let r=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),o=N$(this.gos)?Ml(this.gos,this.rowNode).height:void 0,a=o?`${Math.min(i,o)-2}px`:void 0;this.forEachGui(t,s=>{s.element.style.height=`${r}px`,a&&s.element.style.setProperty("--ag-line-height",a)})}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}destroyFirstPass(t=!1){if(this.active=!1,!t&&Gh(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){let n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let r=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(r),this.beans.eventService.dispatchEvent(r),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=r=>(r.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,r=>{r.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),r.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,r=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let i=this.beans.pageBoundsService.getPixelOffset();return t+i*(r?1:-1)}setRowTop(t){if(!this.printLayout&&te(t)){let r=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let r=this.rowNode,i;if(this.isSticky())i=r.stickyRowTop;else{let n=this.slideInAnimation[t]?this.roundRowTopToBounds(r.oldRowTop):r.rowTop,o=this.applyPaginationOffset(n);i=r.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(r=>this.suppressRowTransform?r.rowComp.setTop(t):r.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let r=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==t&&(r=i)}),r!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(t)>=0&&(r=i)}),r}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let r=this.rowNode.getRowIndexString();if(r===null)return;let i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),n=this.rowNode.rowIndex%2===0,o=i+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(r),a.rowComp.addOrRemoveCssClass("ag-row-even",n),a.rowComp.addOrRemoveCssClass("ag-row-odd",!n),sY(a.element,o)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};sq.DOM_DATA_KEY_ROW_CTRL="renderedRow";var bu=sq,CSe=class extends U{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Y$("touchstart")?"touchstart":"mousedown"].forEach(r=>{let i=this.processMouseEvent.bind(this,r);this.addManagedElementListeners(this.element,{[r]:i})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||rs(t))return;let r=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,r,i):(i&&i.onMouseEvent(e,t),r&&r.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Al())return;let e=new El(this.element),t=r=>{let i=this.getRowForEvent(r.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(r.touchEvent);this.handleContextMenuMouseEvent(void 0,r.touchEvent,i,n)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let r=sv(this.gos,t,bu.DOM_DATA_KEY_ROW_CTRL);if(r)return r;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,r,i){let n=r?r.getRowNode():null,o=i?i.getColumn():null,a=null;if(o){let c=e||t;i.dispatchCellContextMenuEvent(c??null),a=this.valueService.getValue(o,n)}let s=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():s.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:o,value:a,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:S2(this.gos,e,Cu.DOM_DATA_KEY_CELL_CTRL),rowCtrl:S2(this.gos,e,bu.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:r,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(r?this.processCellKeyboardEvent(r,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,r){let i=e.getRowNode(),n=e.getColumn(),o=e.isEditing();!P2(this.gos,r,i,n,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(r)||e.onKeyDown(r),this.doGridOperations(r,e.isEditing()),VY(r)&&e.processCharacter(r)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(r,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,r){let i=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!P2(this.gos,r,i,o,!1)){let s=r.key;if(t==="keydown")switch(s){case G.PAGE_HOME:case G.PAGE_END:case G.PAGE_UP:case G.PAGE_DOWN:this.navigationService.handlePageScrollingKey(r,!0);break;case G.UP:case G.DOWN:e.onKeyboardNavigate(r);break;case G.TAB:e.onTabKeyDown(r);break;default:}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",r))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let r=CCe(e);if(r===G.A)return this.onCtrlAndA(e);if(r===G.C)return this.onCtrlAndC(e);if(r===G.D)return this.onCtrlAndD(e);if(r===G.V)return this.onCtrlAndV(e);if(r===G.X)return this.onCtrlAndX(e);if(r===G.Y)return this.onCtrlAndY();if(r===G.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:r,rangeService:i}=this;if(i&&r.isRowsToRender()){let[n,o]=[t.isEmpty("top"),t.isEmpty("bottom")],a=n?null:"top",s,l;o?(s=null,l=r.getRowCount()-1):(s="bottom",l=t.getPinnedBottomRowCount()-1);let c=this.visibleColsService.getAllCols();if(on(c))return;i.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:l,rowEndPinned:s,columnStart:c[0],columnEnd:rt(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t?.isEditing()||r?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t?.isEditing()||r?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:r}=this.getControlsForEventTarget(e.target);t?.isEditing()||r?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},bSe=class extends U{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Lt(this.element,t),xo(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},SSe=class extends U{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Lt(this.element,t),xo(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Nb=e=>e.getTopRowCtrls(),zb=e=>e.getStickyTopRowCtrls(),Vb=e=>e.getStickyBottomRowCtrls(),Bb=e=>e.getBottomRowCtrls(),Gb=e=>e.getCentreRowCtrls(),xSe={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Gb},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Gb},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Gb},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Gb},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Nb},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Nb},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Nb},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Nb},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:zb},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:zb},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:zb},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:zb},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Vb},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Vb},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Vb},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Vb},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Bb},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Bb},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Bb},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Bb}};function Bh(e){return xSe[e]}var DSe=["topCenter","topLeft","topRight"],ESe=["bottomCenter","bottomLeft","bottomRight"],MSe=["center","left","right"],TSe=["center","left","right","fullWidth"],_Se=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],RSe=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],ASe=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],lq=["stickyTopCenter","stickyTopLeft","stickyTopRight"],cq=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],ISe=[...lq,"stickyTopFullWidth",...cq,"stickyBottomFullWidth"],PSe=[...DSe,...ESe,...MSe,...lq,...cq],kSe=class extends U{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Bh(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new $be(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,r){this.comp=e,this.eContainer=t,this.eViewport=r,this.createManagedBean(new CSe(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let i=()=>this.onPinnedWidthChanged();this.forContainers(RSe,()=>{this.pinnedWidthFeature=this.createManagedBean(new bSe(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:i})}),this.forContainers(ASe,()=>{this.pinnedWidthFeature=this.createManagedBean(new SSe(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:i})}),this.forContainers(TSe,()=>this.createManagedBean(new oq(this.eContainer,this.name==="center"?r:void 0))),this.forContainers(PSe,()=>this.createManagedBean(new Ybe(this.eContainer))),this.forContainers(_Se,()=>this.createManagedBean(new pP(n=>this.comp.setContainerWidth(`${n}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(ISe.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let r=this.gos.get("ensureDomOrder"),i=Lr(this.gos,"print");this.comp.setDomOrder(r||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),r=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,r,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return vv(this.eViewport)}getCenterViewportScrollLeft(){return tS(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return vY(this.eViewport)}getViewportScrollLeft(){return tS(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||rwe(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){rS(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let r=Lr(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||r,o=t.filter(a=>{let s=a.isFullWidth();return this.options.fullWidth?!n&&s:n||!s});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},uq="ag-force-vertical-scroll",LSe="ag-selectable",FSe="ag-column-moving",OSe=class extends U{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,r,i,n,o,a){this.comp=e,this.eGridBody=t,this.eBodyViewport=r,this.eTop=i,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=a,this.eCenterColsViewport=r.querySelector(`.${Bh("center").viewport}`),this.eFullWidthContainer=r.querySelector(`.${Bh("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${Bh("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=a.querySelector(`.${Bh("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",s=>this.setCellTextSelection(s.currentValue)),this.createManagedBean(new fP(this.comp)),this.bodyScrollFeature=this.createManagedBean(new jbe(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,r,n,o,a]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){let e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:r=>{let{target:i}=r,n=Hh(i,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:r=>{let{target:i,relatedTarget:n}=r,o=t.contains(n),a=Hh(n,"ag-root",t);Hh(i,"ag-root",t)||(!o||a)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(FSe,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(LSe,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=hY()?16:0,i=`calc(100% + ${t+r}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=r=>{let i=r.relatedTarget;if(R2(i)===null){this.rowRenderer.stopEditing();return}let n=t.some(o=>o.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!n){let o=this.popupService;n=o.getActivePopups().some(a=>a.contains(i))||o.isElementWithinCustomPopup(i)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(r=>this.addManagedElementListeners(r,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,r=t===-1?-1:e+t;this.comp.setRowCount(r)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?uq:null,r=Lr(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||r&&iwe(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let r=e&&Gh(this.gos)&&!this.rowContainerHeightService.isStretching(),i=r?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,r)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:r,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(r))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaX:t,deltaY:r,shiftKey:i}=e,n=i||Math.abs(t)>Math.abs(r),o=e.target;n?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(r))}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:r}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||r})}onBodyViewportContextMenu(e,t,r){if(!e&&!r)return;this.gos.get("preventDefaultOnContextMenu")&&(e||r).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:r,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Al())return;let t=new El(this.eBodyViewport),r=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:r}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Jwe(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),r=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(r),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(r?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),r=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;t>0&&(i+=t),r>0&&(i+=r),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),r=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,i=e+r;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(e,t){let i=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,o=vv(this.eGridBody)-i;if(o>0){this.columnSizeService.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):q("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},NSe=class extends st{constructor(e,t,r,i,n){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;let o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);let a=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),Gi(a,t.getCellAriaRole()),a.setAttribute("col-id",t.colIdSanitised);let s={addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>wY(a,l),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,u)=>this.setRenderDetails(l,c,u),setEditDetails:(l,c,u)=>this.setEditDetails(l,c,u),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(s,this.getGui(),this.eCellWrapper,r,n,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,r){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(r||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,r){e?this.createCellEditorInstance(e,t,r):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,r=t||this.forceWrapper,i=r&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let n=!r&&this.eCellWrapper!=null;n&&(Gn(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!r);let o=!e&&r,a=o&&this.eCellValue==null;if(a){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let s=!o&&this.eCellValue!=null;s&&(Gn(this.eCellValue),this.eCellValue=void 0);let l=i||n||a||s;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,r){let i=this.editorVersion,n=e.newAgStackInstance();if(n==null)return;let{params:o}=e;n.then(s=>this.afterCellEditorCreated(i,s,o,t,r)),tt(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();Kr(t);let r=e!=null?pa(e,!0):null;r!=null&&(t.textContent=r)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Gn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Gn(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let r=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:n}=e,o=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let s=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,n);s&&s.then(l)};r&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,r){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(r);return}if(this.cellRenderer=r,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let n=this.getParentOfValue();Kr(n),n.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,r,i,n){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){q(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let s=i||t.isPopup!==void 0&&t.isPopup();s?this.addPopupCellEditor(r,n):this.addInCellEditor(),this.refreshEditStyles(!0,s),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss()}addInCellEditor(){let e=this.getGui();e.contains(Ft(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&q("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let r=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let n=this.beans.popupService,o=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),a=t??r.getPopupPosition?.()??"over",s=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:s?"right":"left",keepWithinBounds:!0},c=n.positionPopupByComponent.bind(n,l),u=this.beans.localeService.getLocaleTextFunc(),d=n.addPopup({modal:o,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(Ft(this.beans.gos))&&_2()&&e.focus({preventScroll:!0}),Kr(this.getParentOfValue())}},zSe=class extends st{constructor(e,t,r){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(r)),this.setTemplateFromElement(i);let n=this.getGui(),o=n.style;this.domOrder=this.rowCtrl.getDomOrder(),Gi(n,"row");let a={setDomOrder:s=>this.domOrder=s,setCellCtrls:s=>this.setCellCtrls(s),showFullWidth:s=>this.showFullWidth(s),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(s,l)=>this.addOrRemoveCssClass(s,l),setUserStyles:s=>wY(n,s),setTop:s=>o.top=s,setTransform:s=>o.transform=s,setRowIndex:s=>n.setAttribute("row-index",s),setRowId:s=>n.setAttribute("row-id",s),setRowBusinessKey:s=>n.setAttribute("row-business-key",s),refreshFullWidth:s=>this.fullWidthCellRenderer?.refresh?.(s())??!1};e.setComp(a,this.getGui(),r,void 0),this.addDestroyFunc(()=>{e.unsetComp(r)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=i=>{if(this.isAlive()){let n=i.getGui();this.getGui().appendChild(n),this.rowCtrl.setupDetailRowAutoHeight(n),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},r=e.newAgStackInstance();r?.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(i=>{let n=i.instanceId;this.cellComps[n]==null?this.newCellComp(i):t[n]=null});let r=Tl(t).filter(i=>i!=null);this.destroyCells(r),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(r=>{let i=this.cellComps[r.instanceId];i&&t.push(i.getGui())}),yY(this.getGui(),t)}newCellComp(e){let t=new NSe(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=Tl(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&ht("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;let r=t.getCtrl().instanceId;this.cellComps[r]===t&&(t.detach(),t.destroy(),this.cellComps[r]=null)})}};function VSe(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var BSe=class extends st{constructor(){super(),this.eViewport=ge,this.eContainer=ge,this.rowComps={},this.name=st.elementGettingCreated.getAttribute("name"),this.options=Bh(this.name),this.setTemplate(VSe(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setHorizontalScroll:r=>this.eViewport.scrollLeft=r,setViewportHeight:r=>this.eViewport.style.height=r,setRowCtrls:({rowCtrls:r})=>this.setRowCtrls(r),setDomOrder:r=>{this.domOrder=r},setContainerWidth:r=>this.eContainer.style.width=r,setOffsetTop:r=>this.eContainer.style.transform=`translateY(${r})`};this.createManagedBean(new kSe(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){let t=ue({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let r=i=>{let n=i.instanceId,o=t[n];if(o)this.rowComps[n]=o,delete t[n],this.ensureDomOrder(o.getGui());else{if(!i.getRowNode().displayed)return;let a=new zSe(i,this.beans,this.options.type);this.rowComps[n]=a,this.appendRow(a.getGui())}};e.forEach(r),Tl(t).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),Gi(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?twe(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(mY(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},GSe={selector:"AG-ROW-CONTAINER",component:BSe};function Xf(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var HSe=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${Xf(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${Xf(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${Xf(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${Xf(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${Xf(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,USe=class extends st{constructor(){super(HSe,[Bbe,Hbe,Wbe,zbe,GSe]),this.eBodyViewport=ge,this.eStickyTop=ge,this.eStickyBottom=ge,this.eTop=ge,this.eBottom=ge,this.eBody=ge}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(r,i)=>{let n=`${r}px`;i.style.minHeight=n,i.style.height=n},t={setRowAnimationCssOnBodyViewport:(r,i)=>this.setRowAnimationCssOnBodyViewport(r,i),setColumnCount:r=>W0e(this.getGui(),r),setRowCount:r=>U0e(this.getGui(),r),setTopHeight:r=>e(r,this.eTop),setBottomHeight:r=>e(r,this.eBottom),setTopDisplay:r=>this.eTop.style.display=r,setBottomDisplay:r=>this.eBottom.style.display=r,setStickyTopHeight:r=>this.eStickyTop.style.height=r,setStickyTopTop:r=>this.eStickyTop.style.top=r,setStickyTopWidth:r=>this.eStickyTop.style.width=r,setStickyBottomHeight:r=>{this.eStickyBottom.style.height=r,this.eStickyBottom.classList.toggle("ag-hidden",r==="0px")},setStickyBottomBottom:r=>this.eStickyBottom.style.bottom=r,setStickyBottomWidth:r=>this.eStickyBottom.style.width=r,setColumnMovingCss:(r,i)=>this.addOrRemoveCssClass(r,i),updateLayoutClasses:(r,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle("ag-layout-auto-height",i.autoHeight),o.toggle("ag-layout-normal",i.normal),o.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(r,i)=>this.eBodyViewport.classList.toggle(uq,i),registerBodyViewportResizeListener:r=>{let i=this.resizeObserverService.observeResize(this.eBodyViewport,r);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:r=>this.eTop.style.overflowY=this.eBottom.style.overflowY=r,setCellSelectableCss:(r,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(n=>n.classList.toggle(r,i))},setBodyViewportWidth:r=>this.eBodyViewport.style.width=r};this.ctrl=this.createManagedBean(new OSe),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&ga(this.gos)||G2(this.gos))&&H0e(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let r=this.eBodyViewport.classList;r.toggle("ag-row-animation",t),r.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},WSe={selector:"AG-GRID-BODY",component:USe},jSe=class extends U{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),r=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==r)&&(this.horizontalScrollGap=t,this.verticalScrollGap=r,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),r=typeof e=="number"&&e>=0?e:Q0e();r!=null&&(this.scrollbarWidth=r,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},S$="__ag_grid_instance",dq=class hq extends U{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=hq.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[S$]=this.gridInstanceId}getRenderedCellForEvent(t){return S2(this.gos,t.target,Cu.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let r=t;for(;r;){let i=r[S$];if(te(i))return i===this.gridInstanceId;r=r.parentElement}return!1}getCellPositionForEvent(t){let r=this.getRenderedCellForEvent(t);return r?r.getCellPosition():null}getNormalisedPosition(t){let r=Lr(this.gos,"normal"),i=t,n,o;if(i.clientX!=null||i.clientY!=null?(n=i.clientX,o=i.clientY):(n=i.x,o=i.y),r){let a=this.ctrlsService.getGridBodyCtrl(),s=a.getScrollFeature().getVScrollPosition(),l=a.getScrollFeature().getHScrollPosition();n+=l.left,o+=s.top}return{x:n,y:o}}};dq.gridInstanceSequence=new Yh;var $Se=dq,YSe=class extends U{constructor(){super(),this.beanName="navigationService",this.onPageDown=a$(this.onPageDown,100),this.onPageUp=a$(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let r=e.key,i=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e),s=!1;switch(r){case G.PAGE_HOME:case G.PAGE_END:!n&&!i&&(this.onHomeOrEndKey(r),s=!0);break;case G.LEFT:case G.RIGHT:case G.UP:case G.DOWN:if(!a)return!1;n&&!i&&!o&&(this.onCtrlUpDownLeftRight(r,a),s=!0);break;case G.PAGE_DOWN:case G.PAGE_UP:!n&&!i&&(s=this.handlePageUpDown(r,a,t));break}return s&&e.preventDefault(),s}handlePageUpDown(e,t,r){return r&&(t=this.focusService.getFocusedCell()),t?(e===G.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:r,scrollColumn:i,focusIndex:n,focusColumn:o}=e;te(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),te(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,r),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(e){let r=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),n=this.pageBoundsService.getPixelOffset(),o=r.top+i,a=this.rowModel.getRowIndexAtPixel(o+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){let r=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),n=r.top,o=this.rowModel.getRowIndexAtPixel(n+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,r=!1){let i=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),a=this.pageBoundsService.getPixelOffset(),s=this.rowModel.getRow(e.rowIndex),l=r?s?.rowHeight-i-a:i-a,c=s?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+a);if(u===e.rowIndex){let h=r?-1:1;t=u=e.rowIndex+h}let d;r?(d="bottom",u<n&&(u=n),t<n&&(t=n)):(d="top",u>o&&(u=o),t>o&&(t=o)),this.isRowTallerThanView(u)&&(t=u,d="top"),this.navigateTo({scrollIndex:t,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,r=!1){this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,r);this.navigateTo({scrollIndex:t,scrollType:r?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let r=t?-1:1,i=this.getViewportHeight(),n=this.pageBoundsService.getLastRow(),o=0,a=e.rowIndex;for(;a>=0&&a<=n;){let s=this.rowModel.getRow(a);if(s){let l=s.rowHeight??0;if(o+l>i)break;o+=l}a+=r}return Math.max(0,Math.min(a,n))}getViewportHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth(),r=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(r-=t),r}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let r=t.rowHeight;return typeof r!="number"?!1:r>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let r=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i}=r,n=r.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:n,focusIndex:i,focusColumn:n})}onHomeOrEndKey(e){let t=e===G.PAGE_HOME,r=this.visibleColsService.getAllCols(),i=t?r[0]:rt(r),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:i,focusIndex:n,focusColumn:i})}onTabKeyDown(e,t){let r=t.shiftKey,i=this.tabToNextCellCommon(e,r,t);if(i!==!1){i?t.preventDefault():i===null&&this.focusService.allowFocusForNextGridCoreContainer(r);return}if(r){let{rowIndex:n,rowPinned:o}=e.getRowPosition();(o?n===0:n===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Cu&&e.focusCell(!0),(!r&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(r))&&t.preventDefault()}tabToNextCell(e,t){let r=this.focusService.getFocusedCell();if(!r)return!1;let i=this.getCellByPosition(r);return!i&&(i=this.rowRenderer.getRowByPosition(r),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,r){let i=e.isEditing();if(!i&&e instanceof Cu){let a=e.getRowCtrl();a&&(i=a.isEditing())}let n;return i?this.gos.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,r):n=this.moveToNextEditingCell(e,t,r):n=this.moveToNextCellNotEditing(e,t),n===null?n:n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,r=null){let i=e.getCellPosition();e.getGui().focus(),e.stopEditing();let n=this.findNextCellToFocusOn(i,t,!0);return n===!1?null:n==null?!1:(n.startEditing(null,!0,r),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,r=null){let i=e.getCellPosition(),n=this.findNextCellToFocusOn(i,t,!0);if(n===!1)return null;if(n==null)return!1;let o=n.getCellPosition(),a=this.isCellEditable(i),s=this.isCellEditable(o),l=o&&i.rowIndex===o.rowIndex&&i.rowPinned===o.rowPinned;return a&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,r)),s?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let r=this.visibleColsService.getAllCols(),i;e instanceof bu?i=Xe(ue({},e.getRowPosition()),{column:t?r[0]:rt(r)}):i=e.getCellPosition();let n=this.findNextCellToFocusOn(i,t,!1);if(n===!1)return null;if(n instanceof Cu)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return te(n)}findNextCellToFocusOn(e,t,r){let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);let n=this.gos.getCallback("tabToNextCell");if(te(n)){let l=n({backwards:t,editing:r,previousCellPosition:e,nextCellPosition:i||null});if(l===!0||l===null)l===null&&q("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(l===!1)return!1;i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let s=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:s+i.rowIndex,column:i.column},fromCell:!0}),null}let o=this.gos.get("editType")==="fullRow";if(r&&!o&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let a=this.getCellByPosition(i);if(!a){let s=this.rowRenderer.getRowByPosition(i);if(!s||!s.isFullWidth()||r)continue;return s}if(!a.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),a}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,r,i){let n=r,o=!1;for(;n&&(n===r||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===G.LEFT&&(n=this.getLastCellOfColSpan(n)):t===G.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=tt(n);if(o&&e&&e.key===G.UP&&(n={rowIndex:-1,rowPinned:null,column:r.column}),i){let s=this.gos.getCallback("navigateToNextCell");if(te(s)){let c=s({key:t,previousCellPosition:r,nextCellPosition:n||null,event:e});te(c)?n={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:n=null}}if(!n)return;if(n.rowIndex<0){let s=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:s+n.rowIndex,column:r.column},event:e||void 0,fromCell:!0});return}let a=this.getNormalisedPosition(n);a?this.focusPosition(a):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let r=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;let n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?rt(r):r[0])};this.focusPosition(o);let a=t??(n!=null&&this.rowPositionUtils.before(o,n));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:a}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let r=t.getColSpanningList();return r.length===1?e:{rowIndex:e.rowIndex,column:rt(r),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=aS(this.gos),r=this.rowModel.getRow(e.rowIndex);!(t&&r?.sticky)&&tt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},qSe=class extends U{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let r=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(r)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},KSe=class extends U{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,r){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:r,mouseEvent:t,ePopup:i})},r,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,r){let i=-1,n="left",o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(i=1,n="right");let a=o?void 0:4*i,s=o?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:r,eventSource:t,ePopup:l,nudgeX:a,nudgeY:s,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},r,t,o)}showPopup(e,t,r,i,n){let o=e?this.createBean(new oCe(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let a=document.createElement("div");Gi(a,"presentation"),a.classList.add("ag-menu"),n||a.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(a,{keydown:g=>this.trapFocusWithin(g,a)}),a.appendChild(o?.getGui());let s,l=()=>o?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=g=>{e.setMenuVisible(!1,"contextMenu");let f=g instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),f&&i&&Do(i)){let v=this.focusService.findTabbableParent(i);v&&v.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,r,e)},d=this.localeService.getLocaleTextFunc(),h=n&&r!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(a),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=s=p.hideFunc),o.afterInit().then(()=>{t(a),o.afterGuiAttached({container:r,hidePopup:s})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,r,e)}trapFocusWithin(e,t){e.key!==G.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,r){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:r??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},ZSe=class extends U{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){let i=z$(this.gos).ResizeObserver,n=i?new i(t):null;return n?.observe(e),()=>n?.disconnect()}},XSe=class extends U{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let r=this.paginationService?.getCurrentPage()??0;r!==this.lastPage&&(this.lastPage=r,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&q(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,r){this.verifyAnimationFrameOn(r);let i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[r],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((r,i)=>r.index!==i.index?t*(i.index-r.index):i.createOrder-r.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,r=t.list,i=this.createTasksP2,n=i.list,o=this.destroyTasks,a=new Date().getTime(),s=new Date().getTime()-a,l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||s<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(r.length)this.sortTaskList(t),d=r.pop().task;else if(n.length)this.sortTaskList(i),d=n.pop().task;else if(o.length)d=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}s=new Date().getTime()-a}r.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=z$(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var QSe=class extends U{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=Ut(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(r=>{r.id&&t.has(r.id)&&(r.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:r})=>{t&&r&&e.push(r)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,r,i){e&&(r&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,r,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},JSe=class extends U{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,r){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,r)}getContextMenuPosition(e,t){let r=this.getRowCtrl(e),i=this.getCellGui(r,t);if(!i)return r?{x:0,y:r.getRowYPosition()}:{x:0,y:0};let n=i.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){let t=e.rowNode,r=e.column,{anchorToElement:i,value:n}=e;t&&r&&n==null&&(n=this.valueService.getValueForDisplay(r,t)),i==null&&(i=this.getContextMenuAnchorElement(t,r)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,r??null,n,i)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:r}=e.getColDef();return!(r??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&_l(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Al()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),r=t.floatingFilterComponentParams?.suppressFilterButton;return r!=null&&q("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!r:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,r,i){let{positionBy:n}=t,o=t.column;if(n==="button"){let{buttonElement:a}=t;e.showMenuAfterButtonClick(o,a,r,i)}else if(n==="mouse"){let{mouseEvent:a}=t;e.showMenuAfterMouseEvent(o,a,r,i)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);a&&e.showMenuAfterButtonClick(o,a.getAnchorElementForMenu(i),r,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:r}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:r})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let r=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return r;let n=this.getCellGui(i,t);return n||(i.isFullWidth()?i.getFullWidthElement():r)}},exe=class extends vu{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let r=super.setValue(e,t);return this.eInput.value=e,r}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},txe={selector:"AG-INPUT-TEXT-AREA",component:exe},rxe=class extends Xh{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[txe]),this.eTextArea=ge}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),te(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===G.LEFT||t===G.UP||t===G.RIGHT||t===G.DOWN||e.shiftKey&&t===G.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!te(e)&&!te(this.params.value)?this.params.value:this.params.parseValue(e)}},ixe=class extends Xh{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Su(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,r=i=>{P2(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:r})}},nxe=class extends Xh{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[hCe]),this.eSelect=ge,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:r,gos:i}=this,{values:n,value:o,eventKey:a}=e;if(tt(n)){q("no values found for select cellEditor");return}this.startedByEnter=a!=null?a===G.ENTER:!1;let s=!1;n.forEach(d=>{let h={value:d},p=r.formatValue(e.column,null,d),g=p!=null;h.text=g?p:d,t.addOption(h),s=s||o===d}),s?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},pS=class extends Xh{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=ge}init(e){this.params=e;let{cellStartedEdit:t,eventKey:r,suppressPreventDefault:i}=e,n=this.eInput;this.cellEditorInput.init(n,e);let o,a=!0;t?(this.focusAfterAttached=!0,r===G.BACKSPACE||r===G.DELETE?o="":r&&r.length===1?i?a=!1:o=r:(o=this.cellEditorInput.getStartValue(),r!==G.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),a&&o!=null&&n.setStartValue(o),this.addManagedElementListeners(n.getGui(),{keydown:s=>{let{key:l}=s;(l===G.PAGE_UP||l===G.PAGE_DOWN)&&s.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;fa()||t.getFocusableElement().focus();let r=t.getInputElement();this.highlightAllOnFocus?r.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),r=e.getInputElement();t.focus(),r.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},oxe=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[uS]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!te(e)&&!te(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=te(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},pq=class extends pS{constructor(){super(new oxe)}},axe=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[SCe]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===G.UP||e.key===G.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!te(e)&&!te(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){fa()&&this.eInput.getInputElement().focus({preventScroll:!0})}},sxe=class extends pS{constructor(){super(new axe)}},lxe=class extends Mu{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=fa();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Ft(this.gos)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?Wn(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,Un(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?Wn(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,Un(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Un(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Bi(this.getValue())??void 0}setDate(e,t){this.setValue(Wn(e??null,!1),t)}},gq={selector:"AG-INPUT-DATE-FIELD",component:lxe},cxe=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[gq]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!te(e)&&!te(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return Wn(e,!1)}},uxe=class extends pS{constructor(){super(new cxe)}},dxe=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[gq]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!te(e)&&!te(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Wn(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Bi(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Wn(e??null,!1)??void 0}},hxe=class extends pS{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new dxe(()=>this.dataTypeService))}},pxe=class extends Xh{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[rP]),this.eCheckbox=ge}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),r=Y2(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${r})`)}},ev=class{constructor(e){this.cellValueChanges=e}},g2=class extends ev{constructor(e,t,r,i){super(e),this.initialRange=t,this.finalRange=r,this.ranges=i}},gxe=10,x$=class{constructor(e){this.actionStack=[],this.maxStackSize=e||gxe,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},fxe=class extends U{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},r=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(r||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:o,rowIndex:a,column:s,oldValue:l,value:c}=e,u={rowPinned:o,rowIndex:a,columnId:s.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new x$(e),this.redoStack=new x$(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:r=>{r.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,r=>{this.gridBodyCtrl=r.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});let t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});let t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,r,i,n){if(!e)return!1;let o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,a=>a[i],n),o instanceof g2?this.processRange(this.rangeService,o.ranges||[o[r]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,r){e.cellValueChanges.forEach(i=>{let{rowIndex:n,rowPinned:o,columnId:a}=i,s={rowIndex:n,rowPinned:o},l=this.rowPositionUtils.getRowNode(s);l.displayed&&l.setDataValue(a,t(i),r)})}processRange(e,t){let r;e.removeAllCellRanges(!0),t.forEach((i,n)=>{if(!i)return;let o=i.startRow,a=i.endRow;n===t.length-1&&(r={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(r));let s={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(s)})}processCell(e){let t=e[0],{rowIndex:r,rowPinned:i}=t,n={rowIndex:r,rowPinned:i},o=this.rowPositionUtils.getRowNode(n),a={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(a,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:r,columnId:i,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getCol(i);if(!a)return;o.ensureIndexVisible(r),o.ensureColumnVisible(a);let s={rowIndex:r,column:a,rowPinned:n};this.focusService.setFocusedCell(Xe(ue({},s),{forceBrowserFocus:!0})),t?.setRangeToCell(s)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new ev(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let r=new ev(this.cellValueChanges);this.pushActionsToUndoStack(r)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new ev(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new g2(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&ga(this.gos)?e=new g2(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new ev(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function vxe(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function mxe(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function fq(e,t,r="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,r),"ensureVisible")}function vq(e,t,r){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,r),"ensureVisible")}function yxe(e,t,r=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,r),"ensureVisible")}function wxe(e){e.undoRedoService?.undo("api")}function Cxe(e){e.undoRedoService?.redo("api")}function bxe(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(iv)}function Sxe(e){return e.rowRenderer.getEditingCells()}function xxe(e,t=!1){e.rowRenderer.stopEditing(t)}function Dxe(e,t){let r=e.columnModel.getCol(t.colKey);if(!r){q(`no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:r};t.rowPinned==null&&vq(e,t.rowIndex),fq(e,t.colKey);let o=e.navigationService.getCellByPosition(i);if(!o)return;let{focusService:a,gos:s}=e,l=()=>{let u=Ft(s),d=o.getGui();return u!==d&&!!d?.contains(u)},c=s.get("stopEditingWhenCellsLoseFocus")&&l();(c||!a.isCellFocused(i))&&a.setFocusedCell(Xe(ue({},i),{forceBrowserFocus:c,preventScrollOnBrowserFocus:!0})),o.startRowOrCellEdit(t.key)}function Exe(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function Mxe(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var Txe=class extends U{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,r=!1,i=null){let n=this.createCellEditorParams(e,t,r),o=e.getColumn().getColDef(),a=this.userComponentFactory.getCellEditorDetails(o,n),s=a?.popupFromSelector!=null?a.popupFromSelector:!!o.cellEditorPopup,l=a?.popupPositionFromSelector!=null?a.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,a),e.getComp().setEditDetails(a,s,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(i,"cellEditingStarted")),!a?.params?.suppressPreventDefault}stopEditing(e,t){let r=e.getComp(),{newValue:i,newValueExists:n}=this.takeValueFromCellEditor(t,r),o=e.getRowNode(),a=e.getColumn(),s=this.valueService.getValueForDisplay(a,o),l=!1;return n&&(l=this.saveNewValue(e,s,i,o,a)),e.setEditing(!1,void 0),r.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent(Xe(ue({},e.createEvent(null,"cellEditingStopped")),{oldValue:s,newValue:i,valueChanged:l})),l}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:r,cellStartedEdit:i}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,r,i),o=e.getColumn().getColDef(),a=this.userComponentFactory.getCellEditorDetails(o,n);t.refresh(a.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp(),r=t.getCellEditor();r?.focusIn?r.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,r=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(r,e.getCellPosition())}createPopupEditorWrapper(e){return new ixe(e)}takeValueFromCellEditor(e,t){let r={newValueExists:!1};if(e)return r;let i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?r:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t,r,i,n){if(r===t)return!1;e.setSuppressRefreshCell(!0);let o=i.setDataValue(n,r,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,r){let i=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(i,n),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:r,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:o=>this.valueService.parseValue(i,n,o,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=e?G.UP:G.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}},_xe=class extends U{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,r=null,i=null){let n=!0;return e.getAllCellCtrls().reduce((a,s)=>{let l=s===r;return l?n=s.startEditing(t,l,i):s.startEditing(null,l,i),a?!0:s.isEditing()},!1)&&this.setEditing(e,!0),n}stopEditing(e,t=!1){let r=e.getAllCellCtrls(),i=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(let o of r){let a=o.stopEditing(t);i&&!t&&!n&&a&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),i&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));let r=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(r)}},Tu={version:Fe,moduleName:"@ag-grid-community/edit-core",beans:[Txe]},Rxe={version:Fe,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:wxe,redoCellEditing:Cxe,getCellEditorInstances:bxe,getEditingCells:Sxe,stopEditing:xxe,startEditingCell:Dxe,getCurrentUndoSize:Exe,getCurrentRedoSize:Mxe},dependantModules:[Tu]},Axe={version:Fe,moduleName:"@ag-grid-community/undo-redo-edit",beans:[fxe],dependantModules:[Tu]},Ixe={version:Fe,moduleName:"@ag-grid-community/full-row-edit",beans:[_xe],dependantModules:[Tu]},mq={version:Fe,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:pq}],dependantModules:[Tu]},Pxe={version:Fe,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:pq},{name:"agNumberCellEditor",classImp:sxe,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:uxe},{name:"agDateStringCellEditor",classImp:hxe},{name:"agCheckboxCellEditor",classImp:pxe}],dependantModules:[mq]},kxe={version:Fe,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:nxe}],dependantModules:[Tu]},Lxe={version:Fe,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:rxe}],dependantModules:[Tu]},Fxe={version:Fe,moduleName:"@ag-grid-community/all-editors",dependantModules:[mq,Pxe,kxe,Lxe]},Oxe={version:Fe,moduleName:"@ag-grid-community/editing",dependantModules:[Tu,Axe,Ixe,Fxe,Rxe]},Nxe=class extends U{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let r=this.getHeaderCellForColumn(e);if(!r)return-1;let i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(r),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let r=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),r.appendChild(t);let i=t.offsetWidth;r.removeChild(t);let n=this.getAutoSizePadding();return i+n}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(r=>{let i=r.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){let r=e.cloneNode(!0);r.style.width="",r.style.position="static",r.style.left="";let i=document.createElement("div"),n=i.classList;["ag-header-cell","ag-header-group-cell"].some(s=>r.classList.contains(s))?(n.add("ag-header","ag-header-row"),i.style.position="static"):n.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(l=>a.classList.contains(l))){for(let l=0;l<a.classList.length;l++){let c=a.classList[l];c!="ag-row-position-absolute"&&n.add(c)}break}a=a.parentElement}i.appendChild(r),t.appendChild(i)}},zxe=class extends U{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=Ut(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let r=e.childStore?.getStoreBounds();return e.footer&&(r=e.sibling.childStore?.getStoreBounds()),(r?.heightPx??0)+(r?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=rt(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",r=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,r);let i=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,o=c=>{if(n.add(c),t){let u=this.getLastPixelOfGroup(c),d=i+r+c.rowHeight;u<d?c.stickyRowTop=r+(u-d):c.stickyRowTop=r}else{let u=this.getFirstPixelOfGroup(c),d=i-(r+c.rowHeight);u>d?c.stickyRowTop=r-(u-d):c.stickyRowTop=r}r=0,n.forEach(u=>{let d=u.stickyRowTop+u.rowHeight;r<d&&(r=d)})},a=this.areFooterRowsStickySuppressed(),s=this.gos.get("suppressGroupRowsSticky"),l=c=>{if(!c.displayed)return!1;if(c.footer){if(a===!0||a==="grand"&&c.level===-1||a==="group"&&c.level>-1)return!1;let u=c.sibling.rowIndex?c.sibling.rowIndex+1===c.rowIndex:!1;return e==="bottom"&&u?!1:!n.has(c)}return c.isExpandable()?s===!0||e==="bottom"?!1:!n.has(c)&&c.expanded:!1};for(let c=0;c<100;c++){let u=i+r;t||(u=i-r);let d=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(d);if(h==null)break;let g=this.getStickyAncestors(h).find(v=>(t?v.rowIndex<d:v.rowIndex>d)&&l(v));if(g){o(g);continue}if((t?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){o(h);continue}break}return t||n.forEach(c=>{c.stickyRowTop=r-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,r)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",r=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&r?!0:r?"grand":t?"group":!1}canRowsBeSticky(){let e=aS(this.gos),t=this.areFooterRowsStickySuppressed(),r=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!r)}getStickyAncestors(e){let t=[],r=e.footer?e.sibling:e.parent;for(;r;)r.sibling&&t.push(r.sibling),t.push(r),r=r.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(r=>r.getRowNode()===e)){for(let r=0;r<this.stickyTopRowCtrls.length;r++){let i=this.stickyTopRowCtrls[r].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let r=0;r<this.stickyBottomRowCtrls.length;r++){let i=this.stickyBottomRowCtrls[r].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,r){let i=e==="top",n=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},a=[];for(let h=0;h<n.length;h++){let p=n[h].getRowNode();if(!t.has(p)){o[p.id]=n[h],p.sticky=!1;continue}a.push(n[h])}let s=new Set;for(let h=0;h<a.length;h++)s.add(a[h].getRowNode());let l=[];t.forEach(h=>{s.has(h)||(h.sticky=!0,l.push(this.createRowCon(h,!1,!1)))});let c=!!l.length||a.length!==n.length;i?this.topContainerHeight!==r&&(this.topContainerHeight=r,this.gridBodyCtrl.setStickyTopHeight(r),c=!0):this.bottomContainerHeight!==r&&(this.bottomContainerHeight=r,this.gridBodyCtrl.setStickyBottomHeight(r),c=!0),this.destroyRowCtrls(o,!1);let u=[...a,...l];u.sort((h,p)=>p.getRowNode().rowIndex-h.getRowNode().rowIndex),i||u.reverse(),u.forEach(h=>h.setRowTop(h.getRowNode().stickyRowTop));let d=0;return i?(t.forEach(h=>{h.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=h.rowHeight)}),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach(h=>{h.rowIndex>this.pageBoundsService.getLastRow()&&(d+=h.rowHeight)}),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),c?(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1,t=r=>{let i=r.getRowNode();if(i.rowHeightEstimated){let n=Ml(this.gos,i);i.setRowHeight(n.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},Vxe=class extends U{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},r=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},i=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{ga(this.gos)?r():i()}),ga(this.gos)&&r()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),aS(this.gos)&&(Ut(this.gos)||os(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new zxe(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Lr(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new Bxe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=Tl(this.rowCtrlsByRowIndex),t=Tl(this.zombieRowCtrls),r=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||r.length>0?this.allRowCtrls=[...e,...t,...r]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let r=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},i=()=>{r(l=>l.onLeftChanged())},n=()=>{r(l=>l.onWidthChanged())},o=()=>{r(l=>l.onFirstRightPinnedChanged())},a=()=>{r(l=>l.onLastLeftPinnedChanged())},s=()=>{r(l=>l.onColDefChanged())};t.addEventListener("leftChanged",i),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",a),t.addEventListener("colDefChanged",s),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",i),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",a),t.removeEventListener("colDefChanged",s)})})}onDomLayoutChanged(){let e=Lr(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),r=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,r&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(r=>{let i=r.getCellElement(e);i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let{pinnedRowModel:r,beans:i,printLayout:n}=this,o=Object.fromEntries(e.map(s=>[s.getRowNode().id,s]));r.forEachPinnedRow(t,(s,l)=>{let c=e[l];c&&r.getPinnedRowById(c.getRowNode().id,t)===void 0&&(c.destroyFirstPass(),c.destroySecondPass()),s.id in o?(e[l]=o[s.id],delete o[s.id]):e[l]=new bu(s,i,!1,!1,n)});let a=t==="top"?r.getPinnedTopRowCount():r.getPinnedBottomRowCount();e.length=a}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let r=i=>{let n=i[e.rowIndex];n&&n.getRowNode()===e&&(n.destroyFirstPass(),n.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(r=>this.redrawRow(r,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let r=Ft(this.gos),i=sv(this.gos,r,Cu.DOM_DATA_KEY_CELL_CTRL),n=sv(this.gos,r,bu.DOM_DATA_KEY_ROW_CTRL);return i||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let r=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&Gh(this.gos),n=r?this.getRowsToRecycle():null;if(r||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let o=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();o&&this.updateContainerHeights(o)}this.recycleRows(n,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,r=this.gos.get("suppressScrollOnNewData");t&&!r&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),r=t.length;for(let i=0;i<r;i++){let n=t[i].getAllCellCtrls(),o=n.length;for(let a=0;a<o;a++)e.push(n[a])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],r=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let i in this.rowCtrlsByRowIndex)r.push(this.rowCtrlsByRowIndex[i]);return r}addRenderedRowListener(e,t,r){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,r)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let r of this.getCellCtrls(e.rowNodes,e.columns))r.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&_2()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let r of this.getRowCtrls(e)){if(!r.isFullWidth())continue;r.refreshFullWidth()||this.redrawRow(r.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(n=>n.getCellRenderer()).filter(n=>n!=null);if(e.columns?.length)return t;let r=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(n=>{if(i&&!this.isRowInMap(n.getRowNode(),i)||!n.isFullWidth())return;let o=n.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){let s=o[a];s!=null&&r.push(s)}}),[...r,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(r=>{let i=r.getCellEditor();i&&t.push(i)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let r=t.getCellPosition();e.push(r)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(r=>{let i=r.id;switch(r.rowPinned){case"top":t.top[i]=r;break;case"bottom":t.bottom[i]=r;break;default:t.normal[i]=r;break}}),t}isRowInMap(e,t){let r=e.id;switch(e.rowPinned){case"top":return t.top[r]!=null;case"bottom":return t.bottom[r]!=null;default:return t.normal[r]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),r=this.getAllRowCtrls();return!e||!t?r:r.filter(i=>{let n=i.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let r;te(t)&&(r={},t.forEach(n=>{let o=this.columnModel.getCol(n);te(o)&&(r[o.getId()]=!0)}));let i=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(o=>{let a=o.getColumn().getId();r&&!r[a]||i.push(o)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];Vn(this.rowCtrlsByRowIndex,(r,i)=>{i.getRowNode().id==null&&e.push(r)}),this.removeRowCtrls(e);let t={};return Vn(this.rowCtrlsByRowIndex,(r,i)=>{let n=i.getRowNode();t[n.id]=i}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(r=>{let i=this.rowCtrlsByRowIndex[r];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[r]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,r;this.stickyRowFeature&&_2()&&(r=this.getCellToRestoreFocusToAfterRefresh()||void 0);let i=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();let s=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();s&&this.updateContainerHeights(s)}let a=this.firstRenderedRow!==i||this.lastRenderedRow!==n;if(!(t&&!o&&!a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),r!=null)){let s=this.getCellToRestoreFocusToAfterRefresh();r!=null&&s==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(e,t){let r={};e.forEach(o=>r[o]=!0);let n=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!r[o]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){let t=ECe(this.firstRenderedRow,this.lastRenderedRow),r=(n,o)=>{let a=o.getRowNode().rowIndex;a!=null&&(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(a)};Vn(this.rowCtrlsByRowIndex,r),Vn(e,r),t.sort((n,o)=>n-o);let i=[];for(let n=0;n<t.length;n++){let o=t[n],a=this.rowModel.getRow(o);a&&!a.sticky&&i.push(o)}return i}recycleRows(e,t=!1,r=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||r)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);let n=[];i.forEach(o=>{let a=this.createOrUpdateRowCtrl(o,e,t,r);te(a)&&n.push(a)}),e&&(r&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let r=t.getRowNode().rowIndex;e.push(r.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(r=>{if(!r.isFullWidth())return!1;let i=r.getRowNode();return!(t!=null&&!this.isRowInMap(i,t))})}createOrUpdateRowCtrl(e,t,r,i){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.rowModel.getRow(e),te(n)&&te(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.rowModel.getRow(e)),te(n))o=this.createRowCon(n,r,i);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){let r=[];Vn(e,(i,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}if(n.destroyFirstPass(!t),t){let o=n.instanceId;this.zombieRowCtrls[o]=n,r.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[o]})}else n.destroySecondPass()}}),t&&(r.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),Hye(r))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=yu(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let s=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,d,h;do{let m=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:y,pageLastPixel:w}=this.pageBoundsService.getCurrentPagePixelRange(),C=this.rowContainerHeightService.getDivStretchOffset(),S=l.getScrollFeature().getVScrollPosition(),b=S.top,x=S.bottom;c?(d=y+C,h=w+C):(d=Math.max(b+m-s,y)+C,h=Math.min(x+m+s,w)+C),this.firstVisibleVPixel=Math.max(b+m,y)+C,this.lastVisibleVPixel=Math.min(x+m,w)+C,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(u);let p=this.rowModel.getRowIndexAtPixel(d),g=this.rowModel.getRowIndexAtPixel(h),f=this.pageBoundsService.getFirstRow(),v=this.pageBoundsService.getLastRow();p<f&&(p=f),g>v&&(g=v),e=p,t=g}let r=Lr(this.gos,"normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);r&&!i&&t-e>n&&(t=e+n);let o=e!==this.firstRenderedRow,a=t!==this.lastRenderedRow;(o||a)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let r=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||n||r?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let i=e.getRowNode(),n=this.focusService.isRowNodeFocused(i),o=e.isEditing(),a=i.detail;return n||o||a?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,r){let i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;let n=this.gos.get("suppressAnimationFrame"),o=r&&!n&&!this.printLayout;return new bu(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:r}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[r];break;case"bottom":t=this.bottomRowCtrls[r];break;default:t=this.rowCtrlsByRowIndex[r],t||(t=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===r)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===r)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},Bxe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,r=this.entriesMap[t];delete this.entriesMap[t],fi(this.entriesList,r)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],fi(this.entriesList,e)}getEntries(){return this.entriesList}},Gxe=class extends U{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new D$,this.pinnedBottomRows=new D$}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){let t=r=>{r.setRowHeight(r.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,r=i=>{if(i.rowHeightEstimated){let n=Ml(this.gos,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return this.pinnedBottomRows?.forEach(r),t=0,this.pinnedTopRows?.forEach(r),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let r=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){r.clear();return}let i=Kh(this.gos),n=t==="top"?is.ID_PREFIX_TOP_PINNED:is.ID_PREFIX_BOTTOM_PINNED,o=r.getIds(),a=[],s=new Set,l=0,c=-1;for(let u of e){let d=i?.({data:u,level:0,rowPinned:t})??n+this.nextId++;if(s.has(d)){q("Duplicate ID",d,"found for pinned row with data",u,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,s.add(d),a.push(d);let h=r.getById(d);if(h!==void 0)h.data!==u&&h.setData(u),l+=this.setRowTopAndRowIndex(h,l,c),o.delete(d);else{let p=new is(this.beans);p.id=d,p.data=u,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),r.push(p)}}o.forEach(u=>{r.getById(u)?.clearRowTopAndRowIndex()}),r.removeAllById(o),r.setOrder(a)}setRowTopAndRowIndex(e,t,r){return e.setRowTop(t),e.setRowHeight(Ml(this.gos,e).height),e.setRowIndex(r),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){let t=e.getSize();if(t===0)return 0;let r=e.getByIndex(t-1);return r===void 0?0:r.rowTop+r.rowHeight}},D$=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){let t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(let t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,r)=>{let i=this.cache[t];i&&e(i,r)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}};var Hxe=class extends U{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,r){this.successCommon(e,{rowData:t,rowCount:r})}isRequestMostRecentAndLive(e){let t=e===this.version,r=this.isAlive();return t&&r}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},Uxe=class extends U{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=gi(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){fi(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Bn("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(r=>r.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(r=>r.load()),this.printCacheStatus()}getBlockState(){if(os(this.gos))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:r,state:i}=t.getBlockStateJson();e[r]=i}),e}printCacheStatus(){this.gos.get("debug")&&Bn(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},Wxe={version:Fe,moduleName:"@ag-grid-community/row-node-block",beans:[Uxe]},jxe=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let r=t[0].id===this.root.id,i=t.findIndex(n=>n.id===e.id);if(i>-1){let n=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),r?{keep:n,discard:o}:{keep:o,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){let r=this.getRoot();if(r==null){let n=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&n.push(o)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(r,e).find(n=>n.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}},$xe=class extends U{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,r,i){this.processClassRules(void 0,e.cellClassRules,t,r,i),this.processStaticCellClasses(e,t,r)}processClassRules(e,t,r,i,n){if(t==null&&e==null)return;let o={},a={},s=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){let l=Object.keys(t);for(let c=0;c<l.length;c++){let u=l[c],d=t[u],h;typeof d=="string"?h=this.expressionService.evaluate(d,r):typeof d=="function"&&(h=d(r)),s(u,p=>{h?o[p]=!0:a[p]=!0})}}e&&n&&Object.keys(e).forEach(l=>s(l,c=>{o[c]||(a[c]=!0)})),n&&Object.keys(a).forEach(n),Object.keys(o).forEach(i)}getStaticCellClasses(e,t){let{cellClass:r}=e;if(!r)return[];let i;return typeof r=="function"?i=r(t):i=r,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(e,t,r){this.getStaticCellClasses(e,t).forEach(n=>{r(n)})}};var Yxe=class extends U{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:r,eBottomGuard:i,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:a,focusInnerElement:s,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=r,this.eBottomGuard=i,this.providedFocusInnerElement=s,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!a,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Eu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=tr(this.gos),r=this.focusService.findFocusableElements(t.body,null,!0),i=r.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let n,o;e?(n=0,o=i):(n=i+1,o=r.length);let a=r.slice(n,o),s=this.gos.get("tabIndex");a.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===s?1:u===s?-1:u===0?1:d===0?-1:u-d}),a[e?a.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let r=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),r&&(r.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},qxe=class extends U{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:r,eFocusableElement:i}=this,n=[t,r],o={setTabIndex:f=>{n.forEach(v=>f!=null?v.setAttribute("tabindex",f):v.removeAttribute("tabindex"))}};this.addTabGuards(t,r);let{focusTrapActive:a=!1,onFocusIn:s,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new Yxe({comp:o,focusTrapActive:a,eTopGuard:t,eBottomGuard:r,eFocusableElement:i,onFocusIn:s,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=tr(this.gos).createElement("div"),r=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",r),Gi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];Kr(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,r){J2(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,r)}},yq=class extends st{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new qxe(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Kxe=0,Zxe=200,Xxe=class extends U{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:r}=e,i=this.getPopupIndex(r);if(i!==-1){let p=this.popupList[i];p.alignedToElement=t}let n=t.getBoundingClientRect(),o=this.getParentRect(),a=this.keepXYWithinBounds(r,n.top-o.top,0),s=r.clientWidth>0?r.clientWidth:200;r.style.minWidth=`${s}px`;let c=o.right-o.left-s,u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=d(),this.setAlignedStyles(r,"left")),u>c&&(u=0,this.setAlignedStyles(r,"right"))):(u=d(),u>c&&(u=h(),this.setAlignedStyles(r,"right")),u<0&&(u=0,this.setAlignedStyles(r,"left"))),r.style.left=`${u}px`,r.style.top=`${a}px`;function d(){return n.right-o.left-2}function h(){return n.left-o.left-s}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:r,nudgeY:i,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:n,eventSource:o,alignSide:a="left",position:s="over",column:l,rowNode:c,type:u}=e,d=o.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(p!==-1){let f=this.popupList[p];f.alignedToElement=o}let g=()=>{let f=d.left-h.left;a==="right"&&(f-=t.offsetWidth-d.width);let v;return s==="over"?(v=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?v=d.top-h.top+d.height:v=d.top-t.offsetHeight-(i||0)*2-h.top),{x:f,y:v}};this.positionPopup({ePopup:t,nudgeX:r,nudgeY:i,keepWithinBounds:n,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(u,t,o,null,l,c)})}shouldRenderUnderOrAbove(e,t,r,i){let n=r.bottom-t.bottom,o=t.top-r.top,a=e.offsetHeight+i;return n>a?"under":o>a||o>n?"above":"under"}setAlignedStyles(e,t){let r=this.getPopupIndex(e);if(r===-1)return;let i=this.popupList[r],{alignedToElement:n}=i;!n||(["right","left","over","above","under"].forEach(a=>{n.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,r,i,n,o){let a=this.gos.getCallback("postProcessPopup");a&&a({column:n,rowNode:o,ePopup:t,type:e,eventSource:r,mouseEvent:i})}positionPopup(e){let{ePopup:t,keepWithinBounds:r,nudgeX:i,nudgeY:n,skipObserver:o,updatePosition:a}=e,s={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=a();c&&t.clientWidth===s.width&&t.clientHeight===s.height||(s.width=t.clientWidth,s.height=t.clientHeight,i&&(u+=i),n&&(d+=n),r&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){let c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),Zxe)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=tr(this.gos),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),fY(t)}keepXYWithinBounds(e,t,r){let i=r===0,n=i?"clientHeight":"clientWidth",o=i?"top":"left",a=i?"height":"width",s=i?"scrollTop":"scrollLeft",l=tr(this.gos),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),h=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=u===l.body,f=Math.ceil(d[a]),m=g?(i?gY:Jb)(c)+c[s]:u[n];g&&(m-=Math.abs(p[o]-h[o]));let y=m-f;return Math.min(Math.max(t,0),Math.abs(y))}addPopup(e){let t=tr(this.gos),{eChild:r,ariaLabel:i,alwaysOnTop:n,positionCallback:o,anchorToElement:a}=e;if(!t)return q("could not find the document, document is empty"),{hideFunc:()=>{}};let s=this.getPopupIndex(r);if(s!==-1)return{hideFunc:this.popupList[s].hideFunc};this.initialisePopupPosition(r);let l=this.createPopupWrapper(r,i,!!n),c=this.addEventListenersToPopup(Xe(ue({},e),{wrapperEl:l}));return o&&o(),this.addPopupToPopupList(r,l,c,a),{hideFunc:c}}initialisePopupPosition(e){let r=this.getPopupParent().getBoundingClientRect();te(e.style.top)||(e.style.top=`${r.top*-1}px`),te(e.style.left)||(e.style.left=`${r.left*-1}px`)}createPopupWrapper(e,t,r){let i=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Gi(e,"dialog"),$h(e,t),n.appendChild(e),i.appendChild(n),r?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=tr(this.gos),r=this.getPopupParent(),{wrapperEl:i,eChild:n,closedCallback:o,afterGuiAttached:a,closeOnEsc:s,modal:l}=e,c=!1,u=g=>{if(!i.contains(Ft(this.gos)))return;g.key===G.ESCAPE&&!rs(g)&&p({keyboardEvent:g})},d=g=>p({mouseEvent:g}),h=g=>p({touchEvent:g}),p=(g={})=>{let{mouseEvent:f,touchEvent:v,keyboardEvent:m,forceHide:y}=g;!y&&(this.isEventFromCurrentPopup({mouseEvent:f,touchEvent:v},n)||c)||(c=!0,r.removeChild(i),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",d),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",d),this.eventService.removeEventListener("dragStarted",d),o&&o(f||v||m),this.removePopupFromPopupList(n))};return a&&a({hidePopup:p}),window.setTimeout(()=>{s&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",d),this.eventService.addEventListener("dragStarted",d),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",d))},0),p}addPopupToPopupList(e,t,r,i){this.popupList.push({element:e,wrapper:t,hideFunc:r,instanceId:Kxe++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let r=this.getPopupIndex(e);if(r===-1)return;let i=this.popupList[r];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=n,i.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),r=t.getBoundingClientRect(),{element:i,ePopup:n}=e,o=i.getBoundingClientRect(),a=d=>parseInt(d.substring(0,d.length-1),10),s=(d,h)=>{let p=r[d]-o[d],g=a(n.style[d]);return{initialDiff:p,lastDiff:p,initial:g,last:g,direction:h}},l=s("top",0),c=s("left",1),u=this.getFrameworkOverrides();return new rn(d=>{u.wrapIncoming(()=>{u.setInterval(()=>{let h=t.getBoundingClientRect(),p=i.getBoundingClientRect();if(p.top==0&&p.left==0&&p.height==0&&p.width==0){e.hidePopup();return}let f=(v,m)=>{let y=a(n.style[m]);v.last!==y&&(v.initial=y,v.last=y);let w=h[m]-p[m];if(w!=v.lastDiff){let C=this.keepXYWithinBounds(n,v.initial+v.initialDiff-w,v.direction);n.style[m]=`${C}px`,v.last=C}v.lastDiff=w};f(l,"top"),f(c,"left")},200).then(h=>{d(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:r,touchEvent:i}=e,n=r||i;if(!n)return!1;let o=this.getPopupIndex(t);if(o===-1)return!1;for(let a=o;a<this.popupList.length;a++){let s=this.popupList[a];if(s0e(s.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){let t=tr(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let r=this.getWrapper(e);r&&(r.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(r))}bringPopupToFront(e){let t=this.getPopupParent(),r=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=r.length,n=this.getWrapper(e);if(!n||i<=1||!t.contains(e))return;let o=[],a=[];for(let h of r)h!==n&&(h.classList.contains("ag-always-on-top")?a.push(h):o.push(h));let s=[],l=a.length,d=n.classList.contains("ag-always-on-top")||!l?[...o,...a,n]:[...o,n,...a];for(let h=0;h<=i;h++){let p=d[h];if(r[h]===d[h]||p===n)continue;p.querySelectorAll("div").forEach(f=>{f.scrollTop!==0&&s.push([f,f.scrollTop])}),h===0?t.insertAdjacentElement("afterbegin",p):d[h-1].insertAdjacentElement("afterend",p)}for(;s.length;){let h=s.pop();h[0].scrollTop=h[1]}}},Qxe=["touchstart","touchend","touchmove","touchcancel"],vP=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new rn(r=>{r(window.setInterval(e,t))})}addEventListener(e,t,r,i){let n=wu(Qxe,t);e.addEventListener(t,r,{capture:!!i,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},Jxe=class extends U{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,r=!1){return r?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let r=e===G.UP,i=e===G.DOWN,n=e===G.LEFT,o,a;if(r||i)a=r?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{let s=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");a=t.rowIndex,o=n!==l?s[0]:rt(s)}return{rowIndex:a,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let r=t,i=!1;for(;!i;){switch(e){case G.UP:r=this.getCellAbove(r);break;case G.DOWN:r=this.getCellBelow(r);break;case G.RIGHT:this.gos.get("enableRtl")?r=this.getCellToLeft(r):r=this.getCellToRight(r);break;case G.LEFT:this.gos.get("enableRtl")?r=this.getCellToRight(r):r=this.getCellToLeft(r);break;default:r=null,q("unknown key for navigation ",e);break}r?i=this.isCellGoodToFocusOn(r):i=!0}return r}isCellGoodToFocusOn(e){let t=e.column,r;switch(e.rowPinned){case"top":r=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":r=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:r=this.rowModel.getRow(e.rowIndex);break}return r?!t.isSuppressNavigable(r):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,r=e.rowPinned,i=!1;if(this.isLastRowInContainer(e))switch(r){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else r&&(i=!0);let n=this.rowModel.getRow(e.rowIndex),o=i?void 0:this.getNextStickyPosition(n);return o||{rowIndex:t+1,rowPinned:r}}getNextStickyPosition(e,t){if(!aS(this.gos)||!e||!e.sticky)return;let r=this.rowRenderer.getStickyTopRowCtrls().some(s=>s.getRowNode().rowIndex===e.rowIndex),i=[];r?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((s,l)=>s.getRowNode().rowIndex-l.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((s,l)=>l.getRowNode().rowIndex-s.getRowNode().rowIndex);let n=t?-1:1,o=i.findIndex(s=>s.getRowNode().rowIndex===e.rowIndex),a=i[o+n];if(a)return{rowIndex:a.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,r=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=r:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=r:this.pageBoundsService.getLastRow()<=r}getRowAbove(e){let t=e.rowIndex,r=e.rowPinned,i=r?t===0:t===this.pageBoundsService.getFirstRow(),n=!1;if(i)return r==="top"?null:r?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;r&&(n=!0);let o=this.rowModel.getRow(e.rowIndex),a=n?void 0:this.getNextStickyPosition(o,!0);return a||{rowIndex:t-1,rowPinned:r}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),r=e.rowIndex,i=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];let o=this.getRowBelow(e);if(tt(o)||!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??!0))return null;r=o?o.rowIndex:null,i=o?o.rowPinned:null}return{rowIndex:r,column:n,rowPinned:i}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),r=e.rowIndex,i=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=rt(t);let o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(tt(o)||!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??!0))return null;r=o?o.rowIndex:null,i=o?o.rowPinned:null}return{rowIndex:r,column:n,rowPinned:i}}},ui=(e,t)=>{for(let r in t)t[r]=e;return t},E$=ue(ue(ue(ue(ue(ue(ue(ue(ue(ue(ue(ue(ue(ue(ue({},ui("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),ui("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),ui("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0})),ui("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),ui("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),ui("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),ui("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),ui("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),ui("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),ui("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0})),ui("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),ui("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),ui("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),ui("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),ui("@ag-grid-enterprise/status-bar",{getStatusPanel:0})),f2={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},e1e=(e,t)=>e.eventService.dispatchEvent(t),wq=class{};Reflect.defineProperty(wq,"name",{value:"GridApi"});var t1e=class extends U{constructor(){super(),this.beanName="apiFunctionService",this.api=new wq,this.fns=Xe(ue({},f2),{dispatchEvent:e1e}),this.beans=null,this.preDestroyLink="";let{api:e}=this;for(let t in E$)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:r,beans:i}=this;r!==f2&&(r[e]=i?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:r,fns:{[e]:i}}=this;return i?i(r,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:r,preDestroyLink:i}=this;if(!t)q(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`);else{let n=E$[e];r.assertModuleRegistered(n,`api.${e}`)&&q(`API function '${e}' not registered to module '${n}'`)}}destroy(){super.destroy(),this.fns=f2,this.beans=null}};function r1e(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var i1e=class extends U{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,r){let i=[],n={};return e.forEach(o=>{let a=this.createDefFromColumn(o,t,r),s=!0,l=a,c=o.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}let h=n[c.getGroupId()];if(h){h.children.push(l),s=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],n[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){s=!1;break}u=c}s&&i.push(l)}),i}createDefFromGroup(e){let t=D2(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,r){let i=D2(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?r.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},n1e=class extends U{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,r){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:r})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){let{movedColumns:t,source:r,toIndex:i,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:i,finished:n,source:r})}columnPinned(e,t){if(!e.length)return;let r=e.length===1?e[0]:null,i=this.getCommonValue(e,n=>n.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:i??null,columns:e,column:r,source:t})}columnVisible(e,t){if(!e.length)return;let r=e.length===1?e[0]:null,i=this.getCommonValue(e,n=>n.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:i,columns:e,column:r,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;let r=t(e[0]);for(let i=1;i<e.length;i++)if(r!==t(e[i]))return;return r}columnChanged(e,t,r){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:r})}columnResized(e,t,r,i=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:t,source:r})}},o1e=class extends U{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(tt(e)||!this.columnModel.isAlive())return[];let r=this.columnModel.getAllCols().map(i=>this.createStateItemFromColumn(i));return this.orderColumnStateList(r),r}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),r=this.funcColsService.getPivotColumns(),i=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?r.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,a=e.getSort()!=null?e.getSort():null,s=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:a,sortIndex:s,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:n,flex:l}}orderColumnStateList(e){let t=this.columnModel.getCols(),r=new Map(t.map((i,n)=>[i.getColId(),n]));e.sort((i,n)=>{let o=r.has(i.colId)?r.get(i.colId):-1,a=r.has(n.colId)?r.get(n.colId):-1;return o-a})}},a1e=class extends U{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return ns(null,t,r=>{hi(r)&&e.push({groupId:r.getGroupId(),open:r.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let r=[];ns(null,t,i=>{if(hi(i)){let n=i.getColGroupDef(),o={groupId:i.getGroupId(),open:n?n.openByDefault:void 0};r.push(o)}}),this.setColumnGroupState(r,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let i=[];e.forEach(n=>{let o=n.groupId,a=n.open,s=this.columnModel.getProvidedColGroup(o);s&&s.isExpanded()!==a&&(s.setExpanded(a),i.push(s))}),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},s1e=class extends U{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,r=!1){let i=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let o=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=o-this.scrollPosition-this.scrollWidth,this.viewportRight=o-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(r)}}getHeadersToRender(e,t){let r;switch(e){case"left":r=this.rowsOfHeadersToRenderLeft[t];break;case"right":r=this.rowsOfHeadersToRenderRight[t];break;default:r=this.rowsOfHeadersToRenderCenter[t];break}return r||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,r=t+e.getActualWidth(),i=this.viewportLeft-200,n=this.viewportRight+200,o=t<i&&r<i,a=t>n&&r>n;return!o&&!a}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=n=>{let o=n.getLeft();return te(o)&&o>this.viewportLeft},r=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,r,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),r=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(r).forEach(o=>e[o.getId()]=!0);let n=(o,a,s)=>{let l=!1;for(let c=0;c<o.length;c++){let u=o[c],d=!1;if(_l(u))d=e[u.getId()]===!0;else{let p=u.getDisplayedChildren();p&&(d=n(p,a,s+1))}d&&(l=!0,a[s]||(a[s]=[]),a[s].push(u))}return l};n(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),n(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),n(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),r=this.colsWithinViewportHash!==t;return r&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),r}},l1e=class extends U{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let r=this.componentMetadataProvider.retrieve(e);return r&&r.functionAdapter?r.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(i){let n=e(i),o=typeof n;if(o==="string"||o==="number"||o==="boolean"){this.eGui=pv("<span>"+n+"</span>");return}if(n==null){this.eGui=pv("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},c1e=class extends U{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},u1e=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],M$=Object.fromEntries(u1e.map((e,t)=>[e,t]));function d1e(e,t){let r=(e.beanName?M$[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?M$[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return r-i}function h1e(e,t){return e?.beanName==="gridDestroyService"?-1:0}var p1e=class extends U{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let r=this.registry[e];if(r!=null)return new r(...t)}},g1e=class extends U{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let r=this.readyCallbacks.indexOf(t);r>=0&&this.readyCallbacks.splice(r,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:r}=this.params;return[e,r,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},f1e=class extends U{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:r,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:r})}createIdFromValues(e){let{rowIndex:t,rowPinned:r,column:i}=e;return`${t}.${r??"null"}.${i.getId()}`}equals(e,t){let r=e.column===t.column,i=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return r&&i&&n}},v1e=class extends U{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){Ut(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let r=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};t?r():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(r)),this.dispatchExpandedDebounced())}},m1e=class extends U{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,r=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return r?(t="bottom",e=r-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):i&&(t="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(te(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},T$={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},_$={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},R$={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},y1e=class extends U{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(T$),this.getSizeEl(_$),this.getSizeEl(R$)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(T$)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(_$)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(R$)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){let t=this.getThemeClasses();for(let r of Array.from(e.classList))r.startsWith("ag-theme-")&&!t.includes(r)&&e.classList.remove(r);e.classList.add(...t)}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let r=`${t}px`;return e!=r?(this.eGridDiv.style.setProperty("--ag-line-height",r),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let r=this.measureSizeEl(e);return r==="detached"||r==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,r),r)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let r=t.offsetWidth;return r===A$?"no-styles":(this.sizesMeasured=!0,r)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let r=this.eMeasurementContainer;r||(r=this.eMeasurementContainer=document.createElement("div"),r.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(r),this.eGridDiv.appendChild(r)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${A$}px)`,r.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&q(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let n=this.resizeObserverService.observeResize(t,()=>{let o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==i&&(i=o,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>n()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let r=this.readAncestorThemeClasses();w1e(r,this.ancestorThemeClasses)||(this.ancestorThemeClasses=r,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(;e;){let r=Array.from(e.classList).filter(i=>i.startsWith("ag-theme-"));for(let i of r)t.includes(i)||t.unshift(i);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){let{gos:e,eMeasurementContainer:t,gridTheme:r}=this,i=e.get("theme")||null;i!==r&&(r?.stopUse(),this.gridTheme=i,i?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},w1e=(e,t)=>e.length===t.length&&e.findIndex((r,i)=>e[i]!==t[i])===-1,A$=15538,C1e=class extends U{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new qh}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=Yb(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,r){this.globalEventService.addEventListener(e,t,r)}removeEventListener(e,t,r){this.globalEventService.removeEventListener(e,t,r)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},mP=class zn extends U{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",zn.toggleKeyboardMode),t.addEventListener("mousedown",zn.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",zn.toggleKeyboardMode),t.removeEventListener("mousedown",zn.toggleKeyboardMode))}static toggleKeyboardMode(t){let r=zn.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||r!==i&&(zn.keyboardModeActive=i)}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,r=>{this.gridCtrl=r.gridCtrl})}registerKeyboardFocusEvents(){let t=tr(this.gos);zn.addKeyboardModeEvents(t),zn.instanceCount++,this.addDestroyFunc(()=>{zn.instanceCount--,zn.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,r=this.columnModel.getCol(t.getId());t!==r&&this.clearFocusedCell()}isKeyboardMode(){return zn.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(Ft(this.gos),bu.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(Ft(this.gos),dS.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,r){let i=t;for(;i;){if(sv(this.gos,i,r))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,r){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),r())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){let{rowIndex:r,rowPinned:i,column:n}=t,o={rowIndex:r,rowPinned:i,column:n,isFullWidthCell:!1},a=this.rowRenderer.getRowByPosition({rowIndex:r,rowPinned:i});return a&&(o.isFullWidthCell=a.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent(ue({type:"cellFocusCleared"},t))}setFocusedCell(t){let{column:r,rowIndex:i,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:a=!1}=t,s=this.columnModel.getCol(r);if(!s){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:i,rowPinned:ts(n),column:s},this.eventService.dispatchEvent(Xe(ue({type:"cellFocused"},this.getFocusEventParams(this.focusedCellPosition)),{forceBrowserFocus:o,preventScrollOnBrowserFocus:a}))}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let r=t.getColumnGroupChild(),i=t.getRowIndex(),n=t.getPinned(),{column:o,headerRowIndex:a}=this.focusedHeaderPosition;return r===o&&i===a&&n==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,r){this.focusedHeaderPosition={headerRowIndex:t,column:r}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){if(this.isHeaderFocusSuppressed())return!1;let{direction:r,fromTab:i,allowUserOverride:n,event:o,fromCell:a,rowWithoutSpanValue:s}=t,{headerPosition:l}=t;if(a&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(n){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let d=this.gos.getCallback("tabToNextHeader");d&&(l=this.getHeaderPositionFromUserFunc({userFunc:d,direction:r,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let d=this.gos.getCallback("navigateToNextHeader");if(d&&o){let h={key:o.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:o};l=d(h)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:r,event:o,fromCell:a,rowWithoutSpanValue:s}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;let{userFunc:r,headerPosition:i,direction:n,event:o}=t,a=this.getFocusedHeader(),s=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:r,direction:n,currentPosition:a,headerPosition:i,headerRowCount:s});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:o})}getHeaderPositionFromUserFunc(t){let{userFunc:r,direction:i,currentPosition:n,headerPosition:o,headerRowCount:a}=t,l=r({backwards:i==="Before",previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:a});return l===!0||l===null?(l===null&&q("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):l===!1?null:l}focusProvidedHeaderPosition(t){let{headerPosition:r,direction:i,fromCell:n,rowWithoutSpanValue:o,event:a}=t,{column:s,headerRowIndex:l}=r;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(r):this.focusGridView(s);this.headerNavigationService.scrollToColumn(s,i);let u=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned())?.focusHeader(r.headerRowIndex,s,a)||!1;return u&&(o!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(o??-1),u}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));let r=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:r,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;let r=this.headerNavigationService.getHeaderRowCount()-1,i=rt(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:r,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,r){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===ts(r)}findFocusableElements(t,r,i=!1){let n=J0e,o=pY;r&&(o+=", "+r),i&&(o+=', [tabindex="-1"]');let a=Array.prototype.slice.apply(t.querySelectorAll(n)).filter(c=>Do(c)),s=Array.prototype.slice.apply(t.querySelectorAll(o));return s.length?((c,u)=>c.filter(d=>u.indexOf(d)===-1))(a,s):a}focusInto(t,r=!1,i=!1){let n=this.findFocusableElements(t,null,i),o=r?rt(n):n[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,r){if(!r)return null;let i=this.findFocusableElements(t),n=i.indexOf(r);if(n===-1)return null;let o=-1;for(let a=n-1;a>=0;a--)if(i[a].classList.contains("ag-tab-guard-top")){o=a;break}return o<=0?null:i[o-1]}findNextFocusableElement(t=this.eGridDiv,r,i){let n=this.findFocusableElements(t,r?':not([tabindex="-1"])':null),o=Ft(this.gos),a;r?a=n.findIndex(l=>l.contains(o)):a=n.indexOf(o);let s=a+(i?-1:1);return s<0||s>=n.length?null:n[s]}isTargetUnderManagedComponent(t,r){if(!r)return!1;let i=t.querySelectorAll(`.${Eu.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let n=0;n<i.length;n++)if(i[n].contains(r))return!0;return!1}findTabbableParent(t,r=5){let i=0;for(;t&&R2(t)===null&&++i<=r;)t=t.parentElement;return R2(t)===null?null:t}focusOverlay(t){let r=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!r&&this.focusInto(r,t)}focusGridViewFailed(t,r){return r&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,r=!1,i=!0){if(this.overlayService.isExclusive())return i&&this.focusOverlay(r);if(this.isCellFocusSuppressed())return r&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():i&&this.focusOverlay(r)?!0:this.focusNextGridCoreContainer(!1);let n=r?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(n){let{rowIndex:o,rowPinned:a}=n;if(t??(t=this.getFocusedHeader()?.column),t&&o!==void 0&&o!==null)return this.navigationService.ensureCellVisible({rowIndex:o,column:t,rowPinned:a}),r&&this.rowRenderer.getRowByPosition(n)?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(n,r)||(this.setFocusedCell({rowIndex:o,column:t,rowPinned:ts(a),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:o,rowPinned:a,column:t})),!0}return!!(i&&this.focusOverlay(r)||r&&this.focusLastHeader())}isGridFocused(){let t=Ft(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,r=!1){return!r&&this.gridCtrl.focusNextInnerContainer(t)?!0:((r||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,r){let i=(r?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};mP.keyboardModeActive=!1;mP.instanceCount=0;var b1e=mP,S1e=class extends U{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=Lr(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),r=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),r!=this.rightWidth&&(this.rightWidth=r,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},x1e=class extends U{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,r){this.view=e,this.eGridHostDiv=t,this.eGui=r,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());let{dragAndDropService:i,mouseEventService:n,ctrlsService:o,resizeObserverService:a}=this.beans,s={getContainer:()=>this.eGui,isInterestedIn:c=>c===1||c===0,getIconName:()=>"notAllowed"};i.addDropTarget(s),this.addDestroyFunc(()=>i.removeDropTarget(s)),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new fP(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});let l=a.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),o.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:r,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(r>0){let n=this.visibleColsService.getAllCols(),o=rt(n);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){let t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;let r=this.getFocusableContainers(),i=this.visibleColsService.getAllCols();if(e){if(r.length>1)return this.focusContainer(rt(r),!0);let n=rt(i);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(i[0]))return!0;for(let n=1;n<r.length;n++)if(this.focusService.focusInto(r[n].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:r,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||r<0||r>=t.length)return;let n=t[r];n.setAllowFocus?.(!0),setTimeout(()=>{n.setAllowFocus?.(!1)})}getNextFocusableIndex(e,t){let r=Ft(this.gos),i=e.findIndex(o=>o.getGui().contains(r)),n=i+(t?-1:1);return{indexWithFocus:i,nextIndex:n}}focusContainer(e,t){e.setAllowFocus?.(!0);let r=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),r}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){let e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},D1e=class extends yq{constructor(e){super(),this.gridBody=ge,this.sideBar=ge,this.pagination=ge,this.rootWrapperBody=ge,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCssClass(o),setGridThemeClass:o=>this.addCssClass(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},t=this.createManagedBean(new x1e),r=t.getOptionalSelectors(),i=this.createTemplate(r),n=[WSe,...Object.values(r).filter(o=>!!o)];this.setTemplate(i,n),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>t.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&Bn("Grid removed from DOM")})}updateLayoutClasses(e,t){let r=this.rootWrapperBody.classList;r.toggle("ag-layout-auto-height",t.autoHeight),r.toggle("ag-layout-normal",t.normal),r.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",r=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",n=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",o=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${r}
                </div>
                ${i}
                ${o}
                ${n}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>Do(t.getGui()))}},E1e=class extends U{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let r=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{if(!n){ht("alignedGrids contains an undefined option."),t||ht(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ht(r());return}if(this.isGridApi(n))return n;let o=n;return"current"in o?o.current?.api:(o.api||ht(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${r()}`),o.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let r=[];return e.columns?e.columns.forEach(i=>{r.push(t(i))}):e.column&&r.push(t(e.column)),r}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":q("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){let{columnModel:t}=this;e.columnGroups.forEach(r=>{let i=null;r&&(i=t.getProvidedColGroup(r.getGroupId())),!(r&&!i)&&t.setColumnGroupOpened(i,r.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,r=null;if(t&&(r=this.columnModel.getColDefCol(t.getColId())),t&&!r)return;let i=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:o,ctrlsService:a}=this;switch(e.type){case"columnMoved":{let u=e.api.getColumnState().map(d=>({colId:d.colId}));n.applyColumnState({state:u,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let u=e.api.getColumnState().map(d=>({colId:d.colId,hide:d.hide}));n.applyColumnState({state:u},"alignedGridChanged")}break;case"columnPinned":{let u=e.api.getColumnState().map(d=>({colId:d.colId,pinned:d.pinned}));n.applyColumnState({state:u},"alignedGridChanged")}break;case"columnResized":{let c=e,u={};i.forEach(d=>{u[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),c.flexColumns?.forEach(d=>{u[d.getId()]&&delete u[d.getId()]}),o.setColumnWidths(Object.values(u),!1,c.finished,"alignedGridChanged");break}}let l=a.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(c=>{c.setGridOption("alwaysShowVerticalScroll",l)})}},M1e={version:Fe,moduleName:"@ag-grid-community/aligned-grid",beans:[E1e]};function T1e(e,t){let r=e.columnModel.getColDefCol(t);return r?r.getColDef():null}function _1e(e){return e.columnModel.getColumnDefs()}function R1e(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function A1e(e,t,r){e.columnModel.setColumnGroupOpened(t,r,"api")}function I1e(e,t,r){return e.visibleColsService.getColumnGroup(t,r)}function P1e(e,t){return e.columnModel.getProvidedColGroup(t)}function k1e(e,t,r){return e.columnNameService.getDisplayNameForColumn(t,r)||""}function L1e(e,t,r){return e.columnNameService.getDisplayNameForColumnGroup(t,r)||""}function F1e(e,t){return e.columnModel.getColDefCol(t)}function O1e(e){return e.columnModel.getColDefCols()}function N1e(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function z1e(e){return e.columnGetStateService.getColumnState()}function V1e(e){e.columnApplyStateService.resetColumnState("api")}function B1e(e){return e.columnGroupStateService.getColumnGroupState()}function G1e(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function H1e(e){e.columnGroupStateService.resetColumnGroupState("api")}function U1e(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function W1e(e){return e.visibleColsService.isPinningLeft()}function j1e(e){return e.visibleColsService.isPinningRight()}function $1e(e,t){return e.visibleColsService.getColAfter(t)}function Y1e(e,t){return e.visibleColsService.getColBefore(t)}function q1e(e,t,r){e.columnModel.setColsVisible([t],r,"api")}function K1e(e,t,r){e.columnModel.setColsVisible(t,r,"api")}function Z1e(e,t,r){e.columnModel.setColsPinned([t],r,"api")}function X1e(e,t,r){e.columnModel.setColsPinned(t,r,"api")}function Q1e(e){return e.columnModel.getCols()}function J1e(e){return e.visibleColsService.getLeftCols()}function eDe(e){return e.visibleColsService.getCenterCols()}function tDe(e){return e.visibleColsService.getRightCols()}function rDe(e){return e.visibleColsService.getAllCols()}function iDe(e){return e.columnViewportService.getViewportColumns()}function nDe(e,t,r){e.columnMoveService.moveColumns([t],r,"api")}function oDe(e,t,r){e.columnMoveService.moveColumnByIndex(t,r,"api")}function aDe(e,t,r){e.columnMoveService.moveColumns(t,r,"api")}function sDe(e,t,r,i=!0,n="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:r}],!1,i,n)}function lDe(e,t,r=!0,i="api"){e.columnSizeService.setColumnWidths(t,!1,r,i)}function cDe(e){return e.visibleColsService.getTreeLeft()}function uDe(e){return e.visibleColsService.getTreeCenter()}function dDe(e){return e.visibleColsService.getTreeRight()}function hDe(e){return e.visibleColsService.getAllTrees()}function pDe(e,t,r){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:r,source:"api"})}function gDe(e,t,r){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:r,source:"api"})}function fDe(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var vDe=class extends U{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(gu(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=i=>n=>{let{column:o,node:a,value:s}=n,l=o.getColDef().valueFormatter;return l===i.groupSafeValueFormatter&&(l=i.valueFormatter),this.valueService.formatValue(o,a,s,l)};Object.entries(e).forEach(([i,n])=>{let o=Xe(ue({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)});this.dataTypeDefinitions[i]=o,this.formatValueFuncs[i]=t(o)});let r=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(r).forEach(([i,n])=>{let o=this.processDataTypeDefinition(n,r,[i],e);o&&(this.dataTypeDefinitions[i]=o,n.dataTypeMatcher&&(this.dataTypeMatchers[i]=n.dataTypeMatcher),this.formatValueFuncs[i]=t(o))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(i=>{let n=this.dataTypeMatchers[i];n&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=n??e[i].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let r=ue(ue({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(r.columnTypes=[...Wb(e.columnTypes),...Wb(t.columnTypes)]),r}processDataTypeDefinition(e,t,r,i){let n,o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=i[o],s=t[o];if(a&&s&&(a=s),!this.validateDataTypeDefinition(e,a,o))return;n=this.mergeDataTypeDefinitions(a,e)}else{if(r.includes(o)){q('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let a=t[o];if(!this.validateDataTypeDefinition(e,a,o))return;let s=this.processDataTypeDefinition(a,t,[...r,o],i);if(!s)return;n=this.mergeDataTypeDefinitions(s,e)}return Xe(ue({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})}validateDataTypeDefinition(e,t,r){return t?t.baseDataType!==e.baseDataType?(q('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(q(`The data type definition ${r} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let r=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(r){if(r==="first"||r==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&r!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Xe(ue({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Xe(ue({},t),{value:t.value.value}))}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,r){let{cellDataType:i}=t,{field:n}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(n,r):!1),!i){e.cellDataType=!1;return}let o=this.dataTypeDefinitions[i];if(!o){q(`Missing data type definition - "${i}"`);return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,r),o.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let r=i=>{t.add(i.key)};e.addEventListener("columnStateUpdated",r),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",r))}canInferCellDataType(e,t){if(!Ut(this.gos))return!1;let r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,r))return!1;let i=t.type===null?e.type:t.type;if(i){let n=this.gos.get("columnTypes")??{};if(Wb(i).some(a=>{let s=n[a.trim()];return s&&this.doColDefPropsPreventInference(s,r)}))return!1}return!this.doColDefPropsPreventInference(e,r)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([r,i])=>this.doesColDefPropPreventInference(e,t,r,i))}doesColDefPropPreventInference(e,t,r,i){if(!t[r])return!1;let n=e[r];return n===null?(t[r]=!1,!1):i===void 0?!!n:n===i}inferCellDataType(e,t){if(!e)return;let r,i=this.getInitialData();if(i){let o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");r=tv(i,e,o)}else this.initWaitForRowData(t);if(r==null)return;let[n]=Object.entries(this.dataTypeMatchers).find(([o,a])=>a(r))??["object"];return n}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[r]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{let{firstRowData:n}=i;n&&(r?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let r=[];this.destroyColumnStateUpdateListeners();let i={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,a])=>{let s=this.columnModel.getCol(o);if(!s)return;let l=s.getColDef();if(!this.columnModel.resetColDefIntoCol(s,"cellDataTypeInferred"))return;let c=s.getColDef();if(t&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(s,a);u.rowGroup&&u.rowGroupIndex==null&&(i[o]=u),u.pivot&&u.pivotIndex==null&&(n[o]=u),r.push(u)}}),t&&r.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,n)),r.length&&this.columnApplyStateService.applyColumnState({state:r},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let r=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(i=>{delete r[i],i==="rowGroup"?delete r.rowGroupIndex:i==="pivot"&&delete r.pivotIndex}),r}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,r=e.object;this.hasObjectValueParser=t.valueParser!==r.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==r.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let r=this.getDataTypeDefinition(e)?.dataTypeMatcher;return r?r(t):!0}validateColDef(e){let t=r=>q(`Cell data type is "object" but no Value ${r} has been provided. Please either provide an object data type definition with a Value ${r}, or set "colDef.value${r}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,r,i){let n=this.formatValueFuncs[t];switch(r.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=o=>!!o.colDef.editable&&o.event.key===G.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=n;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(o,a)=>{let s=this.columnModel.getColDefCol(i),l=s?.getColDef();if(!s||!l)return 0;let c=o==null?"":n({column:s,node:null,value:o}),u=a==null?"":n({column:s,node:null,value:a});return c===u?0:c>u?1:-1},e.keyCreator=n;break}}this.filterManager?.setColDefPropertiesForDataType(e,r,n)}getDefaultDataTypes(){let e=r=>!!r.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:r=>r.newValue?.trim?.()===""?null:Number(r.newValue),valueFormatter:r=>r.value==null?"":typeof r.value!="number"||isNaN(r.value)?t("invalidNumber","Invalid Number"):String(r.value),dataTypeMatcher:r=>typeof r=="number"},text:{baseDataType:"text",valueParser:r=>r.newValue===""?null:m2(r.newValue),dataTypeMatcher:r=>typeof r=="string"},boolean:{baseDataType:"boolean",valueParser:r=>r.newValue==null?r.newValue:r.newValue?.trim?.()===""?null:String(r.newValue).toLowerCase()==="true",valueFormatter:r=>r.value==null?"":String(r.value),dataTypeMatcher:r=>typeof r=="boolean"},date:{baseDataType:"date",valueParser:r=>Bi(r.newValue==null?null:String(r.newValue)),valueFormatter:r=>r.value==null?"":!(r.value instanceof Date)||isNaN(r.value.getTime())?t("invalidDate","Invalid Date"):Wn(r.value,!1)??"",dataTypeMatcher:r=>r instanceof Date},dateString:{baseDataType:"dateString",dateParser:r=>Bi(r)??void 0,dateFormatter:r=>Wn(r??null,!1)??void 0,valueParser:r=>e(String(r.newValue))?r.newValue:null,valueFormatter:r=>e(String(r.value))?r.value:"",dataTypeMatcher:r=>typeof r=="string"&&e(r)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:r=>m2(r.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},mDe={version:Fe,moduleName:"@ag-grid-community/data-type",beans:[vDe]},yDe={version:Fe,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:T1e,getColumnDefs:_1e,sizeColumnsToFit:R1e,setColumnGroupOpened:A1e,getColumnGroup:I1e,getProvidedColumnGroup:P1e,getDisplayNameForColumn:k1e,getDisplayNameForColumnGroup:L1e,getColumn:F1e,getColumns:O1e,applyColumnState:N1e,getColumnState:z1e,resetColumnState:V1e,getColumnGroupState:B1e,setColumnGroupState:G1e,resetColumnGroupState:H1e,isPinning:U1e,isPinningLeft:W1e,isPinningRight:j1e,getDisplayedColAfter:$1e,getDisplayedColBefore:Y1e,setColumnVisible:q1e,setColumnsVisible:K1e,setColumnPinned:Z1e,setColumnsPinned:X1e,getAllGridColumns:Q1e,getDisplayedLeftColumns:J1e,getDisplayedCenterColumns:eDe,getDisplayedRightColumns:tDe,getAllDisplayedColumns:rDe,getAllDisplayedVirtualColumns:iDe,moveColumn:nDe,moveColumnByIndex:oDe,moveColumns:aDe,setColumnWidth:sDe,setColumnWidths:lDe,getLeftDisplayedColumnGroups:cDe,getCenterDisplayedColumnGroups:uDe,getRightDisplayedColumnGroups:dDe,getAllDisplayedColumnGroups:hDe,autoSizeColumn:pDe,autoSizeColumns:gDe,autoSizeAllColumns:fDe}};function wDe(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function CDe(e,t){let r=e.dragAndDropService.findExternalZone(t);r&&e.dragAndDropService.removeDropTarget(r)}function bDe(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var SDe={version:Fe,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:wDe,removeRowDropZone:CDe,getRowDropZoneParams:bDe}};function xDe(e){return e.pinnedRowModel.getPinnedTopRowCount()}function DDe(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function EDe(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function MDe(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var TDe={version:Fe,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:xDe,getPinnedBottomRowCount:DDe,getPinnedTopRow:EDe,getPinnedBottomRow:MDe}};function _De(e){e.overlayService.showLoadingOverlay()}function RDe(e){e.overlayService.showNoRowsOverlay()}function ADe(e){e.overlayService.hideOverlay()}var IDe={version:Fe,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:_De,showNoRowsOverlay:RDe,hideOverlay:ADe}};function PDe(e,t,r){if(!t)return;let i=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;r===null?i.removeAttribute(n):i.setAttribute(n,r)}function kDe(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function LDe(e,t={}){let r=i=>q(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);te(t.fadeDelay)&&r("fade"),te(t.flashDelay)&&r("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function FDe(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function ODe(e){return e.animationFrameService.isQueueEmpty()}function NDe(e){e.animationFrameService.flushAllFrames()}function zDe(e){return{rowHeight:yu(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function VDe(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(iv)}var BDe={version:Fe,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:PDe,refreshCells:kDe,flashCells:LDe,refreshHeader:FDe,isAnimationFrameQueueEmpty:ODe,flushAllAnimationFrames:NDe,getSizesForCurrentTheme:zDe,getCellRendererInstances:VDe}};function GDe(e){e.valueCache.expire()}function HDe(e,t,r){return Cq(e,{colKey:t,rowNode:r})}function Cq(e,t){let{colKey:r,rowNode:i,useFormatter:n}=t,o=e.columnModel.getColDefCol(r)??e.columnModel.getCol(r);if(tt(o))return null;let a=e.valueService.getValueForDisplay(o,i);return n?e.valueService.formatValue(o,i,a)??pa(a,!0):a}function UDe(e){return e.context.getGridId()}function WDe(e){e.gridDestroyService.destroy()}function jDe(e){return e.gridDestroyService.isDestroyCalled()}function $De(e,t){return e.gos.get(t)}function YDe(e,t,r){bq(e,{[t]:r})}function bq(e,t){e.gos.updateGridOptions({options:t})}function qDe(e,t,r){e.apiEventService.addEventListener(t,r)}function KDe(e,t,r){e.apiEventService.removeEventListener(t,r)}function ZDe(e,t){e.apiEventService.addGlobalListener(t)}function XDe(e,t){e.apiEventService.removeGlobalListener(t)}function QDe(e){return e.focusService.getFocusedCell()}function JDe(e){return e.focusService.clearFocusedCell()}function eEe(e,t,r,i){e.focusService.setFocusedCell({rowIndex:t,column:r,rowPinned:i,forceBrowserFocus:!0})}function tEe(e,t){return e.navigationService.tabToNextCell(!1,t)}function rEe(e,t){return e.navigationService.tabToNextCell(!0,t)}function iEe(e,t,r=!1){let i=e.headerNavigationService.getHeaderPositionForColumn(t,r);i&&e.focusService.focusHeaderPosition({headerPosition:i})}function nEe(e,t,r){let i=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:i,buttonElement:r,positionBy:"button"})}function oEe(e,t,r){let i=e.columnModel.getCol(t);if(i||(i=e.columnModel.getColDefCol(t)),!i){ht(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,mouseEvent:r,positionBy:"mouse"})}function aEe(e,t){let r=e.columnModel.getCol(t);if(!r){ht(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:r,positionBy:"auto"})}function sEe(e){e.menuService.hidePopupMenu()}function lEe(e,t={}){let r=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(r))}function cEe(e,t,r,i,n){e.expansionService.setRowNodeExpanded(t,r,i,n)}function uEe(e,t){return e.rowModel.getRowNode(t)}function dEe(e,t,r,i){e.rowRenderer.addRenderedRowListener(t,r,i)}function hEe(e){return e.rowRenderer.getRenderedNodes()}function pEe(e,t,r){e.rowModel.forEachNode(t,r)}function gEe(e){return Sq(e)}function Sq(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function fEe(e){return xq(e)}function xq(e){return e.rowRenderer.getLastVirtualRenderedRow()}function vEe(e,t){return e.rowModel.getRow(t)}function mEe(e){return e.rowModel.getRowCount()}function yEe(e){return e.rowModel}function wEe(e,t){if(!t.nodes.every(s=>s.rowPinned?(q("cannot select pinned rows"),!1):s.id===void 0?(q("cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:n,newValue:o}=t,a=i;e.selectionService.setNodesSelected({nodes:a,source:n??"api",newValue:o})}function CEe(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function bEe(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function SEe(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function xEe(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function DEe(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function EEe(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function MEe(e){return e.selectionService.getSelectedNodes()}function TEe(e){return e.selectionService.getSelectedRows()}function _Ee(e){e.sortController.onSortChanged("api")}var REe={version:Fe,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:UDe,destroy:WDe,isDestroyed:jDe,getGridOption:$De,setGridOption:YDe,updateGridOptions:bq}},AEe={version:Fe,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:wEe,selectAll:CEe,deselectAll:bEe,selectAllFiltered:SEe,deselectAllFiltered:xEe,selectAllOnCurrentPage:DEe,deselectAllOnCurrentPage:EEe,getSelectedNodes:MEe,getSelectedRows:TEe}},IEe={version:Fe,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:lEe,setRowNodeExpanded:cEe,getRowNode:uEe,addRenderedRowListener:dEe,getRenderedNodes:hEe,forEachNode:pEe,getFirstDisplayedRow:gEe,getFirstDisplayedRowIndex:Sq,getLastDisplayedRow:fEe,getLastDisplayedRowIndex:xq,getDisplayedRowAtIndex:vEe,getDisplayedRowCount:mEe,getModel:yEe}},PEe={version:Fe,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:vxe,getHorizontalPixelRange:mxe,ensureColumnVisible:fq,ensureIndexVisible:vq,ensureNodeVisible:yxe}},kEe={version:Fe,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:QDe,clearFocusedCell:JDe,setFocusedCell:eEe,setFocusedHeader:iEe,tabToNextCell:tEe,tabToPreviousCell:rEe}},LEe={version:Fe,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:qDe,addGlobalListener:ZDe,removeEventListener:KDe,removeGlobalListener:XDe}},FEe={version:Fe,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:GDe,getValue:HDe,getCellValue:Cq}},OEe={version:Fe,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:nEe,showColumnMenuAfterMouseClick:oEe,showColumnMenu:aEe,hidePopupMenu:sEe}},NEe={version:Fe,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:_Ee}},zEe={version:Fe,moduleName:"@ag-grid-community/api",dependantModules:[REe,TDe,AEe,yDe,IEe,SDe,PEe,IDe,kEe,LEe,BDe,FEe,OEe,NEe]};function VEe(e){return e.stateService?.getState()??{}}function BEe(e){switch(e=ue({},e),e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=GEe(e)}return e}function GEe(e){return e.cellSelection=HEe(e,"rangeSelection"),e}function HEe(e,t){if(e&&typeof e=="object")return e[t]}var UEe=class extends U{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=gi(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=gi(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=gi(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=Ut(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",Fe),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,r]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{r?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return BEe(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());let t=r=>()=>this.updateColumnState([r]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:r,pagination:i}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),r&&this.setRowSelectionState(r),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());let o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{o()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:a=>{(a.newPage||a.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,cellSelection:t,focusedCell:r,columnOrder:i}=this.getInitialState();r&&this.setFocusedCellState(r),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());let n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:o=>{if(o.finished){let a=this.getRangeSelectionState();this.updateCachedState("rangeSelection",a),this.updateCachedState("cellSelection",a)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],r=[],i=[],n=[],o=[],a=[],s=[],l=[],c=[],u=0,d=this.columnGetStateService.getColumnState();for(let h=0;h<d.length;h++){let{colId:p,sort:g,sortIndex:f,rowGroup:v,rowGroupIndex:m,aggFunc:y,pivot:w,pivotIndex:C,pinned:S,hide:b,width:x,flex:E}=d[h];c.push(p),g&&(t[f??u++]={colId:p,sort:g}),v&&(r[m??0]=p),typeof y=="string"&&i.push({colId:p,aggFunc:y}),w&&(n[C??0]=p),S&&(S==="right"?a:o).push(p),b&&s.push(p),(E||x)&&l.push({colId:p,flex:E??void 0,width:x})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:r.length?{groupColIds:r}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:o.length||a.length?{leftColIds:o,rightColIds:a}:void 0,columnVisibility:s.length?{hiddenColIds:s}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){let{sort:t,rowGroup:r,aggregation:i,pivot:n,columnPinning:o,columnVisibility:a,columnSizing:s,columnOrder:l,partialColumnState:c}=e,u={},d=v=>{let m=u[v];return m||(m={colId:v},u[v]=m,m)},h=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:v,sort:m},y)=>{let w=d(v);w.sort=m,w.sortIndex=y}),h.sort=null,h.sortIndex=null),r&&(r.groupColIds.forEach((v,m)=>{let y=d(v);y.rowGroup=!0,y.rowGroupIndex=m}),h.rowGroup=null,h.rowGroupIndex=null),i&&(i.aggregationModel.forEach(({colId:v,aggFunc:m})=>{d(v).aggFunc=m}),h.aggFunc=null),n&&(n.pivotColIds.forEach((v,m)=>{let y=d(v);y.pivot=!0,y.pivotIndex=m}),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),o&&(o.leftColIds.forEach(v=>{d(v).pinned="left"}),o.rightColIds.forEach(v=>{d(v).pinned="right"}),h.pinned=null),a&&(a.hiddenColIds.forEach(v=>{d(v).hide=!0}),h.hide=null),s&&(s.columnSizingModel.forEach(({colId:v,flex:m,width:y})=>{let w=d(v);w.flex=m??null,w.width=y}),h.flex=null);let p=l?.orderedColIds,g=!!p?.length,f=g?p.map(v=>d(v)):Object.values(u);f.length&&(this.columnStates=f,this.columnApplyStateService.applyColumnState({state:f,applyOrder:g,defaultState:h},"gridInitializing"))}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let r=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let i=[];for(let n of t)this.pivotResultColsService.getPivotResultCol(n.colId)&&i.push(n);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}r&&this.columnGroupStateService.setColumnGroupState(r,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:r,open:i})=>{i&&t.push(r)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:n})=>{let o=t.has(n);return o&&t.delete(n),{groupId:n,open:o}});t.forEach(n=>{i.push({groupId:n,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:r,advancedFilterModel:i}=e??{advancedFilterModel:t};r&&this.filterManager?.setFilterModel(r,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:r,type:i,startRow:n,endRow:o,columns:a,startColumn:s}=t;return{id:r,type:i,startRow:n,endRow:o,colIds:a.map(l=>l.getColId()),startColId:s.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeService:r,columnModel:i,visibleColsService:n}=this;if(!ga(t)||!r)return;let o=[];if(e.cellRanges.forEach(a=>{let s=[];if(a.colIds.forEach(c=>{let u=i.getCol(c);u&&s.push(u)}),!s.length)return;let l=i.getCol(a.startColId);if(!l){let c=n.getAllCols(),u=new Set(s);l=c.find(d=>u.has(d))}o.push(Xe(ue({},a),{columns:s,startColumn:l}))}),Xye(t)&&Qye(t)&&o.length>1)return q("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");r.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:r}=e?.getVScrollPosition()??{top:0};return r||t?{top:r,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:r}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,r)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:r,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:r,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:r,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:r,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),r=!1;Object.entries(t).forEach(([i,n])=>{av(n,this.cachedState[i])||(r=!0)}),this.cachedState=ue(ue({},this.cachedState),t),r&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let r=this.cachedState[e];this.setCachedStateValue(e,t),av(t,r)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=Xe(ue({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},Dq={version:Fe,moduleName:"@ag-grid-community/state-core",beans:[UEe]},WEe={version:Fe,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:VEe},dependantModules:[Dq]},jEe={version:Fe,moduleName:"@ag-grid-community/state",dependantModules:[Dq,WEe]};function $Ee(e){return e.rowModel.isLastRowIndexKnown()}function YEe(e){return e.paginationService?.getPageSize()??100}function qEe(e){return e.paginationService?.getCurrentPage()??0}function KEe(e){return e.paginationService?.getTotalPages()??1}function ZEe(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function XEe(e){e.paginationService?.goToNextPage()}function QEe(e){e.paginationService?.goToPreviousPage()}function JEe(e){e.paginationService?.goToFirstPage()}function eMe(e){e.paginationService?.goToLastPage()}function tMe(e,t){e.paginationService?.goToPage(t)}var rMe=class extends U{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let r=Math.max(yu(this.gos),1),i=Math.floor(e/r);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?gi(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function iMe(e,t,r){e.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&i.key===G.TAB){let n=i.shiftKey;r.findNextFocusableElement(t,!1,n)||r.focusNextGridCoreContainer(n)&&i.preventDefault()}}})}var Qf="paginationPageSizeSelector",nMe=class extends st{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(Qf,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Kr(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Qf)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),r=!t||!e.includes(t);if(r){let n=this.gos.exists("paginationPageSize"),o=this.gos.get(Qf)!==!0;q(`'paginationPageSize=${t}'${n?"":" (default value)"}, but ${t} is not included in${o?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),o||q(`Either set '${Qf}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}let i=String(r?"":t);this.selectPageSizeComp?(Rl(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=r}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let r=this.localeService.getLocaleTextFunc(),i=r("pageSizeSelectorLabel","Page Size:"),n=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new oP).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(Qf);return!Array.isArray(t)||on(t)?e:[...t].sort((r,i)=>r-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},oMe={selector:"AG-PAGE-SIZE-SELECTOR",component:nMe},aMe=class extends yq{constructor(){super(),this.btFirst=ge,this.btPrevious=ge,this.btNext=ge,this.btLast=ge,this.lbRecordCount=ge,this.lbFirstRowOnPage=ge,this.lbLastRowOnPage=ge,this.lbCurrent=ge,this.lbTotal=ge,this.pageSizeComp=ge,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[oMe]);let{btFirst:t,btPrevious:r,btNext:i,btLast:n}=this;this.activateTabIndex([t,r,i,n]),t.insertAdjacentElement("afterbegin",nn(e?"last":"first",this.gos)),r.insertAdjacentElement("afterbegin",nn(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",nn(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",nn(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):this.focusService.focusGridInnerElement(o)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:r}=e;this.addManagedListeners(t,{click:r,keydown:i=>{(i.key===G.ENTER||i.key===G.SPACE)&&(i.preventDefault(),r())}})}),iMe(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let r=this.localeService.getLocaleTextFunc(),i=r("thousandSeparator",","),n=r("decimalSeparator",".");return MCe(e,i,n)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),r=e("to","to"),i=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),s=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${r}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),r=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),n=e===r-1;this.nextButtonDisabled=n||i,this.lastButtonDisabled=!t||i||e===r-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){V0e(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),r=this.paginationService.getMasterRowCount(),i=e?r:null;if(i===1){let y=this.rowModel.getRow(0);if(y&&y.group&&!(y.groupData||y.aggData)){this.setTotalLabelsToZero();return}}let n=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize(),a,s;this.isZeroPagesToDisplay()?a=s=0:(a=o*n+1,s=a+o-1,e&&s>i&&(s=i));let l=a+o-1,c=!e&&r<l,u=this.formatNumber(a);this.lbFirstRowOnPage.textContent=u;let d,h=this.localeService.getLocaleTextFunc();c?d=h("pageLastRowUnknown","?"):d=this.formatNumber(s),this.lbLastRowOnPage.textContent=d;let g=t>0?n+1:0,f=this.formatNumber(g);this.lbCurrent.textContent=f;let v,m;if(e)v=this.formatNumber(t),m=this.formatNumber(i);else{let y=h("more","more");v=y,m=y}this.lbTotal.textContent=v,this.lbRecordCount.textContent=m,this.announceAriaStatus(u,d,m,f,v)}announceAriaStatus(e,t,r,i,n){let o=this.localeService.getLocaleTextFunc(),a=o("page","Page"),s=o("to","to"),l=o("of","of"),c=`${e} ${s} ${t} ${l} ${r}`,u=`${a} ${i} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnouncementService.announceValue(u,"paginationPage"))}setTotalLabelsToZero(){let e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},sMe={selector:"AG-PAGINATION",component:aMe},lMe=class extends U{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return sMe}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return te(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:te(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:te(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:te(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let r=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}r!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,r=this.pageSize*(this.currentPage+1)-1;if(r>e&&(r=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),r===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let i=this.rowModel.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:r=!1,newPageSize:i=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:r,newPageSize:i,keepRenderedRows:t})}},Eq={version:Fe,moduleName:"@ag-grid-community/pagination-core",beans:[lMe,rMe]},cMe={version:Fe,moduleName:"@ag-grid-community/pagination-api",dependantModules:[Eq],apiFunctions:{paginationIsLastPageFound:$Ee,paginationGetPageSize:YEe,paginationGetCurrentPage:qEe,paginationGetTotalPages:KEe,paginationGetRowCount:ZEe,paginationGoToNextPage:XEe,paginationGoToPreviousPage:QEe,paginationGoToFirstPage:JEe,paginationGoToLastPage:eMe,paginationGoToPage:tMe}},uMe={version:Fe,moduleName:"@ag-grid-community/pagination",dependantModules:[Eq,cMe]},Vi="clientSide",di="serverSide",zh="infinite",dMe={onGroupExpandedOrCollapsed:[Vi],refreshClientSideRowModel:[Vi],isRowDataEmpty:[Vi],forEachLeafNode:[Vi],forEachNodeAfterFilter:[Vi],forEachNodeAfterFilterAndSort:[Vi],resetRowHeights:[Vi],applyTransaction:[Vi],applyTransactionAsync:[Vi],flushAsyncTransactions:[Vi],getBestCostNodeSelection:[Vi],getServerSideSelectionState:[di],setServerSideSelectionState:[di],applyServerSideTransaction:[di],applyServerSideTransactionAsync:[di],applyServerSideRowData:[di],retryServerSideLoads:[di],flushServerSideAsyncTransactions:[di],refreshServerSide:[di],getServerSideGroupLevelState:[di],refreshInfiniteCache:[zh],purgeInfiniteCache:[zh],getInfiniteRowCount:[zh],isLastRowIndexKnown:[zh,di],expandAll:[Vi,di],collapseAll:[Vi,di],onRowHeightChanged:[Vi,di],setRowCount:[zh,di],getCacheBlockState:[zh,di]},hMe={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function pMe(e,t,r){let i=hMe[e];if(i){let{version:o,new:a,old:s,message:l}=i,c=s??e;return(...u)=>{let d=a?`Please use ${a} instead. `:"";return q(`Since ${o} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}let n=dMe[e];return n?(...o)=>{let a=r.rowModel.getType();if(!n.includes(a)){ht(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,o)}:t}var gMe={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},Sl=(e,t)=>{let r=t.rowModelType??"clientSide";return r==="clientSide"||r==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},fMe={enableRowGroup:Sl,rowGroup:Sl,rowGroupIndex:Sl,enablePivot:Sl,enableValue:Sl,pivot:Sl,pivotIndex:Sl,aggFunc:Sl,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(r=>t.includes(r))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Vh},vMe={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},mMe=Object.keys(vMe),Vh={objectName:"colDef",allProperties:mMe,docsUrl:"column-properties/",deprecations:gMe,validations:fMe},yMe=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),wMe={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},CMe=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let r=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:r}case"serverSide":{let r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:r}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{let t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Vh,defaultColDef:()=>Vh,defaultColGroupDef:()=>Vh,autoGroupColumnDef:()=>Vh,selectionColumnDef:()=>Vh}),bMe=()=>({objectName:"gridOptions",allProperties:[...cv.ALL_PROPERTIES,...uv.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:yMe(),validations:CMe()}),SMe=class extends U{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,bMe())}validateApiFunction(e,t){return pMe(e,t,this.beans)}processOptions(e,t){let{validations:r,deprecations:i,allProperties:n,propertyExceptions:o,objectName:a,docsUrl:s}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],n,a,s);let l=new Set;Object.keys(e).forEach(u=>{let d=i[u];if(d)if("renamed"in d){let{renamed:w,version:C}=d;l.add(`As of v${C}, ${String(u)} is deprecated. Please use ${String(w)} instead.`),e[w]=e[u]}else{let{message:w,version:C}=d;l.add(`As of v${C}, ${String(u)} is deprecated. ${w??""}`)}let h=e[u];if(h==null||h===!1)return;let p=r[u],g;if(p)if(typeof p=="function"){let w=p(e,this.gridOptions);if(!w)return;if("objectName"in w){let C=e[u];if(Array.isArray(C)){C.forEach(S=>{this.processOptions(S,w)});return}this.processOptions(e[u],w);return}g=w}else g=p;else return;let{module:f,dependencies:v,validate:m,supportedRowModels:y}=g;if(y){let w=this.gridOptions.rowModelType??"clientSide";if(!y.includes(w)){l.add(`${String(u)} is not supported with the '${w}' row model.`);return}}if(f){let w=Array.isArray(f)?f:[f],C=!0;if(w.forEach(S=>{this.gos.assertModuleRegistered(S,String(u))||(C=!1,l.add(`${String(u)} is only available when ${S} is loaded.`))}),!C)return}if(v){let w=this.checkForRequiredDependencies(u,v,e);if(w){l.add(w);return}}if(m){let w=m(e,this.gridOptions);if(w){l.add(w);return}}}),l.size>0&&l.forEach(u=>{q(u)})}checkForRequiredDependencies(e,t,r){let n=Object.entries(t).find(([s,l])=>{let c=r[s];return!l.includes(c)});if(!n)return null;let[o,a]=n;return a.length>1?`'${String(e)}' requires '${o}' to be one of [${a.join(", ")}].`:`'${String(e)}' requires '${o}' to be ${a[0]}.`}checkProperties(e,t,r,i,n){let o=["__ob__","__v_skip","__metadata__"],a=xMe(Object.getOwnPropertyNames(e),[...o,...t,...r],r);if(Vn(a,(s,l)=>{let c=`invalid ${i} property '${s}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;r.includes("context")&&(c+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),q(c)}),Object.keys(a).length>0&&n){let s=this.getFrameworkOverrides().getDocLink(n);q(`to see all the valid ${i} properties please check: ${s}`)}}};function xMe(e,t,r){let i={},n=e.filter(o=>!t.some(a=>a===o));return n.length>0&&n.forEach(o=>i[o]=TY({inputValue:o,allSuggestions:r}).values),i}var DMe={version:Fe,moduleName:"@ag-grid-community/core"},EMe={version:Fe,moduleName:"@ag-grid-community/core-validations",beans:[SMe]},Mq={version:Fe,moduleName:"@ag-grid-community/core-community-features",dependantModules:[DMe,EMe,Oxe,ube,jEe,mDe,M1e,uMe,zEe]},MMe=class extends U{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},jb=new Set(["gridPreDestroyed","fillStart","pasteStart"]),TMe=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",_Me=new Map([...cv.BOOLEAN_PROPERTIES.map(e=>[e,w2]),...cv.NUMBER_PROPERTIES.map(e=>[e,jY]),["groupAggFiltering",e=>typeof e=="function"?e:w2(e)],["pageSize",da(1)],["autoSizePadding",da(0)],["keepDetailRowsCount",da(1)],["rowBuffer",da(0)],["infiniteInitialRowCount",da(1)],["cacheOverflowSize",da(1)],["cacheBlockSize",da(1)],["serverSideInitialRowCount",da(1)],["viewportRowModelPageSize",da(1)],["viewportRowModelBufferSize",da(0)]]);function Tq(e,t){let r=_Me.get(e);return r?r(t):t}function RMe(e){let t={};return Object.entries(e).forEach(([r,i])=>{let n=Tq(r,i);t[r]=n}),t}var _q=class Rq extends U{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new qh,this.globalEventHandlerFactory=t=>(r,i)=>{if(!this.isAlive())return;let n=jb.has(r);if(n&&!t||!n&&t)return;let o=uv.getCallbackForEvent(r),a=this.gridOptions[o];typeof a=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{a(i)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:r})=>{this.updateGridOptions({options:r,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??wMe[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return te(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let n=i;return n.api=this.api,n.context=this.gridOptionsContext,t(n)})}updateGridOptions({options:t,force:r,source:i="api"}){let n={id:Rq.changeSetId++,properties:[]},o=[];Object.entries(t).forEach(([a,s])=>{i==="api"&&k0e[a]&&q(`${a} is an initial property and cannot be updated.`);let l=Tq(a,s),c=r||typeof l=="object"&&i==="api",u=this.gridOptions[a];if(c||u!==l){this.gridOptions[a]=l;let d={type:a,currentValue:l,previousValue:u,changeSet:n,source:i};o.push(d)}}),this.validationService?.processGridOptions(this.gridOptions),n.properties=o.map(a=>a.type),o.forEach(a=>{this.gridOptions.debug&&Bn(`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propertyEventService.dispatchEvent(a)})}addPropertyEventListener(t,r){this.propertyEventService.addEventListener(t,r)}removePropertyEventListener(t,r){this.propertyEventService.removeEventListener(t,r)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){let r=t;return r.api=this.api,r.context=this.gridOptionsContext,r}assertModuleRegistered(t,r){return es.__assertRegistered(t,r,this.gridId)}isModuleRegistered(t){return es.__isRegistered(t,this.gridId)}};_q.changeSetId=0;var AMe=_q,IMe=class extends U{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let r,i;if(ar(e.column)?r=this.visibleColsService.getGroupAtDirection(e.column,t):(i=`getCol${t}`,r=this.visibleColsService[i](e.column)),!r)return;let{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){let s=[r];for(;r.getParent();)r=r.getParent(),s.push(r);r=s[s.length-1-n]}let{column:o,headerRowIndex:a}=this.getHeaderIndexToFocus(r,n);return{column:o,headerRowIndex:a}}getHeaderIndexToFocus(e,t){let r;if(ar(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let i=e;r=i.getLeafColumns()[0];let n=r;for(;n!==i;)t++,n=n.getParent()}return{column:r||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let r=this.getHeaderRowType(t),i=r==="filter",n=r==="column",o=i?e:e.getParent(),a=t-1,s=a;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),a--;s=a,a<0&&(o=e,a=t,s=void 0)}return{column:o,headerRowIndex:a,headerRowIndexWithoutSpan:s}}getColumnVisibleChild(e,t,r="After"){let i=this.getHeaderRowType(t),n=e,o=t+1,a=o;if(i==="group"){let s=e.getDisplayedLeafColumns(),l=r==="After"?s[0]:rt(s),c=[],u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(n=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){let h=c[d];if(!h.isPadding()){n=h;break}o++}else n=rt(c),n||(n=l)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let r=this.visibleColsService.getAllCols(),i=r[t==="start"?0:r.length-1];if(!i)return;let o=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned())?.getRowType(e);if(o=="group"){let a=this.visibleColsService.getColGroupAtLevel(i,e);return{headerRowIndex:e,column:a}}return{headerRowIndex:o==null?-1:e,column:i}}},PMe=class extends U{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(r,i,n)=>e({key:r,defaultValue:i,variableValues:n});let t=this.gos.get("localeText");return(r,i,n)=>{let o=t&&t[r];if(o&&n&&n.length){let a=0;for(;!(a>=n.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",n[a++])}return o??i}}},kMe=class extends U{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new W2(this.getFrameworkOverrides())}addEventListener(e,t){let r=this.frameworkEventWrappingService.wrap(t),i=Yb(this.gos)&&!jb.has(e),n=i?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(r),this.eventService.addEventListener(e,r,i)}removeEventListener(e,t){let r=this.frameworkEventWrappingService.unwrap(t),n=!!this.asyncEventListeners.get(e)?.delete(r);n||this.syncEventListeners.get(e)?.delete(r),this.eventService.removeEventListener(e,r,n)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(Yb(this.gos)){let i=(o,a)=>{jb.has(o)&&t(o,a)},n=(o,a)=>{jb.has(o)||t(o,a)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:n}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:i,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((r,i)=>{r.forEach(n=>this.eventService.removeEventListener(i,n,t)),r.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(r=>this.eventService.removeGlobalListener(r,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},LMe=class extends U{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},FMe=class extends U{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return tt(this.topRowBounds)||tt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=te(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},OMe=class extends U{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=gi(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=tr(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),oY(t,"polite"),z0e(t,"additions text"),N0e(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(Kr(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},NMe=class extends U{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}let r=i=>{for(;i.length;){let n=i.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),r(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),r(this.executeLaterFuncs)},200)})}},zMe=class extends U{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},VMe=class extends U{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=Ut(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){q("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,r){let i=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(i,t,this.isExclusive(),r),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;this.state===2?e=this.ctrlsService.get("gridHeaderCtrl")?.getHeaderHeight()||0:this.wrapperPadding!==0&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},BMe=class extends U{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return te(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),c$(t,this.processClassesFromGridOptions(e.rowNode)),c$(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],r=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(a=>t.push(a))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return q("rowClass should not be a function, please use getRowClass instead"),[];r(i)}let n=this.gos.getCallback("getRowClass");if(n){let o={data:e.data,node:e,rowIndex:e.rowIndex},a=n(o);r(a)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,r=>{t.push(r)},()=>{}),t}processRowClassRules(e,t,r){let i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,r)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},GMe=class extends U{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=K0e(),this.gos.get("debug")&&Bn("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,r=this.getUiBodyHeight();(t!==this.scrollY||r!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=r,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&Bn(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),r=e/t;return this.maxScrollY*r}},HMe=class extends U{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=ha(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=ha(this.gos))}doFullSort(e,t){let r=(n,o)=>({currentPos:o,rowNode:n}),i=e.map(r);return i.sort(this.compareRowNodes.bind(this,t)),i.map(n=>n.rowNode)}compareRowNodes(e,t,r){let i=t.rowNode,n=r.rowNode;for(let o=0,a=e.length;o<a;o++){let s=e[o],l=s.sort==="desc",c=this.getValue(i,s.column),u=this.getValue(n,s.column),d,h=this.getComparator(s,i);if(h?d=h(c,u,i,n,l):d=$ye(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return s.sort==="asc"?d:d*-1}return t.currentPos-r.currentPos}getComparator(e,t){let r=e.column,i=r.getColDef().comparator;if(i!=null)return i;if(!r.getColDef().showRowGroup)return;let n=!t.group&&r.getColDef().field;if(!n)return;let o=this.columnModel.getColDefCol(n);if(o)return o.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(sS(this.gos,this.columnModel.isPivotActive())){let o=e.allLeafChildren?.[0];return o?this.valueService.getValue(t,o,!1,!1):void 0}let n=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return n?e.groupData?.[n.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},gS=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let r=0;r<e.children.length;r++)this.depthFirstSearchChangedPath(e.children[r],t);t(e.rowNode)}depthFirstSearchEverything(e,t,r){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){let n=e.childrenAfterGroup[i];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,r):r&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,r=!1){this.active&&!r?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,r=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,r++,t=t.parent}return r}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let r=e;for(;r;)this.nodeIdsToColumns[r.id]||(this.nodeIdsToColumns[r.id]={}),t.forEach(i=>this.nodeIdsToColumns[r.id][i.getId()]=!0),r=r.parent}linkPathItems(e,t){let r=e;for(let i=0;i<t;i++){let n=this.mapToItems[r.id],o=this.mapToItems[r.parent.id];o.children||(o.children=[]),o.children.push(n),r=r.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let r=this.createPathItems(e);this.linkPathItems(e,r),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let r=this.nodeIdsToColumns[e.id];return t.filter(n=>r[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let r=this.nodeIdsToColumns[e.id];return t.filter(n=>!r[n.getId()])}},Aq=class extends U{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new jxe,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){let{gos:e,rowModel:t,onRowSelected:r}=this;this.selectionCtx.init(t),this.rowSelectionMode=Kb(e),this.groupSelectsChildren=xu(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{let i=xu(e),n=Kb(e);(i!==this.groupSelectsChildren||n!==this.rowSelectionMode)&&(this.groupSelectsChildren=i,this.rowSelectionMode=n,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:r.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!TMe(t))return e;let r=this.selectionCtx.getRoot();return r?r.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:r,suppressFinishActions:i,rangeSelect:n,nodes:o,event:a,source:s}=e;if(o.length===0)return 0;if(o.length>1&&!this.isMultiSelect())return q("cannot multi select unless selection mode is 'multiRow'"),0;let l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=o.map(d=>d.footer?d.sibling:d);if(n){if(c.length>1)return q("cannot range select while selecting multiple rows"),0;let d=c[0],h=this.overrideSelectionValue(t,s);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(d)){let p=this.selectionCtx.truncate(d);return h&&this.selectRange(p.discard,!1,s),this.selectRange(p.keep,h,s)}else if(this.selectionCtx.getRoot()!==d){let f=this.selectionCtx.extend(d,this.groupSelectsChildren);return h&&this.selectRange(f.discard,!1,s),this.selectRange(f.keep,h,s)}}}i||this.selectionCtx.setRoot(c[0]);let u=0;for(let d=0;d<c.length;d++){let h=c[d];l&&h.group||h.selectThisNode(t,a,s)&&u++,this.groupSelectsChildren&&h.childrenAfterGroup?.length&&(u+=this.selectChildren(h,t,l,s))}return i||(t&&(r||!this.isMultiSelect())&&(u+=this.clearOtherNodes(c[0],s)),u>0&&(this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s))),u}selectRange(e,t,r){let i=0;return e.forEach(n=>{if(n.group&&this.groupSelectsChildren)return;n.selectThisNode(t,void 0,r)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(r),this.dispatchSelectionChanged(r)),i}selectChildren(e,t,r,i){let n=r?e.childrenAfterAggFilter:e.childrenAfterGroup;return tt(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:r,source:i,nodes:n})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((r,i)=>{r&&e(r)&&t.set(i,r)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!Ut(this.gos))return!1;let i=this.rowModel.getRootNode();t||(t=new gS(!0,i),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==i){let a=o.calculateSelectedFromChildren();n=o.selectThisNode(a===null?!1:a,void 0,e)||n}}),n}clearOtherNodes(e,t){let r=new Map,i=0;return this.selectedNodes.forEach(n=>{if(n&&n.id!==e.id){let o=this.selectedNodes.get(n.id);i+=o.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&r.set(n.parent.id,n.parent)}}),r.forEach(n=>{let o=n.calculateSelectedFromChildren();n.selectThisNode(o===null?!1:o,void 0,t)}),i}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(te(t)&&e.id!==t.id&&t){let i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!Ut(this.gos))return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let r=[];function i(n){for(let o=0,a=n.length;o<a;o++){let s=n[o];if(s.isSelected())r.push(s);else{let l=s;l.group&&l.children&&i(l.children)}}}return i(t),r}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=a=>a.selectThisNode(!1,void 0,i),r=Ut(this.gos),{source:i,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!r){ht("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,o).forEach(t)}else this.selectedNodes.forEach(a=>{a&&t(a)}),this.reset(i);this.selectionCtx.reset(),r&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(e,t){let r=0,i=0,n=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?r++:o.selectable&&i++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:r,notSelectedCount:i}}getSelectAllState(e,t){let{selectedCount:r,notSelectedCount:i}=this.getSelectedCounts(e,t);return r===0&&i===0?!1:r>0&&i>0?null:r>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(r=>r.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();let r=[];if(t)return this.forEachNodeOnPage(n=>{if(!n.group){r.push(n);return}if(!n.expanded){let o=a=>{r.push(a),a.childrenAfterFilter?.length&&a.childrenAfterFilter.forEach(o)};o(n);return}this.groupSelectsChildren||r.push(n)}),r;let i=this.rowModel;return e?(i.forEachNodeAfterFilter(n=>{r.push(n)}),r):(i.forEachNode(n=>{r.push(n)}),r)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow();for(let i=t;i<=r;i++){let n=this.rowModel.getRow(i);n&&e(n)}}selectAllRowNodes(e){if(Zye(this.gos)&&!G2(this.gos))return q("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();let{source:t,justFiltered:r,justCurrentPage:i}=e,n=this.getNodesToSelect(r,i);n.forEach(o=>o.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(rt(n)??null),Ut(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return ht("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");let r=new Set(e),i=[];this.rowModel.forEachNode(n=>{r.has(n.id)&&i.push(n)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!Ut(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},UMe=class extends U{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let{gos:t}=this,r=$b(t),i=B2(t);if(!r||!i)return;let n=xu(t),o=Ut(t)&&n,a=[],s=l=>{if(e&&!l.group)return;if(o&&l.group){let u=l.childrenAfterGroup.some(d=>d.selectable===!0);l.setRowSelectable(u,!0);return}let c=i?.(l)??!0;l.setRowSelectable(c,!0),!c&&l.isSelected()&&a.push(l)};if(o){let l=this.rowModel;new gS(!1,l.getRootNode()).forEachChangedNodeDepthFirst(s,!0,!0)}else this.rowModel.forEachNode(s);a.length&&this.selectionService.setNodesSelected({nodes:a,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof Aq&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},I$=["asc","desc",null],WMe=class extends U{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,r){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,r)}setSortForColumn(e,t,r,i){t!=="asc"&&t!=="desc"&&(t=null);let n=ha(this.gos),o=[e];if(n&&e.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(u=>u.isSortable());c&&(o=[e,...c])}o.forEach(l=>l.setSort(t,i));let a=(r||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),s=[];if(!a){let l=this.clearSortBarTheseColumns(o,i);s.push(...l)}this.updateSortIndex(e),s.push(...o),this.dispatchSortChangedEvents(i,s)}updateSortIndex(e){let t=ha(this.gos),r=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),i=t&&r||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(s=>s.setSortIndex(null));let o=n.filter(s=>t&&s.getColDef().showRowGroup?!1:s!==i);(i.getSort()?[...o,i]:o).forEach((s,l)=>{s.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(r=>!!r.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let r={type:"sortChanged",source:e};t&&(r.columns=t),this.eventService.dispatchEvent(r)}clearSortBarTheseColumns(e,t){let r=[];return this.columnModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&r.push(i),i.setSort(void 0,t))}),r}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=I$,!Array.isArray(t)||t.length<=0)return q(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let r=t.indexOf(e.getSort()),i=r<0,n=r==t.length-1,o;return i||n?o=t[0]:o=t[r+1],I$.indexOf(o)<0?(q("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){let o=ha(this.gos);e=e.filter(a=>{let s=!!a.getAggFunc(),l=!a.isPrimary(),c=o?this.showRowGroupColsService?.getShowRowGroupCol(a.getId()):a.getColDef().showRowGroup;return s||l||c})}let t=this.funcColsService.getRowGroupColumns().filter(o=>!!o.getSort()),r={};e.forEach((o,a)=>r[o.getId()]=a),e.sort((o,a)=>{let s=o.getSortIndex(),l=a.getSortIndex();if(s!=null&&l!=null)return s-l;if(s==null&&l==null){let c=r[o.getId()],u=r[a.getId()];return c>u?1:-1}else return l==null?-1:1});let i=ha(this.gos)&&!!t.length;i&&(e=[...new Set(e.map(o=>this.showRowGroupColsService?.getShowRowGroupCol(o.getId())??o))]);let n=new Map;return e.forEach((o,a)=>n.set(o,a)),i&&t.forEach(o=>{let a=this.showRowGroupColsService.getShowRowGroupCol(o.getId());n.set(o,n.get(a))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[r,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=ha(this.gos),r=!!e.getColDef().showRowGroup;return t&&r}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=i[0].getSort();return i.every(a=>a.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},jMe=class extends U{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});let e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&Bn(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,gu(e.source))}}},$Me="paste",YMe=class extends U{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){Ut(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==$Me&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let r=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let i=this.gos.get("aggregateOnlyChangedColumns"),n=new gS(i,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(o=>{r.push(o)})}this.rowRenderer.refreshCells({rowNodes:r})}},qMe=class extends U{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);ht("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(r){return Bn("Processing of the expression failed"),Bn("Expression = ",e),Bn("Params = ",t),Bn("Exception = ",r),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),r=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=r,r}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},KMe=class extends U{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,r){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=r)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},ZMe=class extends U{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=os(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=r=>this.callColumnCellValueChangedHandler(r),t=Yb(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",r=>this.isTreeData=r.currentValue)}getValueForDisplay(e,t){let r=t.leafGroup&&this.columnModel.isPivotMode(),i=t.group&&t.expanded&&!t.footer&&!r,n=this.gos.get("groupSuppressBlankHeader");if(!i||n)return this.getValue(e,t);let o=!1,a=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof a!="function"?o=!!a:o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});let s=i&&o;return this.getValue(e,t,!1,s)}getValue(e,t,r=!1,i=!1){if(this.initialised||this.init(),!t)return;let n=e.getColDef(),o=n.field,a=e.getColId(),s=t.data,l,c=t.groupData&&t.groupData[a]!==void 0,u=!i&&t.aggData&&t.aggData[a]!==void 0,d=this.isSsrm&&i&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(r&&n.filterValueGetter?l=this.executeFilterValueGetter(n.filterValueGetter,s,e,t):this.isTreeData&&u?l=t.aggData[a]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,s,e,t):this.isTreeData&&o&&s?l=tv(s,o,e.isFieldContainsDots()):c?l=t.groupData[a]:u?l=t.aggData[a]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,s,e,t):h?l=tv(s,t.field,e.isFieldContainsDots()):o&&s&&!d&&(l=tv(s,o,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let p=l.substring(1);l=this.executeValueGetter(p,s,e,t)}if(l==null){let p=this.getOpenedGroup(t,e);if(p!=null)return p}return l}parseValue(e,t,r,i){let n=e.getColDef(),o=n.valueParser;if(te(o)){let a=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:i,newValue:r,colDef:n,column:e});return typeof o=="function"?o(a):this.expressionService.evaluate(o,a)}return r}getDeleteValue(e,t){return te(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,r,i,n=!0){let o=null,a,s=e.getColDef();if(i?a=i:n&&(a=s.valueFormatter),a){let l=this.gos.addGridCommonParams({value:r,node:t,data:t?t.data:null,colDef:s,column:e});typeof a=="function"?o=a(l):o=this.expressionService.evaluate(a,l)}else if(s.refData)return s.refData[r]||"";return o==null&&Array.isArray(r)&&(o=r.join(", ")),o}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let i=t.getColDef().showRowGroup,n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(i===!0||i===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,r,i){let n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;tt(e.data)&&(e.data={});let{field:o,valueSetter:a}=n.getColDef();if(tt(o)&&tt(a))return q("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,r))return q("Data type of the new value does not match the cell data type of the column"),!1;let s=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:r,colDef:n.getColDef(),column:n});s.newValue=r;let l;if(te(a)?typeof a=="function"?l=a(s):l=this.expressionService.evaluate(a,s):l=this.setValueUsingField(e.data,o,r,n.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();let c=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:s.column,colDef:s.colDef,data:e.data,node:e,oldValue:s.oldValue,newValue:c,value:c,source:i}),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,r,i){if(!t)return!1;let n=!1;if(!i)n=e[t]===r,n||(e[t]=r);else{let o=t.split("."),a=e;for(;o.length>0&&a;){let s=o.shift();o.length===0?(n=a[s]===r,n||(a[s]=r)):a=a[s]}}return!n}executeFilterValueGetter(e,t,r,i){let n=this.gos.addGridCommonParams({data:t,node:i,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,r,i){let n=r.getColId(),o=this.valueCache.getValue(i,n);if(o!==void 0)return o;let a=this.gos.addGridCommonParams({data:t,node:i,column:r,colDef:r.getColDef(),getValue:this.getValueCallback.bind(this,i)}),s;return typeof e=="function"?s=e(a):s=this.expressionService.evaluate(e,a),this.valueCache.setValue(i,n,s),s}getValueCallback(e,t){let r=this.columnModel.getColDefCol(t);return r?this.getValue(r,e):null}getKeyForNode(e,t){let r=this.getValue(e,t),i=e.getColDef().keyCreator,n=r;if(i){let o=this.gos.addGridCommonParams({value:r,colDef:e.getColDef(),column:e,node:t,data:t.data});n=i(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&q("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},yP=class pu{static applyGlobalGridOptions(t){if(!pu.gridOptions)return t;let r={};return pi(r,pu.gridOptions,!0,!0),pu.mergeStrategy==="deep"?pi(r,t,!0,!0):r=ue(ue({},r),t),pu.gridOptions.context&&(r.context=pu.gridOptions.context),t.context&&(pu.mergeStrategy==="deep"&&r.context&&pi(t.context,r.context,!0,!0),r.context=t.context),r}};yP.gridOptions=void 0;yP.mergeStrategy="shallow";var XMe=yP;function Iq(e,t,r){if(!t)return ht("No gridOptions provided to createGrid"),{};let i=new JMe().create(e,t,n=>{let o=new D1e(e);n.createBean(o)},void 0,r);if(!Object.isFrozen(t)&&!r?.frameworkOverrides){let n="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{ht(`gridOptions.api is no longer supported. See ${n}.`)},configurable:!0})}return i}var QMe=1,JMe=class{create(e,t,r,i,n){let o=XMe.applyGlobalGridOptions(t),a=RMe(o),s=a.gridId??String(QMe++),l=this.getRegisteredModules(n,s),c=this.createBeansList(a.rowModelType,l,s),u=this.createProvidedBeans(e,a,n);if(!c){ht("Failed to create grid.");return}let d={providedBeanInstances:u,beanClasses:c,gridId:s,beanInitComparator:d1e,beanDestroyComparator:h1e,derivedBeans:[r1e]},h=new Zwe(d);return this.registerModuleUserComponents(h,l),this.registerControllers(h,l),this.registerModuleApiFunctions(h,l),r(h),h.getBean("syncService").start(),i&&i(h),h.getBean("gridApi")}registerControllers(e,t){let r=e.getBean("ctrlsFactory");t.forEach(i=>{i.controllers&&i.controllers.forEach(n=>r.register(n))})}getRegisteredModules(e,t){let r=e?e.modules:null,i=es.__getRegisteredModules(t),n=[],o={},a=(s,l,c)=>{(d=>{o[d.moduleName]||(o[d.moduleName]=!0,n.push(d),es.__register(d,s,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>a(s,d,c))};return a(!!r?.length||!es.__isPackageBased(),Mq,void 0),r&&r.forEach(s=>a(!0,s,t)),i&&i.forEach(s=>a(!es.__isPackageBased(),s,void 0)),n}registerModuleUserComponents(e,t){let r=this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]),i=e.getBean("userComponentRegistry");r.forEach(({name:n,classImp:o,params:a})=>{i.registerDefaultComponent(n,o,a)})}registerModuleApiFunctions(e,t){let r=e.getBean("apiFunctionService");t.forEach(i=>{let n=i.apiFunctions;n&&Object.keys(n).forEach(a=>{r?.addFunction(a,n[a])})})}createProvidedBeans(e,t,r){let i=r?r.frameworkOverrides:null;tt(i)&&(i=new vP);let n={gridOptions:t,eGridDiv:e,globalEventListener:r?r.globalEventListener:null,globalSyncEventListener:r?r.globalSyncEventListener:null,frameworkOverrides:i};return r&&r.providedBeanInstances&&Object.assign(n,r.providedBeanInstances),n}createBeansList(e="clientSide",t,r){let i=t.filter(l=>!l.rowModel||l.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){ht("Could not find row model for rowModelType = ",e);return}if(!es.__assertRegistered(n[e],`rowModelType = '${e}'`,r))return;let o=[m1e,f1e,IMe,MMe,t1e,Awe,l1e,c1e,ZSe,_Y,GMe,qSe,PMe,Gxe,eCe,A0e,C1e,AMe,Xxe,Aq,m0e,fbe,FMe,LMe,Vxe,qMe,v0e,YSe,KMe,ZMe,Nxe,KSe,Xwe,b1e,$Se,y1e,Jxe,$xe,jSe,WMe,zMe,NMe,UMe,YMe,XSe,i1e,BMe,HMe,g1e,S1e,v1e,p1e,jMe,VMe,QSe,kMe,OMe,JSe,C0e,n1e,b0e,y0e,o1e,a1e,R0e,w0e,T0e,s1e,_0e,d0e],a=this.extractModuleEntity(i,l=>l.beans?l.beans:[]);o.push(...a);let s=[];return o.forEach(l=>{s.indexOf(l)<0&&s.push(l)}),s}extractModuleEntity(e,t){return[].concat(...e.map(t))}},Pq=class extends U{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function eTe(e){e.expansionService.expandAll(!0)}function tTe(e){e.expansionService.expandAll(!1)}function rTe(e){let t=e.rowModelHelperService?.getClientSideRowModel(),r=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():r&&r.onRowHeightChanged()}function iTe(e,t,r){let i=e.rowModelHelperService?.getServerSideRowModel();if(i){if(e.funcColsService.isRowGroupEmpty()){i.setRowCount(t,r);return}ht("setRowCount cannot be used while using row grouping.");return}let n=e.rowModelHelperService?.getInfiniteRowModel();if(n){n.setRowCount(t,r);return}}function nTe(e){return e.rowNodeBlockLoader?.getBlockState()??{}}function oTe(e){return e.rowModel.isLastRowIndexKnown()}var aTe={version:Fe,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:eTe,collapseAll:tTe,onRowHeightChanged:rTe}},sTe={version:Fe,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:iTe,getCacheBlockState:nTe,isLastRowIndexKnown:oTe}},kq=class{wrap(e,t,r=[],i){let n=this.createWrapper(e,i);return t.forEach(o=>{this.createMethod(n,o,!0)}),r.forEach(o=>{this.createMethod(n,o,!1)}),n}createMethod(e,t,r){e.addMethod(t,this.createMethodProxy(e,t,r))}createMethodProxy(e,t,r){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(r&&q("Framework component is missing the method "+t+"()"),null)}}},wP=class{};wP.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};wP.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];wP.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Qh=typeof global>"u"?{}:global;Qh.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Qh.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Qh.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Qh.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Qh.Node=typeof Node>"u"?{}:Node;Qh.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var lTe="ROOT_NODE_ID",v2=0,cTe=class{constructor(e,t,r,i,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=r,this.funcColsService=i,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=lTe,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return K$(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){q("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,r=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((i,n)=>this.createNode(i,this.rootNode,v2,n)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),r&&(r.childrenAfterFilter=t.childrenAfterFilter,r.childrenAfterGroup=t.childrenAfterGroup,r.childrenAfterAggFilter=t.childrenAfterAggFilter,r.childrenAfterSort=t.childrenAfterSort,r.childrenMapped=t.childrenMapped,r.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},r=[];return this.executeRemove(e,t,r),this.executeUpdate(e,t,r),this.executeAdd(e,t),this.updateSelection(r,"rowDataChanged"),t}updateRowOrderFromRowData(e){let t=this.rootNode.allLeafChildren,r=t?.length??0,i=new Map,n=-1,o=-1;for(let a=0;a<r;++a){let s=t[a],l=s.data;l!==e[a]&&(o<0&&(n=a),o=a,i.set(l,s))}if(n<0)return!1;for(let a=n;a<=o;++a){let s=i.get(e[a]);s!==void 0&&(t[a]=s,s.sourceRowIndex=a)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){let r=e.length>0;r&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),r&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){let r=e.add;if(on(r))return;let i=this.rootNode.allLeafChildren,n=i.length;if(typeof e.addIndex=="number"&&(n=this.sanitizeAddIndex(e.addIndex),n>0&&this.gos.get("treeData"))){for(let l=0;l<i.length;l++)if(i[l]?.rowIndex==n-1){n=l+1;break}}let o=r.map((s,l)=>this.createNode(s,this.rootNode,v2,n+l));if(n<i.length){let s=i.slice(0,n),l=i.slice(n,i.length),c=s.length+o.length;for(let u=0,d=l.length;u<d;++u)l[u].sourceRowIndex=c+u;this.rootNode.allLeafChildren=[...s,...o,...l],t.rowsInserted=!0}else this.rootNode.allLeafChildren=i.concat(o);let a=this.rootNode.sibling;a&&(a.allLeafChildren=i),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){let t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},r){let{remove:i}=e;if(on(i))return;let n={};i.forEach(a=>{let s=this.lookupRowNode(a);s&&(s.isSelected()&&r.push(s),s.clearRowTopAndRowIndex(),n[s.id]=!0,delete this.allNodesMap[s.id],t.remove.push(s))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(a=>!n[a.id])??null,this.rootNode.allLeafChildren?.forEach((a,s)=>{a.sourceRowIndex=s});let o=this.rootNode.sibling;o&&(o.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},r){let{update:i}=e;on(i)||i.forEach(n=>{let o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&r.push(o),this.setMasterForRow(o,n,v2,!1),t.update.push(o))})}lookupRowNode(e){let t=Kh(this.gos),r;if(t){let i=t({data:e,level:0});if(r=this.allNodesMap[i],!r)return ht(`could not find row id=${i}, data item was not found for this id`),null}else if(r=this.rootNode.allLeafChildren?.find(i=>i.data===e),!r)return ht("could not find data item as object was not found",e),ht("Consider using getRowId to help the Grid find matching row data"),null;return r||null}createNode(e,t,r,i){let n=new is(this.beans);return n.sourceRowIndex=i,n.group=!1,this.setMasterForRow(n,e,r,!0),t&&(n.parent=t),n.level=r,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&q(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,r,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let a=this.gos.get("isRowMaster");a?e.setMaster(a(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){let a=this.funcColsService.getRowGroupColumns(),s=a?a.length:0,l=r+s;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},uTe=class extends U{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=gi(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),r=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:r,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new is(this.beans),this.nodeManager=new cTe(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),r=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),a=new Set([]),s=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...r,...i,...i,...n,...o,...a,...s];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let d=h=>u.some(p=>h.has(p));if(d(e)){this.setRowData(this.rootNode.allLeafChildren.map(h=>h.data));return}if(d(t)){this.refreshModel({step:"group"});return}if(d(r)){this.refreshModel({step:"filter"});return}if(d(i)){this.refreshModel({step:"pivot"});return}if(d(n)){this.refreshModel({step:"aggregate"});return}if(d(o)){this.refreshModel({step:"sort"});return}if(d(a)){this.refreshModel({step:"filter_aggregates"});return}d(s)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,r,i){let n,o=!1;do{n=!1;let a=this.getRowIndexAtPixel(e),s=this.getRowIndexAtPixel(t),l=Math.max(a,r),c=Math.min(s,i);for(let u=l;u<=c;u++){let d=this.getRow(u);if(d.rowHeightEstimated){let h=Ml(this.gos,d);d.setRowHeight(h.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,r=new Set,i=Lr(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){let o=this.rowsToDisplay[n];if(o.id!=null&&r.add(o.id),o.rowHeight==null){let a=Ml(this.gos,o,i,e);o.setRowHeight(a.height,a.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return r}clearRowTopAndRowIndex(e,t){let r=e.isActive(),i=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},n=o=>{if(i(o),i(o.detailNode),i(o.sibling),o.hasChildren()&&o.childrenAfterGroup){let a=o.level==-1;r&&!a&&!o.expanded||o.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,r=0){let i=this.getRowIndexAtPixel(t),n=this.getRow(i),o=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;let a=this.rootNode.allLeafChildren;return e.forEach(s=>{fi(a,s)}),e.forEach((s,l)=>{Zb(a,s,Math.max(i+r,0)+l)}),e.forEach((s,l)=>{s.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){let r=t!=null?this.getRowIndexAtPixel(t):null,i=r!=null?this.getRow(r):null;if(!i||!e||t==null){this.clearHighlightedRow();return}let n=this.getHighlightPosition(t,i),o=this.isHighlightingCurrentPosition(e,i,n),a=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==i;(o||a)&&(this.clearHighlightedRow(),o)||(i.setHighlighted(n),this.lastHighlightedRow=i)}getHighlightPosition(e,t){if(!t){let n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}let{rowTop:r,rowHeight:i}=t;return e-r<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,r){if(e===t)return!0;let i=r===0?-1:1;return this.getRow(t.rowIndex+i)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.childrenAfterAggFilter,r=this.rootNode.sibling?1:0;return(t?t.length:0)+r}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let r=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;r-=1}let i=this.rowsToDisplay[this.rowsToDisplay.length-1],n=r>=this.rootNode.childrenAfterSort.length;if(i.footer&&n)return i.rowIndex;let o=this.rootNode.childrenAfterSort[r];if(this.gos.get("groupHideOpenParents"))for(;o.expanded&&o.childrenAfterSort&&o.childrenAfterSort.length>0;)o=o.childrenAfterSort[0];return o.rowIndex}getRowBounds(e){if(tt(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=Gh(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=Gh(this.gos),i=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=Gh(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=on(e),r=new gS(!1,this.rootNode);return t&&r.setInactive(),r}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",r={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(te(e)&&(t=r[e]),tt(t)){ht(`invalid step ${e}, available steps are ${Object.keys(r).join(", ")}`);return}let i=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let r=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,r,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(r);case"pivot":this.doPivot(r);case"aggregate":this.doAggregate(r);case"filter_aggregates":this.doFilterAggregates(r);case"sort":this.doSort(t.rowNodeTransactions,r);case"map":this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(r,i),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){let e=tt(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return tt(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return te(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let r=!1,i=!1,n=[],o=xu(this.gos);return this.forEachNodeAfterFilterAndSort(a=>{if(i)return;if(r&&(a===t||a===e)&&(i=!0,a.group&&o)){n.push(...a.allLeafChildren);return}if(!r){if(a!==t&&a!==e)return;r=!0}if(!a.group||!o){n.push(a);return}}),n}setDatasource(e){ht("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,r=this.rowsToDisplay.length-1;if(e<=0)return 0;if(rt(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,o=-1;for(;;){let a=Math.floor((t+r)/2),s=this.rowsToDisplay[a];if(this.isRowInPixel(s,e)||(s.rowTop<e?t=a+1:s.rowTop>e&&(r=a-1),n===t&&o===r))return a;n=t,o=r}}isRowInPixel(e,t){let r=e.rowTop,i=e.rowTop+e.rowHeight;return r<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,r)=>e(t,r))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:r,recursionType:i,includeFooterNodes:n}=e,{index:o}=e,a=s=>{let l=t[0]?.parent;if(!l)return;let c=n&&B$(this.gos),u=G$(this.gos),d=n&&u({node:l});if(l===this.rootNode){c===s&&(l.createFooter(),r(l.sibling,o++));return}d===s&&(l.createFooter(),r(l.sibling,o++))};a("top");for(let s=0;s<t.length;s++){let l=t[s];if(r(l,o++),l.hasChildren()&&!l.footer){let c=null;switch(i){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:r,recursionType:i,index:o,includeFooterNodes:n}))}}return a("bottom"),o}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),r=this.columnModel.isPivotActive(),i=n=>{n&&n.forEach(o=>{let a=()=>{o.expanded=e,i(o.childrenAfterGroup)};if(t){te(o.childrenAfterGroup)&&a();return}if(r){!o.leafGroup&&a();return}o.group&&a()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,r,i){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:r,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:i}),xu(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{let n=this.rootNode,o=n.sibling;n.childrenAfterGroup=n.allLeafChildren,o&&(o.childrenAfterGroup=n.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(is.ID_PREFIX_ROW_GROUP)==0){let r;return this.forEachNode(i=>{i.id===e&&(r=i)}),r}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let r=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},r)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],r=!1;this.rowDataTransactionBatch?.forEach(i=>{let{rowNodeTransaction:n,rowsInserted:o}=this.nodeManager.updateRowData(i.rowDataTransaction);o&&(r=!0),t.push(n),i.callback&&e.push(i.callback.bind(null,n))}),this.commonUpdateRowData(t,r),e.length>0&&window.setTimeout(()=>{e.forEach(i=>i())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();let{rowNodeTransaction:t,rowsInserted:r}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],r),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;let r=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:r})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let r=t.detailNode;r&&r.setRowHeight(r.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function dTe(e){e.expansionService.onGroupExpandedOrCollapsed()}function hTe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function pTe(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0}function gTe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function fTe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function vTe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function mTe(e){if(e.columnModel.isAutoRowHeightActive()){q("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function yTe(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function wTe(e,t,r){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,r))}function CTe(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function bTe(e){return e.selectionService.getBestCostNodeSelection()}var STe=class extends U{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let r=(i,n)=>{i.hasChildren()&&e&&!n?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{let a=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,s=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return a||s}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let i=(o,a)=>{if(o.childrenAfterGroup)for(let s=0;s<o.childrenAfterGroup.length;s++){let l=o.childrenAfterGroup[s],c=a||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(o.childrenAfterGroup[s],c):r(l,c)}r(o,a)},n=o=>i(o,!1);t.executeFromRootNode(n)}else{let i=n=>r(n,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},xTe=class extends U{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,r=[],i=this.columnModel.isPivotMode(),n=i&&t.leafGroup,o=n?[t]:t.childrenAfterSort,a=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(a,o,r,i,0);let s=r.length>0;if(!n&&s&&a.grandTotalRow){t.createFooter();let c=a.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(a,t.sibling,r,0,c)}return r}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:H$(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:B$(this.gos),groupTotalRow:G$(this.gos)}}recursivelyAddToRowsToDisplay(e,t,r,i,n){if(!on(t))for(let o=0;o<t.length;o++){let a=t[o],s=a.hasChildren(),l=i&&!s,c=e.groupRemoveSingleChildren&&s&&a.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&s&&a.leafGroup&&a.childrenAfterGroup.length===1,d=i&&a.leafGroup,h=e.hideOpenParents&&a.expanded&&!a.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,a,r,n),!(i&&a.leafGroup)){if(s){let g=c||u;if(a.expanded||g){let f=e.groupTotalRow({node:a});f||a.destroyFooter();let v=g?n:n+1;f==="top"&&(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,r,v)),this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,r,i,v),f==="bottom"&&(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,r,v))}}else if(a.master&&a.expanded){let g=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(e,g,r,n)}}}}addRowNodeToRowsToDisplay(e,t,r,i,n){n?r.unshift(t):r.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(te(e.detailNode))return e.detailNode;let t=new is(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,te(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},DTe=class extends U{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){Ut(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let r=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:i,rowsInserted:n}=r.updateRowData(t),o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=r.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(i,o||n)}createTransactionForRowData(e){if(!Ut(this.gos))return ht("ImmutableService only works with ClientSideRowModel"),null;let t=Kh(this.gos);if(t==null)return ht("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;let r=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),i=[],n=[],o=[];return te(e)&&e.forEach(a=>{let s=t({data:a,level:0}),l=r[s];l?(l.data!==a&&n.push(a),r[s]=void 0):o.push(a)}),Vn(r,(a,s)=>{s&&i.push(s.data)}),{remove:i,update:n,add:o}}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},ETe=class extends U{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,r,i,n,o){let a=this.gos.get("groupMaintainOrder"),s=this.columnModel.getCols().some(h=>h.isRowGroupActive()),l={};r&&i&&(l=this.calculateDirtyNodes(i));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=h=>{this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let p=c&&h.leafGroup;if(a&&s&&!h.leafGroup&&!o){let v=this.funcColsService.getRowGroupColumns()?.[h.level+1]?.getSort()===null,m=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!v){let y={};h.childrenAfterSort.forEach((w,C)=>{y[w.id]=C}),m.sort((w,C)=>(y[w.id]??0)-(y[C.id]??0))}h.childrenAfterSort=m}else!t||p?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):r?h.childrenAfterSort=this.doDeltaSort(h,l,n,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){let f={nodes:h.childrenAfterSort};u(f)}};n&&n.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){let t={},r=i=>{i&&i.forEach(n=>t[n.id]=!0)};return e&&e.forEach(i=>{r(i.add),r(i.update),r(i.remove)}),t}doDeltaSort(e,t,r,i){let n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,i);let a={},s=[];n.forEach(d=>{t[d.id]||!r.canSkip(d)?s.push(d):a[d.id]=!0});let l=o.filter(d=>a[d.id]),c=(d,h)=>({currentPos:h,rowNode:d}),u=s.map(c).sort((d,h)=>this.rowNodeSorter.compareRowNodes(i,d,h));return this.mergeSortedArrays(i,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(e,t,r){let i=[],n=0,o=0;for(;n<t.length&&o<r.length;)this.rowNodeSorter.compareRowNodes(e,t[n],r[o])<0?i.push(t[n++]):i.push(r[o++]);for(;n<t.length;)i.push(t[n++]);for(;o<r.length;)i.push(r[o++]);return i}updateChildIndexes(e){if(tt(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let r=0;r<t.length;r++){let i=t[r],n=r===0,o=r===e.childrenAfterSort.length-1;i.setFirstChild(n),i.setLastChild(o),i.setChildIndex(r)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return q("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=r=>{this.pullDownGroupDataForHideOpenParents(r.childrenAfterSort,!1),r.childrenAfterSort.forEach(i=>{i.hasChildren()&&t(i)})};e&&e.executeFromRootNode(r=>t(r))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||tt(e)||e.forEach(r=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(n=>{let o=n.getColDef().showRowGroup;if(typeof o!="string"){ht("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let a=o,s=this.columnModel.getColDefCol(a);if(s!==r.rowGroupColumn)if(t)r.setGroupValue(n.getId(),void 0);else{let c=this.getFirstChildOfFirstChild(r,s);c&&r.setGroupValue(n.getId(),c.key)}})})}getFirstChildOfFirstChild(e,t){let r=e;for(;r;){let i=r.parent;if(i&&r.firstChild){if(i.rowGroupColumn===t)return i}else return null;r=i}return null}},MTe=class extends U{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),r=te(t)&&t.length>0,i=r&&te(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some(o=>ha(this.gos)?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,r,i,e.rowNodeTransactions,e.changedPath,n)}},CP="32.3.0",Lq={version:CP,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[uTe,STe,MTe,xTe,ETe,DTe]},TTe={version:CP,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[Pq],apiFunctions:{onGroupExpandedOrCollapsed:dTe,refreshClientSideRowModel:hTe,isRowDataEmpty:pTe,forEachLeafNode:gTe,forEachNodeAfterFilter:fTe,forEachNodeAfterFilterAndSort:vTe,resetRowHeights:mTe,applyTransaction:yTe,applyTransactionAsync:wTe,flushAsyncTransactions:CTe,getBestCostNodeSelection:bTe},dependantModules:[Lq,aTe]},_Te={version:CP,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[Lq,TTe]},RTe=class extends U{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},ATe=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:r,columnNameService:i,valueService:n,gos:o,processCellCallback:a,processHeaderCallback:s,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=r,this.columnNameService=i,this.valueService=n,this.gos=o,this.processCellCallback=a,this.processHeaderCallback=s,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,r,i,n){let a=(!this.gos.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:r,rowNode:n,column:e,value:a,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,r){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){let a=e.groupData?.[t.getId()],s=this.gos.get("suppressGroupMaintainValueType");if(s&&a!=null||!s&&a!==void 0||os(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){let l=t.getColDef();return l==null||l.showRowGroup===!0||l.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let o=sS(this.gos,this.columnModel.isPivotMode());return r===0&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let r=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),n=l=>{if(r||i)return l.key;let c=l.groupData?.[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},o=t.footer,a=[n(t)];if(!H$(this.gos))for(;t.parent;)t=t.parent,a.push(n(t));let s=a.reverse().join(" -> ");return o?`Total ${s}`:s}processCell(e){let{accumulatedRowIndex:t,rowNode:r,column:i,value:n,processCellCallback:o,type:a}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:i,node:r,value:n,type:a,parseValue:s=>this.valueService.parseValue(i,r,s,this.valueService.getValue(i,r)),formatValue:s=>this.valueService.formatValue(i,r,s)??s}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(i,r,n)}:{value:n??""}}},ITe=class{static download(e,t){let r=document.defaultView||window;if(!r){q("There is no `window` associated with the current `document`");return}let i=document.createElement("a"),n=r.URL.createObjectURL(t);i.setAttribute("href",n),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:r})),document.body.removeChild(i),r.setTimeout(()=>{r.URL.revokeObjectURL(n)},0)}},P$=`\r
`,PTe=class extends ATe{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:r}=e;this.suppressQuotes=t,this.columnSeparator=r}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,P$),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((r,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(r.data.value||""),r.mergeAcross&&this.appendEmptyCells(r.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,r,i){r!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,r){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",r);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(q("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=P$),this.isFirstLine=!1}},kTe=class extends RTe{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){q("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),r=this.getData(t),i=new Blob(["\uFEFF",r],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;ITe.download(this.getFileName(n),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let r=t?Object.assign({},e):this.getMergedParams(e);return this.getData(r)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:r,funcColsService:i,valueService:n,gos:o}=this,{processCellCallback:a,processHeaderCallback:s,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new PTe({columnModel:t,columnNameService:r,funcColsService:i,valueService:n,gos:o,processCellCallback:a||void 0,processHeaderCallback:s||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function LTe(e,t){return e.csvCreator?.getDataAsCsv(t)}function FTe(e,t){e.csvCreator?.exportDataAsCsv(t)}var OTe=class extends U{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:r,columnKeys:i,skipRowGroups:n}=t,o=this.getColumnsToExport(r,n,i);return jye(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t))(e).parse()}processRow(e,t,r,i){let n=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),a=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?i.leafGroup:!i.group,d=!!i.footer,h=a&&i.leafGroup,p=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(o||h);if(!u&&!d&&(t.skipRowGroups||p||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!u&&!d||n(this.gos.addGridCommonParams({node:i})))return;let v=e.onNewBodyRow(i);if(r.forEach((m,y)=>{v.onColumn(m,y,i)}),t.getCustomContentBelowRow){let m=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));m&&e.addCustomContent(m)}}appendContent(e){return t=>{let r=e.appendContent;return r&&t.addCustomContent(r),t}}prependContent(e){return t=>{let r=e.prependContent;return r&&t.addCustomContent(r),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return r=>{if(!e.skipColumnGroupHeaders){let i=new J$,n=this.visibleColsService.createGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,r,e.processGroupHeaderCallback)}return r}}exportHeaders(e,t){return r=>{if(!e.skipColumnHeaders){let i=r.onNewHeaderRow();t.forEach((n,o)=>{i.onColumn(n,o,void 0)})}return r}}processPinnedTopRows(e,t){return r=>{let i=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedRow("top",i),r}}processRows(e,t){return r=>{let i=this.rowModel,n=Ut(this.gos),o=os(this.gos),a=!n&&e.onlySelected,s=this.processRow.bind(this,r,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>i.getRow(c.rowIndex)).forEach(s);else if(this.columnModel.isPivotMode())n?i.forEachPivotNode(s,!0):o?i.forEachNodeAfterFilterAndSort(s,!0):i.forEachNode(s);else if(e.onlySelectedAllPages||a){let c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(s)}else l==="all"?i.forEachNode(s):n||o?i.forEachNodeAfterFilterAndSort(s,!0):i.forEachNode(s);return r}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),r=(i,n)=>i.rowIndex!=null&&n.rowIndex!=null?i.rowIndex-n.rowIndex:i.level===n.level?i.parent?.id===n.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:n,currentPos:n.rowIndex??-1}):r(i.parent,n.parent):i.level>n.level?r(i.parent,n):r(i,n.parent);e.sort(r)}processPinnedBottomRows(e,t){return r=>{let i=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedRow("bottom",i),r}}getColumnsToExport(e=!1,t=!1,r){let i=this.columnModel.isPivotMode();if(r&&r.length)return this.columnModel.getColsForKeys(r);let n=this.gos.get("treeData"),o=[];return e&&!i?o=this.columnModel.getCols():o=this.visibleColsService.getAllCols(),t&&!n&&(o=o.filter(a=>x2(a)||gv(a))),o}recursivelyAddHeaderGroups(e,t,r){let i=[];e.forEach(n=>{let o=n;o.getChildren&&o.getChildren().forEach(a=>i.push(a))}),e.length>0&&ar(e[0])&&this.doAddHeaderHeader(t,e,r),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,r)}doAddHeaderHeader(e,t,r){let i=e.onNewHeaderGroupingRow(),n=0;t.forEach(o=>{let a=o,s;r?s=r(this.gos.addGridCommonParams({columnGroup:a})):s=this.columnNameService.getDisplayNameForColumnGroup(a,"header");let l=a.getLeafColumns().reduce((c,u,d,h)=>{let p=rt(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],c.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),c},[]);i.onColumn(a,s||"",n++,a.getLeafColumns().length-1,l)})}},bP="32.3.0",Fq={version:bP,moduleName:"@ag-grid-community/csv-export-core",beans:[kTe,OTe]},NTe={version:bP,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:LTe,exportDataAsCsv:FTe},dependantModules:[Fq]},zTe={version:bP,moduleName:"@ag-grid-community/csv-export",dependantModules:[Fq,NTe]};var VTe=e=>Mo(void 0,null,function*(){let t=0,r=[],i=new WritableStream({write:a=>{r.push(a),t+=a.length}}),n=new ReadableStream({start:a=>{let s=new FileReader;s.onload=l=>{l.target?.result&&a.enqueue(l.target.result),a.close()},s.readAsArrayBuffer(e)}}),o=new window.CompressionStream("deflate-raw");return yield n.pipeThrough(o).pipeTo(i),{size:t,content:new Blob(r)}}),BTe=e=>Mo(void 0,null,function*(){let t=new Blob([e]),{size:r,content:i}=yield VTe(t),n=new Uint8Array(yield i.arrayBuffer());return{size:r,content:n}}),GTe=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},HTe=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function Yr(e,t){let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e&255),e>>>=8;return r}var k$=e=>{if(!e.length)return 0;let t=-1,r=0,i=0,n=0;for(let o=0;o<e.length;o++)r=e[o],i=(t^r)&255,n=UTe[i],t=t>>>8^n;return t^-1},L$=e=>e.length?k$(typeof e=="string"?new TextEncoder().encode(e):e):0,UTe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Oq=(e,t,r,i,n,o)=>{let{content:a,path:s,created:l}=e,c=GTe(l),u=HTe(l),d=L$(n),h=o!==void 0?o:i,p=D0e(s),g=p!==s,f="";if(g){let w=Yr(1,1)+Yr(L$(p),4)+p;f="up"+Yr(w.length,2)+w}let v="\0"+(g?"\0\b":"\0\0")+Yr(t?8:0,2)+Yr(c,2)+Yr(u,2)+Yr(h?d:0,4)+Yr(o??i,4)+Yr(i,4)+Yr(p.length,2)+Yr(f.length,2),m="PK"+v+p+f,y="PK\0"+v+"\0\0\0\0\0\0"+(a?"\0\0\0\0":"\0\0\0")+Yr(r,4)+p+f;return{localFileHeader:Uint8Array.from(m,w=>w.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(y,w=>w.charCodeAt(0))}},Nq=e=>{let t;if(typeof e=="string"){let r=atob(e.split(";base64,")[1]);t=Uint8Array.from(r,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},WTe=(e,t)=>Mo(void 0,null,function*(){let{content:r}=e,{size:i,content:n}=r?Nq(r):{size:0,content:Uint8Array.from([])},o,a,s=!1;if(e.type==="file"&&n&&i>0){let u=yield BTe(n);o=u.content,a=u.size,s=!0}let c=Oq(e,s,t,i,n,a);return Xe(ue({},c),{content:o||n,isCompressed:s})}),jTe=(e,t)=>{let{content:r}=e,{content:i}=r?Nq(r):{content:Uint8Array.from([])},n=Oq(e,!1,t,i.length,i,void 0);return Xe(ue({},n),{content:i,isCompressed:!1})},$Te=(e,t,r)=>{let i="PK\0\0\0\0"+Yr(e,2)+Yr(e,2)+Yr(t,4)+Yr(r,4)+"\0\0";return Uint8Array.from(i,n=>n.charCodeAt(0))},zq=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,r=!1){this.files.push({path:e,created:new Date,content:r?t:new TextEncoder().encode(t),isBase64:r,type:"file"})}static getZipFile(e="application/zip"){return Mo(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,r=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;t+=u.length+h.length,r+=d.length}let i=new Uint8Array(t),n=new Uint8Array(r),o=0,a=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;i.set(u,o),o+=u.length,i.set(h,o),o+=h.length,n.set(d,a),a+=d.length}let s=$Te(e.length,r,t),l=new Uint8Array(i.length+n.length+s.length);return l.set(i),l.set(n,i.length),l.set(s,i.length+n.length),l}static buildCompressedFileStream(){return Mo(this,null,function*(){let e=[...this.folders,...this.files],t=[],r=0;for(let i of e){let n=yield WTe(i,r),{localFileHeader:o,content:a}=n;t.push(n),r+=o.length+a.length}return this.packageFiles(t)})}static buildFileStream(){let e=[...this.folders,...this.files],t=[],r=0;for(let i of e){let n=jTe(i,r),{localFileHeader:o,content:a}=n;t.push(n),r+=o.length+a.length}return this.packageFiles(t)}};zq.folders=[];zq.files=[];var YTe=class extends Hxe{wireBeans(e){this.beans=e}constructor(e,t,r){super(e),this.parentCache=t,this.params=r,this.startRow=e*r.blockSize,this.endRow=this.startRow+r.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,r){te(t)?e.setDataAndId(t,r.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(tt(this.params.datasource.getRows)){q("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,r){this.rowNodes.forEach((i,n)=>{this.startRow+n<r&&e(i,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let r=e-this.startRow;return this.rowNodes[r]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,r=new is(this.beans);r.setRowHeight(this.params.rowHeight),r.uiLevel=0,r.setRowIndex(t),r.setRowTop(this.params.rowHeight*t),this.rowNodes.push(r)}}processServerResult(e){this.rowNodes.forEach((r,i)=>{let n=e.rowData?e.rowData[i]:void 0;!r.id&&r.alreadyRendered&&n&&(this.rowNodes[i]=new is(this.beans),this.rowNodes[i].setRowIndex(r.rowIndex),this.rowNodes[i].setRowTop(r.rowTop),this.rowNodes[i].setRowHeight(r.rowHeight),r.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],n,this.startRow+i)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},qTe=2,KTe=class extends U{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let r=Math.floor(e/this.params.blockSize),i=this.blocks[r];if(!i){if(t)return;i=this.createBlock(r)}return i.getRow(e)}createBlock(e){let t=this.createBean(new YTe(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&Bn(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(a=>a!=e),r=(a,s)=>s.getLastAccessed()-a.getLastAccessed();t.sort(r);let i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null,o=qTe-1;t.forEach((a,s)=>{let l=a.getState()==="needsLoading"&&s>=o,c=i?s>=n:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let r=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=r&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),r=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,r)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,t){this.rowCount=e,te(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new Yh;this.getBlocksInOrder().forEach(r=>r.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(r,i)=>r.getId()-i.getId();return Tl(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let r=[],i=-1,n=!1,o=new Yh,a=!1;return this.getBlocksInOrder().forEach(l=>{if(!a){if(n&&i+1!==l.getId()){a=!0;return}i=l.getId(),l.forEachNode(c=>{let u=c===e||c===t;(n||u)&&r.push(c),u&&(n=!n)},o,this.rowCount)}}),a||n?[]:r}},ZTe=class extends U{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=yu(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&q("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=yu(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!av(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;Kh(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:yu(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Yh},this.infiniteCache=this.createBean(new KTe(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(r=>{r.id===e&&(t=r)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),r=this.getRowCount()-1;return t>r?r:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function XTe(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function QTe(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function JTe(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}var SP="32.3.0",Vq={version:SP,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[ZTe],dependantModules:[Wxe]},e_e={version:SP,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[Pq],apiFunctions:{refreshInfiniteCache:XTe,purgeInfiniteCache:QTe,getInfiniteRowCount:JTe},dependantModules:[Vq,sTe]},t_e={version:SP,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[Vq,e_e]};var r_e=e=>{let t=new Map;return r=>{let i=r;return t.has(i)||t.set(i,e(r)),t.get(i)}},omt=r_e(e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if(e==="spacing"||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)});var amt=typeof window!="object"||!window||typeof document!="object"||window.document!==document;es.__registerModules([Mq,_Te,t_e,zTe],!1,void 0);var Bq=(()=>{class e extends kq{setViewContainerRef(r,i){this.viewContainerRef=r,this.angularFrameworkOverrides=i}createWrapper(r){let i=this.angularFrameworkOverrides,n=this;class o extends xP{init(l){i.runInsideAngular(()=>{super.init(l),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return i.runInsideAngular(()=>n.createComponent(r))}hasMethod(l){return a.getFrameworkComponentInstance()[l]!=null}callMethod(l,c){let u=this.getFrameworkComponentInstance();return i.runInsideAngular(()=>a.getFrameworkComponentInstance()[l].apply(u,c))}addMethod(l,c){a[l]=c}}let a=new o;return a}createComponent(r){return this.viewContainerRef.createComponent(r)}static{this.\u0275fac=(()=>{let r;return function(n){return(r||(r=Wk(e)))(n||e)}})()}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),xP=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,Gn(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},Gq=(()=>{class e extends vP{constructor(r){super("angular"),this._ngZone=r,this.isRunningWithinTestZone=!1,this.wrapIncoming=(i,n)=>this.runOutside(i,n),this.wrapOutgoing=i=>this.runInsideAngular(i),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(i,n)=>n==="resize-observer"||n==="popupPositioning"?this._ngZone.runOutsideAngular(i):i():this.runOutside=i=>this._ngZone.runOutsideAngular(i):this.runOutside=i=>i()}get shouldWrapOutgoing(){return this._ngZone&&rr.isInAngularZone()}isFrameworkComponent(r){if(!r)return!1;let i=r.prototype;return i&&"agInit"in i}runInsideAngular(r){return this._ngZone?this._ngZone.run(r):r()}runOutsideAngular(r,i){return this.runOutside(r,i)}static{this.\u0275fac=function(i){return new(i||e)(Qe(rr))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac})}}return e})(),Hq=(()=>{class e{constructor(r,i,n,o){this.viewContainerRef=i,this.angularFrameworkOverrides=n,this.frameworkComponentWrapper=o,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new ie,this.toolPanelSizeChanged=new ie,this.columnMenuVisibleChanged=new ie,this.contextMenuVisibleChanged=new ie,this.cutStart=new ie,this.cutEnd=new ie,this.pasteStart=new ie,this.pasteEnd=new ie,this.columnVisible=new ie,this.columnPinned=new ie,this.columnResized=new ie,this.columnMoved=new ie,this.columnValueChanged=new ie,this.columnPivotModeChanged=new ie,this.columnPivotChanged=new ie,this.columnGroupOpened=new ie,this.newColumnsLoaded=new ie,this.gridColumnsChanged=new ie,this.displayedColumnsChanged=new ie,this.virtualColumnsChanged=new ie,this.columnEverythingChanged=new ie,this.columnHeaderMouseOver=new ie,this.columnHeaderMouseLeave=new ie,this.columnHeaderClicked=new ie,this.columnHeaderContextMenu=new ie,this.componentStateChanged=new ie,this.cellValueChanged=new ie,this.cellEditRequest=new ie,this.rowValueChanged=new ie,this.cellEditingStarted=new ie,this.cellEditingStopped=new ie,this.rowEditingStarted=new ie,this.rowEditingStopped=new ie,this.undoStarted=new ie,this.undoEnded=new ie,this.redoStarted=new ie,this.redoEnded=new ie,this.cellSelectionDeleteStart=new ie,this.cellSelectionDeleteEnd=new ie,this.rangeDeleteStart=new ie,this.rangeDeleteEnd=new ie,this.fillStart=new ie,this.fillEnd=new ie,this.filterOpened=new ie,this.filterChanged=new ie,this.filterModified=new ie,this.advancedFilterBuilderVisibleChanged=new ie,this.chartCreated=new ie,this.chartRangeSelectionChanged=new ie,this.chartOptionsChanged=new ie,this.chartDestroyed=new ie,this.cellKeyDown=new ie,this.gridReady=new ie,this.firstDataRendered=new ie,this.gridSizeChanged=new ie,this.modelUpdated=new ie,this.virtualRowRemoved=new ie,this.viewportChanged=new ie,this.bodyScroll=new ie,this.bodyScrollEnd=new ie,this.dragStarted=new ie,this.dragStopped=new ie,this.dragCancelled=new ie,this.stateUpdated=new ie,this.paginationChanged=new ie,this.rowDragEnter=new ie,this.rowDragMove=new ie,this.rowDragLeave=new ie,this.rowDragEnd=new ie,this.rowDragCancel=new ie,this.columnRowGroupChanged=new ie,this.rowGroupOpened=new ie,this.expandOrCollapseAll=new ie,this.pivotMaxColumnsExceeded=new ie,this.pinnedRowDataChanged=new ie,this.rowDataUpdated=new ie,this.asyncTransactionsFlushed=new ie,this.storeRefreshed=new ie,this.headerFocused=new ie,this.cellClicked=new ie,this.cellDoubleClicked=new ie,this.cellFocused=new ie,this.cellMouseOver=new ie,this.cellMouseOut=new ie,this.cellMouseDown=new ie,this.rowClicked=new ie,this.rowDoubleClicked=new ie,this.rowSelected=new ie,this.selectionChanged=new ie,this.cellContextMenu=new ie,this.rangeSelectionChanged=new ie,this.cellSelectionChanged=new ie,this.tooltipShow=new ie,this.tooltipHide=new ie,this.sortChanged=new ie,this._nativeElement=r.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let r=tY(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let i=Iq(this._nativeElement,r,this.gridParams);i&&(this.api=i),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(r){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let i={};Object.entries(r).forEach(([n,o])=>{i[n]=o.currentValue}),rY(i,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(r){let n=this[r],o=n?.observed??n?.observers?.length>0,a=`on${r.charAt(0).toUpperCase()}${r.substring(1)}`,s=!!this.gridOptions&&!!this.gridOptions[a];return o||s}globalEventListener(r,i){if(this._destroyed)return;let n=this[r];if(n&&this.isEmitterUsed(r)){let o=()=>this.angularFrameworkOverrides.runInsideAngular(()=>n.emit(i));this._holdEvents?this._fullyReady.then(()=>o()):o()}}static{this.\u0275fac=function(i){return new(i||e)(Kt(Ku),Kt(Zu),Kt(Gq),Kt(Bq))}}static{this.\u0275cmp=gs({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",enableStrictPivotColumnOrder:"enableStrictPivotColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressMoveWhenColumnDragging:"suppressMoveWhenColumnDragging",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",suppressSetFilterByDefault:"suppressSetFilterByDefault",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",selectionColumnDef:"selectionColumnDef",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",theme:"theme",loadThemeGoogleFonts:"loadThemeGoogleFonts",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[VL([Gq,Bq]),Mm,ys],decls:0,vars:0,template:function(i,n){},encapsulation:2})}}return e})();var fS=(()=>{class e{constructor(r){this.http=r,this.BASE_URL="https://api.coingecko.com/api/v3"}getCryptoPrices(r){return ku(0,3e4).pipe(rp(()=>(console.log(`Fetching prices at ${new Date().toLocaleTimeString()}`),this.http.get(`${this.BASE_URL}/simple/price?ids=${r.join(",")}&vs_currencies=usd`).pipe(LS({count:5,delay:(i,n)=>{if(i.status===429){let o=Math.pow(2,n)*1e3;return ku(o)}return Wv(()=>i)},resetOnSuccess:!1}),$v(i=>(console.error("Error fetching prices:",i),Wv(()=>i)))))))}getCryptoPriceOnce(r){return Mo(this,null,function*(){try{return yield AS(this.http.get(`${this.BASE_URL}/simple/price?ids=${r}&vs_currencies=usd`))}catch(i){throw console.error("Error fetching price:",i),i}})}getHistoricalData(r,i=30){let n=`${this.BASE_URL}/coins/${r}/market_chart`,o={vs_currency:"usd",days:i.toString()};return this.http.get(n,{params:o})}static{this.\u0275fac=function(i){return new(i||e)(Qe(P1))}}static{this.\u0275prov=Ct({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function i_e(e,t){if(e&1&&Da(0,"ag-grid-angular",5),e&2){let r=ms();Fo("rowData",r.historicalData)("columnDefs",r.columnDefs)}}var Wq=(()=>{class e{constructor(r){this.cryptoService=r,this.coin="bitcoin",this.historicalData=[],this.columnDefs=[{field:"date",headerName:"Date",sortable:!0,filter:!0,flex:1},{field:"price",headerName:"Price (USD)",sortable:!0,filter:!0,flex:2}]}ngOnInit(){this.fetchHistoricalData()}fetchHistoricalData(){this.cryptoService.getHistoricalData(this.coin).subscribe(r=>{this.historicalData=r.prices.map(i=>({date:new Date(i[0]).toLocaleDateString(),price:i[1]})),this.renderChart()})}renderChart(){let r=document.getElementById(`chart-${this.coin}`),i=kM(r),n={tooltip:{trigger:"axis"},xAxis:{type:"category",data:this.historicalData.map(o=>o.date)},yAxis:{type:"value"},series:[{data:this.historicalData.map(o=>o.price),type:"line",smooth:!0}]};i.setOption(n)}ngAfterViewInit(){this.chartInstance=kM(document.getElementById(`chart-${this.coin}`)),this.setupChart(),window.addEventListener("resize",this.onWindowResize.bind(this))}setupChart(){let r={};this.chartInstance.setOption(r)}onWindowResize(){this.chartInstance&&this.chartInstance.resize()}ngOnDestroy(){window.removeEventListener("resize",this.onWindowResize.bind(this))}static{this.\u0275fac=function(i){return new(i||e)(Kt(fS))}}static{this.\u0275cmp=gs({type:e,selectors:[["app-crypto-historical"]],inputs:{coin:"coin"},standalone:!0,features:[ys],decls:8,vars:6,consts:[[2,"display","flex","justify-content","space-between","width","100%"],[2,"flex","0.6","margin-right","20px"],["style","width: 100%; height: 400px;","class","ag-theme-alpine",3,"rowData","columnDefs",4,"ngIf"],[2,"flex","1.4"],[2,"width","100%","height","400px",3,"id"],[1,"ag-theme-alpine",2,"width","100%","height","400px",3,"rowData","columnDefs"]],template:function(i,n){i&1&&(un(0,"h3"),Ju(1),wp(2,"titlecase"),dn(),un(3,"div",0)(4,"div",1),Xu(5,i_e,1,2,"ag-grid-angular",2),dn(),un(6,"div",3),Da(7,"div",4),dn()()),i&2&&(cn(),ed("",Fm(2,4,n.coin)," Historical Data (Last 30 Days)"),cn(4),Fo("ngIf",n.historicalData.length>0),cn(2),yp("id","chart-",n.coin,""))},dependencies:[Hq,jl,Gm,Hm]})}}return e})();var n_e=(e,t,r)=>({"positive-change":e,"negative-change":t,"zero-change":r});function o_e(e,t){if(e&1&&(un(0,"span",9),Ju(1),wp(2,"number"),dn()),e&2){let r=ms().$implicit,i=ms();cn(),ed(" $",GL(2,1,i.prices[r].usd,"1.2-2")," ")}}function a_e(e,t){if(e&1&&(un(0,"span",10),Ju(1),dn()),e&2){let r=ms().$implicit,i=ms();Fo("ngClass",BL(3,n_e,i.prices[r].change>0,i.prices[r].change<0,i.prices[r].change===0)),cn(),m1(" (",i.prices[r].change>=0?"+":"","",i.prices[r].change," %) ")}}function s_e(e,t){if(e&1&&(un(0,"div",4),Da(1,"img",5),un(2,"span",6),Ju(3),wp(4,"titlecase"),dn(),Xu(5,o_e,3,4,"span",7)(6,a_e,2,7,"span",8),dn()),e&2){let r=t.$implicit,i=ms();cn(),yp("alt","",r," icon"),Fo("src",i.getIconUrl(r),iL),cn(2),ed("",Fm(4,6,r),":"),cn(2),Fo("ngIf",i.prices&&i.prices[r]&&(i.prices[r]==null?null:i.prices[r].usd)!==void 0),cn(),Fo("ngIf",i.prices&&i.prices[r]&&(i.prices[r]==null?null:i.prices[r].change)!==void 0)}}var jq=(()=>{class e{constructor(r){this.cryptoService=r,this.coins=["bitcoin","ethereum","litecoin","dogecoin","ripple","solana"],this.selectedCoin="bitcoin",this.prices={},this.previousPrices={}}ngOnInit(){this.cryptoService.getCryptoPrices(this.coins).subscribe({next:r=>{this.updatePrices(r)},error:r=>{console.error("Error fetching prices:",r)}})}getIconUrl(r){return`assets/crypto-icons/${r}.svg`}updatePrices(r){this.coins.forEach(i=>{let n=r[i].usd;if(this.previousPrices[i]!==void 0){let o=this.previousPrices[i],a=(n-o)/o*100;this.prices[i]={usd:n,change:parseFloat(a.toFixed(2))}}else this.prices[i]={usd:n};this.previousPrices[i]=n})}static{this.\u0275fac=function(i){return new(i||e)(Kt(fS))}}static{this.\u0275cmp=gs({type:e,selectors:[["app-crypto-dashboard"]],standalone:!0,features:[ys],decls:5,vars:1,consts:[[1,"ticker-container"],[1,"ticker-wrap"],[1,"ticker-move"],["class","ticker-item",4,"ngFor","ngForOf"],[1,"ticker-item"],[1,"coin-icon",3,"src","alt"],[1,"coin-name"],["class","coin-price",4,"ngIf"],["class","coin-change",3,"ngClass",4,"ngIf"],[1,"coin-price"],[1,"coin-change",3,"ngClass"]],template:function(i,n){i&1&&(un(0,"div",0)(1,"div",1)(2,"div",2),Xu(3,s_e,7,8,"div",3),dn()()(),Da(4,"app-crypto-historical")),i&2&&(cn(3),Fo("ngForOf",n.coins))},dependencies:[Gm,iF,jl,rF,oF,Hm,Wq],styles:[".ticker-container[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;background-color:#222;padding:10px 0}.ticker-wrap[_ngcontent-%COMP%]{display:flex;animation:_ngcontent-%COMP%_tickerMove 30s linear infinite}.ticker-move[_ngcontent-%COMP%]{display:flex}.ticker-item[_ngcontent-%COMP%]{display:inline-block;padding:0 2rem;color:#fff;font-size:1.2em;font-family:Arial,sans-serif;display:flex;align-items:center}.ticker-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:10px}.coin-name[_ngcontent-%COMP%]{margin-right:8px;font-weight:700}.coin-price[_ngcontent-%COMP%]{color:#0f0;margin-right:10px}.coin-change[_ngcontent-%COMP%]{font-weight:400;margin-left:8px}.positive-change[_ngcontent-%COMP%]{color:#0f0}.negative-change[_ngcontent-%COMP%]{color:red}.zero-change[_ngcontent-%COMP%]{color:#ccc}@keyframes _ngcontent-%COMP%_tickerMove{0%{transform:translate(100%)}to{transform:translate(-100%)}}"]})}}return e})();var $q=(()=>{class e{constructor(){this.title="crypto-dashboard"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=gs({type:e,selectors:[["app-root"]],standalone:!0,features:[ys],decls:1,vars:0,template:function(i,n){i&1&&Da(0,"app-crypto-dashboard")},dependencies:[jl,jq]})}}return e})();xF($q,{providers:[fF()]}).catch(e=>console.error(e));
